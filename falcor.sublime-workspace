{
	"auto_complete":
	{
		"selected_items":
		[
			[
				"e",
				"env_p"
			],
			[
				"de",
				"developmentDirectories"
			],
			[
				"LLO",
				"LLOG_ERR"
			],
			[
				"mF",
				"mFailed"
			],
			[
				"Bu",
				"Buffer"
			],
			[
				"U",
				"UINT32_MAX"
			],
			[
				"UIN",
				"UINT32_MAX"
			],
			[
				"mp",
				"mpComputeRasterizerPass"
			],
			[
				"Ras",
				"Rasterizer"
			],
			[
				"S",
				"SharedPtr"
			],
			[
				"pTe",
				"pTexture"
			],
			[
				"s",
				"size_t"
			],
			[
				"tex",
				"texture"
			],
			[
				"f",
				"false"
			],
			[
				"ba",
				"back"
			],
			[
				"t",
				"textureHandle"
			],
			[
				"mate",
				"materialResolveData"
			],
			[
				"mpV",
				"mpVirtualPagesDataBuffer"
			],
			[
				"ui",
				"uint8_t"
			],
			[
				"virt",
				"virtualTexturesData"
			],
			[
				"res",
				"resize"
			],
			[
				"virtu",
				"virtualPagesData"
			],
			[
				"se",
				"setBuffer"
			],
			[
				"mip",
				"mipBases"
			],
			[
				"i",
				"isSparse"
			],
			[
				"pT",
				"pTex"
			],
			[
				"con",
				"continue"
			],
			[
				"uin",
				"uint8_t"
			],
			[
				"k",
				"kLtxPageSize"
			],
			[
				"set",
				"setBuffer"
			],
			[
				"mIs",
				"mIsSparse"
			],
			[
				"a",
				"any_cast"
			],
			[
				"kEx",
				"kExtendedHandlesDataName"
			],
			[
				"is",
				"isSparse"
			],
			[
				"st",
				"std"
			],
			[
				"isS",
				"isSparse"
			],
			[
				"to",
				"totalPagesToUpdateCountAligned"
			],
			[
				"h",
				"header"
			],
			[
				"LLOG",
				"LLOG_WRN"
			],
			[
				"cu",
				"currentPageOffset"
			],
			[
				"L",
				"LTX_Bitmap"
			],
			[
				"siz",
				"size_t"
			],
			[
				"FI",
				"FILE"
			],
			[
				"p",
				"pLtxBitmap"
			],
			[
				"kP",
				"kOnePageTailData"
			],
			[
				"F",
				"Flags"
			],
			[
				"getM",
				"getMipTailStart"
			],
			[
				"Te",
				"Texture"
			],
			[
				"co",
				"continue"
			],
			[
				"z",
				"size"
			],
			[
				"tail",
				"tail_data"
			],
			[
				"pSc",
				"pScratchBufferData"
			],
			[
				"re",
				"reserve"
			],
			[
				"m",
				"mipTailStart"
			],
			[
				"u",
				"uint8_t"
			],
			[
				"Con",
				"Constant"
			],
			[
				"d",
				"data"
			],
			[
				"mem",
				"memset"
			],
			[
				"ta",
				"tangents"
			],
			[
				"non-",
				"non-indexed"
			],
			[
				"mM",
				"mMesh"
			],
			[
				"inde",
				"indexCount"
			],
			[
				"ver",
				"vertices"
			],
			[
				"mMes",
				"mMeshletGroups"
			],
			[
				"mesh",
				"meshletsMemoryInBytes"
			],
			[
				"meshl",
				"meshLightCount"
			],
			[
				"LL",
				"LLOG_INF"
			],
			[
				"meshle",
				"meshletSpec"
			],
			[
				"meshlet",
				"meshletSpecs"
			],
			[
				"c",
				"constexpr"
			],
			[
				"prim",
				"primitiveIndices"
			],
			[
				"Mesh",
				"MeshletDraw"
			],
			[
				"mMesh",
				"mMeshletGroups"
			],
			[
				"Meshl",
				"Meshlet"
			],
			[
				"mes",
				"meshlets_count"
			],
			[
				"kInval",
				"kInvalidMeshletID"
			],
			[
				"kI",
				"kInvalidExportedID"
			],
			[
				"me",
				"meshletVertices"
			],
			[
				"local_",
				"local_vert_count"
			],
			[
				"mesh_",
				"mesh_start_index"
			],
			[
				"bre",
				"break"
			],
			[
				"la",
				"last_index"
			],
			[
				"gr",
				"groupSpec"
			],
			[
				"mMeshlet",
				"mMeshletGroups"
			],
			[
				"Genet",
				"Generating"
			],
			[
				"gene",
				"generateMeshlets"
			],
			[
				"Scen",
				"SceneTypes"
			],
			[
				"inn",
				"inner_indices"
			],
			[
				"te",
				"tesselatePolySimple"
			],
			[
				"in",
				"indices"
			],
			[
				"triang",
				"triangles"
			],
			[
				"use16",
				"use16BitIndices"
			],
			[
				"tr",
				"triangles_count"
			],
			[
				"tria",
				"triangles_count"
			],
			[
				"mesl",
				"meshlets"
			],
			[
				"pus",
				"push_back"
			],
			[
				"meshlets",
				"meshlets_count"
			],
			[
				"meshletGe",
				"meshletGeoInst"
			],
			[
				"Mes",
				"MeshletGeometryInstance"
			],
			[
				"inst",
				"instanceData"
			],
			[
				"Ge",
				"GeometryInstanceData"
			],
			[
				"mehs",
				"meshletGeometryInstances"
			],
			[
				"R",
				"R32Uint"
			],
			[
				"Sh",
				"SharedPtr"
			],
			[
				"T",
				"Texture"
			],
			[
				"mpMe",
				"mpMeshletsVertexBuffer"
			],
			[
				"cons",
				"constexpr"
			],
			[
				"page",
				"pageIndex"
			],
			[
				"inc",
				"include"
			],
			[
				"sh",
				"shadingPassType"
			],
			[
				"mU",
				"mUseVariance"
			],
			[
				"mUs",
				"mUseSTBN"
			],
			[
				"mRa",
				"mRayContribThreshold"
			],
			[
				"mR",
				"mRussRouletteLevel"
			],
			[
				"mSA",
				"mSampleNumber"
			],
			[
				"pM",
				"pMaterial"
			],
			[
				"str",
				"stringstream"
			],
			[
				"pP",
				"pPass"
			],
			[
				"RenderP",
				"RenderPass"
			],
			[
				"pC",
				"pCryptomattePass"
			],
			[
				"mMet",
				"mMetaData"
			],
			[
				"typeN",
				"typeName"
			],
			[
				"mT",
				"mTypeName"
			],
			[
				"mTyp",
				"mTypeName"
			],
			[
				"typ",
				"typeName"
			],
			[
				"C",
				"CryptoMaterial"
			],
			[
				"mTy",
				"mTypeName"
			],
			[
				"type",
				"type_name"
			]
		]
	},
	"buffers":
	[
		{
			"contents": "/***************************************************************************\n # Copyright (c) 2015-22, NVIDIA CORPORATION. All rights reserved.\n #\n # Redistribution and use in source and binary forms, with or without\n # modification, are permitted provided that the following conditions\n # are met:\n #  * Redistributions of source code must retain the above copyright\n #    notice, this list of conditions and the following disclaimer.\n #  * Redistributions in binary form must reproduce the above copyright\n #    notice, this list of conditions and the following disclaimer in the\n #    documentation and/or other materials provided with the distribution.\n #  * Neither the name of NVIDIA CORPORATION nor the names of its\n #    contributors may be used to endorse or promote products derived\n #    from this software without specific prior written permission.\n #\n # THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS \"AS IS\" AND ANY\n # EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n # IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR\n # PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT OWNER OR\n # CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,\n # EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,\n # PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n # PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY\n # OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n # (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n # OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n **************************************************************************/\n#include <boost/range/adaptors.hpp>\n\n#include \"stdafx.h\"\n\n#include \"blosc.h\"\n\n#include \"Falcor/Core/API/Device.h\"\n#include \"Falcor/Core/API/RenderContext.h\"\n#include \"Falcor/Core/API/VirtualTexturePage.h\"\n#include \"Falcor/Utils/StringUtils.h\"\n#include \"Falcor/Utils/ConfigStore.h\"\n#include \"Falcor/Utils/Image/LTX_Bitmap.h\"\n\n#include \"Scene/Material/TextureHandle.slang\"\n\n#include \"TextureManager.h\"\n\n\nnamespace ba = boost::adaptors;\n\n// Temporarily disable asynchronous texture loader until Falcor supports parallel GPU work submission.\n// Until then `TextureManager` should only called from the main thread.\n#define DISABLE_ASYNC_TEXTURE_LOADER\n\n\nnamespace Falcor {\n\nstatic const size_t kMinPagesPerLoadingThred = 10;\n\nnamespace {\n\tconst size_t kMaxTextureHandleCount = std::numeric_limits<uint32_t>::max();\n\tstatic_assert(TextureManager::TextureHandle::kInvalidID >= kMaxTextureHandleCount);\n}\n\nTextureManager::SharedPtr TextureManager::create(Device::SharedPtr pDevice, size_t maxTextureCount, size_t threadCount) {\n\treturn SharedPtr(new TextureManager(pDevice, maxTextureCount, threadCount));\n}\n\nTextureManager::TextureManager(Device::SharedPtr pDevice, size_t maxTextureCount, size_t threadCount)\n\t: mpDevice(pDevice)\n\t, mMaxTextureCount(std::min(maxTextureCount, kMaxTextureHandleCount))\n\t, mAsyncTextureLoader(mpDevice, threadCount)\n{\n\tmUDIMTextureTilesCount = 0;\n\tmUDIMTexturesCount = 0;\n\n\tmSparseTexturesEnabled = true; // TODO: should be dependent on device features !! \n\n\tblosc_init();\n\n\t// Init LRU texture data cache\n\tmpTextureDataCache = TextureDataCacheLRU::create(mpDevice, 1024, 512);\n}\n\nTextureManager::~TextureManager() {\n\tblosc_destroy();\n}\n\nTextureManager::TextureHandle TextureManager::addTexture(const Texture::SharedPtr& pTexture) {\n\tassert(pTexture);\n\tif (pTexture->getType() != Resource::Type::Texture2D || pTexture->getSampleCount() != 1) {\n\t\tthrow std::runtime_error(\"Only single-sample 2D textures can be added\");\n\t}\n\n\tstd::unique_lock<std::mutex> lock(mMutex);\n\tTextureHandle handle;\n\n\tif (auto it = mTextureToHandle.find(pTexture.get()); it != mTextureToHandle.end()) {\n\t\t// Texture is already managed. Return its handle.\n\t\thandle = it->second;\n\t} else {\n\t\t// Texture is not already managed. Add new texture desc.\n\t\tTextureDesc desc = { TextureState::Loaded, pTexture };\n\t\thandle = addDesc(desc, pTexture->isSparse() ? TextureHandle::Mode::Virtual : TextureHandle::Mode::Texture);\n\n\t\t// Add to texture-to-handle map.\n\t\tmTextureToHandle[pTexture.get()] = handle;\n\n\t\t// If texture was originally loaded from disk, add to key-to-handle map to avoid loading it again later if requested in loadTexture().\n\t\t// It's possible the user-provided texture has already been loaded by us. In that case, log a warning as the redundant load should be fixed.\n\t\tif (!pTexture->getSourcePath().empty()) {\n\t\t\tbool hasMips = pTexture->getMipCount() > 1;\n\t\t\tbool isSrgb = isSrgbFormat(pTexture->getFormat());\n\t\t\tTextureKey textureKey(pTexture->getSourcePath().string(), hasMips, isSrgb, pTexture->getBindFlags());\n\n\t\t\tif (mKeyToHandle.find(textureKey) == mKeyToHandle.end()) {\n\t\t\t\tmKeyToHandle[textureKey] = handle;\n\t\t\t} else {\n\t\t\t\tLLOG_WRN << \"TextureManager::addTexture() - Texture loaded from '\" << pTexture->getSourcePath() << \"' appears to be identical to an already loaded texture. This could be optimized by getting it from TextureManager.\";\n\t\t\t}\n\t\t}\n\t}\n\n\treturn handle;\n}\n\nTexture::SharedPtr TextureManager::loadSparseTexture(const fs::path& path, bool generateMipLevels, bool loadAsSRGB, Resource::BindFlags bindFlags) {\n\tstd::string ext = path.extension().string();\n\n\tif (ext == \".dds\") {\n\t\tLLOG_ERR << \"Sparse texture handling for DDS format unimplemented !!!\";\n\t\treturn nullptr;\n\t}\n\n\tconst auto& configStore = ConfigStore::instance();\n\tbool vtoff = configStore.get<bool>(\"vtoff\", false);\n\tif (!mSparseTexturesEnabled || vtoff) {\n\t\tLLOG_ERR << \"Virtual texturing disabled. Unable to use LTX texture \" << path.string();\n\t\treturn nullptr;\n\t}\n\n\tfs::path ltxPath = appendExtension(path, \".ltx\");\n\n\tbool ltxMagicMatch = false;\n\tbool ltxFileExists = fs::exists(ltxPath);\n\n\tif(ltxFileExists && LTX_Bitmap::checkFileMagic(ltxPath, true)) ltxMagicMatch = true;\n\n\tLTX_Bitmap::TLCParms tlcParms;\n\ttlcParms.compressorName = configStore.get<std::string>(\"vtex_tlc\", \"zlib\");\n\ttlcParms.compressionLevel = (uint8_t)configStore.get<int>(\"vtex_tlc_level\", 5);\n\n\tif(!ltxFileExists || !ltxMagicMatch ) {\n\t\tif(!configStore.get<bool>(\"fconv\", true)) {\n\t\t\tLLOG_WRN << \"On-line sparse texture conversion disabled !!!\";\n\t\t\treturn nullptr;\n\t\t}\n\n\t\tLLOG_INF << \"Converting source texture \" << path << \" to LTX format using \" << tlcParms.compressorName << \" compressor.\";\n\t\tif (!LTX_Bitmap::convertToLtxFile(mpDevice, path.string(), ltxPath.string(), tlcParms, true)) {\n\t\t\tLLOG_ERR << \"Error converting source texture: \" << path;\n\t\t\t// rename currupted texture for future debugging\n\t\t\tif( fs::exists( ltxPath ) ) {\n\t\t\t\tfs::rename( ltxPath, fs::path(ltxPath.string() + \".currupted\"));\n\t\t\t}\n\t\t\treturn nullptr;\n\t\t} else {\n\t\t\tLLOG_INF << \"Conversion to LTX done for source texture: \" << path;\n\t\t}\n\t}\n\t\n\tauto pLtxBitmap = LTX_Bitmap::createFromFile(mpDevice, ltxPath, true);\n  if (!pLtxBitmap) {\n    LLOG_ERR << \"Error loading converted LTX texture from \" << ltxPath;\n    return nullptr;\n  }\n\n  if(pLtxBitmap->header().srcLastWriteTime != fs::last_write_time(path.string())) {\n  \tLLOG_WRN << \"LTX source texture modification time changed. Forcing on-line reconversion !\";\n  \tif (!LTX_Bitmap::convertToLtxFile(mpDevice, path.string(), ltxPath.string(), tlcParms, true)) {\n\t\t\tLLOG_ERR << \"Error re-converting texture source texture: \" << path;\n\t\t\treturn nullptr;\n\t\t} else {\n\t\t\tLLOG_INF << \"Re-conversion done for source texture: \" << path;\n\t\t}\n\t\tpLtxBitmap = LTX_Bitmap::createFromFile(mpDevice, ltxPath, true);\n  }\n\n\n  ResourceFormat texFormat = pLtxBitmap->getFormat();\n\n  if (loadAsSRGB) {\n    texFormat = linearToSrgbFormat(texFormat);\n  }\n\n  uint32_t arraySize = 1;\n  Texture::SharedPtr pTexture = Texture::SharedPtr(\n  \tnew Texture(mpDevice, pLtxBitmap->getWidth(), pLtxBitmap->getHeight(), 1, arraySize, pLtxBitmap->getMipLevelsCount(), 1, texFormat, Texture::Type::Texture2D, bindFlags)\n  );\n\n  if( !pTexture ) return nullptr;\n\n  pTexture->setSourceFilename(ltxPath.string());\n  pTexture->mIsSparse = true;\n  \n\ttry {\n    pTexture->apiInit(nullptr, generateMipLevels);\n  } catch (const std::runtime_error& e) {\n    LLOG_ERR << \"Error initializing sparse texture \" << ltxPath << \"'\\nError details:\";\n    LLOG_ERR << e.what();\n    return nullptr;\n  } catch (...) {\n    LLOG_ERR <<  \"Error initializing sparse texture \" << ltxPath;\n    return nullptr;\n  }\n\n\tfor(auto& pPage: pTexture->sparseDataPages()) {\n   \tpPage->mID = static_cast<uint32_t>(mSparseDataPages.size());\n   \tmSparseDataPages.push_back(pPage);\n   }\n\n  uint32_t deviceMemRequiredSize = pTexture->getTextureSizeInBytes();\n  LLOG_DBG << \"Texture requires \" << std::to_string(deviceMemRequiredSize) << \" bytes of device memory\";\n  //if(deviceMemRequiredSize <= deviceCacheMemSizeLeft) {\n  //  deviceCacheMemSizeLeft = deviceCacheMemSize - deviceMemRequiredSize;\n  //} else {\n  //  LLOG_ERR << \"No texture memory left for texture \" <<  ltxPath;\n  //  return handle;\n  //}\n  \n  // Sparse bitmaps tracking\n  auto it = mTextureLTXBitmapsMap.find(pTexture->id());\n  if (it == mTextureLTXBitmapsMap.end()) {\n    mTextureLTXBitmapsMap[pTexture->id()] = std::move(pLtxBitmap);\n  }\n  //mTextureLTXBitmapsMap[pTexture->id()] = std::move(pLtxBitmap);\n  \n  pTexture->setVirtualID(mSparseTexturesCount++);\n\n\treturn pTexture;\n}\n\nvoid TextureManager::loadPages(const Texture::SharedPtr& pTexture, const std::vector<uint32_t>& pageIds) {\n\tif(!mHasSparseTextures || !pTexture || !pTexture->isSparse()) return;\n\n  assert(pTexture.get());\n  if(!pTexture) return;\n\n  uint32_t textureID = pTexture->id();\n\n  auto it = mTextureLTXBitmapsMap.find(textureID);\n  if (it == mTextureLTXBitmapsMap.end()) {\n    LLOG_ERR << \"No LTX_Bitmap stored for texture \" <<  pTexture->getSourceFilename();\n    return;\n  }\n\n  auto pLtxBitmap = mTextureLTXBitmapsMap[textureID];\n\n  std::vector<uint32_t> _pageIds = pageIds;\n  std::sort(_pageIds.begin(), _pageIds.end());\n\n  // read data and fill pages\n  std::string ltxFilename = pLtxBitmap->getFileName();\n  auto pFile = fopen(ltxFilename.c_str(), \"rb\");\n  \n  std::array<uint8_t, kLtxPageSize> tmpPage;\n  auto pTmpPageData = tmpPage.data();\n\n  std::array<uint8_t, kLtxPageSize> scratchBuffer;\n  auto pScratchBufferData = scratchBuffer.data();\n\n  bool loadTailData = true; // always load texture tail data\n\n  const auto& texturePages = pTexture->sparseDataPages();\n\n  for( uint32_t pageIndex: _pageIds ) {\n  \tif(pageIndex >= texturePages.size()) {\n\t\t\tLLOG_ERR << \"Page index \" << std::to_string(pageIndex) << \" exceeds number of texturePages \" << std::to_string(texturePages.size());\n\t\t\tcontinue;\n\t\t}\n\n    const auto& pPage = texturePages[pageIndex];\n    if(pPage->mipLevel() >= pTexture->getMipTailStart()) continue;\n\n    uint32_t page_index = pageIndex; //pPage->index();\n\n    if(pLtxBitmap->readPageData(page_index, pTmpPageData, pFile, pScratchBufferData)) {\t\n    \t// Load non-tail texture data page\n    \tpPage->allocate();\n    \tmpDevice->getRenderContext()->updateTexturePage(pPage.get(), pTmpPageData);\n    \tLLOG_TRC << \"Loaded page mip level \" << std::to_string(pPage->mipLevel());\n  \t} else {\n  \t\tLLOG_ERR << \"Error updating texture page \" << std::to_string(pPage->index());\n  \t\tpPage->release();\n  \t}\n  }\n\n\tif(loadTailData || (pageIds.size() == 0)) {\n\t\tLLOG_DBG << \"Loading tail data for \" << ltxFilename;\n\t\tstd::vector<uint8_t> tailData(kLtxPageSize);\n\t\tpLtxBitmap->readTailData(pFile, tailData, pScratchBufferData);\n\t\tLLOG_TRC << \"Loaded \" << tailData.size() << \" bytes of tail data for \" << ltxFilename;\n\t\tif(!tailData.empty()) mpDevice->getRenderContext()->fillMipTail(pTexture.get(), tailData.data(), is_set(pLtxBitmap->getFlags(), LTX_Header::Flags::ONE_PAGE_MIP_TAIL));\n\t}\n\n  fclose(pFile);\n  pTexture->updateSparseBindInfo();\n}\n\nvoid TextureManager::loadPagesAsync(const Texture::SharedPtr& pTexture, const std::vector<uint32_t>& pageIds) {\n\tif(!mHasSparseTextures || !pTexture || !pTexture->isSparse()) return;\n\n  assert(pTexture.get());\n\n  uint32_t textureID = pTexture->id();\n\n  auto it = mTextureLTXBitmapsMap.find(textureID);\n  if (it == mTextureLTXBitmapsMap.end()) {\n    LLOG_ERR << \"No LTX_Bitmap stored for texture \" <<  pTexture->getSourceFilename();\n    return;\n  }\n\n  auto pLtxBitmap = mTextureLTXBitmapsMap[textureID];\n\n  ThreadPool& pool = ThreadPool::instance();\n\n\t// Push pages loading job into ThreadPool\n\tmTextureLoadingTasks.push_back(pool.submit([this, pLtxBitmap, pTexture = pTexture.get(), pageIds = std::move(pageIds)]\n  {\n  \tif(!pTexture) return (Texture*)nullptr;\n\n  \tstd::vector<uint32_t> _pageIds = pageIds;\n  \tstd::sort(_pageIds.begin(), _pageIds.end());\n  \t\n    std::thread::id thread_id = std::this_thread::get_id();\n    auto pContext = pTexture->device()->getRenderContext();\n\n    std::array<uint8_t, kLtxPageSize> tmpPageData;\n    auto pTmpPageData = tmpPageData.data();\n\n    std::array<uint8_t, kLtxPageSize> scratchBuffer;\n    auto pScratchBufferData = scratchBuffer.data();\n\n    bool loadTailData = true; // always load texture tail data\n    const auto& texturePages = pTexture->sparseDataPages();\n\n\t\tstd::string ltxFilename = pLtxBitmap->getFileName();\n\t\tauto pFile = fopen(ltxFilename.c_str(), \"rb\");\n\n\t\tfor( uint32_t pageIndex: _pageIds ) {\n\t\t\tif(pageIndex >= texturePages.size()) {\n\t\t\t\tLLOG_ERR << \"Page index \" << std::to_string(pageIndex) << \" exceeds number of texturePages \" << std::to_string(texturePages.size());\n\t\t\t\tcontinue;\n\t\t\t}\n\n  \t\tconst auto& pPage = texturePages[pageIndex];\n  \t\tif(pPage->mipLevel() >= pTexture->getMipTailStart()) continue;\n\n  \t\tuint32_t page_index = pageIndex; //pPage->index();\n\n  \t\tif(!pPage->isResident()) {\n    \t\tif(pLtxBitmap->readPageData(page_index, pTmpPageData, pFile, pScratchBufferData)) {\n  \t\t\t\t// Load non-tail texture data page\n  \t\t\t\tstd::unique_lock<std::mutex> lock(mPageMutex);\n  \t\t\t\tpPage->allocate();\n  \t\t\t\tpContext->updateTexturePage(pPage.get(), pTmpPageData);\n  \t\t\t\tLLOG_TRC << \"Thread \" << thread_id << \": loaded page \" << std::to_string(pPage->index()) << \" of mip level \" << std::to_string(pPage->mipLevel()) << \" texture \" << pTexture->getSourceFilename();\n\t\t\t\t} else {\n\t\t\t\t\tLLOG_ERR << \"Thread \" << thread_id << \": Error updating texture page \" << std::to_string(pPage->index());\n\t\t\t\t\tpPage->release();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif(loadTailData || !pageIds.empty()) {\n\t\t\tLLOG_DBG << \"Loading tail data for \" << ltxFilename;\n\t\t\tstd::vector<uint8_t> tailData(kLtxPageSize);\n\t\t\tpLtxBitmap->readTailData(pFile, tailData, pScratchBufferData);\n\t\t\tLLOG_TRC << \"Loaded \" << tailData.size() << \" bytes of tail data for \" << ltxFilename;\n\t\t\tif(!tailData.empty()) {\n\t\t\t\tstd::unique_lock<std::mutex> lock(mPageMutex);\n\t\t\t\tpContext->fillMipTail(pTexture, tailData.data(), is_set(pLtxBitmap->getFlags(), LTX_Header::Flags::ONE_PAGE_MIP_TAIL));\n\t\t\t}\n\t\t}\n\n\t\tfclose(pFile);\n\t\t{\n\t\t\tstd::unique_lock<std::mutex> lock(mPageMutex);\n\t\t\tpTexture->updateSparseBindInfo();\n\t\t}\n\n    return pTexture;\n  }));\n}\n\nvoid TextureManager::updateSparseBindInfo() {\n\tif(mTextureLoadingTasks.empty()) return;\n\n\tstd::vector<Texture*> textures;\n\tfor(size_t i = 0; i < mTextureLoadingTasks.size(); i++) {\n\t\ttextures.push_back(mTextureLoadingTasks[i].get());\n\t}\n\n\tif(textures.empty()) return;\n\n\t//mpDevice->getRenderContext()->flush();\n\t\n\t//mpDevice->getApiHandle()->updateSparseBindInfo(textures);\n\t//mpDevice->flushAndSync();\n}\n\nbool TextureManager::getTextureHandle(const Texture* pTexture, TextureHandle& handle) const {\n\tassert(pTexture);\n\t\n\tauto const& it = mTextureToHandle.find(pTexture);\n\tif(it == mTextureToHandle.end()) return false;\n\n\thandle = it->second;\n\treturn true;\n}\n\nstatic bool isUdimTextureFilename(const fs::path& path, const std::string& udimMask) {\n\tif (udimMask == \"\") return false;\n\tif (path.filename().string().find(udimMask) == std::string::npos) return false;\n\treturn true;\n}\n\nstatic bool isUdimTextureFilename(const fs::path& path, const std::string& udimMask, size_t& udimMask_found) {\n\tif (udimMask == \"\") return false;\n\t\n\tudimMask_found = path.filename().string().find(udimMask);\n\tif (udimMask_found == std::string::npos) return false;\n\n\treturn true;\n}\n\n\nstatic bool findUdimTextureTiles(const fs::path& path, const std::string& udimMask, TextureManager::TileList& tileList) {\n\ttileList.clear();\n\tsize_t udimMask_found = std::string::npos;\n\n\tif(!isUdimTextureFilename(path, udimMask, udimMask_found)) return false;\n\n\t// Get the list of available tiles\n\tstd::string path_string = path.filename().string();\n\tconst boost::regex udim_tile_filter(path_string.replace(udimMask_found, udimMask.size(), \"\\\\d{4}\\\\\").c_str());\n\tboost::smatch what;\n\n\tbool result = false;\n\n\tfor (auto &entry: boost::make_iterator_range(fs::directory_iterator(path.parent_path()), {})\n\t\t| ba::filtered(static_cast<bool (*)(const fs::path &)>(&fs::is_regular_file))\n\t\t| ba::filtered([&](const fs::path &path){ return boost::regex_match(path.filename().string(), what, udim_tile_filter); })\n\t) {\n\t\tstd::string udim_tile_number_str = entry.path().filename().string().substr(udimMask_found, 4);\n\t\tsize_t udim_tile_number = static_cast<size_t>(std::stoul(udim_tile_number_str)) - 1001;\n\n\t\tif( udim_tile_number < 100) {\n\t\t\tstd::ldiv_t ldivresult;\n\t\t\tldivresult = ldiv(udim_tile_number,10);\n\n\t\t\tsize_t udim_tile_u_number = ldivresult.rem;\n\t\t\tsize_t udim_tile_v_number = ldivresult.quot;\n\n\t\t\ttileList.push_back(std::make_pair(entry.path(), Falcor::uint2({udim_tile_u_number, udim_tile_v_number})));\n\t\t\tresult = true;\n\n\t\t\tconst auto& info = tileList.back();\n\t\t\tLLOG_DBG << \"Found UDIM tile \" << to_string(info.second) << \" : \" << info.first.string();\n\t\t} else {\n\t\t\tLLOG_ERR << \"Wrong UDIM filename: \" << entry.path().string();\n\t\t}\n\t}\n\treturn result;\n}\n\nbool TextureManager::loadTexture(TextureManager::TextureHandle& handle, const fs::path& path, bool generateMipLevels, bool loadAsSRGB, Resource::BindFlags bindFlags, bool async, const std::string& udimMask, bool loadAsSparse) {\n\t// Find the full path to the texture if it's not a UDIM.\n\tfs::path fullPath;\n\n\tif (isUdimTextureFilename(path, udimMask)) {\n\t\t// If UDIM texture requested we have store handle with no actual texture loaded that is referenced by actual tiles textures.\n\t\t// So we use UDIM texture path as fullpath key for map storage and access.\n\t\tfullPath = path.filename().string();\n\t} else {\n\t\tif (!findFileInDataDirectories(path, fullPath)) {\n\t\t\tLLOG_WRN << \"Can't find texture file \" << path;\n\t\t\treturn false;\n\t\t}\n\t}\n\n\tstd::unique_lock<std::mutex> lock(mMutex);\n\tconst TextureKey textureKey(fullPath, generateMipLevels, loadAsSRGB, bindFlags);\n\n\tif (auto it = mKeyToHandle.find(textureKey); it != mKeyToHandle.end()) {\n\t\t// Texture is already managed. Return its handle.\n\t\tLLOG_DBG << \"Texture \" << textureKey.fullPath.string() << \" is already managed.\";\n\t\thandle = it->second;\n\t} else {\n\n\t\tmDirty = true;\n\n\t\t// Check if UDIM texture requested...\n\t\tstd::vector<std::pair<fs::path, Falcor::uint2>> udim_tile_fileinfos;\n\t\tbool is_udim_texture = findUdimTextureTiles(path, udimMask, udim_tile_fileinfos);\n\n#ifndef DISABLE_ASYNC_TEXTURE_LOADER\n\t\tmLoadRequestsInProgress++;\n\n\t\t// Texture is not already managed. Add new texture desc.\n\t\tTextureDesc desc = { TextureState::Referenced, nullptr };\n\t\thandle = addDesc(desc);\n\n\t\t// Add to key-to-handle map.\n\t\tmKeyToHandle[textureKey] = handle;\n\n\t\t// Function called by the async texture loader when loading finishes.\n\t\t// It's called by a worker thread so needs to acquire the mutex before changing any state.\n\t\tauto callback = [=](Texture::SharedPtr pTexture)\n\t\t{\n\t\t\tstd::unique_lock<std::mutex> lock(mMutex);\n\n\t\t\t// Mark texture as loaded.\n\t\t\tauto& desc = getDesc(handle);\n\t\t\tdesc.state = TextureState::Loaded;\n\t\t\tdesc.pTexture = pTexture;\n\n\t\t\t// Add to texture-to-handle map.\n\t\t\tif (pTexture) {\n\t\t\t\thandle.mMode = pTexture->isSparse() ? TextureHandle::Mode::Vitrual : TextureHandle::Mode::Texture;\n\t\t\t\tmTextureToHandle[pTexture.get()] = handle;\n\t\t\t}\n\n\t\t\tmLoadRequestsInProgress--;\n\t\t\tmCondition.notify_all();\n\t\t};\n\n\t\t// Issue load request to texture loader.\n\t\tmAsyncTextureLoader.loadFromFile(fullPath, generateMipLevels, loadAsSRGB, bindFlags, callback);\n#else\n\t\t// Load texture from main thread.\n\t\t\n\t\tif(!is_udim_texture) {\n\t\t\t// Load single texture\n\t\t\tTexture::SharedPtr pTexture = nullptr;\n\n\t\t\tif(!loadAsSparse) {\n\t\t\t\tpTexture = Texture::createFromFile(mpDevice, fullPath, generateMipLevels, loadAsSRGB, bindFlags);\n\t\t\t} else {\n\t\t\t\tpTexture = loadSparseTexture(fullPath, generateMipLevels, loadAsSRGB, bindFlags);\n\t\t\t\tif(!pTexture) {\n\t\t\t\t\tLLOG_ERR << \"Error loading sparse texture !!!\";\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Add new texture desc.\n\t\t\tTextureDesc desc = { TextureState::Loaded, pTexture };\n\t\t\thandle = addDesc(desc, pTexture->isSparse() ? TextureHandle::Mode::Virtual : TextureHandle::Mode::Texture);\n\n\t\t\t// Add to key-to-handle map.\n\t\t\tmKeyToHandle[textureKey] = handle;\n\n\t\t\t// Add to texture-to-handle map.\n\t\t\tif (pTexture) {\n\t\t\t\tmTextureToHandle[pTexture.get()] = handle;\n\t\t\t\tif (pTexture->isSparse()) {\n\t\t\t\t\tmHasSparseTextures = true;\n\t\t\t\t}\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t// Load UDIM texture tiles\n\t\t\tTexture::SharedPtr pUDIMTexture = Texture::createUDIMFromFile(mpDevice, fullPath);\n\n\t\t\t// Add epmty texture tileset desc.\n\t\t\tTextureDesc desc = { TextureState::Loaded, pUDIMTexture };\n\t\t\thandle = addDesc(desc, TextureHandle::Mode::UDIM_Texture);\n\t\t\n\t\t\t// Add UDIM tileset to key-to-handle map.\n\t\t\tmKeyToHandle[textureKey] = handle;\n\n\t\t\t// Add to texture-to-handle map.\n\t\t\tif (pUDIMTexture) {\n\t\t\t\tmTextureToHandle[pUDIMTexture.get()] = handle;\n\t\t\t\tpUDIMTexture->setUDIM_ID(mUDIMTexturesCount);\n\t\t\t\tmUDIMTexturesCount++;\n\t\t\t}\n\n\t\t\tfor( const auto& i: udim_tile_fileinfos) {\n\t\t\t\tconst auto& udim_tile_fullpath = i.first;\n\t\t\t\tconst Falcor::uint2& udim_tile_pos = i.second;\n\n\t\t\t\tconst TextureKey udimTileTextureKey(udim_tile_fullpath, generateMipLevels, loadAsSRGB, bindFlags);\n\n\t\t\t\tTextureHandle udim_tile_handle;\n\n\t\t\t\tif (auto it = mKeyToHandle.find(udimTileTextureKey); it != mKeyToHandle.end()) {\n\t\t\t\t\t// Texture tile is already managed. Return its handle.\n\t\t\t\t\tudim_tile_handle = it->second;\n\t\t\t\t} else {\n\n\t\t\t\t\tTexture::SharedPtr pUdimTileTex = nullptr;\n\n\t\t\t\t\tif(!loadAsSparse) {\n\t\t\t\t\t\tpUdimTileTex = Texture::createFromFile(mpDevice, udim_tile_fullpath, generateMipLevels, loadAsSRGB, bindFlags);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tpUdimTileTex = loadSparseTexture(udim_tile_fullpath, generateMipLevels, loadAsSRGB, bindFlags);\n\t\t\t\t\t\tif(pUdimTileTex) {\n\t\t\t\t\t\t\tmHasSparseTextures = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tLLOG_DBG << \"Loaded \" << (loadAsSparse ? \"sparse\": \"\" ) << \" UDIM tile texture: \" << udim_tile_fullpath << \" pos: \" << std::to_string(udim_tile_pos[0]) << \"x\" << std::to_string(udim_tile_pos[1]);\n\t\t\t\t\t\n\t\t\t\t\tTextureDesc udim_tile_desc = { TextureState::Loaded, pUdimTileTex };\n\t\t\t\t\tudim_tile_handle = addDesc(udim_tile_desc, pUdimTileTex->isSparse() ? TextureHandle::Mode::Virtual : TextureHandle::Mode::Texture);\n\t\t\n\t\t\t\t\t// Add tile handle to key-to-handle map.\n\t\t\t\t\tmKeyToHandle[udimTileTextureKey] = udim_tile_handle;\n\n\t\t\t\t\t// Add tile to texture-to-handle map.\n\t\t\t\t\tif (pUdimTileTex) {\n\t\t\t\t\t\tmHasUDIMTextures = true;\n\t\t\t\t\t\tmTextureToHandle[pUdimTileTex.get()] = udim_tile_handle;\n\t\t\t\t\t\t\n\t\t\t\t\t\tif (pUDIMTexture) {\n\t\t\t\t\t\t\tpUDIMTexture->addUDIMTileTexture({pUdimTileTex, udim_tile_pos[0], udim_tile_pos[1]});\n\t\t\t\t\t\t\tmUDIMTextureTilesCount ++;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tmCondition.notify_all();\n#endif\n\t}\n\n\tlock.unlock();\n\n\tif (!async) {\n\t\twaitForTextureLoading(handle);\n\t}\n\n\treturn true;\n}\n\nvoid TextureManager::waitForTextureLoading(const TextureHandle& handle) {\n\tif (!handle) return;\n\n\t// Acquire mutex and wait for texture state to change.\n\tstd::unique_lock<std::mutex> lock(mMutex);\n\tmCondition.wait(lock, [&]() { return getDesc(handle).state == TextureState::Loaded; });\n\n\tmpDevice->flushAndSync();\n}\n\nvoid TextureManager::waitForAllTexturesLoading() {\n\t// Acquire mutex and wait for all in-progress requests to finish.\n\tstd::unique_lock<std::mutex> lock(mMutex);\n\tmCondition.wait(lock, [&]() { return mLoadRequestsInProgress == 0; });\n\n\tmpDevice->flushAndSync();\n}\n\nvoid TextureManager::removeTexture(const TextureHandle& handle) {\n\tif (!handle) return;\n\n\twaitForTextureLoading(handle);\n\n\tstd::lock_guard<std::mutex> lock(mMutex);\n\n\t// Get texture desc. If it's already cleared, we're done.\n\tauto& desc = getDesc(handle);\n\tif (!desc.isValid()) return;\n\n\t// Remove handle from maps.\n\t// Note not all handles exist in key-to-handle map so search for it. This can be optimized if needed.\n\tauto it = std::find_if(mKeyToHandle.begin(), mKeyToHandle.end(), [handle](const auto& keyVal) { return keyVal.second == handle; });\n\tif (it != mKeyToHandle.end()) mKeyToHandle.erase(it);\n\n\tif (desc.pTexture) {\n\t\tassert(mTextureToHandle.find(desc.pTexture.get()) != mTextureToHandle.end());\n\t\tmTextureToHandle.erase(desc.pTexture.get());\n\t}\n\n\t// Clear texture desc.\n\tdesc = {};\n\n\t// Return handle to the free list.\n\tmFreeList.push_back(handle);\n}\n\nTextureManager::TextureDesc TextureManager::getTextureDesc(const TextureHandle& handle) const {\n\tif (!handle) return {};\n\n\tstd::lock_guard<std::mutex> lock(mMutex);\n\tassert(handle && handle.id < mTextureDescs.size());\n\treturn mTextureDescs[handle.id];\n}\n\nsize_t TextureManager::getTextureDescCount() const {\n\tstd::lock_guard<std::mutex> lock(mMutex);\n\treturn mTextureDescs.size();\n}\n\nvoid TextureManager::finalize() {\n\tif (!mDirty) return;\n\n\tuint32_t udimID = 0;\n\tfor (size_t i = 0; i < mTextureDescs.size(); i++) {\n\t\tconst auto& pTex = mTextureDescs[i].pTexture;\n\t\tif(pTex && pTex->isUDIMTexture()) {\n\t\t\t//pTex->setUDIM_ID(udimID++);\n\t\t}\n\t}\n\n\tmDirty = false;\n}\n\nvoid TextureManager::setShaderData(const ShaderVar& var, const size_t descCount) const {\n\tLLOG_DBG << \"Setting shader data for \" << to_string(mTextureDescs.size()) << \" texture descs\";\n\t\n\tstd::lock_guard<std::mutex> lock(mMutex);\n\n\tif (mTextureDescs.size() < descCount) {\n\t\t// TODO: We should change overall logic of setting shader data between MaterialSystem and TextureManager classes. Now it's a mess!\n\t\tthrow std::runtime_error(\"Textures descriptor array is too large. Requested \" + std::to_string(descCount) + \" while TextureManager has \" + std::to_string(mTextureDescs.size()));\n\t}\n\n\tTexture::SharedPtr nullTexture;\n\n\tsize_t ii = 0; // Current material system textures index\n\n\t// Fill in textures\n\tfor (size_t i = 0; i < mTextureDescs.size(); ++i) {\n\t\tconst auto& pTex = mTextureDescs[i].pTexture;\n\t\tif(pTex && !pTex->isUDIMTexture()) {\n\t\t\tvar[ii] = pTex;\n\t\t} else {\n\t\t\tvar[ii] = nullTexture;\n\t\t}\n\t\tii++;\n\t}\n\n\t// Fill the array tail\n\tfor (size_t i = ii; i < descCount; i++) {\t\n\t\tvar[i] = nullTexture;\n\t}\n}\n\nvoid TextureManager::setExtendedTexturesShaderData(const ShaderVar& var, const size_t descCount) {\n\tLLOG_DBG << \"Setting extended textures shader data for \" << to_string(mTextureDescs.size()) << \" texture descs\";\n\n\tif (mTextureDescs.size() < descCount) {\n\t\t// TODO: We should change overall logic of setting shader data between MaterialSystem and TextureManager classes. Now it's a mess!\n\t\tthrow std::runtime_error(\"Textures descriptor array is too large. Requested \" + std::to_string(descCount) + \" while TextureManager has \" + std::to_string(mTextureDescs.size()));\n\t}\n\n\tstd::lock_guard<std::mutex> lock(mMutex);\n\n\tif(!mpExtendedTexturesDataBuffer || mDirty) {\n\t\tstd::vector<ExtendedTextureData> extendedTexturesData;\n\n\t\t// Fill in extended data\n\t\tfor (size_t i = 0; i < mTextureDescs.size(); ++i) {\n\t\t\textendedTexturesData.push_back({});\n\t\t\tconst auto& pTex = mTextureDescs[i].pTexture;\n\t\t\tif(!pTex) continue;\n\n\t\t\tauto& handleExt = extendedTexturesData.back(); \n\n\t\t\tif(pTex->isUDIMTexture()) {\n\t\t\t\thandleExt.setMode(ExtendedTextureData::Mode::UDIM_Texture);\n\t\t\t\thandleExt.udimID = pTex->getUDIM_ID();\n\t\t\t} else if (pTex->isSparse()) {\n\t\t\t\thandleExt.setMode(ExtendedTextureData::Mode::Virtual);\n\t\t\t\thandleExt.virtualID = pTex->getVirtualID();\n\t\t\t} else {\n\t\t\t\thandleExt.setMode(ExtendedTextureData::Mode::Texture);\n\t\t\t\thandleExt.udimID = 0;\n\t\t\t\thandleExt.virtualID = 0;\n\t\t\t}\n\t\t}\n\n\t\tmpExtendedTexturesDataBuffer = Buffer::createStructured(mpDevice, var, (uint32_t)extendedTexturesData.size(), Resource::BindFlags::ShaderResource, Buffer::CpuAccess::None, extendedTexturesData.data(), false);\n\t}\n\tvar.setBuffer(mpExtendedTexturesDataBuffer);\n}\n\nvoid TextureManager::buildSparseResidencyData() {\n\tif(!mDirtySparseResidency && !mDirty) return;\n\n\tstd::lock_guard<std::mutex> lock(mMutex);\n\n\tuint32_t virtualTexturesCount = 0;\n\tfor (size_t i = 0; i < mTextureDescs.size(); ++i) {\n\t\tconst auto& pTexture = mTextureDescs[i].pTexture; \n\t\tif(pTexture && pTexture->isSparse()) {\n\t\t\tvirtualTexturesCount += 1;\n\t\t}\n\t}\n\n\tmVirtualTexturesData.resize(virtualTexturesCount);\n\tmVirtualPagesData.clear();\n\n\t// Fill in virtual texture data\n\tfor (const auto& entry : mTextureToHandle) {\n\n\t\tconst auto& pTexture = entry.first;\n\t\tif(!pTexture || !pTexture->isSparse()) continue;\n\t\t\tauto& vtexData = mVirtualTexturesData[pTexture->getVirtualID()];\n\n\t\t\tvtexData.empty = false;\n\t\t\tvtexData.textureID = pTexture->id();\n\n\t\t\tvtexData.width = static_cast<uint16_t>(pTexture->getWidth(0));\n\t\t\tvtexData.height = static_cast<uint16_t>(pTexture->getHeight(0));\n\t\t\tvtexData.mipLevelsCount = static_cast<uint8_t>(pTexture->getMipCount());\n\t\t\tvtexData.mipTailStart = static_cast<uint8_t>(pTexture->getMipTailStart());\n\t\t\tvtexData.pagesStartOffset = mVirtualPagesData.size();\n\t\t\tmVirtualPagesStartMap[pTexture] = vtexData.pagesStartOffset;\n\n\t\t\tauto const& pageRes = pTexture->sparseDataPageRes();\n\t\t\tvtexData.pageSizeW = static_cast<uint16_t>(pageRes.x);\n\t\t\tvtexData.pageSizeH = static_cast<uint16_t>(pageRes.y);\n\t\t\tvtexData.pageSizeD = static_cast<uint16_t>(pageRes.z);\n\n\t\t\tauto const& mipBases = pTexture->getMipBases();\n\t\t\tmemcpy(&vtexData.mipBases, mipBases.data(), mipBases.size() * sizeof(uint32_t));\n\t\t\n\t\t\tmVirtualPagesData.resize(mVirtualPagesData.size() + pTexture->sparseDataBindsCount());\n\n\t\t// TODO: prefill pages residency info\n\t}\n\n\t// ensure pages buffer is aligned to 64 bytes\n\tauto dv = std::div(mVirtualPagesData.size(), 64);\n\tif(dv.rem != 0) mVirtualPagesData.resize((dv.quot + 1) * 64);\n\tmemset(mVirtualPagesData.data(), 0, mVirtualPagesData.size() * sizeof(uint8_t));\n\n\tLLOG_DBG << \"Virtual textures data size \" << mVirtualTexturesData.size();\n\tLLOG_DBG << \"Virtual pages data size \" << mVirtualPagesData.size();\n\n\tmpVirtualTexturesDataBuffer = \n\t\tBuffer::createStructured(mpDevice, sizeof(VirtualTextureData), (uint32_t)mVirtualTexturesData.size(), Resource::BindFlags::ShaderResource, Buffer::CpuAccess::None, mVirtualTexturesData.data(), false);\n\tmpVirtualPagesResidencyDataBuffer = mVirtualPagesData.size() > 0 ?\n\t\tBuffer::create(mpDevice, mVirtualPagesData.size(), Resource::BindFlags::ShaderResource | Resource::BindFlags::UnorderedAccess, Buffer::CpuAccess::None, mVirtualPagesData.data()) : nullptr;\n\n\tmDirtySparseResidency = false;\n}\n\nsize_t TextureManager::getVirtualTexturePagesStartIndex(const Texture* pTexture) {\n\tassert(pTexture);\n\tif(!pTexture->isSparse()) {\n\t\tLLOG_ERR << \"Non virtual texture requested in getVirtualTexturePagesStartIndex() !!!\";\n\t\treturn std::numeric_limits<size_t>::max();\n\t}\n\n\tbuildSparseResidencyData();\n\n\tif (auto search = mVirtualPagesStartMap.find(pTexture); search != mVirtualPagesStartMap.end()) return search->second;\n\n\tLLOG_ERR << \"Virtual texture start page offset not found !\";\n\treturn std::numeric_limits<size_t>::max();\n}\n\nvoid TextureManager::setVirtualTexturesShaderData(const ShaderVar& var, const ShaderVar& pagesBufferVar, const size_t descCount) {\n\tif(!mHasSparseTextures || !mSparseTexturesEnabled) return;\n\n\tLLOG_DBG << \"Setting virtual textures shader data for \" << to_string(mTextureDescs.size()) << \" texture descs\";\n\n\tif (mTextureDescs.size() < descCount) {\n\t\t// TODO: We should change overall logic of setting shader data between MaterialSystem and TextureManager classes. Now it's a mess!\n\t\tthrow std::runtime_error(\"Textures descriptor array is too large. Requested \" + std::to_string(descCount) + \" while TextureManager has \" + std::to_string(mTextureDescs.size()));\n\t}\n\n\tbuildSparseResidencyData();\n\n\tvar.setBuffer(mpVirtualTexturesDataBuffer);\n\tpagesBufferVar.setBuffer(mpVirtualPagesResidencyDataBuffer);\n}\n\nvoid TextureManager::setShaderData(const ShaderVar& var, const std::vector<Texture::SharedPtr>& textures) const {\n\tLLOG_DBG << \"Setting direct shader data for \" << to_string(textures.size()) << \" textures\";\n\t\n\tstd::lock_guard<std::mutex> lock(mMutex);\n\n\tTexture::SharedPtr nullTexture;\n\n\t// Fill in textures\n\tsize_t ii = 0;\n\tfor (const auto pTex: textures) {\n\t\tif(pTex && !pTex->isUDIMTexture()) {\n\t\t\tvar[ii] = pTex;\n\t\t} else {\n\t\t\tvar[ii] = nullTexture;\n\t\t}\n\t\tii++;\n\t}\n}\n\nvoid TextureManager::setUDIMTableShaderData(const ShaderVar& var, const size_t descCount) const {\n\tLLOG_DBG << \"Setting UDIM table shader data \" << to_string(descCount) << \" descriptors\";\n\n\tif (descCount == 0) {\n\t\tLLOG_DBG << \"No descriptors to update for UDIM table\";\n\t\treturn;\n\t}\n\n\tstd::lock_guard<std::mutex> lock(mMutex);\n\n\tfor (size_t i = 0; i < mTextureDescs.size(); i++) {\n\t\tconst auto& pTex = mTextureDescs[i].pTexture;\n\t\tif(pTex && pTex->isUDIMTexture()) {\n\t\t\tfor( const auto& tileInfo: pTex->getUDIMTileInfos()) {\n\t\t\t\tsize_t udim_tile_idx = static_cast<uint32_t>(pTex->getUDIM_ID()) * 100u + tileInfo.u + tileInfo.v * 10u;\n\t\t\t\tif( tileInfo.pTileTexture ) {\n\t\t\t\t\tauto const& it = mTextureToHandle.find(tileInfo.pTileTexture.get());\n\t\t\t\t\tif(it != mTextureToHandle.end()) {\n\t\t\t\t\t\tLLOG_DBG << \"Tile idx: \" << std::to_string(udim_tile_idx) << \" handle: \" << std::to_string(it->second.id);\n\t\t\t\t\t\tvar[udim_tile_idx] = it->second.id;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\nTextureManager::TextureHandle TextureManager::addDesc(const TextureDesc& desc, TextureHandle::Mode mode) {\n\tTextureHandle handle;\n\thandle.mMode = mode;\n\n\t// Allocate new texture handle and insert desc.\n\tif (!mFreeList.empty()) {\n\t\thandle = mFreeList.back();\n\t\tmFreeList.pop_back();\n\t\tgetDesc(handle) = desc;\n\t} else {\n\t\tif (mTextureDescs.size() >= mMaxTextureCount) {\n\t\t\tthrow std::runtime_error(\"Out of texture handles\");\n\t\t}\n\n\t\thandle.id = static_cast<uint32_t>(mTextureDescs.size());\n\t\thandle.mMode = mode;\n\t\tmTextureDescs.emplace_back(desc);\n\t\t\n\t}\n\n\treturn handle;\n}\n\nTextureManager::TextureDesc& TextureManager::getDesc(const TextureHandle& handle) {\n\tassert(handle && handle.id < mTextureDescs.size());\n\treturn mTextureDescs[handle.id];\n}\n\n}  // namespace Falcor\n",
			"file": "src/Falcor/Utils/Image/TextureManager.cpp",
			"file_size": 34240,
			"file_write_time": 133341877750621130,
			"settings":
			{
				"buffer_size": 34240,
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					4,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AgAAAIgZAAAAAAAAiRkAAAAAAAAAAAAAiRkAAAAAAACMGQAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAIgZAAAAAAAAiBkAAAAAAAAAAAAAAADwvw"
				],
				[
					5,
					1,
					"paste",
					null,
					"AQAAAIwZAAAAAAAAzBkAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAIwZAAAAAAAAjBkAAAAAAAAAAAAAAADwvw"
				],
				[
					8,
					1,
					"left_delete",
					null,
					"AQAAAIwZAAAAAAAAjBkAAAAAAABEAAAATExPR19FUlIgPDwgIlRleHR1cmUgIiA8PCBzcmNGaWxlbmFtZSA8PCAiIGNvbnZlcnNpb24gZmFpbGVkLlxuIgoJCQk",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAIwZAAAAAAAA0BkAAAAAAAAAAAAAAADwvw"
				],
				[
					24,
					1,
					"paste",
					null,
					"AQAAAO1EAAAAAAAACkUAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAO1EAAAAAAAA7UQAAAAAAAAAAAAAAADwvw"
				],
				[
					25,
					1,
					"insert",
					{
						"characters": "&"
					},
					"AQAAAApFAAAAAAAAC0UAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAApFAAAAAAAACkUAAAAAAAAAAAAAAADwvw"
				],
				[
					26,
					1,
					"insert",
					{
						"characters": " hande"
					},
					"BgAAAAtFAAAAAAAADEUAAAAAAAAAAAAADEUAAAAAAAANRQAAAAAAAAAAAAANRQAAAAAAAA5FAAAAAAAAAAAAAA5FAAAAAAAAD0UAAAAAAAAAAAAAD0UAAAAAAAAQRQAAAAAAAAAAAAAQRQAAAAAAABFFAAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAtFAAAAAAAAC0UAAAAAAAAAAAAAAADwvw"
				],
				[
					27,
					1,
					"left_delete",
					null,
					"AQAAABBFAAAAAAAAEEUAAAAAAAABAAAAZQ",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAABFFAAAAAAAAEUUAAAAAAAAAAAAAAADwvw"
				],
				[
					28,
					1,
					"insert",
					{
						"characters": "le,"
					},
					"AwAAABBFAAAAAAAAEUUAAAAAAAAAAAAAEUUAAAAAAAASRQAAAAAAAAAAAAASRQAAAAAAABNFAAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAABBFAAAAAAAAEEUAAAAAAAAAAAAAAADwvw"
				],
				[
					29,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAABNFAAAAAAAAFEUAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAABNFAAAAAAAAE0UAAAAAAAAAAAAAAADwvw"
				],
				[
					32,
					1,
					"insert",
					{
						"characters": "bool"
					},
					"BQAAALNEAAAAAAAAtEQAAAAAAAAAAAAAtEQAAAAAAAC0RAAAAAAAAB0AAABUZXh0dXJlTWFuYWdlcjo6VGV4dHVyZUhhbmRsZbREAAAAAAAAtUQAAAAAAAAAAAAAtUQAAAAAAAC2RAAAAAAAAAAAAAC2RAAAAAAAALdEAAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAANBEAAAAAAAAs0QAAAAAAAAAAAAAAADwvw"
				],
				[
					39,
					1,
					"left_delete",
					null,
					"AQAAAJhFAAAAAAAAmEUAAAAAAAAYAAAAVGV4dHVyZUhhbmRsZSBoYW5kbGU7CgoJ",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAJhFAAAAAAAAsEUAAAAAAAAAAAAAAAAyQA"
				],
				[
					42,
					6,
					"left_delete",
					null,
					"BgAAAIdHAAAAAAAAh0cAAAAAAAABAAAAZYZHAAAAAAAAhkcAAAAAAAABAAAAbIVHAAAAAAAAhUcAAAAAAAABAAAAZIRHAAAAAAAAhEcAAAAAAAABAAAAboNHAAAAAAAAg0cAAAAAAAABAAAAYYJHAAAAAAAAgkcAAAAAAAABAAAAaA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAIhHAAAAAAAAiEcAAAAAAAAAAAAAAADwvw"
				],
				[
					43,
					1,
					"insert",
					{
						"characters": "flase"
					},
					"BQAAAIJHAAAAAAAAg0cAAAAAAAAAAAAAg0cAAAAAAACERwAAAAAAAAAAAACERwAAAAAAAIVHAAAAAAAAAAAAAIVHAAAAAAAAhkcAAAAAAAAAAAAAhkcAAAAAAACHRwAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAIJHAAAAAAAAgkcAAAAAAAAAAAAAAADwvw"
				],
				[
					44,
					4,
					"left_delete",
					null,
					"BAAAAIZHAAAAAAAAhkcAAAAAAAABAAAAZYVHAAAAAAAAhUcAAAAAAAABAAAAc4RHAAAAAAAAhEcAAAAAAAABAAAAYYNHAAAAAAAAg0cAAAAAAAABAAAAbA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAIdHAAAAAAAAh0cAAAAAAAAAAAAAAADwvw"
				],
				[
					45,
					1,
					"insert",
					{
						"characters": "a"
					},
					"AQAAAINHAAAAAAAAhEcAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAINHAAAAAAAAg0cAAAAAAAAAAAAAAADwvw"
				],
				[
					46,
					1,
					"insert_completion",
					{
						"completion": "false",
						"format": "text",
						"keep_prefix": false,
						"must_insert": false,
						"trigger": "false"
					},
					"AgAAAIJHAAAAAAAAgkcAAAAAAAACAAAAZmGCRwAAAAAAAIdHAAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAIRHAAAAAAAAhEcAAAAAAAAAAAAAAADwvw"
				],
				[
					49,
					1,
					"insert",
					{
						"characters": "\nre"
					},
					"BAAAANRPAAAAAAAA1U8AAAAAAAAAAAAA1U8AAAAAAADaTwAAAAAAAAAAAADaTwAAAAAAANtPAAAAAAAAAAAAANtPAAAAAAAA3E8AAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAANRPAAAAAAAA1E8AAAAAAAAAAAAAAADwvw"
				],
				[
					50,
					1,
					"insert_completion",
					{
						"completion": "return",
						"format": "text",
						"keep_prefix": false,
						"must_insert": false,
						"trigger": "return"
					},
					"AgAAANpPAAAAAAAA2k8AAAAAAAACAAAAcmXaTwAAAAAAAOBPAAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAANxPAAAAAAAA3E8AAAAAAAAAAAAAAADwvw"
				],
				[
					51,
					1,
					"insert",
					{
						"characters": " f"
					},
					"AgAAAOBPAAAAAAAA4U8AAAAAAAAAAAAA4U8AAAAAAADiTwAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAOBPAAAAAAAA4E8AAAAAAAAAAAAAAADwvw"
				],
				[
					52,
					1,
					"insert_completion",
					{
						"completion": "false",
						"format": "text",
						"keep_prefix": false,
						"must_insert": false,
						"trigger": "false"
					},
					"AgAAAOFPAAAAAAAA4U8AAAAAAAABAAAAZuFPAAAAAAAA5k8AAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAOJPAAAAAAAA4k8AAAAAAAAAAAAAAADwvw"
				],
				[
					53,
					1,
					"insert",
					{
						"characters": ";"
					},
					"AQAAAOZPAAAAAAAA508AAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAOZPAAAAAAAA5k8AAAAAAAAAAAAAAADwvw"
				],
				[
					57,
					1,
					"insert",
					{
						"characters": "tr"
					},
					"AwAAAC5bAAAAAAAAL1sAAAAAAAAAAAAAL1sAAAAAAAAvWwAAAAAAAAYAAABoYW5kbGUvWwAAAAAAADBbAAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAC5bAAAAAAAANFsAAAAAAAAAAAAAAADwvw"
				],
				[
					58,
					1,
					"insert_completion",
					{
						"completion": "true",
						"format": "text",
						"keep_prefix": false,
						"must_insert": false,
						"trigger": "true"
					},
					"AgAAAC5bAAAAAAAALlsAAAAAAAACAAAAdHIuWwAAAAAAADJbAAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAADBbAAAAAAAAMFsAAAAAAAAAAAAAAADwvw"
				]
			]
		},
		{
			"contents": "/***************************************************************************\n # Copyright (c) 2015-22, NVIDIA CORPORATION. All rights reserved.\n #\n # Redistribution and use in source and binary forms, with or without\n # modification, are permitted provided that the following conditions\n # are met:\n #  * Redistributions of source code must retain the above copyright\n #    notice, this list of conditions and the following disclaimer.\n #  * Redistributions in binary form must reproduce the above copyright\n #    notice, this list of conditions and the following disclaimer in the\n #    documentation and/or other materials provided with the distribution.\n #  * Neither the name of NVIDIA CORPORATION nor the names of its\n #    contributors may be used to endorse or promote products derived\n #    from this software without specific prior written permission.\n #\n # THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS \"AS IS\" AND ANY\n # EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n # IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR\n # PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT OWNER OR\n # CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,\n # EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,\n # PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n # PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY\n # OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n # (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n # OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n **************************************************************************/\n#ifndef SRC_FALCOR_UTILS_IMAGE_TEXTUREMANAGER_H_\n#define SRC_FALCOR_UTILS_IMAGE_TEXTUREMANAGER_H_\n\n#include \"Falcor/Core/Program/ShaderVar.h\"\n#include \"Falcor/Utils/Image/LTX_Bitmap.h\"\n#include \"Falcor/Utils/ThreadPool.h\"\n\n#include \"TextureDataCacheLRU.h\"\n#include \"AsyncTextureLoader.h\"\n\n#include \"Scene/Material/VirtualTextureData.slang\"\n\n#include <mutex>\n\nnamespace Falcor {\n\nclass Device;\nclass VirtualTexturePage;\n\n/** Multi-threaded texture manager.\n\n\tThis class manages a collection of textures and implements\n\tasynchronous texture loading. All operations are thread-safe.\n\n\tEach managed texture is assigned a unique handle upon loading.\n\tThis handle is used in shader code to reference the given texture\n\tin the array of GPU texture descriptors.\n*/\nclass dlldecl TextureManager {\npublic:\n\tusing SharedPtr = std::shared_ptr<TextureManager>;\n\tusing TileList = std::vector<std::pair<fs::path, Falcor::uint2>>;\n\n\t~TextureManager();\n\n\t/** State of a managed texture.\n\t*/\n\tenum class TextureState {\n\t\tInvalid,        ///< Invalid/unknown texture.\n\t\tReferenced,     ///< Texture is referenced, but not yet loaded.\n\t\tConverting,     ///< Virtual texture (.ltx) being referenced, but not yet converted. Ongoing on-line conversion.\n\t\tLoaded,         ///< Texture has finished loading.\n\t};\n\n\t/** Sparse (virtual) texture info structure.\n\t*/\n\n//\tstruct VirtualTextureInfo {\n//\t};\n\n\t/** Handle to a managed texture.\n\t*/\n\tstruct TextureHandle {\n\n\t\tenum class Mode {\n\t\t\tUniform,\n\t\t\tTexture,       ///< Normal texture.\n\t\t\tVirtual,       ///< Virtual texture.\n\t\t\tUDIM_Texture,  ///< UDIM texture. No actual data/resource associated.\n\t\t};\n\n\t\tuint32_t id = kInvalidID;\n\t\tstatic const uint32_t kInvalidID = std::numeric_limits<uint32_t>::max();\n\n\t\tMode mMode = Mode::Texture;\n\t\t\n\t\tinline uint32_t getID() const { return id; }\n\t\tinline bool isValid() const { return id != kInvalidID; }\n\t\tinline bool isUDIMTexture() const { return mMode == Mode::UDIM_Texture; }\n\t\tinline Mode mode() const { return mMode; }\n\n\t\texplicit operator bool() const { return isValid(); }\n\t\tbool operator==(const TextureHandle& other) const { return id == other.id; }\n\t};\n\n\t/** Struct describing a managed texture.\n\t*/\n\tstruct TextureDesc {\n\t\tTextureState state = TextureState::Invalid;     ///< Current state of the texture.\n\t\tTexture::SharedPtr pTexture;                    ///< Valid texture object when state is 'Loaded', or nullptr if loading failed.\n\n\t\tbool isValid() const { return state != TextureState::Invalid; }\n\t};\n\n\t/** Create a texture manager.\n\t\t\\param[in] maxTextureCount Maximum number of textures that can be simultaneously managed.\n\t\t\\param[in] threadCount Number of worker threads.\n\t\t\\return A new object.\n\t*/\n\tstatic SharedPtr create(std::shared_ptr<Device> pDevice, size_t maxTextureCount, size_t threadCount = std::thread::hardware_concurrency());\n\n\t/** Add a texture to the manager.\n\t\tIf the texture is already managed, its existing handle is returned.\n\t\t\\param[in] pTexture The texture resource.\n\t\t\\return Unique handle to the texture.\n\t*/\n\tTextureHandle addTexture(const Texture::SharedPtr& pTexture);\n\n\t/** Requst loading a texture from file.\n\t\tThis will add the texture to the set of managed textures. The function returns a handle immediately.\n\t\tIf asynchronous loading is requested, the texture data will not be available until loading completes.\n\t\tThe returned handle is valid for the entire lifetime of the texture, until removeTexture() is called.\n\t\t\\param[in] path File path of the texture. This can be a full path or a relative path from a data directory.\n\t\t\\param[in] generateMipLevels Whether the full mip-chain should be generated.\n\t\t\\param[in] loadAsSRGB Load the texture as sRGB format if supported, otherwise linear color.\n\t\t\\param[in] bindFlags The bind flags for the texture resource.\n\t\t\\param[in] async Load asynchronously, otherwise the function blocks until the texture data is loaded.\n\t\t\\return Unique handle to the texture, or an invalid handle if the texture can't be found.\n\t*/\n\tbool loadTexture(TextureHandle& handle, const fs::path& path, bool generateMipLevels, bool loadAsSRGB, Resource::BindFlags bindFlags = Resource::BindFlags::ShaderResource, bool async = true, const std::string& udimMask = \"<UDIM>\", bool loadAsSparse = false);\n\n\tTexture::SharedPtr loadSparseTexture(const fs::path& path, bool generateMipLevels, bool loadAsSRGB, Resource::BindFlags bindFlags = Resource::BindFlags::ShaderResource);\n\n\t/** Wait for a requested texture to load.\n\t\tIf the handle is valid, the call blocks until the texture is loaded (or failed to load).\n\t\t\\param[in] handle Texture handle.\n\t*/\n\tvoid waitForTextureLoading(const TextureHandle& handle);\n\n\t/** Waits for all currently requested textures to be loaded.\n\t*/\n\tvoid waitForAllTexturesLoading();\n\n\t/** Remove a texture.\n\t\t\\param[in] handle Texture handle.\n\t*/\n\tvoid removeTexture(const TextureHandle& handle);\n\n\t/** Get a loaded texture. Call getTextureDesc() for more info.\n\t\t\\param[in] handle Texture handle.\n\t\t\\return Texture if loaded, or nullptr if handle doesn't exist or texture isn't yet loaded.\n\t*/\n\tTexture::SharedPtr getTexture(const TextureHandle& handle) const { return getTextureDesc(handle).pTexture; }\n\n\t/** Get a texture desc.\n\t\t\\param[in] handle Texture handle.\n\t\t\\return Texture desc, or invalid desc if handle is invalid.\n\t*/\n\tTextureDesc getTextureDesc(const TextureHandle& handle) const;\n\n\t/** Get texture desc count.\n\t\t\\return Number of texture descs.\n\t*/\n\tsize_t getTextureDescCount() const;\n\n\n\t/** Get UDIM texture desc count.\n\t  \\return Number of UDIM texture descs.\n\t*/\n\n\tsize_t getUDIMTextureTilesCount() const { return mUDIMTextureTilesCount; }\n\n\tsize_t getUDIMTexturesCount() const { return mUDIMTexturesCount; }\n\n\tbool hasUDIMTextures() const { return mHasUDIMTextures; };\n\n\tbool hasSparseTextures() const { return mHasSparseTextures; };\n\n\t/** Bind all textures into a shader var.\n\t\tThe shader var should refer to a Texture2D descriptor array of fixed size.\n\t\tThe array must be large enough, otherwise an exception is thrown.\n\t\tThis restriction will go away when unbounded descriptor arrays are supported (see #1321).\n\t\t\\param[in] var Shader var for descriptor array.\n\t\t\\param[in] descCount Size of descriptor array.\n\t*/\n\tvoid setShaderData(const ShaderVar& var, const size_t descCount) const;\n\tvoid setShaderData(const ShaderVar& var, const std::vector<Texture::SharedPtr>& textures) const;\n\n\tvoid setExtendedTexturesShaderData(const ShaderVar& var, const size_t descCount);\n\n\tvoid setVirtualTexturesShaderData(const ShaderVar& var, const ShaderVar& pagesBufferVar, const size_t descCount);\n\n\tvoid setUDIMTableShaderData(const ShaderVar& var, const size_t descCount) const;\n\n\tvoid finalize();\n\n\tvoid loadPages(const Texture::SharedPtr& pTexture, const std::vector<uint32_t>& pageIds);\n\tvoid loadPagesAsync(const Texture::SharedPtr& pTexture, const std::vector<uint32_t>& pageIds);\n\n\tvoid updateSparseBindInfo();\n\n\tbool getTextureHandle(const Texture* pTexture, TextureHandle& handle) const;\n\n\tBuffer::SharedPtr getPagesResidencyBuffer() { return mpVirtualPagesResidencyDataBuffer; }\n\tBuffer::SharedConstPtr getPagesResidencyBuffer() const { return mpVirtualPagesResidencyDataBuffer; }\n\n\tsize_t getVirtualTexturePagesStartIndex(const Texture* pTexture);\n\n\tconst std::map<const Texture*, size_t>& getVirtualPagesStartMap() const { return mVirtualPagesStartMap;}\n\nprivate:\n\tTextureManager(std::shared_ptr<Device> pDevice, size_t maxTextureCount, size_t threadCount);\n\n\t/** Builds data structures needed for sparse residency management.\n\t*/\n\tvoid buildSparseResidencyData();\n\n\t/** Key to uniquely identify a managed texture.\n\t*/\n\tstruct TextureKey {\n\t\tfs::path fullPath;\n\t\tbool generateMipLevels;\n\t\tbool loadAsSRGB;\n\t\tResource::BindFlags bindFlags;\n\n\t\tTextureKey(const fs::path& path, bool mips, bool srgb, Resource::BindFlags flags)\n\t\t\t: fullPath(path), generateMipLevels(mips), loadAsSRGB(srgb), bindFlags(flags)\n\t\t{}\n\n\t\tbool operator<(const TextureKey& rhs) const {\n\t\t\tif (fullPath != rhs.fullPath) return fullPath < rhs.fullPath;\n\t\t\telse if (generateMipLevels != rhs.generateMipLevels) return generateMipLevels < rhs.generateMipLevels;\n\t\t\telse if (loadAsSRGB != rhs.loadAsSRGB) return loadAsSRGB < rhs.loadAsSRGB;\n\t\t\telse return bindFlags < rhs.bindFlags;\n\t\t}\n\t};\n\n\tTextureHandle addDesc(const TextureDesc& desc, TextureHandle::Mode mode = TextureHandle::Mode::Texture);\n\tTextureDesc& getDesc(const TextureHandle& handle);\n\n\tDevice::SharedPtr mpDevice = nullptr;\n\n\tTextureDataCacheLRU::SharedPtr mpTextureDataCache = nullptr;\n\n\tmutable std::mutex mMutex;                                  ///< Mutex for synchronizing access to shared resources.\n\tmutable std::mutex mPageMutex;                              ///< Mutex for synchronizing texture page updates.\n\tstd::condition_variable mCondition;                         ///< Condition variable to wait on for loading to finish.\n\n\t// Internal state. Do not access outside of critical section.\n\tBS::multi_future<Texture*> mTextureLoadingTasks;\n\n\tstd::vector<TextureDesc> mTextureDescs;                     ///< Array of all texture descs, indexed by handle ID.\n\tstd::vector<TextureHandle> mFreeList;                       ///< List of unused handles.\n\tstd::map<TextureKey, TextureHandle> mKeyToHandle;           ///< Map from texture key to handle.\n\tstd::map<const Texture*, TextureHandle> mTextureToHandle;   ///< Map from texture ptr to handle.\n\n\tBuffer::SharedPtr mpExtendedTexturesDataBuffer;\n\n\tstd::vector<VirtualTextureData> mVirtualTexturesData;\n\tstd::vector<uint8_t> mVirtualPagesData;\n\tstd::map<const Texture*, size_t> mVirtualPagesStartMap;\n\n\tBuffer::SharedPtr mpVirtualTexturesDataBuffer;\n\tBuffer::SharedPtr mpVirtualPagesResidencyDataBuffer;\n\n\tbool mSparseTexturesEnabled = false;\n\tbool mHasSparseTextures = false;\n\tbool mHasUDIMTextures = false;\n\tbool mDirty = true;\n\tbool mDirtySparseResidency = true;\n\n\tAsyncTextureLoader mAsyncTextureLoader;                     ///< Utility for asynchronous texture loading.\n\tsize_t mLoadRequestsInProgress = 0;                         ///< Number of load requests currently in progress.\n\tsize_t mUDIMTextureTilesCount = 0;                          ///< Number of managed UDIM tile textures\n\tsize_t mUDIMTexturesCount = 0;\n\n\tstd::atomic<uint32_t> mSparseTexturesCount = 0;\n\n\tconst size_t mMaxTextureCount;                              ///< Maximum number of textures that can be simultaneously managed.\n\n\tTexture::SharedPtr mNullTexture;\n\n\tstd::map<uint32_t, LTX_Bitmap::SharedConstPtr> \t  mTextureLTXBitmapsMap;\n\tstd::vector<std::shared_ptr<VirtualTexturePage>>  mSparseDataPages;\n};\n\ninline std::string to_string(TextureManager::TextureHandle::Mode mode) {\n#define mode_2_string(a) case TextureManager::TextureHandle::Mode::a: return #a;\n  switch (mode) {\n  \t\tmode_2_string(Uniform);\n      mode_2_string(Texture);\n      mode_2_string(Virtual);\n      mode_2_string(UDIM_Texture);\n    default:\n      assert(false);\n      return \"Unknown TextureHandle::Mode\";\n  }\n#undef mode_2_string\n}\n\n}  // namespace Falcor\n\n#endif  // SRC_FALCOR_UTILS_IMAGE_TEXTUREMANAGER_H_\n",
			"file": "src/Falcor/Utils/Image/TextureManager.h",
			"file_size": 12764,
			"file_write_time": 133341876972029194,
			"settings":
			{
				"buffer_size": 12764,
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					7,
					1,
					"paste",
					null,
					"AQAAAGEWAAAAAAAAbhYAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAGEWAAAAAAAAYRYAAAAAAAAAAAAAAADwvw"
				],
				[
					8,
					1,
					"insert",
					{
						"characters": "&"
					},
					"AQAAAG4WAAAAAAAAbxYAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAG4WAAAAAAAAbhYAAAAAAAAAAAAAAADwvw"
				],
				[
					9,
					1,
					"insert",
					{
						"characters": " handle"
					},
					"BwAAAG8WAAAAAAAAcBYAAAAAAAAAAAAAcBYAAAAAAABxFgAAAAAAAAAAAABxFgAAAAAAAHIWAAAAAAAAAAAAAHIWAAAAAAAAcxYAAAAAAAAAAAAAcxYAAAAAAAB0FgAAAAAAAAAAAAB0FgAAAAAAAHUWAAAAAAAAAAAAAHUWAAAAAAAAdhYAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAG8WAAAAAAAAbxYAAAAAAAAAAAAAAADwvw"
				],
				[
					10,
					1,
					"insert",
					{
						"characters": ","
					},
					"AQAAAHYWAAAAAAAAdxYAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAHYWAAAAAAAAdhYAAAAAAAAAAAAAAADwvw"
				],
				[
					11,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAAHcWAAAAAAAAeBYAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAHcWAAAAAAAAdxYAAAAAAAAAAAAAAADwvw"
				],
				[
					15,
					1,
					"insert",
					{
						"characters": "bool"
					},
					"BQAAAEcWAAAAAAAASBYAAAAAAAAAAAAASBYAAAAAAABIFgAAAAAAAA0AAABUZXh0dXJlSGFuZGxlSBYAAAAAAABJFgAAAAAAAAAAAABJFgAAAAAAAEoWAAAAAAAAAAAAAEoWAAAAAAAASxYAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAEcWAAAAAAAAVBYAAAAAAAAAAAAAAADwvw"
				]
			]
		},
		{
			"contents": "/***************************************************************************\n # Copyright (c) 2015-22, NVIDIA CORPORATION. All rights reserved.\n #\n # Redistribution and use in source and binary forms, with or without\n # modification, are permitted provided that the following conditions\n # are met:\n #  * Redistributions of source code must retain the above copyright\n #    notice, this list of conditions and the following disclaimer.\n #  * Redistributions in binary form must reproduce the above copyright\n #    notice, this list of conditions and the following disclaimer in the\n #    documentation and/or other materials provided with the distribution.\n #  * Neither the name of NVIDIA CORPORATION nor the names of its\n #    contributors may be used to endorse or promote products derived\n #    from this software without specific prior written permission.\n #\n # THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS \"AS IS\" AND ANY\n # EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n # IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR\n # PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT OWNER OR\n # CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,\n # EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,\n # PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n # PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY\n # OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n # (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n # OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n **************************************************************************/\n#include \"stdafx.h\"\n#include \"MaterialTextureLoader.h\"\n\nnamespace Falcor {\n\nMaterialTextureLoader::MaterialTextureLoader(const Device::SharedPtr& pDevice, bool useSrgb)\n\t: mpDevice(pDevice)\n\t, mUseSrgb(useSrgb)\n{\n\tmpTextureManager = mpDevice->textureManager();\n}\n\nMaterialTextureLoader::~MaterialTextureLoader() {\n\tassignTextures();\n}\n\nbool MaterialTextureLoader::loadTexture(const Material::SharedPtr& pMaterial, Material::TextureSlot slot, const fs::path& path, bool loadAsSparse) {\n\tassert(pMaterial);\n\tif (!pMaterial->hasTextureSlot(slot)) {\n\t\tLLOG_WRN << \"MaterialTextureLoader::loadTexture() - Material '\" << pMaterial->getName() << \"' does not have texture slot '\" << to_string(slot) << \"'. Ignoring call.\";\n\t\treturn false;\n\t}\n\n\tbool generateMipLevels = true;\n\tbool loadAsSRGB = mUseSrgb && pMaterial->getTextureSlotInfo(slot).srgb;\n\tResource::BindFlags bindFlags = Resource::BindFlags::ShaderResource;\n\tstd::string udim_mask = \"<UDIM>\";\n\tbool async = true;\n\n\t// Request texture to be loaded.\n\tTextureManager::TextureHandle handle;\n\tif(!mpTextureManager->loadTexture(handle, path, generateMipLevels, loadAsSRGB, bindFlags, async, udim_mask, loadAsSparse)) {\n\t\treturn false;\n\t}\n\n\t// Store assignment to material for later.\n\tmTextureAssignments.emplace_back(TextureAssignment{ pMaterial, slot, handle });\n\n\tLLOG_DBG << (loadAsSparse ? \"Sparse\" : \"Simple\") << \" texture \" << path.string() << \" with handle mode \" << to_string(handle.mode()) << \" in assignment\";\n\treturn true;\n}\n\nvoid MaterialTextureLoader::assignTextures() {\n\tmpTextureManager->waitForAllTexturesLoading();\n\n\t// Assign textures to materials.\n\tfor (const auto& assignment : mTextureAssignments) {\n\t  // Assign generic handle\n\t\tauto pTexture = mpTextureManager->getTexture(assignment.handle);\n\t\tassignment.pMaterial->setTexture(assignment.textureSlot, pTexture);\n\t}\n}\n\n}  // namespace Falcor\n",
			"file": "src/Falcor/Scene/Material/MaterialTextureLoader.cpp",
			"file_size": 3574,
			"file_write_time": 133341883751992420,
			"settings":
			{
				"buffer_size": 3574,
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					11,
					3,
					"left_delete",
					null,
					"AwAAALoKAAAAAAAAugoAAAAAAAABAAAAILkKAAAAAAAAuQoAAAAAAAABAAAAPbgKAAAAAAAAuAoAAAAAAAABAAAAIA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAALsKAAAAAAAAuwoAAAAAAAAAAAAAAADwvw"
				],
				[
					12,
					1,
					"insert",
					{
						"characters": "\nif("
					},
					"BQAAALgKAAAAAAAAuQoAAAAAAAAAAAAAuQoAAAAAAAC6CgAAAAAAAAAAAAC6CgAAAAAAALsKAAAAAAAAAAAAALsKAAAAAAAAvAoAAAAAAAAAAAAAvAoAAAAAAAC9CgAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAALgKAAAAAAAAuAoAAAAAAAAAAAAAAADwvw"
				],
				[
					13,
					1,
					"insert",
					{
						"characters": "!"
					},
					"AQAAAL0KAAAAAAAAvgoAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAL0KAAAAAAAAvQoAAAAAAAAAAAAAAADwvw"
				],
				[
					16,
					1,
					"insert",
					{
						"characters": ";"
					},
					"AQAAALgKAAAAAAAAuQoAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAALgKAAAAAAAAuAoAAAAAAAAAAAAAAKB3QA"
				],
				[
					19,
					1,
					"insert",
					{
						"characters": "handle.l"
					},
					"CAAAAN0KAAAAAAAA3goAAAAAAAAAAAAA3goAAAAAAADfCgAAAAAAAAAAAADfCgAAAAAAAOAKAAAAAAAAAAAAAOAKAAAAAAAA4QoAAAAAAAAAAAAA4QoAAAAAAADiCgAAAAAAAAAAAADiCgAAAAAAAOMKAAAAAAAAAAAAAOMKAAAAAAAA5AoAAAAAAAAAAAAA5AoAAAAAAADlCgAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAN0KAAAAAAAA3QoAAAAAAAAAAAAAAADwvw"
				],
				[
					20,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAAOUKAAAAAAAA5goAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAOUKAAAAAAAA5QoAAAAAAAAAAAAAAADwvw"
				],
				[
					21,
					3,
					"left_delete",
					null,
					"AwAAAOUKAAAAAAAA5QoAAAAAAAABAAAAIOQKAAAAAAAA5AoAAAAAAAABAAAAbOMKAAAAAAAA4woAAAAAAAABAAAALg",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAOYKAAAAAAAA5goAAAAAAAAAAAAAAADwvw"
				],
				[
					22,
					1,
					"insert",
					{
						"characters": ","
					},
					"AQAAAOMKAAAAAAAA5AoAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAOMKAAAAAAAA4woAAAAAAAAAAAAAAADwvw"
				],
				[
					23,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAAOQKAAAAAAAA5QoAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAOQKAAAAAAAA5AoAAAAAAAAAAAAAAADwvw"
				],
				[
					26,
					1,
					"left_delete",
					null,
					"AQAAADQLAAAAAAAANAsAAAAAAAABAAAAOw",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAADULAAAAAAAANQsAAAAAAAAAAAAAAADwvw"
				],
				[
					27,
					1,
					"insert",
					{
						"characters": ")"
					},
					"AQAAADQLAAAAAAAANQsAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAADQLAAAAAAAANAsAAAAAAAAAAAAAAADwvw"
				],
				[
					28,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAADULAAAAAAAANgsAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAADULAAAAAAAANQsAAAAAAAAAAAAAAADwvw"
				],
				[
					29,
					1,
					"insert_snippet",
					{
						"contents": "{$0}"
					},
					"AQAAADYLAAAAAAAAOAsAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAADYLAAAAAAAANgsAAAAAAAAAAAAAAADwvw"
				],
				[
					30,
					1,
					"run_macro_file",
					{
						"file": "res://Packages/Default/Add Line in Braces.sublime-macro"
					},
					"BgAAADcLAAAAAAAAOAsAAAAAAAAAAAAAOAsAAAAAAAA5CwAAAAAAAAAAAAA5CwAAAAAAADoLAAAAAAAAAAAAADoLAAAAAAAAOwsAAAAAAAAAAAAAOAsAAAAAAAA4CwAAAAAAAAEAAAAJOAsAAAAAAAA6CwAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAADcLAAAAAAAANwsAAAAAAAAAAAAAAADwvw"
				],
				[
					31,
					1,
					"insert",
					{
						"characters": "re"
					},
					"AgAAADoLAAAAAAAAOwsAAAAAAAAAAAAAOwsAAAAAAAA8CwAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAADoLAAAAAAAAOgsAAAAAAAAAAAAAAADwvw"
				],
				[
					32,
					1,
					"insert_completion",
					{
						"completion": "return",
						"format": "text",
						"keep_prefix": false,
						"must_insert": false,
						"trigger": "return"
					},
					"AgAAADoLAAAAAAAAOgsAAAAAAAACAAAAcmU6CwAAAAAAAEALAAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAADwLAAAAAAAAPAsAAAAAAAAAAAAAAADwvw"
				],
				[
					33,
					1,
					"insert",
					{
						"characters": " f"
					},
					"AgAAAEALAAAAAAAAQQsAAAAAAAAAAAAAQQsAAAAAAABCCwAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAEALAAAAAAAAQAsAAAAAAAAAAAAAAADwvw"
				],
				[
					34,
					1,
					"insert_completion",
					{
						"completion": "false",
						"format": "text",
						"keep_prefix": false,
						"must_insert": false,
						"trigger": "false"
					},
					"AgAAAEELAAAAAAAAQQsAAAAAAAABAAAAZkELAAAAAAAARgsAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAEILAAAAAAAAQgsAAAAAAAAAAAAAAADwvw"
				],
				[
					35,
					1,
					"insert",
					{
						"characters": ";"
					},
					"AQAAAEYLAAAAAAAARwsAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAEYLAAAAAAAARgsAAAAAAAAAAAAAAADwvw"
				],
				[
					39,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AQAAAGUMAAAAAAAAZgwAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAGUMAAAAAAAAZQwAAAAAAAAAAAAAAADwvw"
				],
				[
					41,
					1,
					"reindent",
					null,
					"AQAAAGUMAAAAAAAAZgwAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAGUMAAAAAAAAZQwAAAAAAAAAAAAAAAAAAA"
				],
				[
					42,
					1,
					"insert",
					{
						"characters": "re"
					},
					"AgAAAGYMAAAAAAAAZwwAAAAAAAAAAAAAZwwAAAAAAABoDAAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAGYMAAAAAAAAZgwAAAAAAAAAAAAAAADwvw"
				],
				[
					43,
					1,
					"insert_completion",
					{
						"completion": "return",
						"format": "text",
						"keep_prefix": false,
						"must_insert": false,
						"trigger": "return"
					},
					"AgAAAGYMAAAAAAAAZgwAAAAAAAACAAAAcmVmDAAAAAAAAGwMAAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAGgMAAAAAAAAaAwAAAAAAAAAAAAAAADwvw"
				],
				[
					44,
					1,
					"insert",
					{
						"characters": " t"
					},
					"AgAAAGwMAAAAAAAAbQwAAAAAAAAAAAAAbQwAAAAAAABuDAAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAGwMAAAAAAAAbAwAAAAAAAAAAAAAAADwvw"
				],
				[
					45,
					1,
					"insert_completion",
					{
						"completion": "true",
						"format": "text",
						"keep_prefix": false,
						"must_insert": false,
						"trigger": "true"
					},
					"AgAAAG0MAAAAAAAAbQwAAAAAAAABAAAAdG0MAAAAAAAAcQwAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAG4MAAAAAAAAbgwAAAAAAAAAAAAAAADwvw"
				],
				[
					46,
					1,
					"insert",
					{
						"characters": ";"
					},
					"AQAAAHEMAAAAAAAAcgwAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAHEMAAAAAAAAcQwAAAAAAAAAAAAAAADwvw"
				],
				[
					51,
					1,
					"insert",
					{
						"characters": "bool"
					},
					"BQAAAAEIAAAAAAAAAggAAAAAAAAAAAAAAggAAAAAAAACCAAAAAAAAAQAAAB2b2lkAggAAAAAAAADCAAAAAAAAAAAAAADCAAAAAAAAAQIAAAAAAAAAAAAAAQIAAAAAAAABQgAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAEIAAAAAAAABQgAAAAAAAAAAAAAAADwvw"
				],
				[
					54,
					1,
					"insert",
					{
						"characters": " f"
					},
					"AgAAAIQJAAAAAAAAhQkAAAAAAAAAAAAAhQkAAAAAAACGCQAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAIQJAAAAAAAAhAkAAAAAAAAAAAAAAADwvw"
				],
				[
					55,
					1,
					"insert_completion",
					{
						"completion": "false",
						"format": "text",
						"keep_prefix": false,
						"must_insert": false,
						"trigger": "false"
					},
					"AgAAAIUJAAAAAAAAhQkAAAAAAAABAAAAZoUJAAAAAAAAigkAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAIYJAAAAAAAAhgkAAAAAAAAAAAAAAADwvw"
				]
			]
		},
		{
			"contents": "/***************************************************************************\n # Copyright (c) 2020, NVIDIA CORPORATION. All rights reserved.\n #\n # Redistribution and use in source and binary forms, with or without\n # modification, are permitted provided that the following conditions\n # are met:\n #  * Redistributions of source code must retain the above copyright\n #    notice, this list of conditions and the following disclaimer.\n #  * Redistributions in binary form must reproduce the above copyright\n #    notice, this list of conditions and the following disclaimer in the\n #    documentation and/or other materials provided with the distribution.\n #  * Neither the name of NVIDIA CORPORATION nor the names of its\n #    contributors may be used to endorse or promote products derived\n #    from this software without specific prior written permission.\n #\n # THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS ``AS IS'' AND ANY\n # EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n # IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR\n # PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT OWNER OR\n # CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,\n # EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,\n # PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n # PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY\n # OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n # (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n # OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n **************************************************************************/\n#include \"stdafx.h\"\n#include \"Material.h\"\n\n#include \"Falcor/Core/API/ResourceManager.h\"\n#include \"Core/Program/GraphicsProgram.h\"\n#include \"Core/Program/ProgramVars.h\"\n#include \"Utils/Color/ColorHelpers.slang\"\n\nnamespace Falcor {\n\nstatic_assert(sizeof(MaterialData) % 16 == 0, \"Material::MaterialData size should be a multiple of 16\");\n\nMaterial::UpdateFlags Material::sGlobalUpdates = Material::UpdateFlags::None;\n\nMaterial::Material(std::shared_ptr<Device> pDevice, const std::string& name) : mpDevice(pDevice), mName(name) {\n    markUpdates(UpdateFlags::DataChanged);\n}\n\nMaterial::SharedPtr Material::create(std::shared_ptr<Device> pDevice, const std::string& name)\n{\n    assert(pDevice);\n    Material* pMaterial = new Material(pDevice, name);\n    return SharedPtr(pMaterial);\n}\n\nMaterial::~Material() = default;\n\nbool Material::renderUI(Gui::Widgets& widget)\n{\n    // We're re-using the material's update flags here to track changes.\n    // Cache the previous flag so we can restore it before returning.\n    UpdateFlags prevUpdates = mUpdates;\n    mUpdates = UpdateFlags::None;\n\n    widget.text(\"Shading model:\");\n    if (getShadingModel() == ShadingModelMetalRough) widget.text(\"MetalRough\", true);\n    else if (getShadingModel() == ShadingModelSpecGloss) widget.text(\"SpecGloss\", true);\n    else should_not_get_here();\n\n    if (const auto& tex = getBaseColorTexture(); tex != nullptr)\n    {\n        widget.text(\"Base color: \" + tex->getSourceFilename());\n        widget.text(\"Texture info: \" + std::to_string(tex->getWidth()) + \"x\" + std::to_string(tex->getHeight()) + \" (\" + to_string(tex->getFormat()) + \")\");\n        widget.image(\"Base color\", tex, float2(100.f));\n        if (widget.button(\"Remove texture##BaseColor\")) setBaseColorTexture(nullptr);\n    }\n    else\n    {\n        float4 baseColor = getBaseColor();\n        if (widget.var(\"Base color\", baseColor, 0.f, 1.f, 0.01f)) setBaseColor(baseColor);\n    }\n\n    if (const auto& tex = getSpecularTexture(); tex != nullptr)\n    {\n        widget.text(\"Specular params: \" + tex->getSourceFilename());\n        widget.text(\"Texture info: \" + std::to_string(tex->getWidth()) + \"x\" + std::to_string(tex->getHeight()) + \" (\" + to_string(tex->getFormat()) + \")\");\n        widget.image(\"Specular params\", tex, float2(100.f));\n        if (widget.button(\"Remove texture##Specular\")) setSpecularTexture(nullptr);\n    }\n    else\n    {\n        float4 specularParams = getSpecularParams();\n        if (widget.var(\"Specular params\", specularParams, 0.f, 1.f, 0.01f)) setSpecularParams(specularParams);\n        widget.tooltip(\"The encoding depends on the shading model:\\n\\n\"\n            \"MetalRough:\\n\"\n            \"    occlusion (R), roughness (G), metallic (B)\\n\\n\"\n            \"SpecGloss:\\n\"\n            \"    specular color(RGB) and glossiness(A)\", true);\n\n        if (getShadingModel() == ShadingModelMetalRough)\n        {\n            float roughness = getRoughness();\n            if (widget.var(\"Roughness\", roughness, 0.f, 1.f, 0.01f)) setRoughness(roughness);\n\n            float metallic = getMetallic();\n            if (widget.var(\"Metallic\", metallic, 0.f, 1.f, 0.01f)) setMetallic(metallic);\n        }\n    }\n\n    if (const auto& tex = getNormalMap(); tex != nullptr)\n    {\n        widget.text(\"Normal map: \" + tex->getSourceFilename());\n        widget.text(\"Texture info: \" + std::to_string(tex->getWidth()) + \"x\" + std::to_string(tex->getHeight()) + \" (\" + to_string(tex->getFormat()) + \")\");\n        widget.image(\"Normal map\", tex, float2(100.f));\n        if (widget.button(\"Remove texture##NormalMap\")) setNormalMap(nullptr);\n    }\n\n    if (const auto& tex = getEmissiveTexture(); tex != nullptr)\n    {\n        widget.text(\"Emissive color: \" + tex->getSourceFilename());\n        widget.text(\"Texture info: \" + std::to_string(tex->getWidth()) + \"x\" + std::to_string(tex->getHeight()) + \" (\" + to_string(tex->getFormat()) + \")\");\n        widget.image(\"Emissive color\", tex, float2(100.f));\n        if (widget.button(\"Remove texture##Emissive\")) setEmissiveTexture(nullptr);\n    }\n    else\n    {\n        float3 emissiveColor = getEmissiveColor();\n        if (widget.var(\"Emissive color\", emissiveColor, 0.f, 1.f, 0.01f)) setEmissiveColor(emissiveColor);\n    }\n\n    float emissiveFactor = getEmissiveFactor();\n    if (widget.var(\"Emissive factor\", emissiveFactor, 0.f, std::numeric_limits<float>::max(), 0.01f)) setEmissiveFactor(emissiveFactor);\n\n    if (const auto& tex = getSpecularTransmissionTexture(); tex != nullptr)\n    {\n        widget.text(\"Specular transmission: \" + tex->getSourceFilename());\n        widget.text(\"Texture info: \" + std::to_string(tex->getWidth()) + \"x\" + std::to_string(tex->getHeight()) + \" (\" + to_string(tex->getFormat()) + \")\");\n        widget.image(\"Specular transmission\", tex, float2(100.f));\n        if (widget.button(\"Remove texture##Transmission\")) setSpecularTransmissionTexture(nullptr);\n    }\n    else\n    {\n        float specTransmission = getSpecularTransmission();\n        if (widget.var(\"Specular transmission\", specTransmission, 0.f, 1.f, 0.01f)) setSpecularTransmission(specTransmission);\n    }\n\n    float IoR = getIndexOfRefraction();\n    if (widget.var(\"Index of refraction\", IoR, 1.f, std::numeric_limits<float>::max(), 0.01f)) setIndexOfRefraction(IoR);\n\n    bool doubleSided = isDoubleSided();\n    if (widget.checkbox(\"Double-sided\", doubleSided)) setDoubleSided(doubleSided);\n\n    // Restore update flags.\n    bool changed = mUpdates != UpdateFlags::None;\n    markUpdates(prevUpdates | mUpdates);\n\n    return changed;\n}\n\nvoid Material::setShadingModel(uint32_t model)\n{\n    setFlags(PACK_SHADING_MODEL(mData.flags, model));\n}\n\nvoid Material::setAlphaMode(uint32_t alphaMode)\n{\n    setFlags(PACK_ALPHA_MODE(mData.flags, alphaMode));\n}\n\nvoid Material::setDoubleSided(bool doubleSided)\n{\n    setFlags(PACK_DOUBLE_SIDED(mData.flags, doubleSided ? 1 : 0));\n}\n\nvoid Material::setAlphaThreshold(float alpha)\n{\n    if (mData.alphaThreshold != alpha)\n    {\n        mData.alphaThreshold = alpha;\n        markUpdates(UpdateFlags::DataChanged);\n    }\n}\n\nvoid Material::setIndexOfRefraction(float IoR) {\n    if (mData.IoR != IoR) {\n        mData.IoR = IoR;\n        markUpdates(UpdateFlags::DataChanged);\n    }\n}\n\nvoid Material::setReflectivity(float reflectivity) {\n    if (mData.reflectivity != reflectivity) {\n        mData.reflectivity = reflectivity;\n        markUpdates(UpdateFlags::DataChanged);\n    }\n}\n\nvoid Material::setNestedPriority(uint32_t priority)\n{\n    const uint32_t maxPriority = (1U << NESTED_PRIORITY_BITS) - 1;\n    if (priority > maxPriority)\n    {\n        logWarning(\"Requested nested priority \" + std::to_string(priority) + \" for material '\" + mName + \"' is out of range. Clamping to \" + std::to_string(maxPriority) + \".\");\n        priority = maxPriority;\n    }\n    setFlags(PACK_NESTED_PRIORITY(mData.flags, priority));\n}\n\nvoid Material::setSampler(Sampler::SharedPtr pSampler)\n{\n    if (pSampler != mResources.samplerState)\n    {\n        mResources.samplerState = pSampler;\n        markUpdates(UpdateFlags::ResourcesChanged);\n    }\n}\n\nvoid Material::setTexture(TextureSlot slot, Texture::SharedPtr pTexture)\n{\n    switch (slot)\n    {\n    case TextureSlot::BaseColor:\n        setBaseColorTexture(pTexture);\n        break;\n    case TextureSlot::Specular:\n        setSpecularTexture(pTexture);\n        break;\n    case TextureSlot::Roughness:\n        setRoughnessTexture(pTexture);\n        break;\n    case TextureSlot::Emissive:\n        setEmissiveTexture(pTexture);\n        break;\n    case TextureSlot::Normal:\n        setNormalMap(pTexture);\n        break;\n    case TextureSlot::Occlusion:\n        setOcclusionMap(pTexture);\n        break;\n    case TextureSlot::SpecularTransmission:\n        setSpecularTransmissionTexture(pTexture);\n        break;\n    default:\n        should_not_get_here();\n    }\n}\n\nTexture::SharedPtr Material::getTexture(TextureSlot slot) const\n{\n    switch (slot)\n    {\n    case TextureSlot::BaseColor:\n        return getBaseColorTexture();\n    case TextureSlot::Specular:\n        return getSpecularTexture();\n    case TextureSlot::Roughness:\n        return getRoughnessTexture();\n    case TextureSlot::Emissive:\n        return getEmissiveTexture();\n    case TextureSlot::Normal:\n        return getNormalMap();\n    case TextureSlot::Occlusion:\n        return getOcclusionMap();\n    case TextureSlot::SpecularTransmission:\n        return getSpecularTransmissionTexture();\n    default:\n        should_not_get_here();\n    }\n    return nullptr;\n}\n\nuint2 Material::getMaxTextureDimensions() const\n{\n    uint2 dim = uint2(0);\n    for (uint32_t i = 0; i < (uint32_t)TextureSlot::Count; i++)\n    {\n        const auto& t = getTexture((TextureSlot)i);\n        if (t) dim = max(dim, uint2(t->getWidth(), t->getHeight()));\n    }\n    return dim;\n}\n\nvoid Material::loadTexture(TextureSlot slot, const std::string& filename, bool useSrgb) {\n    assert(mpDevice);\n    std::string fullpath;\n    if (findFileInDataDirectories(filename, fullpath)) {\n        auto pTexture = mpDevice->resourceManager()->createSparseTextureFromFile(fullpath, true, useSrgb && isSrgbTextureRequired(slot));\n        if (pTexture) {\n            setTexture(slot, pTexture);\n            // Flush and sync in order to prevent the upload heap from growing too large. Doing so after\n            // every texture creation is overly conservative, and will likely lead to performance issues\n            // due to the forced CPU/GPU sync.\n            mpDevice->flushAndSync();\n        }\n    }\n}\n\nvoid Material::clearTexture(TextureSlot slot) {\n    setTexture(slot, nullptr);\n}\n\nbool Material::isSrgbTextureRequired(TextureSlot slot) {\n    uint32_t shadingModel = getShadingModel();\n\n    switch (slot) {\n        case TextureSlot::Specular:\n            return false;\n            return (shadingModel == ShadingModelSpecGloss);\n        case TextureSlot::BaseColor:\n        case TextureSlot::Emissive:\n        case TextureSlot::Occlusion:\n            return true;\n        case TextureSlot::Normal:\n        case TextureSlot::Roughness:\n            return false;\n        default:\n            should_not_get_here();\n            return false;\n    }\n}\n\nvoid Material::setBaseColorTexture(Texture::SharedPtr pBaseColor) {\n    if (mResources.baseColor != pBaseColor) {\n        mResources.baseColor = pBaseColor;\n        markUpdates(UpdateFlags::ResourcesChanged);\n        updateBaseColorType();\n        bool hasAlpha = pBaseColor && doesFormatHasAlpha(pBaseColor->getFormat());\n        setAlphaMode(hasAlpha ? AlphaModeMask : AlphaModeOpaque);\n    }\n}\n\nvoid Material::setSpecularTexture(Texture::SharedPtr pSpecular) {\n    if (mResources.specular != pSpecular) {\n        mResources.specular = pSpecular;\n        markUpdates(UpdateFlags::ResourcesChanged);\n        updateSpecularType();\n    }\n}\n\nvoid Material::setRoughnessTexture(Texture::SharedPtr pRoughness) {\n    if (mResources.roughness != pRoughness) {\n        mResources.roughness = pRoughness;\n        markUpdates(UpdateFlags::ResourcesChanged);\n        updateRoughnessType();\n    }\n}\n\nvoid Material::setEmissiveTexture(const Texture::SharedPtr& pEmissive) {\n    if (mResources.emissive != pEmissive) {\n        mResources.emissive = pEmissive;\n        markUpdates(UpdateFlags::ResourcesChanged);\n        updateEmissiveType();\n    }\n}\n\nvoid Material::setSpecularTransmissionTexture(const Texture::SharedPtr& pSpecularTransmission) {\n    if (mResources.specularTransmission != pSpecularTransmission) {\n        mResources.specularTransmission = pSpecularTransmission;\n        markUpdates(UpdateFlags::ResourcesChanged);\n        updateSpecularTransmissionType();\n    }\n}\n\nvoid Material::setBaseColor(const float4& color) {\n    if (mData.baseColor != color) {\n        mData.baseColor = color;\n        markUpdates(UpdateFlags::DataChanged);\n        updateBaseColorType();\n    }\n}\n\nvoid Material::setSpecularParams(const float4& color) {\n    if (mData.specular != color) {\n        mData.specular = color;\n        markUpdates(UpdateFlags::DataChanged);\n        updateSpecularType();\n    }\n}\n\nvoid Material::setRoughness(float roughness) {\n    if (getShadingModel() != ShadingModelMetalRough) {\n        logWarning(\"Ignoring setRoughness(). Material '\" + mName + \"' does not use the metallic/roughness shading model.\");\n        return;\n    }\n\n    if (mData.roughness != roughness) {\n        mData.roughness = roughness;\n        markUpdates(UpdateFlags::DataChanged);\n        updateRoughnessType();\n    }\n}\n\nvoid Material::setMetallic(float metallic) {\n    if (getShadingModel() != ShadingModelMetalRough) {\n        logWarning(\"Ignoring setMetallic(). Material '\" + mName + \"' does not use the metallic/roughness shading model.\");\n        return;\n    }\n\n    if (mData.specular.b != metallic) {\n        mData.specular.b = metallic;\n        markUpdates(UpdateFlags::DataChanged);\n        updateSpecularType();\n    }\n}\n\nvoid Material::setSpecularTransmission(float specularTransmission) {\n    if (mData.specularTransmission != specularTransmission) {\n        mData.specularTransmission = specularTransmission;\n        markUpdates(UpdateFlags::DataChanged);\n        updateSpecularTransmissionType();\n    }\n}\n\nvoid Material::setVolumeAbsorption(const float3& volumeAbsorption) {\n    if (mData.volumeAbsorption != volumeAbsorption) {\n        mData.volumeAbsorption = volumeAbsorption;\n        markUpdates(UpdateFlags::DataChanged);\n    }\n}\n\nvoid Material::setEmissiveColor(const float3& color) {\n    if (mData.emissive != color) {\n        mData.emissive = color;\n        markUpdates(UpdateFlags::DataChanged);\n        updateEmissiveType();\n    }\n}\n\nvoid Material::setEmissiveFactor(float factor) {\n    if (mData.emissiveFactor != factor) {\n        mData.emissiveFactor = factor;\n        markUpdates(UpdateFlags::DataChanged);\n        updateEmissiveType();\n    }\n}\n\nvoid Material::setNormalMap(Texture::SharedPtr pNormalMap) {\n    if (mResources.normalMap != pNormalMap) {\n        mResources.normalMap = pNormalMap;\n        markUpdates(UpdateFlags::ResourcesChanged);\n        uint32_t normalMode = NormalMapUnused;\n        if (pNormalMap) {\n            switch(getFormatChannelCount(pNormalMap->getFormat())) {\n                case 2:\n                    normalMode = NormalMapRG;\n                    break;\n                case 3:\n                case 4: // Some texture formats don't support RGB, only RGBA. We have no use for the alpha channel in the normal map.\n                    normalMode = NormalMapRGB;\n                    break;\n                default:\n                    should_not_get_here();\n                    logWarning(\"Unsupported normal map format for material \" + mName);\n            }\n        }\n        setFlags(PACK_NORMAL_MAP_TYPE(mData.flags, normalMode));\n    }\n}\n\nvoid Material::setOcclusionMap(Texture::SharedPtr pOcclusionMap) {\n    if (mResources.occlusionMap != pOcclusionMap) {\n        mResources.occlusionMap = pOcclusionMap;\n        markUpdates(UpdateFlags::ResourcesChanged);\n        updateOcclusionFlag();\n    }\n}\n\nbool Material::operator==(const Material& other) const\n{\n#define compare_field(_a) if (mData._a != other.mData._a) return false\n    compare_field(baseColor);\n    compare_field(specular);\n    compare_field(roughness);\n    compare_field(emissive);\n    compare_field(emissiveFactor);\n    compare_field(alphaThreshold);\n    compare_field(IoR);\n    compare_field(specularTransmission);\n    compare_field(flags);\n    compare_field(volumeAbsorption);\n#undef compare_field\n\n#define compare_texture(_a) if (mResources._a != other.mResources._a) return false\n    compare_texture(baseColor);\n    compare_texture(specular);\n    compare_texture(roughness);\n    compare_texture(emissive);\n    compare_texture(normalMap);\n    compare_texture(occlusionMap);\n    compare_texture(specularTransmission);\n#undef compare_texture\n    if (mResources.samplerState != other.mResources.samplerState) return false;\n    return true;\n}\n\nvoid Material::markUpdates(UpdateFlags updates)\n{\n    mUpdates |= updates;\n    sGlobalUpdates |= updates;\n}\n\nvoid Material::setFlags(uint32_t flags)\n{\n    if (mData.flags != flags)\n    {\n        mData.flags = flags;\n        markUpdates(UpdateFlags::DataChanged);\n    }\n}\n\ntemplate<typename vec>\nstatic uint32_t getChannelMode(bool hasTexture, const vec& color)\n{\n    if (hasTexture) return ChannelTypeTexture;\n    if (luminance(color) == 0) return ChannelTypeUnused;\n    return ChannelTypeConst;\n}\n\nvoid Material::updateBaseColorType()\n{\n    setFlags(PACK_DIFFUSE_TYPE(mData.flags, getChannelMode(mResources.baseColor != nullptr, mData.baseColor)));\n}\n\nvoid Material::updateSpecularType()\n{\n    setFlags(PACK_SPECULAR_TYPE(mData.flags, getChannelMode(mResources.specular != nullptr, mData.specular)));\n}\n\nvoid Material::updateRoughnessType()\n{\n    setFlags(PACK_ROUGHNESS_TYPE(mData.flags, getChannelMode(mResources.roughness != nullptr, mData.roughness)));\n}\n\nvoid Material::updateEmissiveType()\n{\n    setFlags(PACK_EMISSIVE_TYPE(mData.flags, getChannelMode(mResources.emissive != nullptr, mData.emissive * mData.emissiveFactor)));\n}\n\nvoid Material::updateSpecularTransmissionType()\n{\n    setFlags(PACK_SPEC_TRANS_TYPE(mData.flags, getChannelMode(mResources.specularTransmission != nullptr, mData.specularTransmission)));\n}\n\nvoid Material::updateOcclusionFlag()\n{\n    bool hasMap = false;\n    switch (EXTRACT_SHADING_MODEL(mData.flags))\n    {\n    case ShadingModelMetalRough:\n        hasMap = (mResources.specular != nullptr);\n        break;\n    case ShadingModelSpecGloss:\n        hasMap = (mResources.occlusionMap != nullptr);\n        break;\n    default:\n        should_not_get_here();\n    }\n    bool shouldEnable = mOcclusionMapEnabled && hasMap;\n    setFlags(PACK_OCCLUSION_MAP(mData.flags, shouldEnable ? 1 : 0));\n}\n\n#ifdef SCRIPTING\nSCRIPT_BINDING(Material)\n{\n    pybind11::enum_<Material::TextureSlot> textureSlot(m, \"MaterialTextureSlot\");\n    textureSlot.value(\"BaseColor\", Material::TextureSlot::BaseColor);\n    textureSlot.value(\"Specular\", Material::TextureSlot::Specular);\n    textureSlot.value(\"Roughness\", Material::TextureSlot::Roughness);\n    textureSlot.value(\"Emissive\", Material::TextureSlot::Emissive);\n    textureSlot.value(\"Normal\", Material::TextureSlot::Normal);\n    textureSlot.value(\"Occlusion\", Material::TextureSlot::Occlusion);\n    textureSlot.value(\"SpecularTransmission\", Material::TextureSlot::SpecularTransmission);\n\n    pybind11::class_<Material, Material::SharedPtr> material(m, \"Material\");\n    material.def_property_readonly(\"name\", &Material::getName);\n    material.def_property(\"baseColor\", &Material::getBaseColor, &Material::setBaseColor);\n    material.def_property(\"specularParams\", &Material::getSpecularParams, &Material::setSpecularParams);\n    material.def_property(\"roughness\", &Material::getRoughness, &Material::setRoughness);\n    material.def_property(\"metallic\", &Material::getMetallic, &Material::setMetallic);\n    material.def_property(\"specularTransmission\", &Material::getSpecularTransmission, &Material::setSpecularTransmission);\n    material.def_property(\"volumeAbsorption\", &Material::getVolumeAbsorption, &Material::setVolumeAbsorption);\n    material.def_property(\"indexOfRefraction\", &Material::getIndexOfRefraction, &Material::setIndexOfRefraction);\n    material.def_property(\"emissiveColor\", &Material::getEmissiveColor, &Material::setEmissiveColor);\n    material.def_property(\"emissiveFactor\", &Material::getEmissiveFactor, &Material::setEmissiveFactor);\n    material.def_property(\"alphaMode\", &Material::getAlphaMode, &Material::setAlphaMode);\n    material.def_property(\"alphaThreshold\", &Material::getAlphaThreshold, &Material::setAlphaThreshold);\n    material.def_property(\"doubleSided\", &Material::isDoubleSided, &Material::setDoubleSided);\n    material.def_property(\"nestedPriority\", &Material::getNestedPriority, &Material::setNestedPriority);\n\n    material.def(\"loadTexture\", &Material::loadTexture, \"slot\"_a, \"filename\"_a, \"useSrgb\"_a = true);\n    material.def(\"clearTexture\", &Material::clearTexture, \"slot\"_a);\n}\n#endif\n\n}  // namespace Falcor\n",
			"file": "src/Falcor/Scene/Material/Material.cpp",
			"file_size": 21711,
			"file_write_time": 133352798597027383,
			"settings":
			{
				"buffer_size": 21711,
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					1,
					1,
					"revert",
					null,
					"AwAAAAAAAAAAAAAAAAAAAAAAAAAxNQAALyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKgogIyBDb3B5cmlnaHQgKGMpIDIwMTUtMjIsIE5WSURJQSBDT1JQT1JBVElPTi4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KICMKICMgUmVkaXN0cmlidXRpb24gYW5kIHVzZSBpbiBzb3VyY2UgYW5kIGJpbmFyeSBmb3Jtcywgd2l0aCBvciB3aXRob3V0CiAjIG1vZGlmaWNhdGlvbiwgYXJlIHBlcm1pdHRlZCBwcm92aWRlZCB0aGF0IHRoZSBmb2xsb3dpbmcgY29uZGl0aW9ucwogIyBhcmUgbWV0OgogIyAgKiBSZWRpc3RyaWJ1dGlvbnMgb2Ygc291cmNlIGNvZGUgbXVzdCByZXRhaW4gdGhlIGFib3ZlIGNvcHlyaWdodAogIyAgICBub3RpY2UsIHRoaXMgbGlzdCBvZiBjb25kaXRpb25zIGFuZCB0aGUgZm9sbG93aW5nIGRpc2NsYWltZXIuCiAjICAqIFJlZGlzdHJpYnV0aW9ucyBpbiBiaW5hcnkgZm9ybSBtdXN0IHJlcHJvZHVjZSB0aGUgYWJvdmUgY29weXJpZ2h0CiAjICAgIG5vdGljZSwgdGhpcyBsaXN0IG9mIGNvbmRpdGlvbnMgYW5kIHRoZSBmb2xsb3dpbmcgZGlzY2xhaW1lciBpbiB0aGUKICMgICAgZG9jdW1lbnRhdGlvbiBhbmQvb3Igb3RoZXIgbWF0ZXJpYWxzIHByb3ZpZGVkIHdpdGggdGhlIGRpc3RyaWJ1dGlvbi4KICMgICogTmVpdGhlciB0aGUgbmFtZSBvZiBOVklESUEgQ09SUE9SQVRJT04gbm9yIHRoZSBuYW1lcyBvZiBpdHMKICMgICAgY29udHJpYnV0b3JzIG1heSBiZSB1c2VkIHRvIGVuZG9yc2Ugb3IgcHJvbW90ZSBwcm9kdWN0cyBkZXJpdmVkCiAjICAgIGZyb20gdGhpcyBzb2Z0d2FyZSB3aXRob3V0IHNwZWNpZmljIHByaW9yIHdyaXR0ZW4gcGVybWlzc2lvbi4KICMKICMgVEhJUyBTT0ZUV0FSRSBJUyBQUk9WSURFRCBCWSBUSEUgQ09QWVJJR0hUIEhPTERFUlMgIkFTIElTIiBBTkQgQU5ZCiAjIEVYUFJFU1MgT1IgSU1QTElFRCBXQVJSQU5USUVTLCBJTkNMVURJTkcsIEJVVCBOT1QgTElNSVRFRCBUTywgVEhFCiAjIElNUExJRUQgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFkgQU5EIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUgogIyBQVVJQT1NFIEFSRSBESVNDTEFJTUVELiAgSU4gTk8gRVZFTlQgU0hBTEwgVEhFIENPUFlSSUdIVCBPV05FUiBPUgogIyBDT05UUklCVVRPUlMgQkUgTElBQkxFIEZPUiBBTlkgRElSRUNULCBJTkRJUkVDVCwgSU5DSURFTlRBTCwgU1BFQ0lBTCwKICMgRVhFTVBMQVJZLCBPUiBDT05TRVFVRU5USUFMIERBTUFHRVMgKElOQ0xVRElORywgQlVUIE5PVCBMSU1JVEVEIFRPLAogIyBQUk9DVVJFTUVOVCBPRiBTVUJTVElUVVRFIEdPT0RTIE9SIFNFUlZJQ0VTOyBMT1NTIE9GIFVTRSwgREFUQSwgT1IKICMgUFJPRklUUzsgT1IgQlVTSU5FU1MgSU5URVJSVVBUSU9OKSBIT1dFVkVSIENBVVNFRCBBTkQgT04gQU5ZIFRIRU9SWQogIyBPRiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQ09OVFJBQ1QsIFNUUklDVCBMSUFCSUxJVFksIE9SIFRPUlQKICMgKElOQ0xVRElORyBORUdMSUdFTkNFIE9SIE9USEVSV0lTRSkgQVJJU0lORyBJTiBBTlkgV0FZIE9VVCBPRiBUSEUgVVNFCiAjIE9GIFRISVMgU09GVFdBUkUsIEVWRU4gSUYgQURWSVNFRCBPRiBUSEUgUE9TU0lCSUxJVFkgT0YgU1VDSCBEQU1BR0UuCiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi8KI2luY2x1ZGUgInN0ZGFmeC5oIgojaW5jbHVkZSAiQmFzaWNNYXRlcmlhbC5oIgojaW5jbHVkZSAiRmFsY29yL0V4cGVyaW1lbnRhbC9TY2VuZS9NYXRlcmlhbHMvTG9iZVR5cGUuc2xhbmciCgojaW5jbHVkZSAiTWF0ZXJpYWxTeXN0ZW0uaCIKI2luY2x1ZGUgIk1hdGVyaWFsLmgiCgpuYW1lc3BhY2UgRmFsY29yIHsKCm5hbWVzcGFjZSB7CgogICAgc3RhdGljX2Fzc2VydChzaXplb2YoVGV4dHVyZUhhbmRsZSkgPT0gNCk7CiAgICBzdGF0aWNfYXNzZXJ0KHNpemVvZihNYXRlcmlhbEhlYWRlcikgPT0gOCk7CiAgICBzdGF0aWNfYXNzZXJ0KHNpemVvZihNYXRlcmlhbFBheWxvYWQpID09IDEyMCk7CiAgICBzdGF0aWNfYXNzZXJ0KHNpemVvZihNYXRlcmlhbERhdGFCbG9iKSA9PSAxMjgpOwogICAgc3RhdGljX2Fzc2VydChzdGF0aWNfY2FzdDx1aW50MzJfdD4oTWF0ZXJpYWxUeXBlOjpCdWlsdGluQ291bnQpIDw9ICgxdSA8PCBNYXRlcmlhbEhlYWRlcjo6a01hdGVyaWFsVHlwZUJpdHMpLCAiTWF0ZXJpYWxUeXBlIGNvdW50IGV4Y2VlZHMgdGhlIG1heGltdW0iKTsKICAgIHN0YXRpY19hc3NlcnQoc3RhdGljX2Nhc3Q8dWludDMyX3Q+KEFscGhhTW9kZTo6Q291bnQpIDw9ICgxdSA8PCBNYXRlcmlhbEhlYWRlcjo6a0FscGhhTW9kZUJpdHMpLCAiQWxwaGFNb2RlIGJpdCBjb3VudCBleGNlZWRzIHRoZSBtYXhpbXVtIik7CiAgICBzdGF0aWNfYXNzZXJ0KHN0YXRpY19jYXN0PHVpbnQzMl90PihMb2JlVHlwZTo6QWxsKSA8ICgxdSA8PCBNYXRlcmlhbEhlYWRlcjo6a0xvYmVUeXBlQml0cyksICJMb2JlVHlwZSBiaXQgY291bnQgZXhjZWVkcyB0aGUgbWF4aW11bSIpOwogICAgc3RhdGljX2Fzc2VydChzdGF0aWNfY2FzdDx1aW50MzJfdD4oVGV4dHVyZUhhbmRsZTo6TW9kZTo6Q291bnQpIDw9ICgxdSA8PCBUZXh0dXJlSGFuZGxlOjprTW9kZUJpdHMpLCAiVGV4dHVyZUhhbmRsZTo6TW9kZSBiaXQgY291bnQgZXhjZWVkcyB0aGUgbWF4aW11bSIpOwogICAgc3RhdGljX2Fzc2VydChNYXRlcmlhbEhlYWRlcjo6a1RvdGFsSGVhZGVyQml0c1ggPD0gMzIsICJNYXRlcmlhbEhlYWRlciBiaXQgY291bnQgeCBleGNlZWRzIHRoZSBtYXhpbXVtIik7CiAgICBzdGF0aWNfYXNzZXJ0KE1hdGVyaWFsSGVhZGVyOjprVG90YWxIZWFkZXJCaXRzWSA8PSAzMiwgIk1hdGVyaWFsSGVhZGVyIGJpdCBjb3VudCB5IGV4Y2VlZHMgdGhlIG1heGltdW0iKTsKICAgIHN0YXRpY19hc3NlcnQoTWF0ZXJpYWxIZWFkZXI6OmtBbHBoYVRocmVzaG9sZEJpdHMgPT0gMTYsICJNYXRlcmlhbEhlYWRlciBhbHBoYSB0aHJlc2hvbGQgYml0IGNvdW50IG11c3QgYmUgMTYiKTsKCn0KCmJvb2wgb3BlcmF0b3I9PShjb25zdCBNYXRlcmlhbEhlYWRlciYgbGhzLCBjb25zdCBNYXRlcmlhbEhlYWRlciYgcmhzKSB7CiAgICByZXR1cm4gbGhzLnBhY2tlZERhdGEgPT0gcmhzLnBhY2tlZERhdGE7Cn0KCk1hdGVyaWFsOjpNYXRlcmlhbChEZXZpY2U6OlNoYXJlZFB0ciBwRGV2aWNlLCBjb25zdCBzdGQ6OnN0cmluZyYgbmFtZSwgTWF0ZXJpYWxUeXBlIHR5cGUpOiBtcERldmljZShwRGV2aWNlKSwgbU5hbWUobmFtZSkgewogICAgbUhlYWRlci5zZXRNYXRlcmlhbFR5cGUodHlwZSk7CiAgICBtSGVhZGVyLnNldEFscGhhTW9kZShBbHBoYU1vZGU6Ok9wYXF1ZSk7CiAgICBtSGVhZGVyLnNldEFscGhhVGhyZXNob2xkKGZsb2F0MTZfdCgwLjVmKSk7CiAgICBtSGVhZGVyLnNldEFjdGl2ZUxvYmVzKHN0YXRpY19jYXN0PHVpbnQzMl90PihMb2JlVHlwZTo6QWxsKSk7Cn0KCnN0ZDo6c2hhcmVkX3B0cjxCYXNpY01hdGVyaWFsPiBNYXRlcmlhbDo6dG9CYXNpY01hdGVyaWFsKCkgewogICAgaWYgKG1IZWFkZXIuaXNCYXNpY01hdGVyaWFsKCkpIHsKICAgICAgICBhc3NlcnQoc3RkOjpkeW5hbWljX3BvaW50ZXJfY2FzdDxCYXNpY01hdGVyaWFsPihzaGFyZWRfZnJvbV90aGlzKCkpKTsKICAgICAgICByZXR1cm4gc3RkOjpzdGF0aWNfcG9pbnRlcl9jYXN0PEJhc2ljTWF0ZXJpYWw+KHNoYXJlZF9mcm9tX3RoaXMoKSk7CiAgICB9CiAgICByZXR1cm4gbnVsbHB0cjsKfQoKdm9pZCBNYXRlcmlhbDo6c2V0RG91YmxlU2lkZWQoYm9vbCBkb3VibGVTaWRlZCkgewogICAgaWYgKG1IZWFkZXIuaXNEb3VibGVTaWRlZCgpICE9IGRvdWJsZVNpZGVkKSB7CiAgICAgICAgbUhlYWRlci5zZXREb3VibGVTaWRlZChkb3VibGVTaWRlZCk7CiAgICAgICAgbWFya1VwZGF0ZXMoVXBkYXRlRmxhZ3M6OkRhdGFDaGFuZ2VkKTsKICAgIH0KfQoKdm9pZCBNYXRlcmlhbDo6c2V0VGhpblN1cmZhY2UoYm9vbCB0aGluU3VyZmFjZSkgewogICAgaWYgKG1IZWFkZXIuaXNUaGluU3VyZmFjZSgpICE9IHRoaW5TdXJmYWNlKSB7CiAgICAgICAgbUhlYWRlci5zZXRUaGluU3VyZmFjZSh0aGluU3VyZmFjZSk7CiAgICAgICAgbWFya1VwZGF0ZXMoVXBkYXRlRmxhZ3M6OkRhdGFDaGFuZ2VkKTsKICAgIH0KfQoKdm9pZCBNYXRlcmlhbDo6c2V0QWxwaGFNb2RlKEFscGhhTW9kZSBhbHBoYU1vZGUpIHsKICAgIExMT0dfV1JOIDw8ICJNYXRlcmlhbCAnIiA8PCBnZXROYW1lKCkgPDwgIicgb2YgdHlwZSAnIiA8PCB0b19zdHJpbmcoZ2V0VHlwZSgpKSA8PCAiJyBkb2VzIG5vdCBzdXBwb3J0IGFscGhhLiBJZ25vcmluZyBjYWxsIHRvIHNldEFscGhhTW9kZSgpLiI7Cn0KCnZvaWQgTWF0ZXJpYWw6OnNldEFscGhhVGhyZXNob2xkKGZsb2F0IGFscGhhVGhyZXNob2xkKSB7CiAgICBMTE9HX1dSTiA8PCAiTWF0ZXJpYWwgJyIgPDwgZ2V0TmFtZSgpIDw8ICInIG9mIHR5cGUgJyIgPDwgdG9fc3RyaW5nKGdldFR5cGUoKSkgPDwgIicgZG9lcyBub3Qgc3VwcG9ydCBhbHBoYS4gSWdub3JpbmcgY2FsbCB0byBzZXRBbHBoYVRocmVzaG9sZCgpLiI7Cn0KCnZvaWQgTWF0ZXJpYWw6OnNldE5lc3RlZFByaW9yaXR5KHVpbnQzMl90IHByaW9yaXR5KSB7CiAgICBjb25zdCB1aW50MzJfdCBtYXhQcmlvcml0eSA9ICgxdSA8PCBNYXRlcmlhbEhlYWRlcjo6a05lc3RlZFByaW9yaXR5Qml0cykgLSAxOwogICAgaWYgKHByaW9yaXR5ID4gbWF4UHJpb3JpdHkpIHsKICAgICAgICBMTE9HX1dSTiA8PCAiUmVxdWVzdGVkIG5lc3RlZCBwcmlvcml0eSAiIDw8IHN0ZDo6dG9fc3RyaW5nKHByaW9yaXR5KSA8PCAiIGZvciBtYXRlcmlhbCAnIiA8PCBtTmFtZSA8PCAiJyBpcyBvdXQgb2YgcmFuZ2UuIENsYW1waW5nIHRvICI8PCBzdGQ6OnRvX3N0cmluZyhtYXhQcmlvcml0eSkgPDwgIi4iOwogICAgICAgIHByaW9yaXR5ID0gbWF4UHJpb3JpdHk7CiAgICB9CiAgICBpZiAobUhlYWRlci5nZXROZXN0ZWRQcmlvcml0eSgpICE9IHByaW9yaXR5KSB7CiAgICAgICAgbUhlYWRlci5zZXROZXN0ZWRQcmlvcml0eShwcmlvcml0eSk7CiAgICAgICAgbWFya1VwZGF0ZXMoVXBkYXRlRmxhZ3M6OkRhdGFDaGFuZ2VkKTsKICAgIH0KfQoKY29uc3QgTWF0ZXJpYWw6OlRleHR1cmVTbG90SW5mbyYgTWF0ZXJpYWw6OmdldFRleHR1cmVTbG90SW5mbyhjb25zdCBUZXh0dXJlU2xvdCBzbG90KSBjb25zdCB7CiAgICBhc3NlcnQoKHNpemVfdClzbG90IDwgbVRleHR1cmVTbG90SW5mby5zaXplKCkpOwogICAgcmV0dXJuIG1UZXh0dXJlU2xvdEluZm9bKHNpemVfdClzbG90XTsKfQoKYm9vbCBNYXRlcmlhbDo6aGFzVGV4dHVyZVNsb3REYXRhKGNvbnN0IFRleHR1cmVTbG90IHNsb3QpIGNvbnN0IHsKICAgIGFzc2VydCgoc2l6ZV90KXNsb3QgPCBtVGV4dHVyZVNsb3RJbmZvLnNpemUoKSk7CiAgICByZXR1cm4gbVRleHR1cmVTbG90RGF0YVsoc2l6ZV90KXNsb3RdLnBUZXh0dXJlICE9IG51bGxwdHI7Cn0KCnNpemVfdCBNYXRlcmlhbDo6Z2V0VGV4dHVyZUNvdW50KCkgY29uc3QgewogICAgc2l6ZV90IHJlc3VsdCA9IDA7CiAgICBmb3IoY29uc3QgYXV0byYgZGF0YTogbVRleHR1cmVTbG90RGF0YSkgewogICAgICAgIGlmKGRhdGEucFRleHR1cmUgIT0gbnVsbHB0cikgcmVzdWx0Kys7CiAgICB9CiAgICByZXR1cm4gcmVzdWx0Owp9CgpzdGQ6OnZlY3RvcjxUZXh0dXJlOjpTaGFyZWRQdHI+IE1hdGVyaWFsOjpnZXRUZXh0dXJlcygpIGNvbnN0IHsKICAgIHN0ZDo6dmVjdG9yPFRleHR1cmU6OlNoYXJlZFB0cj4gdGV4dHVyZXM7CiAgICBmb3IoY29uc3QgYXV0byYgZGF0YTogbVRleHR1cmVTbG90RGF0YSkgewogICAgICAgIGlmKGRhdGEucFRleHR1cmUgIT0gbnVsbHB0cikgdGV4dHVyZXMucHVzaF9iYWNrKGRhdGEucFRleHR1cmUpOwogICAgfQogICAgcmV0dXJuIHRleHR1cmVzOwp9Cgp2b2lkIE1hdGVyaWFsOjpnZXRUZXh0dXJlcyhzdGQ6OnZlY3RvcjxUZXh0dXJlOjpTaGFyZWRQdHI+JiB0ZXh0dXJlcywgYm9vbCBhcHBlbmQpIGNvbnN0IHsKICAgIGlmKCFhcHBlbmQpIHRleHR1cmVzLmNsZWFyKCk7CiAgICAKICAgIGZvcihjb25zdCBhdXRvJiBkYXRhOiBtVGV4dHVyZVNsb3REYXRhKSB7CiAgICAgICAgaWYoZGF0YS5wVGV4dHVyZSAhPSBudWxscHRyKSB7CiAgICAgICAgICAgIHRleHR1cmVzLnB1c2hfYmFjayhkYXRhLnBUZXh0dXJlKTsKICAgICAgICB9CiAgICB9Cn0KCmJvb2wgTWF0ZXJpYWw6OnNldFRleHR1cmUoY29uc3QgVGV4dHVyZVNsb3Qgc2xvdCwgY29uc3QgVGV4dHVyZTo6U2hhcmVkUHRyJiBwVGV4dHVyZSkgewogICAgaWYoIXBUZXh0dXJlKSB7CiAgICAgICAgTExPR19XUk4gPDwgIk51bGwgdGV4dHVyZSBwcm92aWRlZCBmb3IgbWF0ZXJpYWwgJyIgPDwgZ2V0TmFtZSgpIDw8ICInIGF0IHNsb3QgJyIgPDwgdG9fc3RyaW5nKHNsb3QpIDw8ICInLiBJZ25vcmluZyBjYWxsIHRvIHNldFRleHR1cmUoKS4iOwogICAgfQoKICAgIGlmICghaGFzVGV4dHVyZVNsb3Qoc2xvdCkpIHsKICAgICAgICBMTE9HX1dSTiA8PCAiTWF0ZXJpYWwgJyIgPDwgZ2V0TmFtZSgpIDw8ICInIGRvZXMgbm90IGhhdmUgdGV4dHVyZSBzbG90ICciIDw8IHRvX3N0cmluZyhzbG90KSA8PCAiJy4gSWdub3JpbmcgY2FsbCB0byBzZXRUZXh0dXJlKCkuIjsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICB9CgogICAgaWYgKHBUZXh0dXJlID09IGdldFRleHR1cmUoc2xvdCkpIHsKICAgICAgICBMTE9HX1dSTiA8PCAiTWF0ZXJpYWwgJyIgPDwgZ2V0TmFtZSgpIDw8ICInIGFscmVhZHkgaGF2ZSB0ZXh0dXJlIGF0IHNsb3QgJyIgPDwgdG9fc3RyaW5nKHNsb3QpIDw8ICInLiBJZ25vcmluZyBjYWxsIHRvIHNldFRleHR1cmUoKS4iOwogICAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KCiAgICBhc3NlcnQoKHNpemVfdClzbG90IDwgbVRleHR1cmVTbG90SW5mby5zaXplKCkpOwogICAgbVRleHR1cmVTbG90RGF0YVsoc2l6ZV90KXNsb3RdLnBUZXh0dXJlID0gcFRleHR1cmU7CgogICAgbWFya1VwZGF0ZXMoVXBkYXRlRmxhZ3M6OlJlc291cmNlc0NoYW5nZWQpOwogICAgcmV0dXJuIHRydWU7Cn0KClRleHR1cmU6OlNoYXJlZFB0ciBNYXRlcmlhbDo6Z2V0VGV4dHVyZShjb25zdCBUZXh0dXJlU2xvdCBzbG90KSBjb25zdCB7CiAgICBpZiAoIWhhc1RleHR1cmVTbG90KHNsb3QpKSByZXR1cm4gbnVsbHB0cjsKCiAgICBhc3NlcnQoKHNpemVfdClzbG90IDwgbVRleHR1cmVTbG90SW5mby5zaXplKCkpOwogICAgcmV0dXJuIG1UZXh0dXJlU2xvdERhdGFbKHNpemVfdClzbG90XS5wVGV4dHVyZTsKfQoKdm9pZCBNYXRlcmlhbDo6bG9hZFRleHR1cmUoVGV4dHVyZVNsb3Qgc2xvdCwgY29uc3QgZnM6OnBhdGgmIHBhdGgsIGJvb2wgdXNlU3JnYikgewogICAgaWYgKCFoYXNUZXh0dXJlU2xvdChzbG90KSkgewogICAgICAgIExMT0dfV1JOIDw8ICJNYXRlcmlhbCAnIiA8PCBnZXROYW1lKCkgPDwgIicgZG9lcyBub3QgaGF2ZSB0ZXh0dXJlIHNsb3QgJyIgPDwgdG9fc3RyaW5nKHNsb3QpIDw8ICInLiBJZ25vcmluZyBjYWxsIHRvIGxvYWRUZXh0dXJlKCkuIjsKICAgICAgICByZXR1cm47CiAgICB9CgogICAgZnM6OnBhdGggZnVsbFBhdGg7CiAgICBpZiAoZmluZEZpbGVJbkRhdGFEaXJlY3RvcmllcyhwYXRoLCBmdWxsUGF0aCkpIHsKICAgICAgICBhdXRvIHRleHR1cmUgPSBUZXh0dXJlOjpjcmVhdGVGcm9tRmlsZShtcERldmljZSwgZnVsbFBhdGgsIHRydWUsIHVzZVNyZ2IgJiYgZ2V0VGV4dHVyZVNsb3RJbmZvKHNsb3QpLnNyZ2IpOwogICAgICAgIGlmICh0ZXh0dXJlKSB7CiAgICAgICAgICAgIHNldFRleHR1cmUoc2xvdCwgdGV4dHVyZSk7CiAgICAgICAgICAgIC8vIEZsdXNoIGFuZCBzeW5jIGluIG9yZGVyIHRvIHByZXZlbnQgdGhlIHVwbG9hZCBoZWFwIGZyb20gZ3Jvd2luZyB0b28gbGFyZ2UuIERvaW5nIHNvIGFmdGVyCiAgICAgICAgICAgIC8vIGV2ZXJ5IHRleHR1cmUgY3JlYXRpb24gaXMgb3Zlcmx5IGNvbnNlcnZhdGl2ZSwgYW5kIHdpbGwgbGlrZWx5IGxlYWQgdG8gcGVyZm9ybWFuY2UgaXNzdWVzCiAgICAgICAgICAgIC8vIGR1ZSB0byB0aGUgZm9yY2VkIENQVS9HUFUgc3luYy4KICAgICAgICAgICAgbXBEZXZpY2UtPmZsdXNoQW5kU3luYygpOwogICAgICAgIH0KICAgIH0KfQoKdWludDIgTWF0ZXJpYWw6OmdldE1heFRleHR1cmVEaW1lbnNpb25zKCkgY29uc3QgewogICAgdWludDIgZGltID0gdWludDIoMCk7CiAgICBmb3IgKHVpbnQzMl90IGkgPSAwOyBpIDwgKHVpbnQzMl90KVRleHR1cmVTbG90OjpDb3VudDsgaSsrKSB7CiAgICAgICAgYXV0byBwVGV4dHVyZSA9IGdldFRleHR1cmUoKFRleHR1cmVTbG90KWkpOwogICAgICAgIGlmIChwVGV4dHVyZSkgZGltID0gbWF4KGRpbSwgdWludDIocFRleHR1cmUtPmdldFdpZHRoKCksIHBUZXh0dXJlLT5nZXRIZWlnaHQoKSkpOwogICAgfQogICAgcmV0dXJuIGRpbTsKfQoKdm9pZCBNYXRlcmlhbDo6c2V0VGV4dHVyZVRyYW5zZm9ybShjb25zdCBUcmFuc2Zvcm0mIHRleHR1cmVUcmFuc2Zvcm0pIHsKICAgIG1UZXh0dXJlVHJhbnNmb3JtID0gdGV4dHVyZVRyYW5zZm9ybTsKfQoKdm9pZCBNYXRlcmlhbDo6bWFya1VwZGF0ZXMoVXBkYXRlRmxhZ3MgdXBkYXRlcykgewogICAgLy8gTWFyayB1cGRhdGVzIGxvY2FsbHkgaW4gdGhpcyBtYXRlcmlhbC4KICAgIG1VcGRhdGVzIHw9IHVwZGF0ZXM7CgogICAgLy8gTWFyayB1cGRhdGVzIGdsb2JhbGx5IGFjcm9zcyBhbGwgbWF0ZXJpYWxzLgogICAgaWYgKG1VcGRhdGVDYWxsYmFjaykgbVVwZGF0ZUNhbGxiYWNrKHVwZGF0ZXMpOwp9Cgp2b2lkIE1hdGVyaWFsOjp1cGRhdGVUZXh0dXJlSGFuZGxlKE1hdGVyaWFsU3lzdGVtKiBwT3duZXIsIGNvbnN0IFRleHR1cmU6OlNoYXJlZFB0ciYgcFRleHR1cmUsIFRleHR1cmVIYW5kbGUmIGhhbmRsZSkgewogICAgVGV4dHVyZUhhbmRsZSBwcmV2SGFuZGxlID0gaGFuZGxlOwoKICAgIC8vIFVwZGF0ZSB0aGUgZ2l2ZW4gdGV4dHVyZSBoYW5kbGUuCiAgICBpZiAocFRleHR1cmUpIHsKICAgICAgICBhdXRvIGggPSBwT3duZXItPnRleHR1cmVNYW5hZ2VyKCktPmFkZFRleHR1cmUocFRleHR1cmUpOwogICAgICAgIGFzc2VydChoKTsKICAgICAgICBoYW5kbGUuc2V0VGV4dHVyZUlEKGguZ2V0SUQoKSk7CiAgICAgICAgaWYgKHBUZXh0dXJlLT5pc1VESU1UZXh0dXJlKCkpIHsKICAgICAgICAgICAgaGFuZGxlLnNldE1vZGUoVGV4dHVyZUhhbmRsZTo6TW9kZTo6VURJTV9UZXh0dXJlKTsKICAgICAgICB9IGVsc2UgaWYgKHBUZXh0dXJlLT5pc1NwYXJzZSgpKSB7CiAgICAgICAgICAgIGhhbmRsZS5zZXRNb2RlKFRleHR1cmVIYW5kbGU6Ok1vZGU6OlZpcnR1YWwpOwogICAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgICAgaGFuZGxlLnNldE1vZGUoVGV4dHVyZUhhbmRsZTo6TW9kZTo6VW5pZm9ybSk7CiAgICB9CgogICAgaWYgKGhhbmRsZSAhPSBwcmV2SGFuZGxlKSBtVXBkYXRlcyB8PSBNYXRlcmlhbDo6VXBkYXRlRmxhZ3M6OkRhdGFDaGFuZ2VkOwp9Cgp2b2lkIE1hdGVyaWFsOjp1cGRhdGVUZXh0dXJlSGFuZGxlKE1hdGVyaWFsU3lzdGVtKiBwT3duZXIsIGNvbnN0IFRleHR1cmVTbG90IHNsb3QsIFRleHR1cmVIYW5kbGUmIGhhbmRsZSkgewogICAgYXV0byBwVGV4dHVyZSA9IGdldFRleHR1cmUoc2xvdCk7CiAgICB1cGRhdGVUZXh0dXJlSGFuZGxlKHBPd25lciwgcFRleHR1cmUsIGhhbmRsZSk7Cn07Cgp2b2lkIE1hdGVyaWFsOjp1cGRhdGVEZWZhdWx0VGV4dHVyZVNhbXBsZXJJRChNYXRlcmlhbFN5c3RlbSogcE93bmVyLCBjb25zdCBTYW1wbGVyOjpTaGFyZWRQdHImIHBTYW1wbGVyKSB7CiAgICBjb25zdCB1aW50MzJfdCBzYW1wbGVySUQgPSBwT3duZXItPmFkZFRleHR1cmVTYW1wbGVyKHBTYW1wbGVyKTsKCiAgICBpZiAobUhlYWRlci5nZXREZWZhdWx0VGV4dHVyZVNhbXBsZXJJRCgpICE9IHNhbXBsZXJJRCkgewogICAgICAgIG1IZWFkZXIuc2V0RGVmYXVsdFRleHR1cmVTYW1wbGVySUQoc2FtcGxlcklEKTsKICAgICAgICBtVXBkYXRlcyB8PSBNYXRlcmlhbDo6VXBkYXRlRmxhZ3M6OkRhdGFDaGFuZ2VkOwogICAgfQp9Cgpib29sIE1hdGVyaWFsOjppc0Jhc2VFcXVhbChjb25zdCBNYXRlcmlhbCYgb3RoZXIpIGNvbnN0IHsKICAgIC8vIFRoaXMgZnVuY3Rpb24gY29tcGFyZXMgYWxsIGRhdGEgaW4gdGhlIGJhc2UgY2xhc3MgYmV0d2VlbiB0d28gbWF0ZXJpYWxzICpleGNlcHQqIHRoZSBuYW1lLgogICAgLy8gSXQncyBhIHNlcGFyYXRlIGhlbHBlciB0byBlbnN1cmUgaXNFcXVhbCgpIGlzIHB1cmUgdmlydHVhbCBhbmQgbXVzdCBiZSBpbXBsZW1lbnRlZCBpbiBhbGwgZGVyaXZlZCBjbGFzc2VzLgoKICAgIGlmIChtSGVhZGVyICE9IG90aGVyLm1IZWFkZXIpIHJldHVybiBmYWxzZTsKICAgIGlmIChtVGV4dHVyZVRyYW5zZm9ybSAhPSBvdGhlci5tVGV4dHVyZVRyYW5zZm9ybSkgcmV0dXJuIGZhbHNlOwoKICAgIGFzc2VydChtVGV4dHVyZVNsb3RJbmZvLnNpemUoKSA9PSBtVGV4dHVyZVNsb3REYXRhLnNpemUoKSk7CiAgICBmb3IgKHNpemVfdCBpID0gMDsgaSA8IG1UZXh0dXJlU2xvdEluZm8uc2l6ZSgpOyBpKyspIHsKICAgICAgICAvLyBDb21wYXJlIHRleHR1cmUgc2xvdHMuCiAgICAgICAgLy8gVGhlc2UgY2hlY2tzIGFyZSBhIGJpdCByZWR1bmRhbnQgc2luY2UgaWRlbnRpY2FsIG1hdGVyaWFsIHR5cGVzIGFyZSBjdXJyZW50bHkKICAgICAgICAvLyBndWFyYW50ZWVkIHRvIGhhdmUgdGhlIHNhbWUgc2V0IG9mIHNsb3RzLCBidXQgdGhpcyBpcyBmdXR1cmUtcHJvb2YgaWYgdGhhdCBjaGFuZ2VzLgogICAgICAgIGF1dG8gc2xvdCA9IChUZXh0dXJlU2xvdClpOwogICAgICAgIGlmIChoYXNUZXh0dXJlU2xvdChzbG90KSAhPSBvdGhlci5oYXNUZXh0dXJlU2xvdChzbG90KSkgcmV0dXJuIGZhbHNlOwogICAgICAgIGlmIChoYXNUZXh0dXJlU2xvdChzbG90KSkgewogICAgICAgICAgICBpZiAobVRleHR1cmVTbG90SW5mb1tpXSAhPSBvdGhlci5tVGV4dHVyZVNsb3RJbmZvW2ldKSByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgIGlmIChtVGV4dHVyZVNsb3REYXRhW2ldICE9IG90aGVyLm1UZXh0dXJlU2xvdERhdGFbaV0pIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICB9CgogICAgcmV0dXJuIHRydWU7Cn0KCiNpZmRlZiBTQ1JJUFRJTkcKU0NSSVBUX0JJTkRJTkcoTWF0ZXJpYWwpIHsKICAgIFNDUklQVF9CSU5ESU5HX0RFUEVOREVOQ1koVHJhbnNmb3JtKQoKICAgIHB5YmluZDExOjplbnVtXzxNYXRlcmlhbFR5cGU+IG1hdGVyaWFsVHlwZShtLCAiTWF0ZXJpYWxUeXBlIik7CiAgICBtYXRlcmlhbFR5cGUudmFsdWUoIlN0YW5kYXJkIiwgTWF0ZXJpYWxUeXBlOjpTdGFuZGFyZCk7CiAgICBtYXRlcmlhbFR5cGUudmFsdWUoIkNsb3RoIiwgTWF0ZXJpYWxUeXBlOjpDbG90aCk7CiAgICBtYXRlcmlhbFR5cGUudmFsdWUoIkhhaXIiLCBNYXRlcmlhbFR5cGU6OkhhaXIpOwogICAgbWF0ZXJpYWxUeXBlLnZhbHVlKCJNRVJMIiwgTWF0ZXJpYWxUeXBlOjpNRVJMKTsKCiAgICBweWJpbmQxMTo6ZW51bV88QWxwaGFNb2RlPiBhbHBoYU1vZGUobSwgIkFscGhhTW9kZSIpOwogICAgYWxwaGFNb2RlLnZhbHVlKCJPcGFxdWUiLCBBbHBoYU1vZGU6Ok9wYXF1ZSk7CiAgICBhbHBoYU1vZGUudmFsdWUoIk1hc2siLCBBbHBoYU1vZGU6Ok1hc2spOwoKICAgIHB5YmluZDExOjplbnVtXzxNYXRlcmlhbDo6VGV4dHVyZVNsb3Q+IHRleHR1cmVTbG90KG0sICJNYXRlcmlhbFRleHR1cmVTbG90Iik7CiAgICB0ZXh0dXJlU2xvdC52YWx1ZSgiQmFzZUNvbG9yIiwgTWF0ZXJpYWw6OlRleHR1cmVTbG90OjpCYXNlQ29sb3IpOwogICAgdGV4dHVyZVNsb3QudmFsdWUoIlNwZWN1bGFyIiwgTWF0ZXJpYWw6OlRleHR1cmVTbG90OjpTcGVjdWxhcik7CiAgICB0ZXh0dXJlU2xvdC52YWx1ZSgiRW1pc3NpdmUiLCBNYXRlcmlhbDo6VGV4dHVyZVNsb3Q6OkVtaXNzaXZlKTsKICAgIHRleHR1cmVTbG90LnZhbHVlKCJOb3JtYWwiLCBNYXRlcmlhbDo6VGV4dHVyZVNsb3Q6Ok5vcm1hbCk7CiAgICB0ZXh0dXJlU2xvdC52YWx1ZSgiUm91Z2huZXNzIiwgTWF0ZXJpYWw6OlRleHR1cmVTbG90OjpSb3VnaG5lc3MpOwogICAgdGV4dHVyZVNsb3QudmFsdWUoIlRyYW5zbWlzc2lvbiIsIE1hdGVyaWFsOjpUZXh0dXJlU2xvdDo6VHJhbnNtaXNzaW9uKTsKICAgIHRleHR1cmVTbG90LnZhbHVlKCJEaXNwbGFjZW1lbnQiLCBNYXRlcmlhbDo6VGV4dHVyZVNsb3Q6OkRpc3BsYWNlbWVudCk7CgogICAgLy8gUmVnaXN0ZXIgTWF0ZXJpYWwgYmFzZSBjbGFzcyBhcyBJTWF0ZXJpYWwgaW4gcHl0aG9uIHRvIGFsbG93IGRlcHJlY2F0ZWQgc2NyaXB0IHN5bnRheC4KICAgIC8vIFRPRE86IFJlbW92ZSB3b3JrYXJvdW5kIHdoZW4gYWxsIHNjcmlwdHMgaGF2ZSBiZWVuIHVwZGF0ZWQgdG8gY3JlYXRlIGRlcml2ZWQgTWF0ZXJpYWwgY2xhc3Nlcy4KICAgIHB5YmluZDExOjpjbGFzc188TWF0ZXJpYWwsIE1hdGVyaWFsOjpTaGFyZWRQdHI+IG1hdGVyaWFsKG0sICJJTWF0ZXJpYWwiKTsgLy8gUFlUSE9OREVQUkVDQVRFRAogICAgbWF0ZXJpYWwuZGVmX3Byb3BlcnR5X3JlYWRvbmx5KCJ0eXBlIiwgJk1hdGVyaWFsOjpnZXRUeXBlKTsKICAgIG1hdGVyaWFsLmRlZl9wcm9wZXJ0eSgibmFtZSIsICZNYXRlcmlhbDo6Z2V0TmFtZSwgJk1hdGVyaWFsOjpzZXROYW1lKTsKICAgIG1hdGVyaWFsLmRlZl9wcm9wZXJ0eSgiZG91YmxlU2lkZWQiLCAmTWF0ZXJpYWw6OmlzRG91YmxlU2lkZWQsICZNYXRlcmlhbDo6c2V0RG91YmxlU2lkZWQpOwogICAgbWF0ZXJpYWwuZGVmX3Byb3BlcnR5KCJ0aGluU3VyZmFjZSIsICZNYXRlcmlhbDo6aXNUaGluU3VyZmFjZSwgJk1hdGVyaWFsOjpzZXRUaGluU3VyZmFjZSk7CiAgICBtYXRlcmlhbC5kZWZfcHJvcGVydHlfcmVhZG9ubHkoImVtaXNzaXZlIiwgJk1hdGVyaWFsOjppc0VtaXNzaXZlKTsKICAgIG1hdGVyaWFsLmRlZl9wcm9wZXJ0eSgiYWxwaGFNb2RlIiwgJk1hdGVyaWFsOjpnZXRBbHBoYU1vZGUsICZNYXRlcmlhbDo6c2V0QWxwaGFNb2RlKTsKICAgIG1hdGVyaWFsLmRlZl9wcm9wZXJ0eSgiYWxwaGFUaHJlc2hvbGQiLCAmTWF0ZXJpYWw6OmdldEFscGhhVGhyZXNob2xkLCAmTWF0ZXJpYWw6OnNldEFscGhhVGhyZXNob2xkKTsKICAgIG1hdGVyaWFsLmRlZl9wcm9wZXJ0eSgibmVzdGVkUHJpb3JpdHkiLCAmTWF0ZXJpYWw6OmdldE5lc3RlZFByaW9yaXR5LCAmTWF0ZXJpYWw6OnNldE5lc3RlZFByaW9yaXR5KTsKICAgIG1hdGVyaWFsLmRlZl9wcm9wZXJ0eSgidGV4dHVyZVRyYW5zZm9ybSIsIHB5YmluZDExOjpvdmVybG9hZF9jYXN0PHZvaWQ+KCZNYXRlcmlhbDo6Z2V0VGV4dHVyZVRyYW5zZm9ybSwgcHliaW5kMTE6OmNvbnN0XyksICZNYXRlcmlhbDo6c2V0VGV4dHVyZVRyYW5zZm9ybSk7CgogICAgbWF0ZXJpYWwuZGVmKCJsb2FkVGV4dHVyZSIsICZNYXRlcmlhbDo6bG9hZFRleHR1cmUsICJzbG90Il9hLCAicGF0aCJfYSwgInVzZVNyZ2IiX2EgPSB0cnVlKTsKICAgIG1hdGVyaWFsLmRlZigiY2xlYXJUZXh0dXJlIiwgJk1hdGVyaWFsOjpjbGVhclRleHR1cmUsICJzbG90Il9hKTsKfQojZW5kaWYKCn0gIC8vIG5hbWVzcGFjZSBGYWxjb3IKAAAAAAAAAADPVAAAAAAAAAAAAAAAAAAAAAAAAM9UAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACeHAAAAAAAAJ4cAAAAAAAAAAAAAAAA8L8"
				]
			]
		},
		{
			"contents": "/***************************************************************************\n # Copyright (c) 2015-22, NVIDIA CORPORATION. All rights reserved.\n #\n # Redistribution and use in source and binary forms, with or without\n # modification, are permitted provided that the following conditions\n # are met:\n #  * Redistributions of source code must retain the above copyright\n #    notice, this list of conditions and the following disclaimer.\n #  * Redistributions in binary form must reproduce the above copyright\n #    notice, this list of conditions and the following disclaimer in the\n #    documentation and/or other materials provided with the distribution.\n #  * Neither the name of NVIDIA CORPORATION nor the names of its\n #    contributors may be used to endorse or promote products derived\n #    from this software without specific prior written permission.\n #\n # THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS \"AS IS\" AND ANY\n # EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n # IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR\n # PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT OWNER OR\n # CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,\n # EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,\n # PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n # PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY\n # OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n # (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n # OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n **************************************************************************/\n#ifndef SRC_FALCOR_SCENE_MATERIAL_MATERIALTEXTURELOADER_H_\n#define SRC_FALCOR_SCENE_MATERIAL_MATERIALTEXTURELOADER_H_\n\n#include \"Falcor.h\"\n#include \"Scene/Material/Material.h\"\n#include \"Utils/Image/TextureManager.h\"\n\nnamespace Falcor {\n\n/** Helper class to load material textures using the texture manager.\n\n\tCalling `loadTexture` does not assign the texture to the material right away.\n\tInstead, an asynchronous texture load request is issued and a reference for the\n\tmaterial assignment is stored. When the client destroys the instance of the\n\t`MaterialTextureLoader`, it blocks until all textures are loaded and assigns\n\tthem to the materials.\n*/\nclass MaterialTextureLoader {\n\tpublic:\n\t\tMaterialTextureLoader(const Device::SharedPtr& pDevice, bool useSrgb);\n\t\t~MaterialTextureLoader();\n\n\t\t/** Request loading a material texture.\n\t\t\t\\param[in] pMaterial Material to load texture into.\n\t\t\t\\param[in] slot Slot to load texture into.\n\t\t\t\\param[in] path Texture file path.\n\t\t*/\n\t\tbool loadTexture(const Material::SharedPtr& pMaterial, Material::TextureSlot slot, const fs::path& path, bool loadAsSparse = false);\n\n\tprivate:\n\t\tvoid assignTextures();\n\n\t\tstruct TextureAssignment {\n\t\t\tMaterial::SharedPtr pMaterial;\n\t\t\tMaterial::TextureSlot textureSlot;\n\t\t\tTextureManager::TextureHandle handle;\n\t\t};\n\n\t\tDevice::SharedPtr mpDevice = nullptr;\n\t\t\n\t\tbool mUseSrgb;\n\t\tstd::vector<TextureAssignment> mTextureAssignments;\n\t\tTextureManager::SharedPtr mpTextureManager;\n};\n\n}  // namespace Falcor\n\n#endif  // SRC_FALCOR_SCENE_MATERIAL_MATERIALTEXTURELOADER_H_",
			"file": "src/Falcor/Scene/Material/MaterialTextureLoader.h",
			"file_size": 3259,
			"file_write_time": 133341878442373986,
			"settings":
			{
				"buffer_size": 3259,
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					4,
					1,
					"insert",
					{
						"characters": "bool"
					},
					"BQAAAIQKAAAAAAAAhQoAAAAAAAAAAAAAhQoAAAAAAACFCgAAAAAAAAQAAAB2b2lkhQoAAAAAAACGCgAAAAAAAAAAAACGCgAAAAAAAIcKAAAAAAAAAAAAAIcKAAAAAAAAiAoAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAIQKAAAAAAAAiAoAAAAAAAAAAAAAAADwvw"
				]
			]
		},
		{
			"contents": "/***************************************************************************\n # Copyright (c) 2020, NVIDIA CORPORATION. All rights reserved.\n #\n # Redistribution and use in source and binary forms, with or without\n # modification, are permitted provided that the following conditions\n # are met:\n #  * Redistributions of source code must retain the above copyright\n #    notice, this list of conditions and the following disclaimer.\n #  * Redistributions in binary form must reproduce the above copyright\n #    notice, this list of conditions and the following disclaimer in the\n #    documentation and/or other materials provided with the distribution.\n #  * Neither the name of NVIDIA CORPORATION nor the names of its\n #    contributors may be used to endorse or promote products derived\n #    from this software without specific prior written permission.\n #\n # THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS ``AS IS'' AND ANY\n # EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n # IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR\n # PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT OWNER OR\n # CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,\n # EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,\n # PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n # PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY\n # OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n # (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n # OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n **************************************************************************/\n#include <mutex>\n\n#ifdef _WIN32\n#include <filesystem>\nnamespace fs = std::filesystem;\n#else\n#include \"boost/filesystem.hpp\"\nnamespace fs = boost::filesystem;\n#endif\n\n#include \"stdafx.h\"\n#include \"SceneBuilder.h\"\n#include \"../Externals/mikktspace/mikktspace.h\"\n\n\nstd::mutex g_meshes_mutex;\nstd::mutex g_materials_mutex;\nstd::mutex g_buffers_mutex;\nstd::mutex g_buffers_indices_mutex;\nstd::mutex g_buffers_static_data_mutex;\nstd::mutex g_buffers_dynamic_data_mutex;\n\nnamespace Falcor {\n    \nnamespace {\n// Texture coordinates for textured emissive materials are quantized for performance reasons.\n// We'll log a warning if the maximum quantization error exceeds this value.\nconst float kMaxTexelError = 0.5f;\n\nclass MikkTSpaceWrapper\n{\npublic:\n    static std::vector<float4> generateTangents(const SceneBuilder::Mesh& mesh)\n    {\n        if (!mesh.normals.pData || !mesh.positions.pData || !mesh.texCrds.pData || !mesh.pIndices)\n        {\n            logWarning(\"Can't generate tangent space. The mesh '\" + std::string(mesh.name) + \"' doesn't have positions/normals/texCrd/indices.\");\n            return {};\n        }\n\n        // Generate new tangent space.\n        SMikkTSpaceInterface mikktspace = {};\n        mikktspace.m_getNumFaces = [](const SMikkTSpaceContext* pContext) { return ((MikkTSpaceWrapper*)(pContext->m_pUserData))->getFaceCount(); };\n        mikktspace.m_getNumVerticesOfFace = [](const SMikkTSpaceContext* pContext, int32_t face) { return 3; };\n        mikktspace.m_getPosition = [](const SMikkTSpaceContext* pContext, float position[], int32_t face, int32_t vert) { ((MikkTSpaceWrapper*)(pContext->m_pUserData))->getPosition(position, face, vert); };\n        mikktspace.m_getNormal = [](const SMikkTSpaceContext* pContext, float normal[], int32_t face, int32_t vert) { ((MikkTSpaceWrapper*)(pContext->m_pUserData))->getNormal(normal, face, vert); };\n        mikktspace.m_getTexCoord = [](const SMikkTSpaceContext* pContext, float texCrd[], int32_t face, int32_t vert) { ((MikkTSpaceWrapper*)(pContext->m_pUserData))->getTexCrd(texCrd, face, vert); };\n        mikktspace.m_setTSpaceBasic = [](const SMikkTSpaceContext* pContext, const float tangent[], float sign, int32_t face, int32_t vert) { ((MikkTSpaceWrapper*)(pContext->m_pUserData))->setTangent(tangent, sign, face, vert); };\n\n        MikkTSpaceWrapper wrapper(mesh);\n        SMikkTSpaceContext context = {};\n        context.m_pInterface = &mikktspace;\n        context.m_pUserData = &wrapper;\n\n        if (genTangSpaceDefault(&context) == false)\n        {\n            logError(\"Failed to generate MikkTSpace tangents for the mesh '\" + std::string(mesh.name) + \"'.\");\n            return {};\n        }\n\n        return wrapper.mTangents;\n    }\n\nprivate:\n    MikkTSpaceWrapper(const SceneBuilder::Mesh& mesh)\n        : mMesh(mesh)\n    {\n        assert(mesh.indexCount > 0);\n        mTangents.resize(mesh.indexCount, float4(0));\n    }\n    const SceneBuilder::Mesh& mMesh;\n    std::vector<float4> mTangents;\n    int32_t getFaceCount() const { return (int32_t)mMesh.faceCount; }\n    void getPosition(float position[], int32_t face, int32_t vert) { *reinterpret_cast<float3*>(position) = mMesh.getPosition(face, vert); }\n    void getNormal(float normal[], int32_t face, int32_t vert) { *reinterpret_cast<float3*>(normal) = mMesh.getNormal(face, vert); }\n    void getTexCrd(float texCrd[], int32_t face, int32_t vert) { *reinterpret_cast<float2*>(texCrd) = mMesh.getTexCrd(face, vert); }\n\n    void setTangent(const float tangent[], float sign, int32_t face, int32_t vert)\n    {\n        float3 T = *reinterpret_cast<const float3*>(tangent);\n        mTangents[face * 3 + vert] = float4(glm::normalize(T), sign);\n    }\n};\n\nvoid validateVertex(const SceneBuilder::Mesh::Vertex& v, size_t& invalidCount, size_t& zeroCount)\n{\n    auto isInvalid = [](const auto& x)\n    {\n        return glm::any(glm::isinf(x) || glm::isnan(x));\n    };\n    auto isZero = [](const auto& x)\n    {\n        return glm::length(x) < 1e-6f;\n    };\n\n    if (isInvalid(v.position) || isInvalid(v.normal) || isInvalid(v.tangent) || isInvalid(v.texCrd) || isInvalid(v.boneWeights)) invalidCount++;\n    if (isZero(v.normal) || isZero(v.tangent.xyz())) zeroCount++;\n}\n\nbool compareVertices(const SceneBuilder::Mesh::Vertex& lhs, const SceneBuilder::Mesh::Vertex& rhs, float threshold = 1e-6f)\n{\n    using namespace glm;\n    if (lhs.position != rhs.position) return false; // Position need to be exact to avoid cracks\n    if (lhs.tangent.w != rhs.tangent.w) return false;\n    if (lhs.boneIDs != rhs.boneIDs) return false;\n    if (any(greaterThan(abs(lhs.normal - rhs.normal), float3(threshold)))) return false;\n    if (any(greaterThan(abs(lhs.tangent.xyz - rhs.tangent.xyz), float3(threshold)))) return false;\n    if (any(greaterThan(abs(lhs.texCrd - rhs.texCrd), float2(threshold)))) return false;\n    if (any(greaterThan(abs(lhs.boneWeights - rhs.boneWeights), float4(threshold)))) return false;\n    return true;\n}\n\n}  // namespace anon\n\nSceneBuilder::SceneBuilder(std::shared_ptr<Device> pDevice, Flags flags) : mpDevice(pDevice), mFlags(flags) {};\n\nSceneBuilder::SharedPtr SceneBuilder::create(std::shared_ptr<Device> pDevice, Flags flags)\n{\n    return SharedPtr(new SceneBuilder(pDevice, flags));\n}\n\nSceneBuilder::SharedPtr SceneBuilder::create(std::shared_ptr<Device> pDevice, const std::string& filename, Flags buildFlags, const InstanceMatrices& instances)\n{\n    auto pBuilder = create(pDevice, buildFlags);\n    return pBuilder->import(filename, instances) ? pBuilder : nullptr;\n}\n\nbool SceneBuilder::import(const std::string& filename, const InstanceMatrices& instances, const Dictionary& dict) {\n    bool success = Importer::import(filename, *this, instances, dict);\n    mFilename = filename;\n    return success;\n}\n\nuint32_t SceneBuilder::addNode(const Node& node) {\n    assert(node.parent == kInvalidNode || node.parent < mSceneGraph.size());\n\n    assert(mSceneGraph.size() <= std::numeric_limits<uint32_t>::max());\n    uint32_t newNodeID = (uint32_t)mSceneGraph.size();\n    mSceneGraph.push_back(InternalNode(node));\n    if(node.parent != kInvalidNode) mSceneGraph[node.parent].children.push_back(newNodeID);\n    mDirty = true;\n    return newNodeID;\n}\n\nbool SceneBuilder::isNodeAnimated(uint32_t nodeID) const {\n    assert(nodeID < mSceneGraph.size());\n\n    while (nodeID != kInvalidNode) {\n        for (const auto& animation : mAnimations) {\n            if (animation->getChannel(nodeID) != Animation::kInvalidChannel) return true;\n        }\n        nodeID = mSceneGraph[nodeID].parent;\n    }\n\n    return false;\n}\n\nvoid SceneBuilder::setNodeInterpolationMode(uint32_t nodeID, Animation::InterpolationMode interpolationMode, bool enableWarping) {\n    assert(nodeID < mSceneGraph.size());\n\n    while (nodeID != kInvalidNode) {\n        for (const auto& animation : mAnimations) {\n            if (uint32_t channelID = animation->getChannel(nodeID); channelID != Animation::kInvalidChannel) {\n                animation->setInterpolationMode(channelID, interpolationMode, enableWarping);\n            }\n        }\n        nodeID = mSceneGraph[nodeID].parent;\n    }\n}\n\nvoid SceneBuilder::addMeshInstance(uint32_t nodeID, uint32_t meshID) {\n    assert(meshID < mMeshes.size());\n    mSceneGraph.at(nodeID).meshes.push_back(meshID);\n\n    auto &mesh = mMeshes.at(meshID);\n    mesh.instances.push_back({});\n\n    MeshInstanceSpec &instance = mesh.instances.back();\n    instance.nodeId = nodeID;\n    instance.overrideMaterial = false;\n\n    //mMeshes.at(meshID).instances.push_back(instance);\n    mDirty = true;\n}\n\nvoid SceneBuilder::addMeshInstance(uint32_t nodeID, uint32_t meshID, const Material::SharedPtr& pMaterial) {\n    assert(meshID < mMeshes.size());\n    mSceneGraph.at(nodeID).meshes.push_back(meshID);\n\n    auto &mesh = mMeshes.at(meshID);\n    mesh.instances.push_back({});\n\n    MeshInstanceSpec &instance = mesh.instances.back();\n    instance.nodeId = nodeID;\n    instance.materialId = addMaterial(pMaterial, is_set(mFlags, Flags::RemoveDuplicateMaterials));;\n    instance.overrideMaterial = true;\n\n    //mMeshes.at(meshID).instances.push_back(instance);\n    mDirty = true;\n}\n\nuint32_t SceneBuilder::addMesh(const Mesh& meshDesc) {\n    logInfo(\"Adding mesh '\" + meshDesc.name + \"'\");\n    TimeReport timeReport;\n\n    // Copy the mesh desc so we can update it. The caller retains the ownership of the data.\n    Mesh mesh = meshDesc;\n\n    // Error checking.\n    auto throw_on_missing_element = [&](const std::string& element) {\n        throw std::runtime_error(\"Error when adding the mesh '\" + mesh.name + \"' to the scene.\\nThe mesh is missing \" + element + \".\");\n    };\n\n    auto missing_element_warning = [&](const std::string& element) {\n        logWarning(\"The mesh '\" + mesh.name + \"' is missing the element \" + element + \". This is not an error, the element will be filled with zeros which may result in incorrect rendering.\");\n    };\n\n    if (mesh.topology != Vao::Topology::TriangleList) throw std::runtime_error(\"Error when adding the mesh '\" + mesh.name + \"' to the scene.\\nOnly triangle list topology is supported.\");\n    if (mesh.pMaterial == nullptr) throw_on_missing_element(\"material\");\n\n    if (mesh.faceCount == 0) throw_on_missing_element(\"faces\");\n    if (mesh.vertexCount == 0) throw_on_missing_element(\"vertices\");\n    if (mesh.indexCount == 0 || !mesh.pIndices) throw_on_missing_element(\"indices\");\n    if (mesh.indexCount != mesh.faceCount * 3) throw std::runtime_error(\"Error when adding the mesh '\" + mesh.name + \"' to the scene.\\nUnexpected face/vertex count.\");\n\n    if (mesh.positions.pData == nullptr) throw_on_missing_element(\"positions\");\n    if (mesh.normals.pData == nullptr) missing_element_warning(\"normals\");\n    if (mesh.texCrds.pData == nullptr) missing_element_warning(\"texture coordinates\");\n\n    if (mesh.hasBones()) {\n        if (mesh.boneIDs.pData == nullptr) throw_on_missing_element(\"bone IDs\");\n        if (mesh.boneWeights.pData == nullptr) throw_on_missing_element(\"bone weights\");\n    }\n\n    timeReport.measure(\"SceneBuilder::addMesh early checks\");\n\n    // Generate tangent space if that's required.\n#if 0\n    std::vector<float4> tangents;\n    if (!is_set(mFlags, Flags::UseOriginalTangentSpace) || !mesh.tangents.pData) {\n        tangents = MikkTSpaceWrapper::generateTangents(mesh);\n        if (!tangents.empty()) {\n            assert(tangents.size() == mesh.indexCount);\n            mesh.tangents.pData = tangents.data();\n            mesh.tangents.frequency = Mesh::AttributeFrequency::FaceVarying;\n        } else {\n            mesh.tangents.pData = nullptr;\n            mesh.tangents.frequency = Mesh::AttributeFrequency::None;\n        }\n    }\n#endif\n\n    timeReport.measure(\"SceneBuilder::addMesh tangent space generation\");\n\n    // Build new vertex/index buffers by merging identical vertices.\n    // The search is based on the topology defined by the original index buffer.\n    //\n    // A linked-list of vertices is built for each original vertex index.\n    // We iterate over all vertices and first check if a vertex is identical to any of the other vertices\n    // using the same original vertex index. If not, a new vertex is inserted and added to the list.\n    // The 'heads' array point to the first vertex in each list, and each vertex has an associated next-pointer.\n    // This ensures that adding to the linked lists do not require any dynamic memory allocation.\n    //\n    const uint32_t invalidIndex = 0xffffffff;\n    std::vector<std::pair<Mesh::Vertex, uint32_t>> vertices;\n    vertices.reserve(mesh.vertexCount);\n    std::vector<uint32_t> indices(mesh.indexCount);\n    std::vector<uint32_t> heads(mesh.vertexCount, invalidIndex);\n\n    for (uint32_t face = 0; face < mesh.faceCount; face++) {\n        for (uint32_t vert = 0; vert < 3; vert++) {\n            const Mesh::Vertex v = mesh.getVertex(face, vert);\n            const uint32_t origIndex = mesh.pIndices[face * 3 + vert];\n\n            // Iterate over vertex list to check if it already exists.\n            assert(origIndex < heads.size());\n            uint32_t index = heads[origIndex];\n            bool found = false;\n\n            while (index != invalidIndex) {\n                if (compareVertices(v, vertices[index].first)) {\n                    found = true;\n                    break;\n                }\n                index = vertices[index].second;\n            }\n\n            // Insert new vertex if we couldn't find it.\n            if (!found) {\n                assert(vertices.size() < std::numeric_limits<uint32_t>::max());\n                index = (uint32_t)vertices.size();\n                vertices.push_back({ v, heads[origIndex] });\n                heads[origIndex] = index;\n            }\n\n            // Store new vertex index.\n            indices[face * 3 + vert] = index;\n        }\n    }\n\n    timeReport.measure(\"SceneBuilder::addMesh new vertex/index buffer generation\");\n\n    assert(vertices.size() > 0);\n    assert(indices.size() == mesh.indexCount);\n    if (vertices.size() != mesh.vertexCount) {\n        logInfo(\"Mesh with name '\" + mesh.name + \"' had original vertex count \" + std::to_string(mesh.vertexCount) + \", new vertex count \" + std::to_string(vertices.size()));\n    }\n\n    // Validate vertex data to check for invalid numbers and missing tangent frame.\n    size_t invalidCount = 0;\n    size_t zeroCount = 0;\n    for (const auto& v : vertices) {\n        validateVertex(v.first, invalidCount, zeroCount);\n    }\n    if (invalidCount > 0) logWarning(\"The mesh '\" + mesh.name + \"' has inf/nan vertex attributes at \" + std::to_string(invalidCount) + \" vertices. Please fix the asset.\");\n    if (zeroCount > 0) logWarning(\"The mesh '\" + mesh.name + \"' has zero-length normals/tangents at \" + std::to_string(zeroCount) + \" vertices. Please fix the asset.\");\n\n    timeReport.measure(\"SceneBuilder::addMesh vertex data validation\");\n\n    // Match texture coordinate quantization for textured emissives to match PackedEmissiveTriangle.\n    // This is to avoid mismatch when sampling and evaluating emissive triangles.\n    if (mesh.pMaterial->getEmissiveTexture() != nullptr) {\n        float2 minTexCrd = float2(std::numeric_limits<float>::infinity());\n        float2 maxTexCrd = float2(-std::numeric_limits<float>::infinity());\n        float2 maxError = float2(0);\n\n        for (auto& v : vertices) {\n            float2 texCrd = v.first.texCrd;\n            minTexCrd = min(minTexCrd, texCrd);\n            maxTexCrd = max(maxTexCrd, texCrd);\n            v.first.texCrd = f16tof32(f32tof16(texCrd));\n            maxError = max(maxError, abs(v.first.texCrd - texCrd));\n        }\n\n        // Issue warning if quantization errors are too large.\n        float2 maxAbsCrd = max(abs(minTexCrd), abs(maxTexCrd));\n        if (maxAbsCrd.x > HLF_MAX || maxAbsCrd.y > HLF_MAX) {\n            logWarning(\"Texture coordinates for emissive textured mesh '\" + mesh.name + \"' are outside the representable range, expect rendering errors.\");\n        } else {\n            // Compute maximum quantization error in texels.\n            // The texcoords are used for all texture channels so taking the maximum dimensions.\n            uint2 maxTexDim = mesh.pMaterial->getMaxTextureDimensions();\n            maxError *= maxTexDim;\n            float maxTexelError = std::max(maxError.x, maxError.y);\n\n            if (maxTexelError > kMaxTexelError) {\n                std::ostringstream oss;\n                oss << \"Texture coordinates for emissive textured mesh '\" << mesh.name << \"' have a large quantization error of \" << maxTexelError << \" texels. \"\n                    << \"The coordinate range is [\" << minTexCrd.x << \", \" << maxTexCrd.x << \"] x [\" << minTexCrd.y << \", \" << maxTexCrd.y << \"] for maximum texture dimensions (\"\n                    << maxTexDim.x << \", \" << maxTexDim.y << \").\";\n                logWarning(oss.str());\n            }\n        }\n    }\n\n    timeReport.measure(\"SceneBuilder::addMesh texture coordinates quantization\");\n\n    // Add the mesh to the scene.\n    // If the non-indexed vertices build flag is set, we will de-index the data below.\n    const bool isIndexed = !is_set(mFlags, Flags::NonIndexedVertices);\n    const uint32_t outputVertexCount = isIndexed ? (uint32_t)vertices.size() : mesh.indexCount;\n\n\n    uint32_t ret = 0;\n    MeshSpec* spec;\n    \n    const std::lock_guard<std::mutex> lock(g_meshes_mutex);\n\n    mMeshes.push_back({});\n    spec = &mMeshes.back();\n\n    assert(mMeshes.size() <= std::numeric_limits<uint32_t>::max());\n    ret = (uint32_t)mMeshes.size() - 1;\n    \n    assert(mBuffersData.staticData.size() <= std::numeric_limits<uint32_t>::max() && mBuffersData.dynamicData.size() <= std::numeric_limits<uint32_t>::max() && mBuffersData.indices.size() <= std::numeric_limits<uint32_t>::max());\n    spec->staticVertexOffset = (uint32_t)mBuffersData.staticData.size();\n    spec->dynamicVertexOffset = (uint32_t)mBuffersData.dynamicData.size();\n    \n    if (isIndexed) {\n        spec->indexOffset = (uint32_t)mBuffersData.indices.size();\n        spec->indexCount = mesh.indexCount;\n    }\n\n    spec->vertexCount = outputVertexCount;\n    spec->topology = mesh.topology;\n    spec->materialId = addMaterial(mesh.pMaterial, is_set(mFlags, Flags::RemoveDuplicateMaterials));\n\n    if (mesh.hasBones()) {\n        spec->hasDynamicData = true;\n    }\n\n    // Copy indices into global index array.\n    if (isIndexed) {\n        mBuffersData.indices.insert(mBuffersData.indices.end(), indices.begin(), indices.end());\n    }\n\n    // Copy vertices into global vertex arrays.\n    \n    for (uint32_t i = 0; i < outputVertexCount; i++) {\n        uint32_t index = isIndexed ? i : indices[i];\n        assert(index < vertices.size());\n        const Mesh::Vertex& v = vertices[index].first;\n\n        StaticVertexData s;\n        s.position = v.position;\n        s.normal = v.normal;\n        s.texCrd = v.texCrd;\n        //s.tangent = v.tangent;\n\n        mBuffersData.staticData.push_back(PackedStaticVertexData(s));    \n\n        if (mesh.hasBones()) {\n            DynamicVertexData d;\n            d.boneWeight = v.boneWeights;\n            d.boneID = v.boneIDs;\n            d.staticIndex = (uint32_t)mBuffersData.staticData.size() - 1;\n            d.globalMatrixID = 0; // This will be initialized in createMeshData()\n            mBuffersData.dynamicData.push_back(d);\n        }\n    }\n\n    \n    mDirty = true;\n\n    timeReport.measure(\"SceneBuilder::addMesh final steps\");\n    timeReport.addTotal(\"SceneBuilder::addMesh done in\");\n    timeReport.printToLog();\n\n    logInfo(\"Mesh '\" + meshDesc.name + \"' added.\");\n    return ret;\n}\n\nuint32_t SceneBuilder::addMaterial(const Material::SharedPtr& pMaterial, bool removeDuplicate)\n{\n    assert(pMaterial);\n\n    const std::lock_guard<std::mutex> lock(g_materials_mutex);\n\n    // Reuse previously added materials\n    if (auto it = std::find(mMaterials.begin(), mMaterials.end(), pMaterial); it != mMaterials.end())\n    {\n        return (uint32_t)std::distance(mMaterials.begin(), it);\n    }\n\n    // Try to find previously added material with equal properties (duplicate)\n    if (auto it = std::find_if(mMaterials.begin(), mMaterials.end(), [&pMaterial] (const auto& m) { return *m == *pMaterial; }); it != mMaterials.end())\n    {\n        const auto& equalMaterial = *it;\n\n        // ASSIMP sometimes creates internal copies of a material: Always de-duplicate if name and properties are equal.\n        if (removeDuplicate || pMaterial->getName() == equalMaterial->getName())\n        {\n            return (uint32_t)std::distance(mMaterials.begin(), it);\n        }\n        else\n        {\n            logInfo(\"Material '\" + pMaterial->getName() + \"' is a duplicate (has equal properties) of material '\" + equalMaterial->getName() + \"'.\");\n        }\n    }\n\n    mDirty = true;\n    mMaterials.push_back(pMaterial);\n    assert(mMaterials.size() <= std::numeric_limits<uint32_t>::max());\n    return (uint32_t)mMaterials.size() - 1;\n}\n\nuint32_t SceneBuilder::addCamera(const Camera::SharedPtr& pCamera)\n{\n    assert(pCamera);\n    mCameras.push_back(pCamera);\n    mDirty = true;\n    assert(mCameras.size() <= std::numeric_limits<uint32_t>::max());\n    return (uint32_t)mCameras.size() - 1;\n}\n\nuint32_t SceneBuilder::addLight(const Light::SharedPtr& pLight)\n{\n    assert(pLight);\n    mLights.push_back(pLight);\n    mDirty = true;\n    assert(mLights.size() <= std::numeric_limits<uint32_t>::max());\n    return (uint32_t)mLights.size() - 1;\n}\n\nvoid SceneBuilder::setCamera(const std::string name)\n{\n    for (uint i = 0; i < mCameras.size(); i++)\n    {\n        if (mCameras[i]->getName() == name)\n        {\n            mSelectedCamera = i;\n            return;\n        }\n    }\n}\n\nVao::SharedPtr SceneBuilder::createVao(uint16_t drawCount)\n{\n    for (auto& mesh : mMeshes) assert(mesh.topology == mMeshes[0].topology);\n    const size_t vertexCount = (uint32_t)mBuffersData.staticData.size();\n    size_t ibSize = sizeof(uint32_t) * mBuffersData.indices.size();\n    size_t staticVbSize = sizeof(PackedStaticVertexData) * vertexCount;\n    size_t prevVbSize = sizeof(PrevVertexData) * vertexCount;\n    assert(ibSize <= std::numeric_limits<uint32_t>::max() && staticVbSize <= std::numeric_limits<uint32_t>::max() && prevVbSize <= std::numeric_limits<uint32_t>::max());\n\n    // Create the index buffer\n    Buffer::SharedPtr pIB = nullptr;\n    if (ibSize > 0)\n    {\n        ResourceBindFlags ibBindFlags = Resource::BindFlags::Index | ResourceBindFlags::ShaderResource;\n        pIB = Buffer::create(mpDevice, (uint32_t)ibSize, ibBindFlags, Buffer::CpuAccess::None, mBuffersData.indices.data());\n    }\n\n    // Create the vertex data as structured buffers\n    ResourceBindFlags vbBindFlags = ResourceBindFlags::ShaderResource | ResourceBindFlags::UnorderedAccess | ResourceBindFlags::Vertex;\n    Buffer::SharedPtr pStaticBuffer = Buffer::createStructured(mpDevice, sizeof(PackedStaticVertexData), (uint32_t)vertexCount, vbBindFlags, Buffer::CpuAccess::None, nullptr, false);\n    Buffer::SharedPtr pPrevBuffer = Buffer::createStructured(mpDevice, sizeof(PrevVertexData), (uint32_t)vertexCount, vbBindFlags, Buffer::CpuAccess::None, nullptr, false);\n\n    Vao::BufferVec pVBs(Scene::kVertexBufferCount);\n    pVBs[Scene::kStaticDataBufferIndex] = pStaticBuffer;\n    pVBs[Scene::kPrevVertexBufferIndex] = pPrevBuffer;\n    std::vector<uint16_t> drawIDs(drawCount);\n    for (uint32_t i = 0; i < drawCount; i++) drawIDs[i] = i;\n    pVBs[Scene::kDrawIdBufferIndex] = Buffer::create(mpDevice, drawCount * sizeof(uint16_t), ResourceBindFlags::Vertex, Buffer::CpuAccess::None, drawIDs.data());\n\n    // The layout only initializes the vertex data and draw ID layout. The skinning data doesn't get passed into the vertex shader.\n    VertexLayout::SharedPtr pLayout = VertexLayout::create();\n\n    // Add the packed static vertex data layout\n    VertexBufferLayout::SharedPtr pStaticLayout = VertexBufferLayout::create();\n    pStaticLayout->addElement(VERTEX_POSITION_NAME, offsetof(PackedStaticVertexData, position), ResourceFormat::RGB32Float, 1, VERTEX_POSITION_LOC);\n    pStaticLayout->addElement(VERTEX_PACKED_NORMAL_TANGENT_NAME, offsetof(PackedStaticVertexData, packedNormalTangent), ResourceFormat::RGB32Float, 1, VERTEX_PACKED_NORMAL_TANGENT_LOC);\n    pStaticLayout->addElement(VERTEX_TEXCOORD_NAME, offsetof(PackedStaticVertexData, texCrd), ResourceFormat::RG32Float, 1, VERTEX_TEXCOORD_LOC);\n    pLayout->addBufferLayout(Scene::kStaticDataBufferIndex, pStaticLayout);\n\n    // Add the previous vertex data layout\n    VertexBufferLayout::SharedPtr pPrevLayout = VertexBufferLayout::create();\n    pPrevLayout->addElement(VERTEX_PREV_POSITION_NAME, offsetof(PrevVertexData, position), ResourceFormat::RGB32Float, 1, VERTEX_PREV_POSITION_LOC);\n    pLayout->addBufferLayout(Scene::kPrevVertexBufferIndex, pPrevLayout);\n\n    // Add the draw ID layout\n    VertexBufferLayout::SharedPtr pInstLayout = VertexBufferLayout::create();\n    pInstLayout->addElement(INSTANCE_DRAW_ID_NAME, 0, ResourceFormat::R16Uint, 1, INSTANCE_DRAW_ID_LOC);\n    pInstLayout->setInputClass(VertexBufferLayout::InputClass::PerInstanceData, 1);\n    pLayout->addBufferLayout(Scene::kDrawIdBufferIndex, pInstLayout);\n\n    Vao::SharedPtr pVao = Vao::create(mMeshes[0].topology, pLayout, pVBs, pIB, ResourceFormat::R32Uint);\n    return pVao;\n}\n\nvoid SceneBuilder::createGlobalMatricesBuffer(Scene* pScene)\n{\n    pScene->mSceneGraph.resize(mSceneGraph.size());\n\n    for (size_t i = 0; i < mSceneGraph.size(); i++)\n    {\n        assert(mSceneGraph[i].parent <= std::numeric_limits<uint32_t>::max());\n        pScene->mSceneGraph[i] = Scene::Node(mSceneGraph[i].name, (uint32_t)mSceneGraph[i].parent, mSceneGraph[i].transform, mSceneGraph[i].localToBindPose);\n    }\n}\n\nuint32_t SceneBuilder::createMeshData(Scene* pScene)\n{\n    auto& meshData = pScene->mMeshDesc;\n    auto& instanceData = pScene->mMeshInstanceData;\n    meshData.resize(mMeshes.size());\n    pScene->mMeshHasDynamicData.resize(mMeshes.size());\n\n    size_t drawCount = 0;\n    for (uint32_t meshID = 0; meshID < mMeshes.size(); meshID++)\n    {\n        // Mesh data\n        const auto& mesh = mMeshes[meshID];\n        meshData[meshID].materialID = mesh.materialId;\n        meshData[meshID].vbOffset = mesh.staticVertexOffset;\n        meshData[meshID].ibOffset = mesh.indexOffset;\n        meshData[meshID].vertexCount = mesh.vertexCount;\n        meshData[meshID].indexCount = mesh.indexCount;\n\n        drawCount += mesh.instances.size();\n\n        // Mesh instance data\n        for (const auto& instance : mesh.instances)\n        {\n            instanceData.push_back({});\n            auto& meshInstance = instanceData.back();\n            meshInstance.globalMatrixID = instance.nodeId;\n            meshInstance.materialID = instance.overrideMaterial ? instance.materialId : mesh.materialId;\n            meshInstance.meshID = meshID;\n            meshInstance.vbOffset = mesh.staticVertexOffset;\n            meshInstance.ibOffset = mesh.indexOffset;\n        }\n\n        if (mesh.hasDynamicData)\n        {\n            assert(mesh.instances.size() == 1);\n            pScene->mMeshHasDynamicData[meshID] = true;\n\n            for (uint32_t i = 0; i < mesh.vertexCount; i++)\n            {\n                mBuffersData.dynamicData[mesh.dynamicVertexOffset + i].globalMatrixID = (uint32_t)mesh.instances[0].nodeId;\n            }\n        }\n    }\n    assert(drawCount <= std::numeric_limits<uint32_t>::max());\n    return (uint32_t)drawCount;\n}\n\nScene::SharedPtr SceneBuilder::getScene()\n{\n    // We cache the scene because creating it is not cheap.\n    // With the PythonImporter, the scene is fetched twice, once for running\n    // the scene script and another time when the scene has finished loading.\n    if (mpScene && !mDirty)\n    {\n        // PythonImporter sets the filename after loading the nested scene,\n        // so we need to set it to the correct value here.\n        mpScene->mFilename = mFilename;\n        return mpScene;\n    }\n\n    if (mMeshes.size() == 0)\n    {\n        logError(\"Can't build scene. No meshes were loaded\");\n        return nullptr;\n    }\n\n    TimeReport timeReport;\n    LOG_DBG(\"getScene timeReport\");\n\n    mpScene = Scene::create(mpDevice);\n    timeReport.measure(\"getScene Scene::create\");\n    \n    mpScene->mCameras = mCameras;\n    mpScene->mSelectedCamera = mSelectedCamera;\n    mpScene->mCameraSpeed = mCameraSpeed;\n    mpScene->mLights = mLights;\n    mpScene->mMaterials = mMaterials;\n    mpScene->mpLightProbe = mpLightProbe;\n    mpScene->mpEnvMap = mpEnvMap;\n    mpScene->mFilename = mFilename;\n\n    createGlobalMatricesBuffer(mpScene.get());\n    timeReport.measure(\"getScene createGlobalMatricesBuffer\");\n\n    uint32_t drawCount = createMeshData(mpScene.get());\n    timeReport.measure(\"getScene createMeshData\");\n\n    assert(drawCount <= std::numeric_limits<uint16_t>::max());\n    mpScene->mpVao = createVao(drawCount);\n    timeReport.measure(\"getScene createVao\");\n\n    calculateMeshBoundingBoxes(mpScene.get());\n    timeReport.measure(\"getScene calculateMeshBoundingBoxes\");\n\n    createAnimationController(mpScene.get());\n    timeReport.measure(\"getScene createAnimationController\");\n\n    mpScene->finalize();\n    timeReport.measure(\"getScene finalize mpScene\");\n    mDirty = false;\n\n    timeReport.addTotal(\"getScene done in\");\n    timeReport.printToLog();\n\n    return mpScene;\n}\n\nvoid SceneBuilder::calculateMeshBoundingBoxes(Scene* pScene)\n{\n    // Calculate mesh bounding boxes\n    pScene->mMeshBBs.resize(mMeshes.size());\n    for (size_t i = 0; i < mMeshes.size(); i++)\n    {\n        const auto& mesh = mMeshes[i];\n        float3 boxMin(FLT_MAX);\n        float3 boxMax(-FLT_MAX);\n\n        const auto* staticData = &mBuffersData.staticData[mesh.staticVertexOffset];\n        for (uint32_t v = 0; v < mesh.vertexCount; v++)\n        {\n            boxMin = glm::min(boxMin, staticData[v].position);\n            boxMax = glm::max(boxMax, staticData[v].position);\n        }\n\n        pScene->mMeshBBs[i] = BoundingBox::fromMinMax(boxMin, boxMax);\n    }\n}\n\nvoid SceneBuilder::addAnimation(const Animation::SharedPtr& pAnimation)\n{\n    mAnimations.push_back(pAnimation);\n    mDirty = true;\n}\n\nvoid SceneBuilder::createAnimationController(Scene* pScene)\n{\n    pScene->mpAnimationController = AnimationController::create(pScene, mBuffersData.staticData, mBuffersData.dynamicData);\n    for (const auto& pAnim : mAnimations)\n    {\n        pScene->mpAnimationController->addAnimation(pAnim);\n    }\n}\n\nSCRIPT_BINDING(SceneBuilder)\n{\n    pybind11::enum_<SceneBuilder::Flags> flags(m, \"SceneBuilderFlags\");\n    flags.value(\"Default\", SceneBuilder::Flags::Default);\n    flags.value(\"RemoveDuplicateMaterials\", SceneBuilder::Flags::RemoveDuplicateMaterials);\n    flags.value(\"UseOriginalTangentSpace\", SceneBuilder::Flags::UseOriginalTangentSpace);\n    flags.value(\"AssumeLinearSpaceTextures\", SceneBuilder::Flags::AssumeLinearSpaceTextures);\n    flags.value(\"DontMergeMeshes\", SceneBuilder::Flags::DontMergeMeshes);\n    flags.value(\"BuffersAsShaderResource\", SceneBuilder::Flags::BuffersAsShaderResource);\n    flags.value(\"UseSpecGlossMaterials\", SceneBuilder::Flags::UseSpecGlossMaterials);\n    flags.value(\"UseMetalRoughMaterials\", SceneBuilder::Flags::UseMetalRoughMaterials);\n    flags.value(\"NonIndexedVertices\", SceneBuilder::Flags::NonIndexedVertices);\n    ScriptBindings::addEnumBinaryOperators(flags);\n}\n\n}  // namespace Falcor\n",
			"file": "src/Falcor/Scene/SceneBuilder.cpp",
			"file_size": 31975,
			"file_write_time": 133352798597027383,
			"settings":
			{
				"buffer_size": 31975,
				"encoding": "UTF-8",
				"line_ending": "Unix"
			}
		},
		{
			"contents": "/***************************************************************************\n # Copyright (c) 2020, NVIDIA CORPORATION. All rights reserved.\n #\n # Redistribution and use in source and binary forms, with or without\n # modification, are permitted provided that the following conditions\n # are met:\n #  * Redistributions of source code must retain the above copyright\n #    notice, this list of conditions and the following disclaimer.\n #  * Redistributions in binary form must reproduce the above copyright\n #    notice, this list of conditions and the following disclaimer in the\n #    documentation and/or other materials provided with the distribution.\n #  * Neither the name of NVIDIA CORPORATION nor the names of its\n #    contributors may be used to endorse or promote products derived\n #    from this software without specific prior written permission.\n #\n # THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS ``AS IS'' AND ANY\n # EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n # IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR\n # PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT OWNER OR\n # CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,\n # EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,\n # PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n # PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY\n # OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n # (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n # OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n **************************************************************************/\n#ifndef SRC_FALCOR_SCENE_SCENEBUILDER_H_\n#define SRC_FALCOR_SCENE_SCENEBUILDER_H_\n\n#include <map>\n\n#include \"Scene.h\"\n#include \"VertexAttrib.slangh\"\n\n\nnamespace Falcor {\n\nclass Device;\n\nclass dlldecl SceneBuilder {\n public:\n    using SharedPtr = std::shared_ptr<SceneBuilder>;\n\n    /** Flags that control how the scene will be built. They can be combined together.\n    */\n    enum class Flags {\n        None                        = 0x0,    ///< None\n        RemoveDuplicateMaterials    = 0x1,    ///< Deduplicate materials that have the same properties. The material name is ignored during the search.\n        UseOriginalTangentSpace     = 0x2,    ///< Use the original tangent space that was loaded with the mesh. By default, we will ignore it and use MikkTSpace to generate the tangent space. We will always generate tangent space if it is missing.\n        AssumeLinearSpaceTextures   = 0x4,    ///< By default, textures representing colors (diffuse/specular) are interpreted as sRGB data. Use this flag to force linear space for color textures.\n        DontMergeMeshes             = 0x8,    ///< Preserve the original list of meshes in the scene, don't merge meshes with the same material.\n        BuffersAsShaderResource     = 0x10,   ///< Generate the VBs and IB with the shader-resource-view bind flag.\n        UseSpecGlossMaterials       = 0x20,   ///< Set materials to use Spec-Gloss shading model. Otherwise default is Spec-Gloss for OBJ, Metal-Rough for everything else.\n        UseMetalRoughMaterials      = 0x40,   ///< Set materials to use Metal-Rough shading model. Otherwise default is Spec-Gloss for OBJ, Metal-Rough for everything else.\n        NonIndexedVertices          = 0x80,   ///< Convert meshes to use non-indexed vertices. This requires more memory but may increase performance.\n\n        Default = None\n    };\n\n    /** Mesh description\n    */\n    struct Mesh {\n        //Mesh(const Mesh&) = delete;//{ std::cout << \"A copy was made.\\n\"; }\n        enum class AttributeFrequency {\n            None,\n            Constant,       ///< Constant value for mesh. The element count must be 1.\n            Uniform,        ///< One value per face. The element count must match `faceCount`.\n            Vertex,         ///< One value per vertex. The element count must match `vertexCount`.\n            FaceVarying,    ///< One value per vertex per face. The element count must match `indexCount`.\n        };\n\n        template<typename T>\n        struct Attribute {\n            const T* pData = nullptr;\n            AttributeFrequency frequency = AttributeFrequency::None;\n        };\n\n        std::string name;                           ///< The mesh's name.\n        uint32_t faceCount = 0;                     ///< The number of primitives the mesh has.\n        uint32_t vertexCount = 0;                   ///< The number of vertices the mesh has.\n        uint32_t indexCount = 0;                    ///< The number of indices the mesh has.\n        const uint32_t* pIndices = nullptr;         ///< Array of indices. The element count must match `indexCount`. This field is required.\n        Vao::Topology topology = Vao::Topology::Undefined; ///< The primitive topology of the mesh\n        Material::SharedPtr pMaterial;              ///< The mesh's material. Can't be nullptr.\n\n        Attribute<float3> positions;                ///< Array of vertex positions. This field is required.\n        Attribute<float3> normals;                  ///< Array of vertex normals. This field is required.\n        Attribute<float4> tangents;                 ///< Array of vertex tangents. This field is optional. If set to nullptr, or if BuildFlags::UseOriginalTangentSpace is not set, the tangent space will be generated using MikkTSpace.\n        Attribute<float2> texCrds;                  ///< Array of vertex texture coordinates. This field is optional. If set to nullptr, all texCrds will be set to (0,0).\n        Attribute<uint4> boneIDs;                   ///< Array of bone IDs. This field is optional. If it's set, that means that the mesh is animated, in which case boneWeights is required.\n        Attribute<float4> boneWeights;              ///< Array of bone weights. This field is optional. If it's set, that means that the mesh is animated, in which case boneIDs is required.\n\n        template<typename T>\n        T get(const Attribute<T>& attribute, uint32_t face, uint32_t vert) const\n        {\n            if (attribute.pData)\n            {\n                switch (attribute.frequency)\n                {\n                case AttributeFrequency::Constant:\n                    return attribute.pData[0];\n                case AttributeFrequency::Uniform:\n                    return attribute.pData[face];\n                case AttributeFrequency::Vertex:\n                    return attribute.pData[pIndices[face * 3 + vert]];\n                case AttributeFrequency::FaceVarying:\n                    return attribute.pData[face * 3 + vert];\n                default:\n                    should_not_get_here();\n                }\n            }\n            return T{};\n        }\n\n        float3 getPosition(uint32_t face, uint32_t vert) const { return get(positions, face, vert); }\n        float3 getNormal(uint32_t face, uint32_t vert) const { return get(normals, face, vert); }\n        float4 getTangent(uint32_t face, uint32_t vert) const { return get(tangents, face, vert); }\n        float2 getTexCrd(uint32_t face, uint32_t vert) const { return get(texCrds, face, vert); }\n\n        struct Vertex {\n            float3 position;\n            float3 normal;\n            float4 tangent;\n            float2 texCrd;\n            uint4 boneIDs;\n            float4 boneWeights;\n        };\n\n        Vertex getVertex(uint32_t face, uint32_t vert) const {\n            Vertex v = {};\n            v.position = get(positions, face, vert);\n            v.normal = get(normals, face, vert);\n            v.tangent = get(tangents, face, vert);\n            v.texCrd = get(texCrds, face, vert);\n            v.boneIDs = get(boneIDs, face, vert);\n            v.boneWeights = get(boneWeights, face, vert);\n            return v;\n        }\n\n        bool hasBones() const {\n            return boneWeights.pData || boneIDs.pData;\n        }\n    };\n\n    static const uint32_t kInvalidNode = Scene::kInvalidNode;\n\n    struct Node {\n        std::string name;\n        glm::mat4 transform;\n        glm::mat4 localToBindPose;   // For bones\n        uint32_t parent = kInvalidNode;\n    };\n\n    using InstanceMatrices = std::vector<glm::mat4>;\n\n    std::shared_ptr<Device> device() { return mpDevice; };\n    std::shared_ptr<Device> device() const { return mpDevice; };\n\n    /** Create a new object\n    */\n    static SharedPtr create(std::shared_ptr<Device> pDevice, Flags mFlags = Flags::Default);\n\n    /** Create a new builder and import a scene/model file\n        \\param filename The filename to load\n        \\param flags The build flags\n        \\param instances A list of instance matrices to load. This is optional, by default a single instance will be load\n        \\return A new object with the imported file already initialized. If an import error occurred, a nullptr will be returned\n    */\n    static SharedPtr create(std::shared_ptr<Device> pDevice, const std::string& filename, Flags buildFlags = Flags::Default, const InstanceMatrices& instances = InstanceMatrices());\n\n    /** Import a scene/model file\n        \\param filename The filename to load\n        \\param instances A list of instance matrices to load. This is optional, by default a single instance will be load\n        \\return true if the import succeeded, otherwise false\n    */\n    bool import(const std::string& filename, const InstanceMatrices& instances = InstanceMatrices(), const Dictionary& dict = Dictionary());\n\n    /** Get the scene. Make sure to add all the objects before calling this function\n        \\return nullptr if something went wrong, otherwise a new Scene object\n    */\n    Scene::SharedPtr getScene();\n\n    /** Adds a node to the graph.\n        Note that if the node contains data other then the transform matrix (such as meshes or lights), you'll need to add those objects before adding the node.\n        \\return The node ID.\n    */\n    uint32_t addNode(const Node& node);\n\n    /** Check if a scene node is animated. This check is done recursively through parent nodes.\n        \\return Returns true if node is animated.\n    */\n    bool isNodeAnimated(uint32_t nodeID) const;\n\n    /** Set the animation interpolation mode for a given scene node. This sets the mode recursively for all parent nodes.\n    */\n    void setNodeInterpolationMode(uint32_t nodeID, Animation::InterpolationMode interpolationMode, bool enableWarping);\n\n    /** Add a mesh instance to a node\n    */\n    void addMeshInstance(uint32_t nodeID, uint32_t meshID);\n\n    /** Add a mesh instance to a node\n    */\n    void addMeshInstance(uint32_t nodeID, uint32_t meshID, const Material::SharedPtr& pMaterial);\n\n    /** Add a mesh. This function will throw an exception if something went wrong.\n        \\param meshDesc The mesh's description.\n        \\return The ID of the mesh in the scene. Note that all of the instances share the same mesh ID.\n    */\n    uint32_t addMesh(const Mesh& meshDesc);\n\n    /** Add a light source\n        \\param pLight The light object.\n        \\return The light ID\n    */\n    uint32_t addLight(const Light::SharedPtr& pLight);\n\n    /** Get the number of attached lights\n    */\n    size_t getLightCount() const { return mLights.size(); }\n\n    /** Set a light-probe\n        \\param pProbe The environment map. You can set it to null to disable environment mapping\n    */\n    void setLightProbe(const LightProbe::SharedPtr& pProbe) { mpLightProbe = pProbe; }\n\n    /** Get a light-probe\n    */\n    LightProbe::SharedPtr getLightProbe() const { return mpLightProbe; }\n\n    /** Set an environment map.\n        \\param[in] pEnvMap Environment map. Can be nullptr.\n    */\n    void setEnvMap(EnvMap::SharedPtr pEnvMap) { mpEnvMap = pEnvMap; }\n\n    /** Add a camera.\n        \\param pCamera Camera to be added.\n        \\return The camera ID\n    */\n    uint32_t addCamera(const Camera::SharedPtr& pCamera);\n\n    /** Get the number of attached cameras\n    */\n    size_t getCameraCount() const { return mCameras.size(); }\n\n    /** Select a camera.\n        \\param name The name of the camera to select.\n    */\n    void setCamera(const std::string name);\n\n    /** Get the build flags\n    */\n    Flags getFlags() const { return mFlags; }\n\n    /** Add an animation\n        \\param animation The animation\n    */\n    void addAnimation(const Animation::SharedPtr& pAnimation);\n\n    /** Set the camera's speed\n    */\n    void setCameraSpeed(float speed) { mCameraSpeed = speed; }\n\nprotected:\n    SceneBuilder(std::shared_ptr<Device> pDevice, Flags buildFlags);\n\n    struct InternalNode : Node {\n        InternalNode() = default;\n        InternalNode(const Node& n) : Node(n) {}\n        std::vector<uint32_t> children;\n        std::vector<uint32_t> meshes;\n    };\n\n    struct MeshInstanceSpec {\n        uint32_t    nodeId;\n        uint32_t    materialId;\n        bool        overrideMaterial = false;\n    };\n\n    struct MeshSpec {\n        MeshSpec() = default;\n        Vao::Topology topology;\n        uint32_t materialId = 0;\n        uint32_t indexOffset = 0;\n        uint32_t staticVertexOffset = 0;\n        uint32_t dynamicVertexOffset = 0;\n        uint32_t indexCount = 0;\n        uint32_t vertexCount = 0;\n        bool hasDynamicData = false;\n        //std::vector<uint32_t> instances; // Node IDs\n        std::vector<MeshInstanceSpec> instances;\n    };\n\n    // Geometry data\n    struct BuffersData {\n        std::vector<uint32_t> indices;\n        std::vector<PackedStaticVertexData> staticData;\n        std::vector<DynamicVertexData> dynamicData;\n    } mBuffersData;\n\n    using SceneGraph = std::vector<InternalNode>;\n    using MeshList = std::vector<MeshSpec>;\n\n    bool mDirty = true;\n\n    std::shared_ptr<Device> mpDevice;\n    Scene::SharedPtr mpScene;\n\n    SceneGraph mSceneGraph;\n    const Flags mFlags;\n\n    MeshList mMeshes;\n    std::vector<Material::SharedPtr> mMaterials;\n    std::unordered_map<const Material*, uint32_t> mMaterialToId;\n\n    std::vector<Camera::SharedPtr> mCameras;\n    std::vector<Light::SharedPtr> mLights;\n    LightProbe::SharedPtr mpLightProbe = nullptr;\n    EnvMap::SharedPtr mpEnvMap;\n    std::vector<Animation::SharedPtr> mAnimations;\n    uint32_t mSelectedCamera = 0;\n    float mCameraSpeed = 1.0f;\n\n    uint32_t addMaterial(const Material::SharedPtr& pMaterial, bool removeDuplicate);\n    Vao::SharedPtr createVao(uint16_t drawCount);\n\n    uint32_t createMeshData(Scene* pScene);\n    void createGlobalMatricesBuffer(Scene* pScene);\n    void calculateMeshBoundingBoxes(Scene* pScene);\n    void createAnimationController(Scene* pScene);\n    std::string mFilename;\n};\n\nenum_class_operators(SceneBuilder::Flags);\n\n}  // namespace Falcor\n\n#endif  // SRC_FALCOR_SCENE_SCENEBUILDER_H_\n",
			"file": "src/Falcor/Scene/SceneBuilder.h",
			"file_size": 14672,
			"file_write_time": 133352798597027383,
			"settings":
			{
				"buffer_size": 14672,
				"encoding": "UTF-8",
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					5,
					1,
					"insert",
					{
						"characters": "bii"
					},
					"BAAAAL1eAAAAAAAAvl4AAAAAAAAAAAAAvl4AAAAAAAC+XgAAAAAAAAQAAAB2b2lkvl4AAAAAAAC/XgAAAAAAAAAAAAC/XgAAAAAAAMBeAAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAL1eAAAAAAAAwV4AAAAAAAAAAAAAAADwvw"
				],
				[
					6,
					2,
					"left_delete",
					null,
					"AgAAAL9eAAAAAAAAv14AAAAAAAABAAAAab5eAAAAAAAAvl4AAAAAAAABAAAAaQ",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAMBeAAAAAAAAwF4AAAAAAAAAAAAAAADwvw"
				],
				[
					7,
					1,
					"insert",
					{
						"characters": "ool"
					},
					"AwAAAL5eAAAAAAAAv14AAAAAAAAAAAAAv14AAAAAAADAXgAAAAAAAAAAAADAXgAAAAAAAMFeAAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAL5eAAAAAAAAvl4AAAAAAAAAAAAAAADwvw"
				],
				[
					1,
					1,
					"revert",
					null,
					"AwAAAAAAAAAAAAAAAAAAAAAAAADGlAAALyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKgogIyBDb3B5cmlnaHQgKGMpIDIwMjAsIE5WSURJQSBDT1JQT1JBVElPTi4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KICMKICMgUmVkaXN0cmlidXRpb24gYW5kIHVzZSBpbiBzb3VyY2UgYW5kIGJpbmFyeSBmb3Jtcywgd2l0aCBvciB3aXRob3V0CiAjIG1vZGlmaWNhdGlvbiwgYXJlIHBlcm1pdHRlZCBwcm92aWRlZCB0aGF0IHRoZSBmb2xsb3dpbmcgY29uZGl0aW9ucwogIyBhcmUgbWV0OgogIyAgKiBSZWRpc3RyaWJ1dGlvbnMgb2Ygc291cmNlIGNvZGUgbXVzdCByZXRhaW4gdGhlIGFib3ZlIGNvcHlyaWdodAogIyAgICBub3RpY2UsIHRoaXMgbGlzdCBvZiBjb25kaXRpb25zIGFuZCB0aGUgZm9sbG93aW5nIGRpc2NsYWltZXIuCiAjICAqIFJlZGlzdHJpYnV0aW9ucyBpbiBiaW5hcnkgZm9ybSBtdXN0IHJlcHJvZHVjZSB0aGUgYWJvdmUgY29weXJpZ2h0CiAjICAgIG5vdGljZSwgdGhpcyBsaXN0IG9mIGNvbmRpdGlvbnMgYW5kIHRoZSBmb2xsb3dpbmcgZGlzY2xhaW1lciBpbiB0aGUKICMgICAgZG9jdW1lbnRhdGlvbiBhbmQvb3Igb3RoZXIgbWF0ZXJpYWxzIHByb3ZpZGVkIHdpdGggdGhlIGRpc3RyaWJ1dGlvbi4KICMgICogTmVpdGhlciB0aGUgbmFtZSBvZiBOVklESUEgQ09SUE9SQVRJT04gbm9yIHRoZSBuYW1lcyBvZiBpdHMKICMgICAgY29udHJpYnV0b3JzIG1heSBiZSB1c2VkIHRvIGVuZG9yc2Ugb3IgcHJvbW90ZSBwcm9kdWN0cyBkZXJpdmVkCiAjICAgIGZyb20gdGhpcyBzb2Z0d2FyZSB3aXRob3V0IHNwZWNpZmljIHByaW9yIHdyaXR0ZW4gcGVybWlzc2lvbi4KICMKICMgVEhJUyBTT0ZUV0FSRSBJUyBQUk9WSURFRCBCWSBUSEUgQ09QWVJJR0hUIEhPTERFUlMgYGBBUyBJUycnIEFORCBBTlkKICMgRVhQUkVTUyBPUiBJTVBMSUVEIFdBUlJBTlRJRVMsIElOQ0xVRElORywgQlVUIE5PVCBMSU1JVEVEIFRPLCBUSEUKICMgSU1QTElFRCBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSBBTkQgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSCiAjIFBVUlBPU0UgQVJFIERJU0NMQUlNRUQuICBJTiBOTyBFVkVOVCBTSEFMTCBUSEUgQ09QWVJJR0hUIE9XTkVSIE9SCiAjIENPTlRSSUJVVE9SUyBCRSBMSUFCTEUgRk9SIEFOWSBESVJFQ1QsIElORElSRUNULCBJTkNJREVOVEFMLCBTUEVDSUFMLAogIyBFWEVNUExBUlksIE9SIENPTlNFUVVFTlRJQUwgREFNQUdFUyAoSU5DTFVESU5HLCBCVVQgTk9UIExJTUlURUQgVE8sCiAjIFBST0NVUkVNRU5UIE9GIFNVQlNUSVRVVEUgR09PRFMgT1IgU0VSVklDRVM7IExPU1MgT0YgVVNFLCBEQVRBLCBPUgogIyBQUk9GSVRTOyBPUiBCVVNJTkVTUyBJTlRFUlJVUFRJT04pIEhPV0VWRVIgQ0FVU0VEIEFORCBPTiBBTlkgVEhFT1JZCiAjIE9GIExJQUJJTElUWSwgV0hFVEhFUiBJTiBDT05UUkFDVCwgU1RSSUNUIExJQUJJTElUWSwgT1IgVE9SVAogIyAoSU5DTFVESU5HIE5FR0xJR0VOQ0UgT1IgT1RIRVJXSVNFKSBBUklTSU5HIElOIEFOWSBXQVkgT1VUIE9GIFRIRSBVU0UKICMgT0YgVEhJUyBTT0ZUV0FSRSwgRVZFTiBJRiBBRFZJU0VEIE9GIFRIRSBQT1NTSUJJTElUWSBPRiBTVUNIIERBTUFHRS4KICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqLwojaWZuZGVmIFNSQ19GQUxDT1JfU0NFTkVfU0NFTkVCVUlMREVSX0hfCiNkZWZpbmUgU1JDX0ZBTENPUl9TQ0VORV9TQ0VORUJVSUxERVJfSF8KCiNpbmNsdWRlIDxtYXA+CgojaW5jbHVkZSAiRmFsY29yL1V0aWxzL1NjcmlwdGluZy9EaWN0aW9uYXJ5LmgiCiNpbmNsdWRlICJGYWxjb3IvVXRpbHMvVGhyZWFkUG9vbC5oIgoKI2luY2x1ZGUgIlNjZW5lLmgiCiNpbmNsdWRlICJTY2VuZUNhY2hlLmgiCiNpbmNsdWRlICJUcmFuc2Zvcm0uaCIKI2luY2x1ZGUgIlRyaWFuZ2xlTWVzaC5oIgojaW5jbHVkZSAiTWF0ZXJpYWwvTWF0ZXJpYWxUZXh0dXJlTG9hZGVyLmgiCiNpbmNsdWRlICJNYXRlcmlhbFgvTWF0ZXJpYWxYLmgiCiNpbmNsdWRlICJWZXJ0ZXhBdHRyaWIuc2xhbmdoIgoKCm5hbWVzcGFjZSBGYWxjb3IgewoKY2xhc3MgRGV2aWNlOwoKY2xhc3MgZGxsZGVjbCBTY2VuZUJ1aWxkZXIgewogcHVibGljOgogICAgdXNpbmcgU2hhcmVkUHRyID0gc3RkOjpzaGFyZWRfcHRyPFNjZW5lQnVpbGRlcj47CgogICAgc3RhdGljIGNvbnN0IHVpbnQzMl90IGtJbnZhbGlkTm9kZSA9IEFuaW1hdGFibGU6OmtJbnZhbGlkTm9kZTsKICAgIHN0YXRpYyBjb25zdCB1aW50MzJfdCBrSW52YWxpZEV4cG9ydGVkSUQgPSBBbmltYXRhYmxlOjprSW52YWxpZE5vZGU7ICAvLy88IExhcmdlc3QgdWludDMyIHZhbHVlICgtMSkKICAgIHN0YXRpYyBjb25zdCB1aW50MzJfdCBrSW52YWxpZE1lc2hsZXRJRCA9IEFuaW1hdGFibGU6OmtJbnZhbGlkTm9kZTsgIC8vLzwgTGFyZ2VzdCB1aW50MzIgdmFsdWUgKC0xKQoKICAgIHN0cnVjdCBJbnN0YW5jZVNoYWRpbmdTcGVjIHsKICAgICAgICBib29sICAgICAgICBpc01hdHRlID0gZmFsc2U7CiAgICAgICAgYm9vbCAgICAgICAgZml4U2hhZG93VGVybWluYXRvciA9IHRydWU7CiAgICAgICAgYm9vbCAgICAgICAgYmlhc0Fsb25nTm9ybWFsID0gZmFsc2U7CiAgICAgICAgYm9vbCAgICAgICAgZG91YmxlU2lkZWQgPSB0cnVlOwogICAgfTsKCiAgICBzdHJ1Y3QgSW5zdGFuY2VWaXNpYmlsaXR5U3BlYyB7CiAgICAgICAgYm9vbCAgICAgICAgdmlzaWJsZVRvUHJpbWFyeVJheXMgPSB0cnVlOwogICAgICAgIGJvb2wgICAgICAgIHZpc2libGVUb1NoYWRvd1JheXMgPSB0cnVlOwogICAgICAgIGJvb2wgICAgICAgIHZpc2libGVUb0RpZmZ1c2VSYXlzID0gdHJ1ZTsKICAgICAgICBib29sICAgICAgICB2aXNpYmxlVG9SZWZsZWN0aW9uUmF5cyA9IHRydWU7CiAgICAgICAgYm9vbCAgICAgICAgdmlzaWJsZVRvUmVmcmFjdGlvblJheXMgPSB0cnVlOwogICAgICAgIGJvb2wgICAgICAgIHJlY2VpdmVTaGFkb3dzID0gdHJ1ZTsKICAgICAgICBib29sICAgICAgICByZWNlaXZlU2VsZlNoYWRvd3MgPSB0cnVlOwogICAgfTsKCiAgICAvKiogVGhpcyBzdHJ1Y3QgaG9sZHMgcGVyIGluc3RhbmNlIGFyYml0cmFyeSBkYXRhIHRoYXQgbWlnaHQgYmUgdXNlZCBtYXAgcmVuZGVyZXIgaW50ZXJuYWwgbWVzaCBkYXRhIHRvIG9uZSB3YXMgZXhwb3J0ZWQgZnJvbSBzb21lIHNvZnR3YXJlLgogICAgICogIFdlIGNhbiB1c2UgZWl0aGVyIGFsbCBvZiB0aGUgZmllbGRzLCBzb21lIGZpZWxkcyBvciBub25lIG9mIHRoZW0gYXQgYWxsLiBEZXBlbmRzIG9uIGEgdGFzay4KICAgICAqLwoKICAgIHN0cnVjdCBJbnN0YW5jZUV4cG9ydGVkRGF0YVNwZWMgewogICAgICAgIHVpbnQzMl90ICAgIGlkID0ga0ludmFsaWRFeHBvcnRlZElEOyAgICAgICAgIC8vLzwgU29tZSBpZCB0aGF0IHdhcyBnZW5lcmF0ZWQgYnkgYW55IGNvbnRlbnQgY3JlYXRpb24gc29mdHdhcmUsIGV4cG9ydGVyLCBldGMuLi4gSWQgZ2l2ZW4gYnkgYW55IGRjYyBzb2Z0d2FyZS4KICAgICAgICBzdGQ6OnN0cmluZyBuYW1lOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLy88IFNhbWUgY29uY2VwdCBhcyBleHBvcnRlZElELCBidXQgc2hpdCB0aW1lIGl0J3MgYSBzdHJpbmcgLi4uICAKICAgIH07CgogICAgc3RydWN0IE1lc2hJbnN0YW5jZUNyZWF0aW9uU3BlYyB7CiAgICAgICAgSW5zdGFuY2VFeHBvcnRlZERhdGFTcGVjKiAgIHBFeHBvcnRlZERhdGFTcGVjID0gbnVsbHB0cjsKICAgICAgICBJbnN0YW5jZVZpc2liaWxpdHlTcGVjKiAgICAgcFZpc2liaWxpdHlTcGVjID0gbnVsbHB0cjsKICAgICAgICBJbnN0YW5jZVNoYWRpbmdTcGVjKiAgICAgICAgcFNoYWRpbmdTcGVjID0gbnVsbHB0cjsKICAgICAgICBNYXRlcmlhbDo6U2hhcmVkUHRyICAgICAgICAgcE1hdGVyaWFsT3ZlcnJpZGUgPSBudWxscHRyOwogICAgfTsKCiAgICAvKiogRmxhZ3MgdGhhdCBjb250cm9sIGhvdyB0aGUgc2NlbmUgd2lsbCBiZSBidWlsdC4gVGhleSBjYW4gYmUgY29tYmluZWQgdG9nZXRoZXIuCiAgICAqLwogICAgZW51bSBjbGFzcyBGbGFncyB7CiAgICAgICAgTm9uZSAgICAgICAgICAgICAgICAgICAgICAgICAgICA9IDB4MCwgICAgICAvLy88IE5vbmUKICAgICAgICBEb250TWVyZ2VNYXRlcmlhbHMgICAgICAgICAgICAgID0gMHgxLCAgICAgIC8vLzwgRG9uJ3QgbWVyZ2UgbWF0ZXJpYWxzIHRoYXQgaGF2ZSB0aGUgc2FtZSBwcm9wZXJ0aWVzLiBVc2UgdGhpcyBvcHRpb24gdG8gcHJlc2VydmUgdGhlIG9yaWdpbmFsIG1hdGVyaWFsIG5hbWVzLgogICAgICAgIFVzZU9yaWdpbmFsVGFuZ2VudFNwYWNlICAgICAgICAgPSAweDIsICAgICAgLy8vPCBVc2UgdGhlIG9yaWdpbmFsIHRhbmdlbnQgc3BhY2UgdGhhdCB3YXMgbG9hZGVkIHdpdGggdGhlIG1lc2guIEJ5IGRlZmF1bHQsIHdlIHdpbGwgaWdub3JlIGl0IGFuZCB1c2UgTWlra1RTcGFjZSB0byBnZW5lcmF0ZSB0aGUgdGFuZ2VudCBzcGFjZS4gV2Ugd2lsbCBhbHdheXMgZ2VuZXJhdGUgdGFuZ2VudCBzcGFjZSBpZiBpdCBpcyBtaXNzaW5nLgogICAgICAgIEFzc3VtZUxpbmVhclNwYWNlVGV4dHVyZXMgICAgICAgPSAweDQsICAgICAgLy8vPCBCeSBkZWZhdWx0LCB0ZXh0dXJlcyByZXByZXNlbnRpbmcgY29sb3JzIChkaWZmdXNlL3NwZWN1bGFyKSBhcmUgaW50ZXJwcmV0ZWQgYXMgc1JHQiBkYXRhLiBVc2UgdGhpcyBmbGFnIHRvIGZvcmNlIGxpbmVhciBzcGFjZSBmb3IgY29sb3IgdGV4dHVyZXMuCiAgICAgICAgRG9udE1lcmdlTWVzaGVzICAgICAgICAgICAgICAgICA9IDB4OCwgICAgICAvLy88IFByZXNlcnZlIHRoZSBvcmlnaW5hbCBsaXN0IG9mIG1lc2hlcyBpbiB0aGUgc2NlbmUsIGRvbid0IG1lcmdlIG1lc2hlcyB3aXRoIHRoZSBzYW1lIG1hdGVyaWFsLiBUaGlzIGZsYWcgb25seSBhcHBsaWVzIHRvIHNjZW5lcyBpbXBvcnRlZCBieSAnQXNzaW1wSW1wb3J0ZXInLgogICAgICAgIFVzZVNwZWNHbG9zc01hdGVyaWFscyAgICAgICAgICAgPSAweDEwLCAgICAgLy8vPCBTZXQgbWF0ZXJpYWxzIHRvIHVzZSBTcGVjLUdsb3NzIHNoYWRpbmcgbW9kZWwuIE90aGVyd2lzZSBkZWZhdWx0IGlzIFNwZWMtR2xvc3MgZm9yIE9CSiwgTWV0YWwtUm91Z2ggZm9yIGV2ZXJ5dGhpbmcgZWxzZS4KICAgICAgICBVc2VNZXRhbFJvdWdoTWF0ZXJpYWxzICAgICAgICAgID0gMHgyMCwgICAgIC8vLzwgU2V0IG1hdGVyaWFscyB0byB1c2UgTWV0YWwtUm91Z2ggc2hhZGluZyBtb2RlbC4gT3RoZXJ3aXNlIGRlZmF1bHQgaXMgU3BlYy1HbG9zcyBmb3IgT0JKLCBNZXRhbC1Sb3VnaCBmb3IgZXZlcnl0aGluZyBlbHNlLgogICAgICAgIE5vbkluZGV4ZWRWZXJ0aWNlcyAgICAgICAgICAgICAgPSAweDQwLCAgICAgLy8vPCBDb252ZXJ0IG1lc2hlcyB0byB1c2Ugbm9uLWluZGV4ZWQgdmVydGljZXMuIFRoaXMgcmVxdWlyZXMgbW9yZSBtZW1vcnkgYnV0IG1heSBpbmNyZWFzZSBwZXJmb3JtYW5jZS4KICAgICAgICBGb3JjZTMyQml0SW5kaWNlcyAgICAgICAgICAgICAgID0gMHg4MCwgICAgIC8vLzwgRm9yY2UgMzItYml0IGluZGljZXMgZm9yIGFsbCBtZXNoZXMuIEJ5IGRlZmF1bHQsIDE2LWJpdCBpbmRpY2VzIGFyZSB1c2VkIGZvciBzbWFsbCBtZXNoZXMuCiAgICAgICAgUlREb250TWVyZ2VTdGF0aWMgICAgICAgICAgICAgICA9IDB4MTAwLCAgICAvLy88IEZvciByYXl0cmFjaW5nLCBkb24ndCBtZXJnZSBhbGwgc3RhdGljIG5vbi1pbnN0YW5jZWQgbWVzaGVzIGludG8gc2luZ2xlIHByZS10cmFuc2Zvcm1lZCBCTEFTLgogICAgICAgIFJURG9udE1lcmdlRHluYW1pYyAgICAgICAgICAgICAgPSAweDIwMCwgICAgLy8vPCBGb3IgcmF5dHJhY2luZywgZG9uJ3QgbWVyZ2UgZHluYW1pYyBub24taW5zdGFuY2VkIG1lc2hlcyB3aXRoIGlkZW50aWNhbCB0cmFuc2Zvcm1zIGludG8gc2luZ2xlIEJMQVMuCiAgICAgICAgUlREb250TWVyZ2VJbnN0YW5jZWQgICAgICAgICAgICA9IDB4NDAwLCAgICAvLy88IEZvciByYXl0cmFjaW5nLCBkb24ndCBtZXJnZSBpbnN0YW5jZWQgbWVzaGVzIHdpdGggaWRlbnRpY2FsIGluc3RhbmNlcyBpbnRvIHNpbmdsZSBCTEFTLgogICAgICAgIEZsYXR0ZW5TdGF0aWNNZXNoSW5zdGFuY2VzICAgICAgPSAweDgwMCwgICAgLy8vPCBGbGF0dGVuIHN0YXRpYyBtZXNoIGluc3RhbmNlcyBieSBkdXBsaWNhdGluZyBtZXNoIGRhdGEgYW5kIGNvbXBvc2luZyB0cmFuc2Zvcm1hdGlvbnMuIEFuaW1hdGVkIGluc3RhbmNlcyBhcmUgbm90IGFmZmVjdGVkLiBDYW4gbGVhZCB0byBhIGxhcmdlIGluY3JlYXNlIGluIG1lbW9yeSB1c2UuCiAgICAgICAgRG9udE9wdGltaXplR3JhcGggICAgICAgICAgICAgICA9IDB4MTAwMCwgICAvLy88IERvbid0IG9wdGltaXplIHRoZSBzY2VuZSBncmFwaCB0byByZW1vdmUgdW5uZWNlc3Nhcnkgbm9kZXMuCiAgICAgICAgRG9udE9wdGltaXplTWF0ZXJpYWxzICAgICAgICAgICA9IDB4MjAwMCwgICAvLy88IERvbid0IG9wdGltaXplIG1hdGVyaWFscyBieSByZW1vdmluZyBjb25zdGFudCB0ZXh0dXJlcy4gVGhlIG9wdGltaXphdGlvbnMgYXJlIGxvc3NsZXNzIHNvIHNob3VsZCBnZW5lcmFsbHkgYmUgZW5hYmxlZC4KICAgICAgICBEb250VXNlRGlzcGxhY2VtZW50ICAgICAgICAgICAgID0gMHg0MDAwLCAgIC8vLzwgRG9uJ3QgdXNlIGRpc3BsYWNlbWVudCBtYXBwaW5nLgogICAgICAgIFVzZUNvbXByZXNzZWRIaXRJbmZvICAgICAgICAgICAgPSAweDgwMDAsICAgLy8vPCBVc2UgY29tcHJlc3NlZCBoaXQgaW5mbyAob24gc2NlbmVzIHdpdGggdHJpYW5nbGUgbWVzaGVzIG9ubHkpLgogICAgICAgIFRlc3NlbGxhdGVDdXJ2ZXNJbnRvUG9seVR1YmVzICAgPSAweDEwMDAwLCAgLy8vPCBUZXNzZWxsYXRlIGN1cnZlcyBpbnRvIHBvbHktdHViZXMgKHRoZSBkZWZhdWx0IGlzIGxpbmVhciBzd2VwdCBzcGhlcmVzKS4KICAgICAgICBVc2VSYXl0cmFjaW5nICAgICAgICAgICAgICAgICAgID0gMHgyMDAwMCwgIC8vLzwgVXNlIHJheXRyYWNpbmcKICAgICAgICBVc2VDcnlwdG9tYXR0ZSAgICAgICAgICAgICAgICAgID0gMHg0MDAwMCwgIC8vLzwgVXNlIGNyeXB0b21hdHRlIHN5c3RlbQoKICAgICAgICBVc2VDYWNoZSAgICAgICAgICAgICAgICAgICAgPSAweDEwMDAwMDAwLCAvLy88IEVuYWJsZSBzY2VuZSBjYWNoaW5nLiBUaGlzIGNhY2hlcyB0aGUgcnVudGltZSBzY2VuZSByZXByZXNlbnRhdGlvbiBvbiBkaXNrIHRvIHJlZHVjZSBsb2FkIHRpbWUuCiAgICAgICAgUmVidWlsZENhY2hlICAgICAgICAgICAgICAgID0gMHgyMDAwMDAwMCwgLy8vPCBSZWJ1aWxkIHNjZW5lIGNhY2hlLgoKICAgICAgICBEZWZhdWx0ID0gTm9uZQogICAgfTsKCiAgICAvKiogTWVzaCBkZXNjcmlwdGlvbgogICAgKi8KICAgIHN0cnVjdCBNZXNoIHsKICAgICAgICAvL01lc2goY29uc3QgTWVzaCYpID0gZGVsZXRlOy8veyBzdGQ6OmNvdXQgPDwgIkEgY29weSB3YXMgbWFkZS5cbiI7IH0KICAgICAgICBlbnVtIGNsYXNzIEF0dHJpYnV0ZUZyZXF1ZW5jeSB7CiAgICAgICAgICAgIE5vbmUsCiAgICAgICAgICAgIENvbnN0YW50LCAgICAgICAvLy88IENvbnN0YW50IHZhbHVlIGZvciBtZXNoLiBUaGUgZWxlbWVudCBjb3VudCBtdXN0IGJlIDEuCiAgICAgICAgICAgIFVuaWZvcm0sICAgICAgICAvLy88IE9uZSB2YWx1ZSBwZXIgZmFjZS4gVGhlIGVsZW1lbnQgY291bnQgbXVzdCBtYXRjaCBgZmFjZUNvdW50YC4KICAgICAgICAgICAgVmVydGV4LCAgICAgICAgIC8vLzwgT25lIHZhbHVlIHBlciB2ZXJ0ZXguIFRoZSBlbGVtZW50IGNvdW50IG11c3QgbWF0Y2ggYHZlcnRleENvdW50YC4KICAgICAgICAgICAgRmFjZVZhcnlpbmcsICAgIC8vLzwgT25lIHZhbHVlIHBlciB2ZXJ0ZXggcGVyIGZhY2UuIFRoZSBlbGVtZW50IGNvdW50IG11c3QgbWF0Y2ggYGluZGV4Q291bnRgLgogICAgICAgIH07CgogICAgICAgIHRlbXBsYXRlPHR5cGVuYW1lIFQ+CiAgICAgICAgc3RydWN0IEF0dHJpYnV0ZSB7CiAgICAgICAgICAgIGNvbnN0IFQqIHBEYXRhID0gbnVsbHB0cjsKICAgICAgICAgICAgQXR0cmlidXRlRnJlcXVlbmN5IGZyZXF1ZW5jeSA9IEF0dHJpYnV0ZUZyZXF1ZW5jeTo6Tm9uZTsKICAgICAgICB9OwoKICAgICAgICBzdGQ6OnN0cmluZyBuYW1lOyAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vLzwgVGhlIG1lc2gncyBuYW1lLgogICAgICAgIHVpbnQzMl90IGZhY2VDb3VudCA9IDA7ICAgICAgICAgICAgICAgICAgICAgLy8vPCBUaGUgbnVtYmVyIG9mIHByaW1pdGl2ZXMgdGhlIG1lc2ggaGFzLgogICAgICAgIHVpbnQzMl90IHZlcnRleENvdW50ID0gMDsgICAgICAgICAgICAgICAgICAgLy8vPCBUaGUgbnVtYmVyIG9mIHZlcnRpY2VzIHRoZSBtZXNoIGhhcy4KICAgICAgICB1aW50MzJfdCBpbmRleENvdW50ID0gMDsgICAgICAgICAgICAgICAgICAgIC8vLzwgVGhlIG51bWJlciBvZiBpbmRpY2VzIHRoZSBtZXNoIGhhcy4KICAgICAgICBjb25zdCB1aW50MzJfdCogcEluZGljZXMgPSBudWxscHRyOyAgICAgICAgIC8vLzwgQXJyYXkgb2YgaW5kaWNlcy4gVGhlIGVsZW1lbnQgY291bnQgbXVzdCBtYXRjaCBgaW5kZXhDb3VudGAuIFRoaXMgZmllbGQgaXMgcmVxdWlyZWQuCiAgICAgICAgVmFvOjpUb3BvbG9neSB0b3BvbG9neSA9IFZhbzo6VG9wb2xvZ3k6OlVuZGVmaW5lZDsgLy8vPCBUaGUgcHJpbWl0aXZlIHRvcG9sb2d5IG9mIHRoZSBtZXNoCiAgICAgICAgTWF0ZXJpYWw6OlNoYXJlZFB0ciBwTWF0ZXJpYWw7ICAgICAgICAgICAgICAvLy88IFRoZSBtZXNoJ3MgbWF0ZXJpYWwuIENhbid0IGJlIG51bGxwdHIuCgogICAgICAgIEF0dHJpYnV0ZTxmbG9hdDM+IHBvc2l0aW9uczsgICAgICAgICAgICAgICAgLy8vPCBBcnJheSBvZiB2ZXJ0ZXggcG9zaXRpb25zLiBUaGlzIGZpZWxkIGlzIHJlcXVpcmVkLgogICAgICAgIEF0dHJpYnV0ZTxmbG9hdDM+IG5vcm1hbHM7ICAgICAgICAgICAgICAgICAgLy8vPCBBcnJheSBvZiB2ZXJ0ZXggbm9ybWFscy4gVGhpcyBmaWVsZCBpcyByZXF1aXJlZC4KICAgICAgICBBdHRyaWJ1dGU8ZmxvYXQ0PiB0YW5nZW50czsgICAgICAgICAgICAgICAgIC8vLzwgQXJyYXkgb2YgdmVydGV4IHRhbmdlbnRzLiBUaGlzIGZpZWxkIGlzIG9wdGlvbmFsLiBJZiBzZXQgdG8gbnVsbHB0ciwgb3IgaWYgQnVpbGRGbGFnczo6VXNlT3JpZ2luYWxUYW5nZW50U3BhY2UgaXMgbm90IHNldCwgdGhlIHRhbmdlbnQgc3BhY2Ugd2lsbCBiZSBnZW5lcmF0ZWQgdXNpbmcgTWlra1RTcGFjZS4KICAgICAgICBBdHRyaWJ1dGU8ZmxvYXQ+IGN1cnZlUmFkaWk7ICAgICAgICAgICAgICAgIC8vLzwgQXJyYXkgb2YgdmVydGV4IGN1cnZlIHJhZGlpLiBUaGlzIGZpZWxkIGlzIG9wdGlvbmFsLgogICAgICAgIEF0dHJpYnV0ZTxmbG9hdDI+IHRleENyZHM7ICAgICAgICAgICAgICAgICAgLy8vPCBBcnJheSBvZiB2ZXJ0ZXggdGV4dHVyZSBjb29yZGluYXRlcy4gVGhpcyBmaWVsZCBpcyBvcHRpb25hbC4gSWYgc2V0IHRvIG51bGxwdHIsIGFsbCB0ZXhDcmRzIHdpbGwgYmUgc2V0IHRvICgwLDApLgogICAgICAgIEF0dHJpYnV0ZTx1aW50ND4gYm9uZUlEczsgICAgICAgICAgICAgICAgICAgLy8vPCBBcnJheSBvZiBib25lIElEcy4gVGhpcyBmaWVsZCBpcyBvcHRpb25hbC4gSWYgaXQncyBzZXQsIHRoYXQgbWVhbnMgdGhhdCB0aGUgbWVzaCBpcyBhbmltYXRlZCwgaW4gd2hpY2ggY2FzZSBib25lV2VpZ2h0cyBpcyByZXF1aXJlZC4KICAgICAgICBBdHRyaWJ1dGU8ZmxvYXQ0PiBib25lV2VpZ2h0czsgICAgICAgICAgICAgIC8vLzwgQXJyYXkgb2YgYm9uZSB3ZWlnaHRzLiBUaGlzIGZpZWxkIGlzIG9wdGlvbmFsLiBJZiBpdCdzIHNldCwgdGhhdCBtZWFucyB0aGF0IHRoZSBtZXNoIGlzIGFuaW1hdGVkLCBpbiB3aGljaCBjYXNlIGJvbmVJRHMgaXMgcmVxdWlyZWQuCgogICAgICAgIGJvb2wgaXNGcm9udEZhY2VDVyA9IGZhbHNlOyAgICAgICAgICAgICAgICAgLy8vPCBJbmRpY2F0ZSB3aGV0aGVyIGZyb250LWZhY2luZyBzaWRlIGhhcyBjbG9ja3dpc2Ugd2luZGluZyBpbiBvYmplY3Qgc3BhY2UuCiAgICAgICAgYm9vbCB1c2VPcmlnaW5hbFRhbmdlbnRTcGFjZSA9IGZhbHNlOyAgICAgICAvLy88IEluZGljYXRlIHdoZXRoZXIgdG8gdXNlIHRoZSBvcmlnaW5hbCB0YW5nZW50IHNwYWNlIHRoYXQgd2FzIGxvYWRlZCB3aXRoIHRoZSBtZXNoLiBCeSBkZWZhdWx0LCB3ZSB3aWxsIGlnbm9yZSBpdCBhbmQgdXNlIE1pa2tUU3BhY2UgdG8gZ2VuZXJhdGUgdGhlIHRhbmdlbnQgc3BhY2UuCiAgICAgICAgYm9vbCBtZXJnZUR1cGxpY2F0ZVZlcnRpY2VzID0gdHJ1ZTsgICAgICAgICAvLy88IEluZGljYXRlIHdoZXRoZXIgdG8gbWVyZ2UgaWRlbnRpY2FsIHZlcnRpY2VzIGFuZCBhZGp1c3QgaW5kaWNlcy4KICAgICAgICB1aW50MzJfdCBza2VsZXRvbk5vZGVJZCA9IGtJbnZhbGlkTm9kZTsgICAgIC8vLzwgRm9yIHNraW5uZWQgbWVzaGVzLCB0aGUgbm9kZSBJRCBvZiB0aGUgc2tlbGV0b24ncyB3b3JsZCB0cmFuc2Zvcm0uIElmIHNldCB0byAtMSwgdGhlIHNrZWxldG9uIGlzIGJhc2VkIG9uIHRoZSBtZXNoJ3Mgb3duIHdvcmxkIHBvc2l0aW9uIChBc3NpbXAgYmVoYXZpb3IgcHJlLW11bHRpcGxpZXMgaW5zdGFuY2UgdHJhbnNmb3JtKS4KCiAgICAgICAgdGVtcGxhdGU8dHlwZW5hbWUgVD4KICAgICAgICB1aW50MzJfdCBnZXRBdHRyaWJ1dGVJbmRleChjb25zdCBBdHRyaWJ1dGU8VD4mIGF0dHJpYnV0ZSwgdWludDMyX3QgZmFjZSwgdWludDMyX3QgdmVydCkgY29uc3QgewogICAgICAgICAgICBzd2l0Y2ggKGF0dHJpYnV0ZS5mcmVxdWVuY3kpIHsKICAgICAgICAgICAgICAgIGNhc2UgQXR0cmlidXRlRnJlcXVlbmN5OjpDb25zdGFudDoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gMDsKICAgICAgICAgICAgICAgIGNhc2UgQXR0cmlidXRlRnJlcXVlbmN5OjpVbmlmb3JtOgogICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWNlOwogICAgICAgICAgICAgICAgY2FzZSBBdHRyaWJ1dGVGcmVxdWVuY3k6OlZlcnRleDoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gcEluZGljZXNbZmFjZSAqIDMgKyB2ZXJ0XTsKICAgICAgICAgICAgICAgIGNhc2UgQXR0cmlidXRlRnJlcXVlbmN5OjpGYWNlVmFyeWluZzoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFjZSAqIDMgKyB2ZXJ0OwogICAgICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICAgICAgICBzaG91bGRfbm90X2dldF9oZXJlKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIFNjZW5lOjprSW52YWxpZEluZGV4OwogICAgICAgIH0KCiAgICAgICAgdGVtcGxhdGU8dHlwZW5hbWUgVD4KICAgICAgICBUIGdldChjb25zdCBBdHRyaWJ1dGU8VD4mIGF0dHJpYnV0ZSwgdWludDMyX3QgaW5kZXgpIGNvbnN0IHsKICAgICAgICAgICAgaWYgKGF0dHJpYnV0ZS5wRGF0YSkgewogICAgICAgICAgICAgICAgcmV0dXJuIGF0dHJpYnV0ZS5wRGF0YVtpbmRleF07CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIFR7fTsKICAgICAgICB9CgogICAgICAgIHRlbXBsYXRlPHR5cGVuYW1lIFQ+CiAgICAgICAgVCBnZXQoY29uc3QgQXR0cmlidXRlPFQ+JiBhdHRyaWJ1dGUsIHVpbnQzMl90IGZhY2UsIHVpbnQzMl90IHZlcnQpIGNvbnN0IHsKICAgICAgICAgICAgaWYgKGF0dHJpYnV0ZS5wRGF0YSkgewogICAgICAgICAgICAgICAgcmV0dXJuIGdldChhdHRyaWJ1dGUsIGdldEF0dHJpYnV0ZUluZGV4KGF0dHJpYnV0ZSwgZmFjZSwgdmVydCkpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBUe307CiAgICAgICAgfQoKICAgICAgICB0ZW1wbGF0ZTx0eXBlbmFtZSBUPgogICAgICAgIHNpemVfdCBnZXRBdHRyaWJ1dGVDb3VudChjb25zdCBBdHRyaWJ1dGU8VD4mIGF0dHJpYnV0ZSkgewogICAgICAgICAgICBzd2l0Y2ggKGF0dHJpYnV0ZS5mcmVxdWVuY3kpIHsKICAgICAgICAgICAgICAgIGNhc2UgQXR0cmlidXRlRnJlcXVlbmN5OjpDb25zdGFudDoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gMTsKICAgICAgICAgICAgICAgIGNhc2UgQXR0cmlidXRlRnJlcXVlbmN5OjpVbmlmb3JtOgogICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWNlQ291bnQ7CiAgICAgICAgICAgICAgICBjYXNlIEF0dHJpYnV0ZUZyZXF1ZW5jeTo6VmVydGV4OgogICAgICAgICAgICAgICAgICAgIHJldHVybiB2ZXJ0ZXhDb3VudDsKICAgICAgICAgICAgICAgIGNhc2UgQXR0cmlidXRlRnJlcXVlbmN5OjpGYWNlVmFyeWluZzoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gMyAqIGZhY2VDb3VudDsKICAgICAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgICAgICAgc2hvdWxkX25vdF9nZXRfaGVyZSgpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiAwOwogICAgICAgIH0KCgogICAgICAgIGZsb2F0MyBnZXRQb3NpdGlvbih1aW50MzJfdCBmYWNlLCB1aW50MzJfdCB2ZXJ0KSBjb25zdCB7IHJldHVybiBnZXQocG9zaXRpb25zLCBmYWNlLCB2ZXJ0KTsgfQogICAgICAgIGZsb2F0MyBnZXROb3JtYWwodWludDMyX3QgZmFjZSwgdWludDMyX3QgdmVydCkgY29uc3QgeyByZXR1cm4gZ2V0KG5vcm1hbHMsIGZhY2UsIHZlcnQpOyB9CiAgICAgICAgZmxvYXQ0IGdldFRhbmdlbnQodWludDMyX3QgZmFjZSwgdWludDMyX3QgdmVydCkgY29uc3QgeyByZXR1cm4gZ2V0KHRhbmdlbnRzLCBmYWNlLCB2ZXJ0KTsgfQogICAgICAgIGZsb2F0MiBnZXRUZXhDcmQodWludDMyX3QgZmFjZSwgdWludDMyX3QgdmVydCkgY29uc3QgeyByZXR1cm4gZ2V0KHRleENyZHMsIGZhY2UsIHZlcnQpOyB9CiAgICAgICAgZmxvYXQgZ2V0Q3VydmVSYWRpaSh1aW50MzJfdCBmYWNlLCB1aW50MzJfdCB2ZXJ0KSBjb25zdCB7IHJldHVybiBnZXQoY3VydmVSYWRpaSwgZmFjZSwgdmVydCk7IH0KCiAgICAgICAgc3RydWN0IFZlcnRleCB7CiAgICAgICAgICAgIGZsb2F0MyBwb3NpdGlvbjsKICAgICAgICAgICAgZmxvYXQzIG5vcm1hbDsKICAgICAgICAgICAgZmxvYXQ0IHRhbmdlbnQ7CiAgICAgICAgICAgIGZsb2F0MiB0ZXhDcmQ7CiAgICAgICAgICAgIGZsb2F0IGN1cnZlUmFkaXVzOwogICAgICAgICAgICB1aW50NCBib25lSURzOwogICAgICAgICAgICBmbG9hdDQgYm9uZVdlaWdodHM7CiAgICAgICAgfTsKCiAgICAgICAgc3RydWN0IFZlcnRleEF0dHJpYnV0ZUluZGljZXMgewogICAgICAgICAgICB1aW50MzJfdCBwb3NpdGlvbklkeDsKICAgICAgICAgICAgdWludDMyX3Qgbm9ybWFsSWR4OwogICAgICAgICAgICB1aW50MzJfdCB0YW5nZW50SWR4OwogICAgICAgICAgICB1aW50MzJfdCB0ZXhDcmRJZHg7CiAgICAgICAgICAgIHVpbnQzMl90IGN1cnZlUmFkaXVzSWR4OwogICAgICAgICAgICB1aW50MzJfdCBib25lSURzSWR4OwogICAgICAgICAgICB1aW50MzJfdCBib25lV2VpZ2h0c0lkeDsKICAgICAgICB9OwoKCiAgICAgICAgVmVydGV4IGdldFZlcnRleCh1aW50MzJfdCBmYWNlLCB1aW50MzJfdCB2ZXJ0KSBjb25zdCB7CiAgICAgICAgICAgIFZlcnRleCB2ID0ge307CiAgICAgICAgICAgIHYucG9zaXRpb24gPSBnZXQocG9zaXRpb25zLCBmYWNlLCB2ZXJ0KTsKICAgICAgICAgICAgdi5ub3JtYWwgPSBnZXQobm9ybWFscywgZmFjZSwgdmVydCk7CiAgICAgICAgICAgIHYudGFuZ2VudCA9IGdldCh0YW5nZW50cywgZmFjZSwgdmVydCk7CiAgICAgICAgICAgIHYudGV4Q3JkID0gZ2V0KHRleENyZHMsIGZhY2UsIHZlcnQpOwogICAgICAgICAgICB2LmN1cnZlUmFkaXVzID0gZ2V0KGN1cnZlUmFkaWksIGZhY2UsIHZlcnQpOwogICAgICAgICAgICB2LmJvbmVJRHMgPSBnZXQoYm9uZUlEcywgZmFjZSwgdmVydCk7CiAgICAgICAgICAgIHYuYm9uZVdlaWdodHMgPSBnZXQoYm9uZVdlaWdodHMsIGZhY2UsIHZlcnQpOwogICAgICAgICAgICByZXR1cm4gdjsKICAgICAgICB9CgogICAgICAgIFZlcnRleCBnZXRWZXJ0ZXgoY29uc3QgVmVydGV4QXR0cmlidXRlSW5kaWNlcyYgYXR0cmlidXRlSW5kaWNlcykgewogICAgICAgICAgICBWZXJ0ZXggdiA9IHt9OwogICAgICAgICAgICB2LnBvc2l0aW9uID0gZ2V0KHBvc2l0aW9ucywgYXR0cmlidXRlSW5kaWNlcy5wb3NpdGlvbklkeCk7CiAgICAgICAgICAgIHYubm9ybWFsID0gZ2V0KG5vcm1hbHMsIGF0dHJpYnV0ZUluZGljZXMubm9ybWFsSWR4KTsKICAgICAgICAgICAgdi50YW5nZW50ID0gZ2V0KHRhbmdlbnRzLCBhdHRyaWJ1dGVJbmRpY2VzLnRhbmdlbnRJZHgpOwogICAgICAgICAgICB2LnRleENyZCA9IGdldCh0ZXhDcmRzLCBhdHRyaWJ1dGVJbmRpY2VzLnRleENyZElkeCk7CiAgICAgICAgICAgIHYuY3VydmVSYWRpdXMgPSBnZXQoY3VydmVSYWRpaSwgYXR0cmlidXRlSW5kaWNlcy5jdXJ2ZVJhZGl1c0lkeCk7CiAgICAgICAgICAgIHYuYm9uZUlEcyA9IGdldChib25lSURzLCBhdHRyaWJ1dGVJbmRpY2VzLmJvbmVJRHNJZHgpOwogICAgICAgICAgICB2LmJvbmVXZWlnaHRzID0gZ2V0KGJvbmVXZWlnaHRzLCBhdHRyaWJ1dGVJbmRpY2VzLmJvbmVXZWlnaHRzSWR4KTsKICAgICAgICAgICAgcmV0dXJuIHY7CiAgICAgICAgfQoKICAgICAgICBWZXJ0ZXhBdHRyaWJ1dGVJbmRpY2VzIGdldEF0dHJpYnV0ZUluZGljZXModWludDMyX3QgZmFjZSwgdWludDMyX3QgdmVydCkgewogICAgICAgICAgICBWZXJ0ZXhBdHRyaWJ1dGVJbmRpY2VzIHYgPSB7fTsKICAgICAgICAgICAgdi5wb3NpdGlvbklkeCA9IGdldEF0dHJpYnV0ZUluZGV4KHBvc2l0aW9ucywgZmFjZSwgdmVydCk7CiAgICAgICAgICAgIHYubm9ybWFsSWR4ID0gZ2V0QXR0cmlidXRlSW5kZXgobm9ybWFscywgZmFjZSwgdmVydCk7CiAgICAgICAgICAgIHYudGFuZ2VudElkeCA9IGdldEF0dHJpYnV0ZUluZGV4KHRhbmdlbnRzLCBmYWNlLCB2ZXJ0KTsKICAgICAgICAgICAgdi50ZXhDcmRJZHggPSBnZXRBdHRyaWJ1dGVJbmRleCh0ZXhDcmRzLCBmYWNlLCB2ZXJ0KTsKICAgICAgICAgICAgdi5jdXJ2ZVJhZGl1c0lkeCA9IGdldEF0dHJpYnV0ZUluZGV4KGN1cnZlUmFkaWksIGZhY2UsIHZlcnQpOwogICAgICAgICAgICB2LmJvbmVJRHNJZHggPSBnZXRBdHRyaWJ1dGVJbmRleChib25lSURzLCBmYWNlLCB2ZXJ0KTsKICAgICAgICAgICAgdi5ib25lV2VpZ2h0c0lkeCA9IGdldEF0dHJpYnV0ZUluZGV4KGJvbmVXZWlnaHRzLCBmYWNlLCB2ZXJ0KTsKICAgICAgICAgICAgcmV0dXJuIHY7CiAgICAgICAgfQoKICAgICAgICBib29sIGhhc0JvbmVzKCkgY29uc3QgewogICAgICAgICAgICByZXR1cm4gYm9uZVdlaWdodHMucERhdGEgfHwgYm9uZUlEcy5wRGF0YTsKICAgICAgICB9CiAgICB9OwoKICAgIHN0cnVjdCBNZXNobGV0U3BlYyB7CiAgICAgICAgTWVzaGxldFR5cGUgdHlwZSA9IE1lc2hsZXRUeXBlOjpUcmlhbmdsZXM7CiAgICAgICAgc3RkOjp2ZWN0b3I8dWludDMyX3Q+IHZlcnRpY2VzOyAgICAgICAgICAgICAvLy88IE1lc2hsZXQgdmVydGljZXMgdGhhdCBwb2ludCB0byBnbG9iYWwgc2NlbmUgdmVydGV4IGRhdGEuCiAgICAgICAgc3RkOjp2ZWN0b3I8dWludDhfdD4gIGluZGljZXM7ICAgICAgICAgICAgICAvLy88IEluZGljZXMgb2YgYSBwcmltaXRpdmUgdmVyaWNlcy4gVmVjdG9yIHNpemUgc2hvdWxkIGJlIGVxdWFsIHRvIGluZGV4Q291bnQuCiAgICAgICAgc3RkOjp2ZWN0b3I8dWludDMyX3Q+IHByaW1pdGl2ZUluZGljZXM7ICAgICAvLy88IFByaW1pdGl2ZSBpbmRpY2VzIGluIGEgZ2xvYmFsIHNjZW5lIGJ1ZmZlci4gSXQncyB1c2VkIGluIGNhc2UgaWYgbWVzaGxldCBwcmltaXRpdmVzIG9yZGVyIGRpZmZlcnMgZnJvbSBvcmlnaW5hbCBtZXNoLgogICAgfTsKCiAgICAvKiogUHJlLXByb2Nlc3NlZCBtZXNoIGRhdGEuCiAgICAgICAgVGhpcyBkYXRhIGlzIGZvcm1hdHRlZCBzdWNoIHRoYXQgaXQgY2FuIGRpcmVjdGx5IGJlIGNvcGllZAogICAgICAgIHRvIHRoZSBnbG9iYWwgc2NlbmUgYnVmZmVycy4KICAgICovCiAgICBzdHJ1Y3QgUHJvY2Vzc2VkTWVzaCB7CiAgICAgICAgc3RkOjpzdHJpbmcgbmFtZTsKICAgICAgICBWYW86OlRvcG9sb2d5IHRvcG9sb2d5ID0gVmFvOjpUb3BvbG9neTo6VW5kZWZpbmVkOwogICAgICAgIE1hdGVyaWFsOjpTaGFyZWRQdHIgcE1hdGVyaWFsOwogICAgICAgIHVpbnQzMl90IHNrZWxldG9uTm9kZUlkID0ga0ludmFsaWROb2RlOyAvLy88IEZvcndhcmRlZCBmcm9tIE1lc2ggc3RydWN0LgoKICAgICAgICB1aW50NjRfdCBpbmRleENvdW50ID0gMDsgICAgICAgICAgICAvLy88IE51bWJlciBvZiBpbmRpY2VzLCBvciB6ZXJvIGlmIG5vbi1pbmRleGVkLgogICAgICAgIGJvb2wgdXNlMTZCaXRJbmRpY2VzID0gZmFsc2U7ICAgICAgIC8vLzwgVHJ1ZSBpZiB0aGUgaW5kaWNlcyBhcmUgaW4gMTYtYml0IGZvcm1hdC4KICAgICAgICBib29sIGlzRnJvbnRGYWNlQ1cgPSBmYWxzZTsgICAgICAgICAvLy88IEluZGljYXRlIHdoZXRoZXIgZnJvbnQtZmFjaW5nIHNpZGUgaGFzIGNsb2Nrd2lzZSB3aW5kaW5nIGluIG9iamVjdCBzcGFjZS4KICAgICAgICBzdGQ6OnZlY3Rvcjx1aW50MzJfdD4gaW5kZXhEYXRhOyAgICAvLy88IFZlcnRleCBpbmRpY2VzIGluIGVpdGhlciAzMi1iaXQgb3IgMTYtYml0IGZvcm1hdCBwYWNrZWQgdGlnaHRseSwgb3IgZW1wdHkgaWYgbm9uLWluZGV4ZWQuCiAgICAgICAgc3RkOjp2ZWN0b3I8U3RhdGljVmVydGV4RGF0YT4gc3RhdGljRGF0YTsKICAgICAgICBzdGQ6OnZlY3RvcjxTa2lubmluZ1ZlcnRleERhdGE+IHNraW5uaW5nRGF0YTsKCiAgICAgICAgc3RkOjp2ZWN0b3I8TWVzaGxldFNwZWM+IG1lc2hsZXRTcGVjczsKICAgIH07CgogICAgdXNpbmcgTWVzaEF0dHJpYnV0ZUluZGljZXMgPSBzdGQ6OnZlY3RvcjxNZXNoOjpWZXJ0ZXhBdHRyaWJ1dGVJbmRpY2VzPjsKCiAgICAvKiogQ3VydmUgZGVzY3JpcHRpb24uCiAgICAqLwogICAgc3RydWN0IEN1cnZlIHsKICAgICAgICB0ZW1wbGF0ZTx0eXBlbmFtZSBUPgogICAgICAgIHN0cnVjdCBBdHRyaWJ1dGUgewogICAgICAgICAgICBjb25zdCBUKiBwRGF0YSA9IG51bGxwdHI7CiAgICAgICAgfTsKCiAgICAgICAgc3RkOjpzdHJpbmcgbmFtZTsgICAgICAgICAgICAgICAgICAgICAgICAgICAvLy88IFRoZSBjdXJ2ZSdzIG5hbWUuCiAgICAgICAgdWludDMyX3QgZGVncmVlID0gMTsgICAgICAgICAgICAgICAgICAgICAgICAvLy88IFBvbHlub21pYWwgZGVncmVlIG9mIHRoZSBjdXJ2ZTsgbGluZWFyICgxKSBieSBkZWZhdWx0LgogICAgICAgIHVpbnQzMl90IHZlcnRleENvdW50ID0gMDsgICAgICAgICAgICAgICAgICAgLy8vPCBUaGUgbnVtYmVyIG9mIHZlcnRpY2VzLgogICAgICAgIHVpbnQzMl90IGluZGV4Q291bnQgPSAwOyAgICAgICAgICAgICAgICAgICAgLy8vPCBUaGUgbnVtYmVyIG9mIGluZGljZXMgKGkuZS4sIHR1YmUgc2VnbWVudHMpLgogICAgICAgIGNvbnN0IHVpbnQzMl90KiBwSW5kaWNlcyA9IG51bGxwdHI7ICAgICAgICAgLy8vPCBBcnJheSBvZiBpbmRpY2VzLiBUaGUgZWxlbWVudCBjb3VudCBtdXN0IG1hdGNoIGBpbmRleENvdW50YC4gVGhpcyBmaWVsZCBpcyByZXF1aXJlZC4KICAgICAgICBNYXRlcmlhbDo6U2hhcmVkUHRyIHBNYXRlcmlhbDsgICAgICAgICAgICAgIC8vLzwgVGhlIGN1cnZlJ3MgbWF0ZXJpYWwuIENhbid0IGJlIG51bGxwdHIuCgogICAgICAgIEF0dHJpYnV0ZTxmbG9hdDM+IHBvc2l0aW9uczsgICAgICAgICAgICAgICAgLy8vPCBBcnJheSBvZiB2ZXJ0ZXggcG9zaXRpb25zLiBUaGlzIGZpZWxkIGlzIHJlcXVpcmVkLgogICAgICAgIEF0dHJpYnV0ZTxmbG9hdD4gcmFkaXVzOyAgICAgICAgICAgICAgICAgICAgLy8vPCBBcnJheSBvZiBzcGhlcmUgcmFkaXVzLiBUaGlzIGZpZWxkIGlzIHJlcXVpcmVkLgogICAgICAgIEF0dHJpYnV0ZTxmbG9hdDI+IHRleENyZHM7ICAgICAgICAgICAgICAgICAgLy8vPCBBcnJheSBvZiB2ZXJ0ZXggdGV4dHVyZSBjb29yZGluYXRlcy4gVGhpcyBmaWVsZCBpcyBvcHRpb25hbC4gSWYgc2V0IHRvIG51bGxwdHIsIGFsbCB0ZXhDcmRzIHdpbGwgYmUgc2V0IHRvICgwLDApLgogICAgfTsKCiAgICAvKiogUHJlLXByb2Nlc3NlZCBjdXJ2ZSBkYXRhLgogICAgICAgIFRoaXMgZGF0YSBpcyBmb3JtYXR0ZWQgc3VjaCB0aGF0IGl0IGNhbiBkaXJlY3RseSBiZSBjb3BpZWQKICAgICAgICB0byB0aGUgZ2xvYmFsIHNjZW5lIGJ1ZmZlcnMuCiAgICAqLwogICAgc3RydWN0IFByb2Nlc3NlZEN1cnZlIHsKICAgICAgICBzdGQ6OnN0cmluZyBuYW1lOwogICAgICAgIFZhbzo6VG9wb2xvZ3kgdG9wb2xvZ3kgPSBWYW86OlRvcG9sb2d5OjpMaW5lU3RyaXA7CiAgICAgICAgTWF0ZXJpYWw6OlNoYXJlZFB0ciBwTWF0ZXJpYWw7CgogICAgICAgIHN0ZDo6dmVjdG9yPHVpbnQzMl90PiBpbmRleERhdGE7CiAgICAgICAgc3RkOjp2ZWN0b3I8U3RhdGljQ3VydmVWZXJ0ZXhEYXRhPiBzdGF0aWNEYXRhOwogICAgfTsKCiAgICBzdHJ1Y3QgTm9kZSB7CiAgICAgICAgc3RkOjpzdHJpbmcgbmFtZTsKICAgICAgICBmbG9hdDR4NCB0cmFuc2Zvcm07CiAgICAgICAgZmxvYXQ0eDQgbWVzaEJpbmQ7ICAgICAgICAgIC8vIEZvciBza2lubmVkIG1lc2hlcy4gV29ybGQgdHJhbnNmb3JtIGF0IGJpbmQgdGltZS4KICAgICAgICBmbG9hdDR4NCBsb2NhbFRvQmluZFBvc2U7ICAgLy8gRm9yIGJvbmVzLiBJbnZlcnNlIGJpbmQgdHJhbnNmb3JtLgogICAgICAgIHVpbnQzMl90IHBhcmVudCA9IGtJbnZhbGlkTm9kZTsKICAgIH07CgogICAgdXNpbmcgSW5zdGFuY2VNYXRyaWNlcyA9IHN0ZDo6dmVjdG9yPGZsb2F0NHg0PjsKCiAgICBzdGQ6OnNoYXJlZF9wdHI8RGV2aWNlPiBkZXZpY2UoKSB7IHJldHVybiBtcERldmljZTsgfTsKICAgIHN0ZDo6c2hhcmVkX3B0cjxEZXZpY2U+IGRldmljZSgpIGNvbnN0IHsgcmV0dXJuIG1wRGV2aWNlOyB9OwoKICAgIC8qKiBDcmVhdGUgYSBuZXcgb2JqZWN0CiAgICAqLwogICAgc3RhdGljIFNoYXJlZFB0ciBjcmVhdGUoc3RkOjpzaGFyZWRfcHRyPERldmljZT4gcERldmljZSwgRmxhZ3MgbUZsYWdzID0gRmxhZ3M6OkRlZmF1bHQpOwoKICAgIC8qKiBDcmVhdGUgYSBuZXcgYnVpbGRlciBhbmQgaW1wb3J0IGEgc2NlbmUvbW9kZWwgZmlsZQogICAgICAgIFxwYXJhbSBmaWxlbmFtZSBUaGUgZmlsZW5hbWUgdG8gbG9hZAogICAgICAgIFxwYXJhbSBmbGFncyBUaGUgYnVpbGQgZmxhZ3MKICAgICAgICBccGFyYW0gaW5zdGFuY2VzIEEgbGlzdCBvZiBpbnN0YW5jZSBtYXRyaWNlcyB0byBsb2FkLiBUaGlzIGlzIG9wdGlvbmFsLCBieSBkZWZhdWx0IGEgc2luZ2xlIGluc3RhbmNlIHdpbGwgYmUgbG9hZAogICAgICAgIFxyZXR1cm4gQSBuZXcgb2JqZWN0IHdpdGggdGhlIGltcG9ydGVkIGZpbGUgYWxyZWFkeSBpbml0aWFsaXplZC4gSWYgYW4gaW1wb3J0IGVycm9yIG9jY3VycmVkLCBhIG51bGxwdHIgd2lsbCBiZSByZXR1cm5lZAogICAgKi8KICAgIHN0YXRpYyBTaGFyZWRQdHIgY3JlYXRlKHN0ZDo6c2hhcmVkX3B0cjxEZXZpY2U+IHBEZXZpY2UsIGNvbnN0IHN0ZDo6c3RyaW5nJiBmaWxlbmFtZSwgRmxhZ3MgYnVpbGRGbGFncyA9IEZsYWdzOjpEZWZhdWx0LCBjb25zdCBJbnN0YW5jZU1hdHJpY2VzJiBpbnN0YW5jZXMgPSBJbnN0YW5jZU1hdHJpY2VzKCkpOwoKICAgIC8qKiBJbXBvcnQgYSBzY2VuZS9tb2RlbCBmaWxlCiAgICAgICAgXHBhcmFtIGZpbGVuYW1lIFRoZSBmaWxlbmFtZSB0byBsb2FkCiAgICAgICAgXHBhcmFtIGluc3RhbmNlcyBBIGxpc3Qgb2YgaW5zdGFuY2UgbWF0cmljZXMgdG8gbG9hZC4gVGhpcyBpcyBvcHRpb25hbCwgYnkgZGVmYXVsdCBhIHNpbmdsZSBpbnN0YW5jZSB3aWxsIGJlIGxvYWQKICAgICAgICBccmV0dXJuIHRydWUgaWYgdGhlIGltcG9ydCBzdWNjZWVkZWQsIG90aGVyd2lzZSBmYWxzZQogICAgKi8KICAgIGJvb2wgaW1wb3J0KGNvbnN0IHN0ZDo6c3RyaW5nJiBmaWxlbmFtZSwgY29uc3QgSW5zdGFuY2VNYXRyaWNlcyYgaW5zdGFuY2VzID0gSW5zdGFuY2VNYXRyaWNlcygpLCBjb25zdCBEaWN0aW9uYXJ5JiBkaWN0ID0gRGljdGlvbmFyeSgpKTsKCiAgICAvKiogR2V0IHRoZSBzY2VuZS4gTWFrZSBzdXJlIHRvIGFkZCBhbGwgdGhlIG9iamVjdHMgYmVmb3JlIGNhbGxpbmcgdGhpcyBmdW5jdGlvbgogICAgICAgIFxyZXR1cm4gbnVsbHB0ciBpZiBzb21ldGhpbmcgd2VudCB3cm9uZywgb3RoZXJ3aXNlIGEgbmV3IFNjZW5lIG9iamVjdAogICAgKi8KICAgIFNjZW5lOjpTaGFyZWRQdHIgZ2V0U2NlbmUoKTsKCiAgICAvKiogQWRkIGEgbWVzaCBpbnN0YW5jZSB0byBhIG5vZGUKICAgICovCiAgICBib29sIGFkZE1lc2hJbnN0YW5jZSh1aW50MzJfdCBub2RlSUQsIHVpbnQzMl90IG1lc2hJRCwgY29uc3QgTWVzaEluc3RhbmNlQ3JlYXRpb25TcGVjKiBjcmVhdGlvblNwZWMgPSBudWxscHRyKTsKICAgIAogICAgLyoqIEFkZCBhIG1lc2guIFRoaXMgZnVuY3Rpb24gd2lsbCB0aHJvdyBhbiBleGNlcHRpb24gaWYgc29tZXRoaW5nIHdlbnQgd3JvbmcuCiAgICAgICAgXHBhcmFtIG1lc2hEZXNjIFRoZSBtZXNoJ3MgZGVzY3JpcHRpb24uCiAgICAgICAgXHJldHVybiBUaGUgSUQgb2YgdGhlIG1lc2ggaW4gdGhlIHNjZW5lLiBOb3RlIHRoYXQgYWxsIG9mIHRoZSBpbnN0YW5jZXMgc2hhcmUgdGhlIHNhbWUgbWVzaCBJRC4KICAgICovCiAgICB1aW50MzJfdCBhZGRNZXNoKGNvbnN0IE1lc2gmIG1lc2hEZXNjKTsKCiAgICAvKiogQWRkIGEgdHJpYW5nbGUgbWVzaC4KICAgICAgICBccGFyYW0gVGhlIHRyaWFuZ2xlIG1lc2ggdG8gYWRkLgogICAgICAgIFxwYXJhbSBwTWF0ZXJpYWwgVGhlIG1hdGVyaWFsIHRvIHVzZSBmb3IgdGhlIG1lc2guCiAgICAgICAgXHJldHVybiBUaGUgSUQgb2YgdGhlIG1lc2ggaW4gdGhlIHNjZW5lLgogICAgKi8KICAgIHVpbnQzMl90IGFkZFRyaWFuZ2xlTWVzaChjb25zdCBUcmlhbmdsZU1lc2g6OlNoYXJlZFB0ciYgcFRyaWFuZ2xlTWVzaCwgY29uc3QgTWF0ZXJpYWw6OlNoYXJlZFB0ciYgcE1hdGVyaWFsKTsKCiAgICAvKiogUHJlLXByb2Nlc3MgYSBtZXNoIGludG8gdGhlIGRhdGEgZm9ybWF0IHRoYXQgaXMgdXNlZCBpbiB0aGUgZ2xvYmFsIHNjZW5lIGJ1ZmZlcnMuCiAgICAgICAgVGhyb3dzIGFuIGV4Y2VwdGlvbiBpZiBzb21ldGhpbmcgd2VudCB3cm9uZy4KICAgICAgICBccGFyYW0gbWVzaCBUaGUgbWVzaCB0byBwcmUtcHJvY2Vzcy4KICAgICAgICBccmV0dXJuIFRoZSBwcmUtcHJvY2Vzc2VkIG1lc2guCiAgICAqLwogICAgUHJvY2Vzc2VkTWVzaCBwcm9jZXNzTWVzaChjb25zdCBNZXNoJiBtZXNoLCBNZXNoQXR0cmlidXRlSW5kaWNlcyogcEF0dHJpYnV0ZUluZGljZXMgPSBudWxscHRyKSBjb25zdDsKCiAgICAvKiogR2VuZXJhdGUgdGFuZ2VudHMgZm9yIGEgbWVzaC4KICAgICAgICBccGFyYW0gbWVzaCBUaGUgbWVzaCB0byBnZW5lcmF0ZSB0YW5nZW50cyBmb3IuIElmIHN1Y2Nlc3NmdWwsIHRoZSB0YW5nZW50IGF0dHJpYnV0ZSBvbiB0aGUgbWVzaCB3aWxsIGJlIHNldCB0byB0aGUgb3V0cHV0IHZlY3Rvci4KICAgICAgICBccGFyYW0gdGFuZ2VudHMgT3V0cHV0IGZvciBnZW5lcmF0ZWQgdGFuZ2VudHMuCiAgICAqLwogICAgdm9pZCBnZW5lcmF0ZVRhbmdlbnRzKE1lc2gmIG1lc2gsIHN0ZDo6dmVjdG9yPGZsb2F0ND4mIHRhbmdlbnRzKSBjb25zdDsKCiAgICAvKiogQWRkIGEgcHJlLXByb2Nlc3NlZCBtZXNoLgogICAgICAgIFxwYXJhbSBtZXNoIFRoZSBwcmUtcHJvY2Vzc2VkIG1lc2guCiAgICAgICAgXHJldHVybiBUaGUgSUQgb2YgdGhlIG1lc2ggaW4gdGhlIHNjZW5lLiBOb3RlIHRoYXQgYWxsIG9mIHRoZSBpbnN0YW5jZXMgc2hhcmUgdGhlIHNhbWUgbWVzaCBJRC4KICAgICovCiAgICB1aW50MzJfdCBhZGRQcm9jZXNzZWRNZXNoKGNvbnN0IFByb2Nlc3NlZE1lc2gmIG1lc2gpOwoKICAgIC8qKiBTZXQgbWVzaCB2ZXJ0ZXggY2FjaGUgZm9yIGFuaW1hdGlvbi4KICAgICAgICBccGFyYW1baW5dIGNhY2hlZEN1cnZlcyBUaGUgbWVzaCB2ZXJ0ZXggY2FjaGUgZGF0YS4KICAgICovCiAgICB2b2lkIHNldENhY2hlZE1lc2hlcyhjb25zdCBzdGQ6OnZlY3RvcjxDYWNoZWRNZXNoPiYmIGNhY2hlZE1lc2hlcykgeyBtU2NlbmVEYXRhLmNhY2hlZE1lc2hlcyA9IGNhY2hlZE1lc2hlczsgfQoKICAgIC8vIEN1c3RvbSBwcmltaXRpdmVzCgogICAgLyoqIEFkZCBhbiBBQUJCIGRlZmluaW5nIGEgY3VzdG9tIHByaW1pdGl2ZS4KICAgICAgICBccGFyYW1baW5dIHR5cGVJRCBUaGUgaW50ZXJzZWN0aW9uIHNoYWRlciBJRCB0aGF0IHdpbGwgYmUgcnVuIG9uIHRoaXMgcHJpbWl0aXZlLgogICAgICAgIFxwYXJhbVtpbl0gYWFiYiBBbiBBQUJCIGRlc2NyaWJpbmcgdGhlIGJvdW5kcyBvZiB0aGUgcHJpbWl0aXZlLgogICAgKi8KICAgIHZvaWQgYWRkQ3VzdG9tUHJpbWl0aXZlKHVpbnQzMl90IHVzZXJJRCwgY29uc3QgQUFCQiYgYWFiYik7CgogICAgLy8gQ3VydmVzCgogICAgLyoqIEFkZCBhIGN1cnZlLgogICAgICAgIFRocm93cyBhbiBleGNlcHRpb24gaWYgc29tZXRoaW5nIHdlbnQgd3JvbmcuCiAgICAgICAgXHBhcmFtIGN1cnZlIFRoZSBjdXJ2ZSB0byBhZGQuCiAgICAgICAgXHJldHVybiBUaGUgSUQgb2YgdGhlIGN1cnZlIGluIHRoZSBzY2VuZS4gTm90ZSB0aGF0IGFsbCBvZiB0aGUgaW5zdGFuY2VzIHNoYXJlIHRoZSBzYW1lIGN1cnZlIElELgogICAgKi8KICAgIHVpbnQzMl90IGFkZEN1cnZlKGNvbnN0IEN1cnZlJiBjdXJ2ZSk7CgogICAgLyoqIFByZS1wcm9jZXNzIGEgY3VydmUgaW50byB0aGUgZGF0YSBmb3JtYXQgdGhhdCBpcyB1c2VkIGluIHRoZSBnbG9iYWwgc2NlbmUgYnVmZmVycy4KICAgICAgICBUaHJvd3MgYW4gZXhjZXB0aW9uIGlmIHNvbWV0aGluZyB3ZW50IHdyb25nLgogICAgICAgIFxwYXJhbSBjdXJ2ZSBUaGUgY3VydmUgdG8gcHJlLXByb2Nlc3MuCiAgICAgICAgXHJldHVybiBUaGUgcHJlLXByb2Nlc3NlZCBjdXJ2ZS4KICAgICovCiAgICBQcm9jZXNzZWRDdXJ2ZSBwcm9jZXNzQ3VydmUoY29uc3QgQ3VydmUmIGN1cnZlKSBjb25zdDsKCiAgICAvKiogQWRkIGEgcHJlLXByb2Nlc3NlZCBjdXJ2ZS4KICAgICAgICBccGFyYW0gY3VydmUgVGhlIHByZS1wcm9jZXNzZWQgY3VydmUuCiAgICAgICAgXHJldHVybiBUaGUgSUQgb2YgdGhlIGN1cnZlIGluIHRoZSBzY2VuZS4gTm90ZSB0aGF0IGFsbCBvZiB0aGUgaW5zdGFuY2VzIHNoYXJlIHRoZSBzYW1lIGN1cnZlIElELgogICAgKi8KICAgIHVpbnQzMl90IGFkZFByb2Nlc3NlZEN1cnZlKGNvbnN0IFByb2Nlc3NlZEN1cnZlJiBjdXJ2ZSk7CgogICAgLy8gTWF0ZXJpYWxzCgogICAgLyoqIEdldCB0aGUgbGlzdCBvZiBtYXRlcmlhbHMuCiAgICAqLwogICAgLy9jb25zdCBzdGQ6OnZlY3RvcjxNYXRlcmlhbDo6U2hhcmVkUHRyPiYgZ2V0TWF0ZXJpYWxzKCkgY29uc3QgeyByZXR1cm4gbVNjZW5lRGF0YS5tYXRlcmlhbHM7IH0KCiAgICAvKiogR2V0IGEgbWF0ZXJpYWwgYnkgbmFtZS4KICAgICAgICBOb3RlOiBUaGlzIHJldHVybnMgdGhlIGZpcnN0IG1hdGVyaWFsIGZvdW5kIHdpdGggYSBtYXRjaGluZyBuYW1lLgogICAgICAgIFxwYXJhbSBuYW1lIE1hdGVyaWFsIG5hbWUuCiAgICAgICAgXHJldHVybiBSZXR1cm5zIHRoZSBmaXJzdCBtYXRlcmlhbCB3aXRoIGEgbWF0Y2hpbmcgbmFtZSBvciBudWxscHRyIGlmIG5vbmUgd2FzIGZvdW5kLgogICAgKi8KICAgIE1hdGVyaWFsOjpTaGFyZWRQdHIgZ2V0TWF0ZXJpYWwoY29uc3Qgc3RkOjpzdHJpbmcmIG5hbWUpIGNvbnN0OwoKICAgIGJvb2wgZ2V0TWF0ZXJpYWxJRChjb25zdCBzdGQ6OnN0cmluZyYgbmFtZSwgdWludDMyX3QmIG1hdGVyaWFsSWQpIGNvbnN0OwoKICAgIC8qKiBBZGQgYSBtYXRlcmlhbC4KICAgICAgICBccGFyYW0gcE1hdGVyaWFsIFRoZSBtYXRlcmlhbC4KICAgICAgICBccmV0dXJuIFRoZSBJRCBvZiB0aGUgbWF0ZXJpYWwgaW4gdGhlIHNjZW5lLgogICAgKi8KICAgIHVpbnQzMl90IGFkZE1hdGVyaWFsKGNvbnN0IE1hdGVyaWFsOjpTaGFyZWRQdHImIHBNYXRlcmlhbCk7CgogICAgLyoqIFJlcXVlc3QgbG9hZGluZyBhIG1hdGVyaWFsIHRleHR1cmUuCiAgICAgICAgXHBhcmFtW2luXSBwTWF0ZXJpYWwgTWF0ZXJpYWwgdG8gbG9hZCB0ZXh0dXJlIGludG8uCiAgICAgICAgXHBhcmFtW2luXSBzbG90IFNsb3QgdG8gbG9hZCB0ZXh0dXJlIGludG8uCiAgICAgICAgXHBhcmFtW2luXSBwYXRoIFRleHR1cmUgZmlsZSBwYXRoLgogICAgKi8KICAgIGJvb2wgbG9hZE1hdGVyaWFsVGV4dHVyZShjb25zdCBNYXRlcmlhbDo6U2hhcmVkUHRyJiBwTWF0ZXJpYWwsIE1hdGVyaWFsOjpUZXh0dXJlU2xvdCBzbG90LCBjb25zdCBmczo6cGF0aCYgcGF0aCwgYm9vbCBsb2FkQXNTcGFyc2UgPSBmYWxzZSk7CgogICAgLyoqIFdhaXQgdW50aWwgYWxsIG1hdGVyaWFsIHRleHR1cmVzIGFyZSBsb2FkZWQuCiAgICAqLwogICAgdm9pZCB3YWl0Rm9yTWF0ZXJpYWxUZXh0dXJlTG9hZGluZygpOwoKICAgIC8qKiBBZGQgYSBub2RlIGJhc2VkIG1hdGVyaWFsLgogICAgICAgIFxwYXJhbSBwTWF0ZXJpYWwgVGhlIG1hdGVyaWFsLgogICAgICAgIFxyZXR1cm4gVGhlIElEIG9mIHRoZSBtYXRlcmlhbCBpbiB0aGUgc2NlbmUuCiAgICAqLwogICAgdWludDMyX3QgYWRkTWF0ZXJpYWxYKGNvbnN0IE1hdGVyaWFsWDo6U2hhcmVkUHRyJiBwTWF0ZXJpYWwpOwoKICAgIC8vIFZvbHVtZXMKCiAgICAvKiogR2V0IHRoZSBsaXN0IG9mIGdyaWQgdm9sdW1lcy4KICAgICovCiAgICBjb25zdCBzdGQ6OnZlY3RvcjxHcmlkVm9sdW1lOjpTaGFyZWRQdHI+JiBnZXRHcmlkVm9sdW1lcygpIGNvbnN0IHsgcmV0dXJuIG1TY2VuZURhdGEuZ3JpZFZvbHVtZXM7IH0KCiAgICAvKiogR2V0IGEgZ3JpZCB2b2x1bWUgYnkgbmFtZS4KICAgICAgICBOb3RlOiBUaGlzIHJldHVybnMgdGhlIGZpcnN0IHZvbHVtZSBmb3VuZCB3aXRoIGEgbWF0Y2hpbmcgbmFtZS4KICAgICAgICBccGFyYW0gbmFtZSBWb2x1bWUgbmFtZS4KICAgICAgICBccmV0dXJuIFJldHVybnMgdGhlIGZpcnN0IHZvbHVtZSB3aXRoIGEgbWF0Y2hpbmcgbmFtZSBvciBudWxscHRyIGlmIG5vbmUgd2FzIGZvdW5kLgogICAgKi8KICAgIEdyaWRWb2x1bWU6OlNoYXJlZFB0ciBnZXRHcmlkVm9sdW1lKGNvbnN0IHN0ZDo6c3RyaW5nJiBuYW1lKSBjb25zdDsKCiAgICAvKiogQWRkIGEgZ3JpZCB2b2x1bWUuCiAgICAgICAgXHBhcmFtIHBHcmlkVm9sdW1lIFRoZSBncmlkIHZvbHVtZS4KICAgICAgICBccGFyYW0gbm9kZUlEIFRoZSBub2RlIHRvIGF0dGFjaCB0aGUgdm9sdW1lIHRvIChvcHRpb25hbCkuCiAgICAgICAgXHJldHVybiBUaGUgSUQgb2YgdGhlIHZvbHVtZSBpbiB0aGUgc2NlbmUuCiAgICAqLwogICAgdWludDMyX3QgYWRkR3JpZFZvbHVtZShjb25zdCBHcmlkVm9sdW1lOjpTaGFyZWRQdHImIHBHcmlkVm9sdW1lLCB1aW50MzJfdCBub2RlSUQgPSBrSW52YWxpZE5vZGUpOwoKICAgIC8vIExpZ2h0cwoKICAgIC8qKiBHZXQgdGhlIGxpc3Qgb2YgbGlnaHRzLgogICAgKi8KICAgIGNvbnN0IHN0ZDo6dmVjdG9yPExpZ2h0OjpTaGFyZWRQdHI+JiBnZXRMaWdodHMoKSBjb25zdCB7IHJldHVybiBtU2NlbmVEYXRhLmxpZ2h0czsgfQoKICAgIC8qKiBHZXQgYSBsaWdodCBieSBuYW1lLgogICAgICAgIE5vdGU6IFRoaXMgcmV0dXJucyB0aGUgZmlyc3QgbGlnaHQgZm91bmQgd2l0aCBhIG1hdGNoaW5nIG5hbWUuCiAgICAgICAgXHBhcmFtIG5hbWUgTGlnaHQgbmFtZS4KICAgICAgICBccmV0dXJuIFJldHVybnMgdGhlIGZpcnN0IGxpZ2h0IHdpdGggYSBtYXRjaGluZyBuYW1lIG9yIG51bGxwdHIgaWYgbm9uZSB3YXMgZm91bmQuCiAgICAqLwogICAgTGlnaHQ6OlNoYXJlZFB0ciBnZXRMaWdodChjb25zdCBzdGQ6OnN0cmluZyYgbmFtZSkgY29uc3Q7CgogICAgLyoqIEFkZCBhIGxpZ2h0IHNvdXJjZQogICAgICAgIFxwYXJhbSBwTGlnaHQgVGhlIGxpZ2h0IG9iamVjdC4KICAgICAgICBccmV0dXJuIFRoZSBsaWdodCBJRAogICAgKi8KICAgIHVpbnQzMl90IGFkZExpZ2h0KGNvbnN0IExpZ2h0OjpTaGFyZWRQdHImIHBMaWdodCk7CgogICAgLy8gRW52aXJvbm1lbnQgbWFwCgogICAgLyoqIEdldCB0aGUgZW52aXJvbm1lbnQgbWFwLgogICAgKi8KICAgIGNvbnN0IEVudk1hcDo6U2hhcmVkUHRyJiBnZXRFbnZNYXAoKSBjb25zdCB7IHJldHVybiBtU2NlbmVEYXRhLnBFbnZNYXA7IH0KCiAgICAvKiogU2V0IGFuIGVudmlyb25tZW50IG1hcC4KICAgICAgICBccGFyYW1baW5dIHBFbnZNYXAgRW52aXJvbm1lbnQgbWFwLiBDYW4gYmUgbnVsbHB0ci4KICAgICovCiAgICB2b2lkIHNldEVudk1hcChFbnZNYXA6OlNoYXJlZFB0ciBwRW52TWFwKSB7IG1TY2VuZURhdGEucEVudk1hcCA9IHBFbnZNYXA7IH0KCiAgICAvLyBDYW1lcmFzCgogICAgLyoqIEdldCB0aGUgbGlzdCBvZiBjYW1lcmFzLgogICAgKi8KICAgIGNvbnN0IHN0ZDo6dmVjdG9yPENhbWVyYTo6U2hhcmVkUHRyPiYgZ2V0Q2FtZXJhcygpIGNvbnN0IHsgcmV0dXJuIG1TY2VuZURhdGEuY2FtZXJhczsgfQoKICAgIC8qKiBBZGQgYSBjYW1lcmEuCiAgICAgICAgXHBhcmFtIHBDYW1lcmEgQ2FtZXJhIHRvIGJlIGFkZGVkLgogICAgICAgIFxyZXR1cm4gVGhlIGNhbWVyYSBJRAogICAgKi8KICAgIHVpbnQzMl90IGFkZENhbWVyYShjb25zdCBDYW1lcmE6OlNoYXJlZFB0ciYgcENhbWVyYSk7CgogICAgLyoqIEdldCB0aGUgc2VsZWN0ZWQgY2FtZXJhLgogICAgKi8KICAgICBDYW1lcmE6OlNoYXJlZFB0ciBnZXRTZWxlY3RlZENhbWVyYSgpIGNvbnN0OwoKICAgIC8qKiBTZXQgdGhlIHNlbGVjdGVkIGNhbWVyYS4KICAgICAgICBccGFyYW0gcENhbWVyYSBDYW1lcmEgdG8gdXNlIGFzIHNlbGVjdGVkIGNhbWVyYSAobmVlZHMgdG8gYmUgYWRkZWQgZmlyc3QpLgogICAgKi8KICAgIHZvaWQgc2V0U2VsZWN0ZWRDYW1lcmEoY29uc3QgQ2FtZXJhOjpTaGFyZWRQdHImIHBDYW1lcmEpOwoKICAgIC8qKiBHZXQgdGhlIGNhbWVyYSBzcGVlZC4KICAgICovCiAgICBmbG9hdCBnZXRDYW1lcmFTcGVlZCgpIGNvbnN0IHsgcmV0dXJuIG1TY2VuZURhdGEuY2FtZXJhU3BlZWQ7IH0KCiAgICAvKiogU2V0IHRoZSBjYW1lcmEncyBzcGVlZAogICAgKi8KICAgIHZvaWQgc2V0Q2FtZXJhU3BlZWQoZmxvYXQgc3BlZWQpIHsgbVNjZW5lRGF0YS5jYW1lcmFTcGVlZCA9IHNwZWVkOyB9CgogICAgLyoqIEdldCB0aGUgYnVpbGQgZmxhZ3MKICAgICovCiAgICBGbGFncyBnZXRGbGFncygpIGNvbnN0IHsgcmV0dXJuIG1GbGFnczsgfQoKCiAgICAvKiogR2V0IHRoZSBsaXN0IG9mIGFuaW1hdGlvbnMuCiAgICAqLwogICAgY29uc3Qgc3RkOjp2ZWN0b3I8QW5pbWF0aW9uOjpTaGFyZWRQdHI+JiBnZXRBbmltYXRpb25zKCkgY29uc3QgeyByZXR1cm4gbVNjZW5lRGF0YS5hbmltYXRpb25zOyB9CgogICAgLyoqIEFkZCBhbiBhbmltYXRpb24KICAgICAgICBccGFyYW0gYW5pbWF0aW9uIFRoZSBhbmltYXRpb24KICAgICovCiAgICB2b2lkIGFkZEFuaW1hdGlvbihjb25zdCBBbmltYXRpb246OlNoYXJlZFB0ciYgcEFuaW1hdGlvbik7CgogICAgLyoqIENyZWF0ZSBhbiBhbmltYXRpb24gZm9yIGFuIGFuaW1hdGFibGUgb2JqZWN0LgogICAgICAgIFxwYXJhbSBwQW5pbWF0YWJsZSBBbmltYXRhYmxlIG9iamVjdC4KICAgICAgICBccGFyYW0gbmFtZSBOYW1lIG9mIHRoZSBhbmltYXRpb24uCiAgICAgICAgXHBhcmFtIGR1cmF0aW9uIER1cmF0aW9uIG9mIHRoZSBhbmltYXRpb24gaW4gc2Vjb25kcy4KICAgICAgICBccmV0dXJuIFJldHVybnMgYSBuZXcgYW5pbWF0aW9uIG9yIG51bGxwdHIgaWYgYW4gYW5pbWF0aW9uIGFscmVhZHkgZXhpc3RzLgogICAgKi8KICAgIEFuaW1hdGlvbjo6U2hhcmVkUHRyIGNyZWF0ZUFuaW1hdGlvbihBbmltYXRhYmxlOjpTaGFyZWRQdHIgcEFuaW1hdGFibGUsIGNvbnN0IHN0ZDo6c3RyaW5nJiBuYW1lLCBkb3VibGUgZHVyYXRpb24pOwoKICAgIC8vIFNjZW5lIGdyYXBoCgogICAgLyoqIEFkZHMgYSBub2RlIHRvIHRoZSBncmFwaC4KICAgICAgICBccmV0dXJuIFRoZSBub2RlIElELgogICAgKi8KICAgIHVpbnQzMl90IGFkZE5vZGUoY29uc3QgTm9kZSYgbm9kZSk7CgogICAgLyoqIEFkZCBhIGN1cnZlIGluc3RhbmNlIHRvIGEgbm9kZS4KICAgICovCiAgICB2b2lkIGFkZEN1cnZlSW5zdGFuY2UodWludDMyX3Qgbm9kZUlELCB1aW50MzJfdCBjdXJ2ZUlEKTsKCiAgICAvKiogQ2hlY2sgaWYgYSBzY2VuZSBub2RlIGlzIGFuaW1hdGVkLiBUaGlzIGNoZWNrIGlzIGRvbmUgcmVjdXJzaXZlbHkgdGhyb3VnaCBwYXJlbnQgbm9kZXMuCiAgICAgICAgXHJldHVybiBSZXR1cm5zIHRydWUgaWYgbm9kZSBpcyBhbmltYXRlZC4KICAgICovCiAgICBib29sIGlzTm9kZUFuaW1hdGVkKHVpbnQzMl90IG5vZGVJRCkgY29uc3Q7CgogICAgLyoqIFNldCB0aGUgYW5pbWF0aW9uIGludGVycG9sYXRpb24gbW9kZSBmb3IgYSBnaXZlbiBzY2VuZSBub2RlLiBUaGlzIHNldHMgdGhlIG1vZGUgcmVjdXJzaXZlbHkgZm9yIGFsbCBwYXJlbnQgbm9kZXMuCiAgICAqLwogICAgdm9pZCBzZXROb2RlSW50ZXJwb2xhdGlvbk1vZGUodWludDMyX3Qgbm9kZUlELCBBbmltYXRpb246OkludGVycG9sYXRpb25Nb2RlIGludGVycG9sYXRpb25Nb2RlLCBib29sIGVuYWJsZVdhcnBpbmcpOwoKcHJvdGVjdGVkOgogICAgU2NlbmVCdWlsZGVyKHN0ZDo6c2hhcmVkX3B0cjxEZXZpY2U+IHBEZXZpY2UsIEZsYWdzIGJ1aWxkRmxhZ3MpOwoKICAgIHN0cnVjdCBJbnRlcm5hbE5vZGUgOiBOb2RlIHsKICAgICAgICBJbnRlcm5hbE5vZGUoKSA9IGRlZmF1bHQ7CiAgICAgICAgSW50ZXJuYWxOb2RlKGNvbnN0IE5vZGUmIG4pIDogTm9kZShuKSB7fQogICAgICAgIHN0ZDo6dmVjdG9yPHVpbnQzMl90PiBjaGlsZHJlbjsgICAgIC8vLzwgTm9kZSBJRHMgb2YgYWxsIGNoaWxkIG5vZGVzLgogICAgICAgIHN0ZDo6dmVjdG9yPHVpbnQzMl90PiBtZXNoZXM7ICAgICAgIC8vLzwgTm9kZSBJRHMgb2YgYWxsIGNoaWxkIG5vZGVzLgogICAgICAgIHN0ZDo6dmVjdG9yPHVpbnQzMl90PiBjdXJ2ZXM7ICAgICAgIC8vLzwgQ3VydmUgSURzIG9mIGFsbCBjdXJ2ZXMgdGhpcyBub2RlIHRyYW5zZm9ybXMuCiAgICAgICAgc3RkOjp2ZWN0b3I8dWludDMyX3Q+IHNkZkdyaWRzOyAgICAgICAgIC8vLzwgU0RGIGdyaWQgSURzIG9mIGFsbCBTREYgZ3JpZHMgdGhpcyBub2RlIHRyYW5zZm9ybXMuCiAgICAgICAgc3RkOjp2ZWN0b3I8QW5pbWF0YWJsZSo+IGFuaW1hdGFibGU7ICAgIC8vLzwgUG9pbnRlcnMgdG8gYWxsIGFuaW1hdGFibGUgb2JqZWN0cyBhdHRhY2hlZCB0byB0aGlzIG5vZGUuCiAgICAgICAgYm9vbCBkb250T3B0aW1pemUgPSBmYWxzZTsgICAgICAgICAgICAgIC8vLzwgV2hldGhlciBub2RlIHNob3VsZCBiZSBpZ25vcmVkIGluIG9wdGltaXphdGlvbiBwYXNzZXMKCiAgICAgICAgIC8qKiBSZXR1cm5zIHRydWUgaWYgbm9kZSBoYXMgYW55IGF0dGFjaGVkIHNjZW5lIG9iamVjdHMuCiAgICAgICAgKi8KICAgICAgICBib29sIGhhc09iamVjdHMoKSBjb25zdCB7IHJldHVybiAhbWVzaGVzLmVtcHR5KCkgfHwgIWN1cnZlcy5lbXB0eSgpIHx8ICFhbmltYXRhYmxlLmVtcHR5KCk7IH0KICAgIH07CgogICAgc3RydWN0IE1lc2hJbnN0YW5jZVNwZWMgewogICAgICAgIHVpbnQzMl90ICAgIG5vZGVJZDsKICAgICAgICB1aW50MzJfdCAgICBtYXRlcmlhbElkOwogICAgICAgIGJvb2wgICAgICAgIG92ZXJyaWRlTWF0ZXJpYWwgPSBmYWxzZTsKCiAgICAgICAgSW5zdGFuY2VFeHBvcnRlZERhdGFTcGVjICAgIGV4cG9ydGVkOwogICAgICAgIEluc3RhbmNlU2hhZGluZ1NwZWMgICAgICAgICBzaGFkaW5nOwogICAgICAgIEluc3RhbmNlVmlzaWJpbGl0eVNwZWMgICAgICB2aXNpYmlsaXR5OwogICAgfTsKCiAgICBzdHJ1Y3QgTWVzaFNwZWMgewogICAgICAgIHN0ZDo6c3RyaW5nIG5hbWU7CiAgICAgICAgVmFvOjpUb3BvbG9neSB0b3BvbG9neSA9IFZhbzo6VG9wb2xvZ3k6OlVuZGVmaW5lZDsKICAgICAgICB1aW50MzJfdCBtYXRlcmlhbElkID0gMDsgICAgICAgICAgICAgICAgLy8vPCBHbG9iYWwgbWF0ZXJpYWwgSUQuCiAgICAgICAgdWludDMyX3Qgc3RhdGljVmVydGV4T2Zmc2V0ID0gMDsgICAgICAgIC8vLzwgT2Zmc2V0IGludG8gdGhlIHNoYXJlZCAnc3RhdGljRGF0YScgYXJyYXkuIFRoaXMgaXMgY2FsY3VsYXRlZCBpbiBjcmVhdGVHbG9iYWxCdWZmZXJzKCkuCiAgICAgICAgdWludDMyX3Qgc3RhdGljVmVydGV4Q291bnQgPSAwOyAgICAgICAgIC8vLzwgTnVtYmVyIG9mIHN0YXRpYyB2ZXJ0aWNlcy4KICAgICAgICB1aW50MzJfdCBza2lubmluZ1ZlcnRleE9mZnNldCA9IDA7ICAgICAgLy8vPCBPZmZzZXQgaW50byB0aGUgc2hhcmVkICdza2lubmluZ0RhdGEnIGFycmF5LiBUaGlzIGlzIGNhbGN1bGF0ZWQgaW4gY3JlYXRlR2xvYmFsQnVmZmVycygpLgogICAgICAgIHVpbnQzMl90IHNraW5uaW5nVmVydGV4Q291bnQgPSAwOyAgICAgICAvLy88IE51bWJlciBvZiBza2lubmVkIHZlcnRpY2VzLgogICAgICAgIHVpbnQzMl90IHByZXZWZXJ0ZXhPZmZzZXQgPSAwOyAgICAgICAgICAvLy88IE9mZnNldCBpbnRvIHRoZSBzaGFyZWQgYHByZXZWZXJ0aWNlc2AgYXJyYXkuIFRoaXMgaXMgY2FsY3VsYXRlZCBpbiBjcmVhdGVHbG9iYWxCdWZmZXJzKCkuCiAgICAgICAgdWludDMyX3QgcHJldlZlcnRleENvdW50ID0gMDsgICAgICAgICAgIC8vLzwgTnVtYmVyIG9mIHByZXZpb3VzIHZlcnRpY2VzIHN0b3JlZC4gVGhpcyBjYW4gYmUgdGhlIHN0YXRpYyBvciBza2lubmVkIHZlcnRleCBjb3VudCBkZXBlbmRpbmcgb24gYW5pbWF0aW9uIHR5cGUuCiAgICAgICAgdWludDMyX3QgaW5kZXhPZmZzZXQgPSAwOyAgICAgICAgICAgICAgIC8vLzwgT2Zmc2V0IGludG8gdGhlIHNoYXJlZCAnaW5kZXhEYXRhJyBhcnJheS4gVGhpcyBpcyBjYWxjdWxhdGVkIGluIGNyZWF0ZUdsb2JhbEJ1ZmZlcnMoKS4KICAgICAgICB1aW50MzJfdCBpbmRleENvdW50ID0gMDsgICAgICAgICAgICAgICAgLy8vPCBOdW1iZXIgb2YgaW5kaWNlcywgb3IgemVybyBpZiBub24taW5kZXhlZC4KICAgICAgICB1aW50MzJfdCB2ZXJ0ZXhDb3VudCA9IDA7ICAgICAgICAgICAgICAgLy8vPCBOdW1iZXIgb2YgdmVydGljZXMuCiAgICAgICAgdWludDMyX3Qgc2tlbGV0b25Ob2RlSUQgPSBrSW52YWxpZE5vZGU7IC8vLzwgTm9kZSBJRCBvZiBza2VsZXRvbiB3b3JsZCB0cmFuc2Zvcm0uIEZvcndhcmRlZCBmcm9tIE1lc2ggc3RydWN0LgogICAgICAgIGJvb2wgdXNlMTZCaXRJbmRpY2VzID0gZmFsc2U7ICAgICAgICAgICAvLy88IFRydWUgaWYgdGhlIGluZGljZXMgYXJlIGluIDE2LWJpdCBmb3JtYXQuCiAgICAgICAgYm9vbCBoYXNTa2lubmluZ0RhdGEgPSBmYWxzZTsgICAgICAgICAgIC8vLzwgVHJ1ZSBpZiBtZXNoIGhhcyBkeW5hbWljIHZlcnRpY2VzLgogICAgICAgIGJvb2wgaXNTdGF0aWMgPSBmYWxzZTsgICAgICAgICAgICAgICAgICAvLy88IFRydWUgaWYgbWVzaCBpcyBub24taW5zdGFuY2VkIGFuZCBzdGF0aWMgKG5vdCBkeW5hbWljIG9yIGFuaW1hdGVkKS4KICAgICAgICBib29sIGlzRnJvbnRGYWNlQ1cgPSBmYWxzZTsgICAgICAgICAgICAgLy8vPCBJbmRpY2F0ZSB3aGV0aGVyIGZyb250LWZhY2luZyBzaWRlIGhhcyBjbG9ja3dpc2Ugd2luZGluZyBpbiBvYmplY3Qgc3BhY2UuCiAgICAgICAgYm9vbCBpc0Rpc3BsYWNlZCA9IGZhbHNlOyAgICAgICAgICAgICAgIC8vLzwgVHJ1ZSBpZiBtZXNoIGhhcyBkaXNwbGFjZW1lbnQgbWFwLgogICAgICAgIGJvb2wgaXNBbmltYXRlZCA9IGZhbHNlOyAgICAgICAgICAgICAgICAvLy88IFRydWUgaWYgbWVzaCBoYXMgdmVydGV4IGFuaW1hdGlvbnMuCiAgICAgICAgYm9vbCBoYXNNZXNobGV0cyA9IGZhbHNlOyAgICAgICAgICAgICAgIC8vLzwgVHJ1ZSBpZiBtZXNoIGhhcyBnZW5lcmF0ZWQgbWVzaGxldHMuCiAgICAgICAgQUFCQiBib3VuZGluZ0JveDsgICAgICAgICAgICAgICAgICAgICAgIC8vLzwgTWVzaCBib3VuZGluZy1ib3ggaW4gb2JqZWN0IHNwYWNlLgogICAgICAgIHN0ZDo6dmVjdG9yPE1lc2hJbnN0YW5jZVNwZWM+IGluc3RhbmNlczsgICAgLy8vPCBBbGwgaW5zdGFuY2VzIG9mIHRoaXMgbWVzaC4KCiAgICAgICAgLy8gUHJlLXByb2Nlc3NlZCB2ZXJ0ZXggZGF0YS4KICAgICAgICBzdGQ6OnZlY3Rvcjx1aW50MzJfdD4gaW5kZXhEYXRhOyAgICAvLy88IFZlcnRleCBpbmRpY2VzIGluIGVpdGhlciAzMi1iaXQgb3IgMTYtYml0IGZvcm1hdCBwYWNrZWQgdGlnaHRseSwgb3IgZW1wdHkgaWYgbm9uLWluZGV4ZWQuCiAgICAgICAgc3RkOjp2ZWN0b3I8U3RhdGljVmVydGV4RGF0YT4gc3RhdGljRGF0YTsKICAgICAgICBzdGQ6OnZlY3RvcjxTa2lubmluZ1ZlcnRleERhdGE+IHNraW5uaW5nRGF0YTsKCiAgICAgICAgdWludDMyX3QgZ2V0VHJpYW5nbGVDb3VudCgpIGNvbnN0IHsKICAgICAgICAgICAgYXNzZXJ0KHRvcG9sb2d5ID09IFZhbzo6VG9wb2xvZ3k6OlRyaWFuZ2xlTGlzdCk7CiAgICAgICAgICAgIHJldHVybiAoaW5kZXhDb3VudCA+IDAgPyBpbmRleENvdW50IDogdmVydGV4Q291bnQpIC8gMzsKICAgICAgICB9CgogICAgICAgIHVpbnQzMl90IGdldEluZGV4KGNvbnN0IHNpemVfdCBpKSBjb25zdCB7CiAgICAgICAgICAgIGFzc2VydChpIDwgaW5kZXhDb3VudCk7CiAgICAgICAgICAgIHJldHVybiB1c2UxNkJpdEluZGljZXMgPyByZWludGVycHJldF9jYXN0PGNvbnN0IHVpbnQxNl90Kj4oaW5kZXhEYXRhLmRhdGEoKSlbaV0gOiBpbmRleERhdGFbaV07CiAgICAgICAgfQoKICAgICAgICBib29sIGlzU2tpbm5lZCgpIGNvbnN0IHsKICAgICAgICAgICAgcmV0dXJuIGhhc1NraW5uaW5nRGF0YTsKICAgICAgICB9CgogICAgICAgIGJvb2wgaXNEeW5hbWljKCkgY29uc3QgewogICAgICAgICAgICByZXR1cm4gaXNTa2lubmVkKCkgfHwgaXNBbmltYXRlZDsKICAgICAgICB9CiAgICB9OwoKICAgIC8vIFRPRE86IEFkZCBzdXBwb3J0IGZvciBkeW5hbWljIGN1cnZlcwogICAgc3RydWN0IEN1cnZlU3BlYyB7CiAgICAgICAgc3RkOjpzdHJpbmcgbmFtZTsKICAgICAgICBWYW86OlRvcG9sb2d5IHRvcG9sb2d5OwogICAgICAgIHVpbnQzMl90IG1hdGVyaWFsSWQgPSAwOyAgICAgICAgICAgIC8vLzwgR2xvYmFsIG1hdGVyaWFsIElELgogICAgICAgIHVpbnQzMl90IHN0YXRpY1ZlcnRleE9mZnNldCA9IDA7ICAgIC8vLzwgT2Zmc2V0IGludG8gdGhlIHNoYXJlZCAnc3RhdGljRGF0YScgYXJyYXkuIFRoaXMgaXMgY2FsY3VsYXRlZCBpbiBjcmVhdGVDdXJ2ZUdsb2JhbEJ1ZmZlcnMoKS4KICAgICAgICB1aW50MzJfdCBzdGF0aWNWZXJ0ZXhDb3VudCA9IDA7ICAgICAvLy88IE51bWJlciBvZiBzdGF0aWMgY3VydmUgdmVydGljZXMuCiAgICAgICAgdWludDMyX3QgaW5kZXhPZmZzZXQgPSAwOyAgICAgICAgICAgLy8vPCBPZmZzZXQgaW50byB0aGUgc2hhcmVkICdpbmRleERhdGEnIGFycmF5LiBUaGlzIGlzIGNhbGN1bGF0ZWQgaW4gY3JlYXRlQ3VydmVHbG9iYWxCdWZmZXJzKCkuCiAgICAgICAgdWludDMyX3QgaW5kZXhDb3VudCA9IDA7ICAgICAgICAgICAgLy8vPCBOdW1iZXIgb2YgaW5kaWNlcy4KICAgICAgICB1aW50MzJfdCB2ZXJ0ZXhDb3VudCA9IDA7ICAgICAgICAgICAvLy88IE51bWJlciBvZiB2ZXJ0aWNlcy4KICAgICAgICB1aW50MzJfdCBkZWdyZWUgPSAxOyAgICAgICAgICAgICAgICAvLy88IFBvbHlub21pYWwgZGVncmVlIG9mIGN1cnZlOyBsaW5lYXIgKDEpIGJ5IGRlZmF1bHQuCiAgICAgICAgc3RkOjp2ZWN0b3I8dWludDMyX3Q+IGluc3RhbmNlczsgICAgLy8vPCBOb2RlIElEcyBvZiBhbGwgaW5zdGFuY2VzIG9mIHRoaXMgY3VydmUuCgogICAgICAgIC8vIFByZS1wcm9jZXNzZWQgY3VydmUgdmVydGV4IGRhdGEuCiAgICAgICAgc3RkOjp2ZWN0b3I8dWludDMyX3Q+IGluZGV4RGF0YTsgICAgLy8vPCBWZXJ0ZXggaW5kaWNlcyBpbiAzMi1iaXQuCiAgICAgICAgc3RkOjp2ZWN0b3I8U3RhdGljQ3VydmVWZXJ0ZXhEYXRhPiBzdGF0aWNEYXRhOwogICAgfTsKCiAgICB1c2luZyBTY2VuZUdyYXBoID0gc3RkOjp2ZWN0b3I8SW50ZXJuYWxOb2RlPjsKICAgIHVzaW5nIE1lc2hMaXN0ID0gc3RkOjp2ZWN0b3I8TWVzaFNwZWM+OwogICAgdXNpbmcgTWVzaGxldExpc3QgPSBzdGQ6OnZlY3RvcjxNZXNobGV0PjsKICAgIHVzaW5nIE1lc2hHcm91cCA9IFNjZW5lOjpNZXNoR3JvdXA7CiAgICB1c2luZyBNZXNoR3JvdXBMaXN0ID0gc3RkOjp2ZWN0b3I8TWVzaEdyb3VwPjsKICAgIHVzaW5nIEN1cnZlTGlzdCA9IHN0ZDo6dmVjdG9yPEN1cnZlU3BlYz47CgogICAgc3RkOjpzaGFyZWRfcHRyPERldmljZT4gbXBEZXZpY2U7CgogICAgU2NlbmU6OlNjZW5lRGF0YSBtU2NlbmVEYXRhOwogICAgU2NlbmU6OlNoYXJlZFB0ciBtcFNjZW5lOwogICAgU2NlbmVDYWNoZTo6S2V5IG1TY2VuZUNhY2hlS2V5OwogICAgYm9vbCBtV3JpdGVTY2VuZUNhY2hlID0gZmFsc2U7ICAvLy88IFRydWUgaWYgc2NlbmUgY2FjaGUgc2hvdWxkIGJlIHdyaXR0ZW4gYWZ0ZXIgaW1wb3J0LgoKICAgIFNjZW5lR3JhcGggbVNjZW5lR3JhcGg7CiAgICBjb25zdCBGbGFncyBtRmxhZ3M7CgogICAgLy8gTWVzaGxldHMKICAgIE1lc2hMaXN0IG1NZXNoZXM7CiAgICBzdGQ6OnZlY3RvcjxNZXNobGV0TGlzdD4gbU1lc2hsZXRMaXN0czsKICAgIHN0ZDo6dmVjdG9yPHVpbnQzMl90PiBtTWVzaGxldFZlcnRpY2VzOyAgICAvLy88IE1lc2hsZXQgdmVydGljZXMgdGhhdCBwb2ludCB0byBnbG9iYWwgc2NlbmUgdmVydGV4IGRhdGEuCiAgICBzdGQ6OnZlY3Rvcjx1aW50OF90PiAgbU1lc2hsZXRJbmRpY2VzOyAgICAgLy8vPCBJbmRpY2VzIG9mIGEgcHJpbWl0aXZlIHZlcmljZXMuIFZlY3RvciBzaXplIHNob3VsZCBiZSBlcXVhbCB0byBpbmRleENvdW50LgogICAgc3RkOjp2ZWN0b3I8dWludDMyX3Q+IG1NZXNobGV0UHJpbUluZGljZXM7IC8vLzwgUHJpbWl0aXZlIGluZGljZXMgaW4gYSBnbG9iYWwgc2NlbmUgYnVmZmVyLiBJdCdzIHVzZWQgaW4gY2FzZSBpZiBtZXNobGV0IHByaW1pdGl2ZXMgb3JkZXIgZGlmZmVycyBmcm9tIG9yaWdpbmFsIG1lc2guCgogICAgLy8gTWVzaGVzCiAgICBNZXNoR3JvdXBMaXN0IG1NZXNoR3JvdXBzOyAvLy88IEdyb3VwcyBvZiBtZXNoZXMuIEVhY2ggZ3JvdXAgcmVwcmVzZW50cyBhbGwgdGhlIGdlb21ldHJpZXMgaW4gYSBCTEFTIGZvciByYXkgdHJhY2luZy4KCgogICAgLy8gQ3VydmVzCiAgICBDdXJ2ZUxpc3QgbUN1cnZlczsKCiAgICBzdGQ6OnVuaXF1ZV9wdHI8TWF0ZXJpYWxUZXh0dXJlTG9hZGVyPiBtcE1hdGVyaWFsVGV4dHVyZUxvYWRlcjsKICAgIEdwdUZlbmNlOjpTaGFyZWRQdHIgbXBGZW5jZTsKCiAgICBzdGQ6OnZlY3RvcjxNYXRlcmlhbDo6U2hhcmVkUHRyPiBtTWF0ZXJpYWxzOwogICAgc3RkOjp2ZWN0b3I8TWF0ZXJpYWxYOjpTaGFyZWRQdHI+IG1NYXRlcmlhbFhzOwogICAgc3RkOjp1bm9yZGVyZWRfbWFwPGNvbnN0IE1hdGVyaWFsKiwgdWludDMyX3Q+IG1NYXRlcmlhbFRvSWQ7CgogICAgQlM6Om11bHRpX2Z1dHVyZTx1aW50MzJfdD4gbUFkZEdlb1Rhc2tzOwoKCiAgICAvLyBNZXNoIGhlbHBlcnMKICAgIGJvb2wgZG9lc05vZGVIYXZlQW5pbWF0aW9uKHVpbnQzMl90IG5vZGVJRCkgY29uc3Q7CiAgICB2b2lkIHVwZGF0ZUxpbmtlZE9iamVjdHModWludDMyX3Qgbm9kZUlELCB1aW50MzJfdCBuZXdOb2RlSUQpOwogICAgYm9vbCBjb2xsYXBzZU5vZGVzKHVpbnQzMl90IHBhcmVudE5vZGVJRCwgdWludDMyX3QgY2hpbGROb2RlSUQpOwogICAgYm9vbCBtZXJnZU5vZGVzKHVpbnQzMl90IGRzdE5vZGVJRCwgdWludDMyX3Qgc3JjTm9kZUlEKTsKICAgIHZvaWQgZmxpcFRyaWFuZ2xlV2luZGluZyhNZXNoU3BlYyYgbWVzaCk7CiAgICB2b2lkIHVwZGF0ZVNERkdyaWRJRCh1aW50MzJfdCBvbGRJRCwgdWludDMyX3QgbmV3SUQpOwoKICAgIC8qKiBTcGxpdCBhIG1lc2ggYnkgdGhlIGdpdmVuIGF4aXMtYWxpZ25lZCBzcGxpdHRpbmcgcGxhbmUuCiAgICAgICAgXHJldHVybiBQYWlyIG9mIG9wdGlvbmFsIG1lc2ggSURzIGZvciB0aGUgbWVzaGVzIG9uIHRoZSBsZWZ0IGFuZCByaWdodCBzaWRlLCByZXNwZWN0aXZlbHkuCiAgICAqLwogICAgc3RkOjpwYWlyPHN0ZDo6b3B0aW9uYWw8dWludDMyX3Q+LCBzdGQ6Om9wdGlvbmFsPHVpbnQzMl90Pj4gc3BsaXRNZXNoKHVpbnQzMl90IG1lc2hJRCwgY29uc3QgaW50IGF4aXMsIGNvbnN0IGZsb2F0IHBvcyk7CgogICAgdm9pZCBzcGxpdEluZGV4ZWRNZXNoKGNvbnN0IE1lc2hTcGVjJiBtZXNoLCBNZXNoU3BlYyYgbGVmdE1lc2gsIE1lc2hTcGVjJiByaWdodE1lc2gsIGNvbnN0IGludCBheGlzLCBjb25zdCBmbG9hdCBwb3MpOwogICAgdm9pZCBzcGxpdE5vbkluZGV4ZWRNZXNoKGNvbnN0IE1lc2hTcGVjJiBtZXNoLCBNZXNoU3BlYyYgbGVmdE1lc2gsIE1lc2hTcGVjJiByaWdodE1lc2gsIGNvbnN0IGludCBheGlzLCBjb25zdCBmbG9hdCBwb3MpOwoKICAgIC8vIE1lc2ggZ3JvdXAgaGVscGVycwogICAgc2l6ZV90IGNvdW50VHJpYW5nbGVzKGNvbnN0IE1lc2hHcm91cCYgbWVzaEdyb3VwKSBjb25zdDsKICAgIEFBQkIgY2FsY3VsYXRlQm91bmRpbmdCb3goY29uc3QgTWVzaEdyb3VwJiBtZXNoR3JvdXApIGNvbnN0OwogICAgYm9vbCBuZWVkc1NwbGl0KGNvbnN0IE1lc2hHcm91cCYgbWVzaEdyb3VwLCBzaXplX3QmIHRyaWFuZ2xlQ291bnQpIGNvbnN0OwogICAgTWVzaEdyb3VwTGlzdCBzcGxpdE1lc2hHcm91cFNpbXBsZShNZXNoR3JvdXAmIG1lc2hHcm91cCkgY29uc3Q7CiAgICBNZXNoR3JvdXBMaXN0IHNwbGl0TWVzaEdyb3VwTWVkaWFuKE1lc2hHcm91cCYgbWVzaEdyb3VwKSBjb25zdDsKICAgIE1lc2hHcm91cExpc3Qgc3BsaXRNZXNoR3JvdXBNaWRwb2ludE1lc2hlcyhNZXNoR3JvdXAmIG1lc2hHcm91cCk7CgogICAgLy8gUG9zdCBwcm9jZXNzaW5nCiAgICB2b2lkIHByZXBhcmVEaXNwbGFjZW1lbnRNYXBzKCk7CiAgICB2b2lkIHByZXBhcmVTY2VuZUdyYXBoKCk7CiAgICB2b2lkIHByZXBhcmVNZXNoZXMoKTsKICAgIHZvaWQgcmVtb3ZlVW51c2VkTWVzaGVzKCk7CiAgICB2b2lkIGZsYXR0ZW5TdGF0aWNNZXNoSW5zdGFuY2VzKCk7CiAgICB2b2lkIG9wdGltaXplU2NlbmVHcmFwaCgpOwogICAgdm9pZCBwcmV0cmFuc2Zvcm1TdGF0aWNNZXNoZXMoKTsKICAgIHZvaWQgdW5pZnlUcmlhbmdsZVdpbmRpbmcoKTsKICAgIHZvaWQgY2FsY3VsYXRlTWVzaEJvdW5kaW5nQm94ZXMoKTsKICAgIHZvaWQgY3JlYXRlTWVzaEdyb3VwcygpOwogICAgdm9pZCBvcHRpbWl6ZUdlb21ldHJ5KCk7CiAgICB2b2lkIHNvcnRNZXNoZXMoKTsKICAgIHZvaWQgY3JlYXRlR2xvYmFsQnVmZmVycygpOwogICAgdm9pZCBjcmVhdGVDdXJ2ZUdsb2JhbEJ1ZmZlcnMoKTsKICAgIHZvaWQgb3B0aW1pemVNYXRlcmlhbHMoKTsKICAgIHZvaWQgcmVtb3ZlRHVwbGljYXRlTWF0ZXJpYWxzKCk7CiAgICB2b2lkIGNvbGxlY3RWb2x1bWVHcmlkcygpOwogICAgdm9pZCBxdWFudGl6ZVRleENvb3JkcygpOwogICAgdm9pZCByZW1vdmVEdXBsaWNhdGVTREZHcmlkcygpOwoKICAgIC8vIFNjZW5lIHNldHVwCiAgICB2b2lkIGNyZWF0ZU1lc2hEYXRhKCk7CiAgICB2b2lkIGNyZWF0ZU1lc2hsZXRzRGF0YSgpOwogICAgdm9pZCBjcmVhdGVNZXNoSW5zdGFuY2VEYXRhKHVpbnQzMl90JiB0bGFzSW5zdGFuY2VJbmRleCk7CiAgICB2b2lkIGNyZWF0ZUN1cnZlRGF0YSgpOwogICAgdm9pZCBjcmVhdGVDdXJ2ZUluc3RhbmNlRGF0YSh1aW50MzJfdCYgdGxhc0luc3RhbmNlSW5kZXgpOwogICAgdm9pZCBjcmVhdGVTY2VuZUdyYXBoKCk7CiAgICB2b2lkIGNyZWF0ZU1lc2hCb3VuZGluZ0JveGVzKCk7CiAgICB2b2lkIGNhbGN1bGF0ZUN1cnZlQm91bmRpbmdCb3hlcygpOwoKICAgIGZyaWVuZCBjbGFzcyBTY2VuZUNhY2hlOwp9OwoKZW51bV9jbGFzc19vcGVyYXRvcnMoU2NlbmVCdWlsZGVyOjpGbGFncyk7Cgp9ICAvLyBuYW1lc3BhY2UgRmFsY29yCgojZW5kaWYgIC8vIFNSQ19GQUxDT1JfU0NFTkVfU0NFTkVCVUlMREVSX0hfCgAAAAAAAAAAUDkAAAAAAAAAAAAAAAAAAAAAAABQOQAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADBXgAAAAAAAMFeAAAAAAAAAAAAAAAA8L8"
				]
			]
		},
		{
			"contents": "#include <utility>\n#include <mutex>\n\n#include \"Falcor/Core/API/Texture.h\"\n#include \"Falcor/Scene/Lights/LightProbe.h\"\n#include \"Falcor/Scene/Lights/Light.h\"\n\n#include \"session.h\"\n\n#include \"../display.h\"\n#include \"../scene_builder.h\" \n\n#include \"lava_utils_lib/ut_fsys.h\"\n#include \"lava_utils_lib/ut_string.h\"\n#include \"lava_utils_lib/logging.h\"\n\n\nnamespace lava {\n\nnamespace lsd {\n\nusing DisplayType = Display::DisplayType;\n\nDisplayType resolveDisplayTypeByFileName(const std::string& file_name) {\n\tstd::string ext = ut::fsys::getFileExtension(file_name);\n\n    if( ext == \".exr\" ) return DisplayType::OPENEXR;\n    if( ext == \".jpg\" ) return DisplayType::JPEG;\n    if( ext == \".jpeg\" ) return DisplayType::JPEG;\n    if( ext == \".png\" ) return DisplayType::PNG;\n    if( ext == \".tif\" ) return DisplayType::TIFF;\n    if( ext == \".tiff\" ) return DisplayType::TIFF;\n    return DisplayType::OPENEXR;\n}\n\nSession::UniquePtr Session::create(std::unique_ptr<RendererIface> pRendererIface) {\n\tauto pSession = Session::UniquePtr(new Session(std::move(pRendererIface)));\n\tauto pGlobal = scope::Global::create();\n\tif (!pGlobal) {\n\t\treturn nullptr;\n\t}\n\n\tpSession->mpGlobal = pGlobal;\n\tpSession->mpCurrentScope = pGlobal;\n\n\treturn std::move(pSession);\n}\n\nSession::Session(std::unique_ptr<RendererIface> pRendererIface):mFirstRun(true) { \n\tmpRendererIface = std::move(pRendererIface);\n}\n\nSession::~Session() {\n\tLLOG_DBG << \"Session::~Session\";\n\tmpRendererIface.reset(nullptr);\n\tLLOG_DBG << \"Session::~Session done\";\n}\n\nvoid Session::cmdSetEnv(const std::string& key, const std::string& value) {\n\tmpRendererIface->setEnvVariable(key, value);\n}\n\nvoid Session::cmdConfig(const std::string& file_name) {\n\t// actual render graph configs loading postponed unitl renderer is initialized\n\tmpRendererIface->loadDeferredScriptFile(file_name);\n}\n\nstd::string Session::getExpandedString(const std::string& str) {\n\treturn mpRendererIface->getExpandedString(str);\n}\n\nvoid Session::cmdImage(lsd::ast::DisplayType display_type, const std::string& filename) {\n\tLLOG_DBG << \"cmdImage\";\n\tmFrameData.imageFileName = filename;\n    mDisplayData.displayType = display_type;\n}\n\n// initialize frame independet render data\nbool Session::prepareDisplayData() {\n\tLLOG_DBG << \"prepareDisplayData\";\n\n\t// prepare display driver parameters\n\tauto& props_container = mpGlobal->filterProperties(ast::Style::PLANE, std::regex(\"^IPlay\\\\.[a-zA-Z]*\"));\n\tfor( auto const& item: props_container.properties()) {\n\t\tLLOG_DBG << \"Display property: \" << to_string(item.first);\n\n\t\tconst std::string& parm_name = item.first.second.substr(6); // remove leading \"IPlay.\"\n\t\tconst Property& prop = item.second;\n\t\tswitch(item.second.type()) {\n\t\t\tcase ast::Type::FLOAT:\n\t\t\t\t//LLOG_DBG << \"type: \" << to_string(prop.type()) << \" value: \" << to_string(prop.value());\n\t\t\t\tmDisplayData.displayFloatParameters.push_back(std::pair<std::string, std::vector<float>>( parm_name, {prop.get<float>()} ));\n\t\t\t\tbreak;\n\t\t\tcase ast::Type::INT:\n\t\t\t\tmDisplayData.displayIntParameters.push_back(std::pair<std::string, std::vector<int>>( parm_name, {prop.get<int>()} ));\n\t\t\t\tbreak;\n\t\t\tcase ast::Type::STRING:\n\t\t\t\tmDisplayData.displayStringParameters.push_back(std::pair<std::string, std::vector<std::string>>( parm_name, {prop.get<std::string>()} ));\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\treturn true;\n}\n\n// initialize frame dependet render data\nbool Session::prepareFrameData() {\n\tLLOG_DBG << \"prepareFrameData\";\n\tif(!mpRendererIface->initRenderer()) return false;\n\n\t// set up frame resolution (as they don't have to be the same size)\n\tInt2 resolution = mpGlobal->getPropertyValue(ast::Style::IMAGE, \"resolution\", Int2{640, 480});\n\tmFrameData.imageWidth = resolution[0];\n\tmFrameData.imageHeight = resolution[1];\n\n\t// set up camera data\n\tVector2 camera_clip = mpGlobal->getPropertyValue(ast::Style::CAMERA, \"clip\", Vector2{0.01, 1000.0});\n\t\n\tmFrameData.cameraNearPlane = camera_clip[0];\n\tmFrameData.cameraFarPlane  = camera_clip[1];\n\tmFrameData.cameraProjectionName = mpGlobal->getPropertyValue(ast::Style::CAMERA, \"projection\", std::string(\"perspective\"));\n\tmFrameData.cameraTransform = mpGlobal->getTransformList()[0];\n\n\tconst auto& segments = mpGlobal->segments();\n\tif(segments.size()) {\n\t\tconst auto& pSegment = segments[0];\n\t\tmFrameData.cameraFocalLength = 50.0 * pSegment->getPropertyValue(ast::Style::CAMERA, \"zoom\", (double)1.0);\n\t\t\n\t\tdouble height_k = static_cast<double>(mFrameData.imageHeight) / static_cast<double>(mFrameData.imageWidth);\n\t\tmFrameData.cameraFrameHeight = height_k * 50.0;\n\t}\n\n\tmFrameData.imageSamples = mpGlobal->getPropertyValue(ast::Style::IMAGE, \"samples\", 1);\n\n\treturn true;\n}\n\n\nbool Session::cmdRaytrace() {\n\tLLOG_DBG << \"cmdRaytrace\";\n\tmpGlobal->printSummary(std::cout);\n\t\n\t// push frame independent data to the rendering interface\n\tif(mFirstRun) {\n\n\t\t// prepare display driver parameters\n\t\tif(!prepareDisplayData()) {\n\t\t\tLLOG_ERR << \"Unable to prepare display data !!!\";\n\t\t\treturn false;\n\t\t}\n\n\t\tif(!mpRendererIface->setDisplay(mDisplayData)) {\n\t\t\tLLOG_ERR << \"Error setting display data !!!\";\n\t\t\treturn false;\n\t\t}\n\t}\n\n\tif(!prepareFrameData()) {\n\t\tLLOG_ERR << \"Unable to prepare frame data !\";\n\t\treturn false;\n\t}\n\n\tmpRendererIface->renderFrame(mFrameData);\n\n\tmFirstRun = false;\n\treturn true;\n}\n\nvoid Session::pushBgeo(const std::string& name, ika::bgeo::Bgeo::SharedConstPtr pBgeo, bool async) {\n\tLLOG_DBG << \"pushBgeo\";\n    //bgeo.printSummary(std::cout);\n\n    auto pSceneBuilder = mpRendererIface->getSceneBuilder();\n    if(pSceneBuilder) {\n    \tif (async) {\n    \t\t// async mesh add \n    \t\tmMeshMap[name] = pSceneBuilder->addGeometryAsync(pBgeo, name);\n    \t} else {\n    \t\t// immediate mesh add\n    \t\tmMeshMap[name] = pSceneBuilder->addGeometry(pBgeo, name);\n    \t}\n    } else {\n    \tLLOG_ERR << \"Can't push geometry (bgeo). SceneBuilder not ready !!!\";\n    }\n}\n\nvoid Session::pushLight(const scope::Light::SharedPtr pLightScope) {\n\tLLOG_DBG << \"pushLight\";\n\tstatic std::string unnamed = \"unnamed\"; // safety. in case light scope has no name specified\n\n    auto pSceneBuilder = mpRendererIface->getSceneBuilder();\n\n    if (!pSceneBuilder) {\n\t\tLLOG_ERR << \"Unable to push light. SceneBuilder not ready !!!\";\n\t\treturn;\n\t}\n\n\tstd::string light_type = pLightScope->getPropertyValue(ast::Style::LIGHT, \"type\", std::string(\"point\"));\n\tstd::string light_name = pLightScope->getPropertyValue(ast::Style::OBJECT, \"name\", unnamed);\n\tconst auto& transform = pLightScope->getTransformList()[0];\n\n\tFalcor::float3 light_color = {1.0, 1.0, 1.0}; // defualt light color\n\tFalcor::float3 light_pos = {transform[3][0], transform[3][1], transform[3][2]}; // light position\n\n\tFalcor::float3 light_dir = {-transform[2][0], -transform[2][1], -transform[2][2]};\n\tLLOG_DBG << \"Light dir: \" << light_dir[0] << \" \" << light_dir[1] << \" \" << light_dir[2];\n\n\tProperty* pShaderProp = pLightScope->getProperty(ast::Style::LIGHT, \"shader\");\n\tif(pShaderProp) {\n\t\tauto pShaderProps = pShaderProp->subContainer();\n\t\tlight_color = to_float3(pShaderProps->getPropertyValue(ast::Style::LIGHT, \"lightcolor\", lsd::Vector3{1.0, 1.0, 1.0}));\n\t} else {\n\t\tLLOG_ERR << \"No shader property set for light \" << light_name;\n\t}\n\n\tFalcor::Light::SharedPtr pLight = nullptr;\n\n\tif( light_type == \"distant\") {\n\t\tauto pDistantLight = Falcor::DistantLight::create();\n\t\tpDistantLight->setWorldDirection(light_dir);\n\t\t\n\t\tpLight = std::dynamic_pointer_cast<Falcor::Light>(pDistantLight);\n\t} else if( light_type == \"point\") {\n\t\tauto pPointLight = Falcor::PointLight::create();\n\t\tpPointLight->setWorldPosition(light_pos);\n\t\tpPointLight->setWorldDirection(light_dir);\n\n\t\tpLight = std::dynamic_pointer_cast<Falcor::Light>(pPointLight);\n\t} else if( light_type == \"grid\" ) {\n\t\tauto pAreaLight = Falcor::AnalyticAreaLight::create(Falcor::LightType::Rect);\n\t\tif (!pAreaLight) {\n\t\t\tLLOG_ERR << \"Error creating AnalyticAreaLight !!! Skipping...\";\n\t\t\treturn;\n\t\t}\n\t\tpAreaLight->setTransformMatrix(transform);\n\n\t\tpLight = std::dynamic_pointer_cast<Falcor::Light>(pAreaLight);\n\t} else if( light_type == \"env\") {\n\t\t// Environment light probe is not a classid light source. It should be created later by scene builder or renderer\n\n\t\t//envintensity\n\t\tstd::string texture_file_name = pLightScope->getPropertyValue(ast::Style::LIGHT, \"areamap\", std::string(\"\"));\n\t\tif (texture_file_name.size() == 0) {\n\t\t\tLLOG_WRN << \"No areamap provided for environment light. Skipping...\";\n\t\t\treturn;\n\t\t}\n\n\t\tauto pDevice = pSceneBuilder->device();\n\t\tLightProbe::SharedPtr pLightProbe = LightProbe::create(pDevice->getRenderContext(), texture_file_name, true, ResourceFormat::RGBA16Float);\n    \tpLightProbe->setPosW(light_pos);\n\n    \t//light_color /= Falcor::float3{6.28318530718, 6.28318530718, 6.28318530718}; // inv 2*PI\n    \tpLightProbe->setIntensity(light_color);\n    \tpSceneBuilder->setLightProbe(pLightProbe);\n    \treturn;\n\t} else { \n\t\tLLOG_WRN << \"Unsupported light type \" << light_type << \". Skipping...\";\n\t\treturn;\n\t}\n\n\tif(pLight) {\n\t\tLLOG_DBG << \"Light \" << light_name << \"  type \" << pLight->getData().type;\n\n\t\tpLight->setName(light_name);\n\t\tpLight->setHasAnimation(false);\n\n\t\tlight_color *= Falcor::float3{6.28318530718, 6.28318530718, 6.28318530718}; // just to match houdini intensity (2*PI)\n\t\tpLight->setIntensity(light_color);\n\t\tuint32_t light_id = pSceneBuilder->addLight(pLight);\n\t\tmLightsMap[light_name] = light_id;\n\t}\n\n\tunnamed += \"_\";\n}\n\nvoid Session::cmdProperty(lsd::ast::Style style, const std::string& token, const Property::Value& value) {\n\tLLOG_DBG << \"cmdProperty \" << token << \" \" << to_string(value);\n\tif(!mpCurrentScope) {\n\t\tLLOG_ERR << \"No current scope is set !!!\";\n\t\treturn; \n\t}\n\tmpCurrentScope->setProperty(style, token, value);\n}\n\nvoid Session::cmdPropertyV(lsd::ast::Style style, const std::vector<std::pair<std::string, Property::Value>>& values) {\n\tLLOG_DBG << \"cmdPropertyV \";\n\tif(!mpCurrentScope) {\n\t\tLLOG_ERR << \"No current scope is set !!!\";\n\t\treturn; \n\t}\n\n\tif (values.size() < 2) {\n\t\tLLOG_ERR << \"Property array size should be at least 2 elements !!!\";\n\t\treturn;\n\t}\n\n\tmpCurrentScope->setProperty(style, values[0].first, values[0].second);\n\tProperty* pProp = mpCurrentScope->getProperty(style, values[0].first);\n\n\tif(!pProp) {\n\t\tLLOG_ERR << \"Error getting property \" << values[0].first;\n\t\treturn;\n\t}\n\n\tauto pSubContainer = pProp->subContainer();\n\tif(!pSubContainer) {\n\t\tLLOG_ERR << \"No sub-container for property \" << values[0].first;\n\t\treturn;\n\t}\n\n\tfor(auto it = values.begin() + 1; it != values.end(); it++) {\n\t\tpSubContainer->setProperty(style, it->first, it->second);\n\t}\n}\n\nvoid Session::cmdDeclare(lsd::ast::Style style, lsd::ast::Type type, const std::string& token, const lsd::PropValue& value) {\n\tLLOG_DBG << \"cmdDeclare\";\n\tif(mpCurrentScope) {\n\t\tmpCurrentScope->declareProperty(style, type, token, value.get(), Property::Owner::USER);\n\t}\n}\n\nvoid Session::cmdTransform(const Matrix4& transform) {\n\tLLOG_DBG << \"cmdTransform\";\n\tauto pScope = std::dynamic_pointer_cast<scope::Transformable>(mpCurrentScope);\n\tif(!pScope) {\n\t\tLLOG_DBG << \"Trying to set transform on non-transformable scope !!!\";\n\t\treturn;\n\t}\n\tpScope->setTransform(transform);\n}\n\nvoid Session::cmdMTransform(const Matrix4& transform) {\n\tLLOG_DBG << \"cmdMTransform\";\n\tauto pScope = std::dynamic_pointer_cast<scope::Transformable>(mpCurrentScope);\n\tif(!pScope) {\n\t\tLLOG_DBG << \"Trying to add transform to non-transformable scope !!!\";\n\t\treturn;\n\t}\n\tpScope->addTransform(transform);\n}\n\nscope::Geo::SharedPtr Session::getCurrentGeo() {\n\tauto pGeo = std::dynamic_pointer_cast<scope::Geo>(mpCurrentScope);\n\tif(!pGeo) {\n\t\tLLOG_ERR << \"Unable to get scope::Geo. Current scope type is \" << to_string(mpCurrentScope->type()) << \" !!!\";\n\t\treturn nullptr;\n\t}\n\treturn pGeo;\n}\n\nscope::ScopeBase::SharedPtr Session::getCurrentScope() {\n\treturn std::dynamic_pointer_cast<scope::ScopeBase>(mpCurrentScope);\n}\n\nvoid Session::cmdIPRmode(const std::string& mode) {\n\tLLOG_DBG << \"cmdIPRmode\";\n\tmIPRmode = true;\n\t//mpRendererIface->setIPRMode(mIPRmode);\n}\n\nbool Session::cmdStart(lsd::ast::Style object_type) {\n\tLLOG_DBG << \"cmdStart\";\n\tauto pGlobal = std::dynamic_pointer_cast<scope::Global>(mpCurrentScope);\n\tif(!pGlobal) {\n\t\tLLOG_FTL << \"Objects creation allowed only inside global scope !!!\";\n\t\treturn false;\n\t}\n\n\tswitch (object_type) {\n\t\tcase lsd::ast::Style::GEO: \n\t\t\tmpCurrentScope = pGlobal->addGeo();\n\t\t\tbreak;\n\t\tcase lsd::ast::Style::OBJECT: \n\t\t\tmpCurrentScope = pGlobal->addObject();\n\t\t\tbreak;\n\t\tcase lsd::ast::Style::LIGHT:\n\t\t\tmpCurrentScope = pGlobal->addLight();\n\t\t\tbreak;\n\t\tcase lsd::ast::Style::PLANE:\n\t\t\tmpCurrentScope = pGlobal->addPlane();\n\t\t\tbreak;\n\t\tcase lsd::ast::Style::SEGMENT:\n\t\t\tmpCurrentScope = pGlobal->addSegment();\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tLLOG_FTL << \"Objects creation allowed only inside global scope !!!\";\n\t\t\treturn false;\n\t}\n\n\treturn true;\n}\n\nbool Session::cmdEnd() {\n\tLLOG_DBG << \"cmdEnd\";\n\tauto pGlobal = std::dynamic_pointer_cast<scope::Global>(mpCurrentScope);\n\tif(pGlobal) {\n\t\tLLOG_FTL << \"Can't end global scope !!!\";\n\t\treturn false;\n\t}\n\n\tauto pParent = mpCurrentScope->parent();\n\tif(!pParent) {\n\t\tLLOG_FTL << \"Unable to end scope with no parent !!!\";\n\t\treturn false;\n\t}\n\n\tbool pushGeoAsync = false;\n\tbool result = true;\n\n\tscope::Geo::SharedPtr pGeo;\n\tscope::Object::SharedPtr pObj;\n\tscope::Plane::SharedPtr pPlane;\n\tscope::Light::SharedPtr pLight;\n\n\tswitch(mpCurrentScope->type()) {\n\t\tcase ast::Style::GEO:\n\t\t\tpGeo = std::dynamic_pointer_cast<scope::Geo>(mpCurrentScope);\n\t\t\tif( pGeo->isInline()) {\n\t\t\t\tpGeo->bgeo()->printSummary(std::cout);\n\t\t\t\tpushBgeo(pGeo->detailName(), pGeo->bgeo(), pushGeoAsync);\n\t\t\t} else {\n\t\t\t\tpGeo->bgeo()->printSummary(std::cout);\n\t\t\t\tpushBgeo(pGeo->detailName(), pGeo->bgeo(), pushGeoAsync);\n\t\t\t}\n\t\t\tbreak;\n\t\tcase ast::Style::OBJECT:\n\t\t\tLLOG_FTL << \"end object\";\n\t\t\tpObj = std::dynamic_pointer_cast<scope::Object>(mpCurrentScope);\n\t\t\tif(!pushGeometryInstance(pObj)) {\n\t\t\t\tLLOG_FTL << \"FAK\";\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tbreak;\n\t\tcase ast::Style::PLANE:\n\t\t\tpPlane = std::dynamic_pointer_cast<scope::Plane>(mpCurrentScope);\n\t\t\tbreak;\n\t\tcase ast::Style::LIGHT:\n\t\t\tpLight = std::dynamic_pointer_cast<scope::Light>(mpCurrentScope);\n\t\t\tpushLight(pLight);\n\t\t\tbreak;\n\t\tcase ast::Style::SEGMENT:\n\t\tcase ast::Style::GLOBAL:\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tLLOG_ERR << \"cmd_end makes no sence. Current scope type is \" << to_string(mpCurrentScope->type()) << \" !!!\";\n\t\t\tbreak;\n\t}\n\n\tmpCurrentScope = pParent;\n\treturn result;\n}\n\nbool Session::pushGeometryInstance(const scope::Object::SharedPtr pObj) {\n\tLLOG_DBG << \"pushGeometryInstance\";\n\tauto it = mMeshMap.find(pObj->geometryName());\n\tif(it == mMeshMap.end()) {\n\t\tLLOG_ERR << \"No geometry found for name \" << pObj->geometryName();\n\t\treturn false;\n\t}\n\n\tauto pSceneBuilder = mpRendererIface->getSceneBuilder();\n\tif (!pSceneBuilder) {\n\t\tLLOG_ERR << \"Unable to push geometry instance. SceneBuilder not ready !!!\";\n\t\treturn false;\n\t}\n\n\tassert(pSceneBuilder->device());\n\n\tFalcor::SceneBuilder::Node node = {\n\t\tit->first,\n\t\tpObj->getTransformList()[0],\n\t\tglm::mat4(1),\n\t\tFalcor::SceneBuilder::kInvalidNode // just a node with no parent\n\t};\n\n\tstd::string obj_name = pObj->getPropertyValue(ast::Style::OBJECT, \"name\", std::string(\"unnamed\"));\n\n\tuint32_t mesh_id;\n\ttry {\n\t\tLLOG_DBG << \"getting sync mesh_id for obj_name \" << obj_name;\n\t\tmesh_id = std::get<uint32_t>(it->second);\t\n\t} catch (const std::bad_variant_access&) {\n\t\tLLOG_DBG << \"getting async mesh_id for obj_name \" << obj_name;\n\n\t\tstd::shared_future<uint32_t>& f = std::get<std::shared_future<uint32_t>>(it->second);\n\t\ttry {\n\t\t\tmesh_id = f.get();\t\n\t\t} catch(const std::exception& e) {\n        \tstd::cout << \"Exception from the thread: \" << e.what() << '\\n';\n    \t}\n\t} catch (...) {\n\t\tLLOG_ERR << \"Unable to get mesh id for object \" << obj_name;\n\t\treturn false;\n\t}\n\tLLOG_DBG << \"mesh_id \" << mesh_id;\n\n\tuint32_t node_id = pSceneBuilder->addNode(node);\n\n\t// TODO: this is naive test. fetch basic material data\n\tProperty* pShaderProp = pObj->getProperty(ast::Style::OBJECT, \"surface\");\n    \n    Falcor::float3 \tsurface_base_color = {1.0, 1.0, 1.0};\n    std::string \tsurface_base_color_texture = \"\";\n    std::string \tsurface_base_normal_texture = \"\";\n    std::string \tsurface_metallic_texture = \"\";\n    std::string \tsurface_rough_texture = \"\";\n\n    bool \t\t\tsurface_use_basecolor_texture = false;\n    bool \t\t\tsurface_use_roughness_texture = false;\n    bool \t\t\tsurface_use_metallic_texture = false;\n    bool \t\t\tsurface_use_basenormal_texture = false;\n\n    float \t\t \tsurface_ior = 1.5;\n    float \t\t\tsurface_metallic = 0.0;\n    float \t\t\tsurface_roughness = 0.5;\n    float \t\t\tsurface_reflectivity = 1.0;\n\n    if(pShaderProp) {\n    \tauto pShaderProps = pShaderProp->subContainer();\n    \tsurface_base_color = to_float3(pShaderProps->getPropertyValue(ast::Style::OBJECT, \"basecolor\", lsd::Vector3{0.2, 0.2, 0.2}));\n    \tsurface_base_color_texture = pShaderProps->getPropertyValue(ast::Style::OBJECT, \"basecolor_texture\", std::string());\n    \tsurface_base_normal_texture = pShaderProps->getPropertyValue(ast::Style::OBJECT, \"baseNormal_texture\", std::string());\n    \tsurface_metallic_texture = pShaderProps->getPropertyValue(ast::Style::OBJECT, \"metallic_texture\", std::string());\n    \tsurface_rough_texture = pShaderProps->getPropertyValue(ast::Style::OBJECT, \"rough_texture\", std::string());\n\n    \tsurface_use_basecolor_texture = pShaderProps->getPropertyValue(ast::Style::OBJECT, \"basecolor_useTexture\", false);\n    \tsurface_use_metallic_texture = pShaderProps->getPropertyValue(ast::Style::OBJECT, \"metallic_useTexture\", false);\n    \tsurface_use_roughness_texture = pShaderProps->getPropertyValue(ast::Style::OBJECT, \"rough_useTexture\", false);\n    \tsurface_use_basenormal_texture = pShaderProps->getPropertyValue(ast::Style::OBJECT, \"baseBumpAndNormal_enable\", false);\n\n    \tsurface_ior = pShaderProps->getPropertyValue(ast::Style::OBJECT, \"ior\", 1.5);\n    \tsurface_metallic = pShaderProps->getPropertyValue(ast::Style::OBJECT, \"metallic\", 0.0);\n    \tsurface_roughness = pShaderProps->getPropertyValue(ast::Style::OBJECT, \"rough\", 0.3);\n    \tsurface_reflectivity = pShaderProps->getPropertyValue(ast::Style::OBJECT, \"reflect\", 1.0);\n    } else {\n    \tLLOG_ERR << \"No surface property set for object \" << obj_name;\n    }\n\n    auto pMaterial = Falcor::Material::create(pSceneBuilder->device(), obj_name);\n    pMaterial->setBaseColor({surface_base_color, 1.0});\n    pMaterial->setIndexOfRefraction(surface_ior);\n    pMaterial->setMetallic(surface_metallic);\n    pMaterial->setRoughness(surface_roughness);\n    pMaterial->setReflectivity(surface_reflectivity);\n\n    LLOG_DBG << \"setting material textures\";\n    if(surface_base_color_texture != \"\" && surface_use_basecolor_texture) \n    \tpMaterial->loadTexture(Falcor::Material::TextureSlot::BaseColor, surface_base_color_texture);\n\n    if(surface_metallic_texture != \"\" && surface_use_metallic_texture) \n    \tpMaterial->loadTexture(Falcor::Material::TextureSlot::Specular, surface_metallic_texture);\n\n    if(surface_rough_texture != \"\" && surface_use_roughness_texture) \n    \tpMaterial->loadTexture(Falcor::Material::TextureSlot::Roughness, surface_rough_texture);\n\n    if(surface_base_normal_texture != \"\" && surface_use_basenormal_texture) \n    \tpMaterial->loadTexture(Falcor::Material::TextureSlot::Normal, surface_base_normal_texture);\n\n    // add a mesh instance to a node\n    pSceneBuilder->addMeshInstance(node_id, mesh_id, pMaterial);\n\n\treturn true;\n}\n\n\nbool Session::cmdGeometry(const std::string& name) {\n \tLLOG_DBG << \"cmdGeometry\";\n \tif( mpCurrentScope->type() != ast::Style::OBJECT) {\n \t\tLLOG_ERR << \"cmd_geometry outside object scope !!!\";\n \t\treturn false;\n \t}\n\n \tauto pObj = std::dynamic_pointer_cast<scope::Object>(mpCurrentScope);\n \tpObj->setGeometryName(name);\n\n \treturn true;\n}\n\nvoid Session::cmdTime(double time) {\n\tmFrameData.time = time;\n}\n\n\n}  // namespace lsd\n\n}  // namespace lava",
			"file": "src/lava_lib/reader_lsd/session.cpp",
			"file_size": 19743,
			"file_write_time": 133352798597267383,
			"settings":
			{
				"buffer_size": 19743,
				"encoding": "UTF-8",
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					4,
					1,
					"insert",
					{
						"characters": "if(!"
					},
					"BAAAAFzHAAAAAAAAXccAAAAAAAAAAAAAXccAAAAAAABexwAAAAAAAAAAAABexwAAAAAAAF/HAAAAAAAAAAAAAF/HAAAAAAAAYMcAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAFzHAAAAAAAAXMcAAAAAAAAAAAAAAADwvw"
				],
				[
					8,
					1,
					"left_delete",
					null,
					"AQAAAO7HAAAAAAAA7scAAAAAAAABAAAAOw",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAO/HAAAAAAAA78cAAAAAAAAAAAAAAADwvw"
				],
				[
					9,
					1,
					"insert",
					{
						"characters": ")"
					},
					"AQAAAO7HAAAAAAAA78cAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAO7HAAAAAAAA7scAAAAAAAAAAAAAAADwvw"
				],
				[
					10,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAAO/HAAAAAAAA8McAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAO/HAAAAAAAA78cAAAAAAAAAAAAAAADwvw"
				],
				[
					11,
					1,
					"insert_snippet",
					{
						"contents": "{$0}"
					},
					"AQAAAPDHAAAAAAAA8scAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAPDHAAAAAAAA8McAAAAAAAAAAAAAAADwvw"
				],
				[
					12,
					1,
					"run_macro_file",
					{
						"file": "res://Packages/Default/Add Line in Braces.sublime-macro"
					},
					"BgAAAPHHAAAAAAAA8scAAAAAAAAAAAAA8scAAAAAAAD4xwAAAAAAAAAAAAD4xwAAAAAAAPnHAAAAAAAAAAAAAPnHAAAAAAAA/8cAAAAAAAAAAAAA8scAAAAAAADyxwAAAAAAAAYAAAAJICAgIAnyxwAAAAAAAPnHAAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAPHHAAAAAAAA8ccAAAAAAAAAAAAAAADwvw"
				],
				[
					13,
					1,
					"insert",
					{
						"characters": "re"
					},
					"AgAAAPnHAAAAAAAA+scAAAAAAAAAAAAA+scAAAAAAAD7xwAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAPnHAAAAAAAA+ccAAAAAAAAAAAAAAADwvw"
				],
				[
					14,
					1,
					"insert_completion",
					{
						"completion": "return",
						"format": "text",
						"keep_prefix": false,
						"must_insert": false,
						"trigger": "return"
					},
					"AgAAAPnHAAAAAAAA+ccAAAAAAAACAAAAcmX5xwAAAAAAAP/HAAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAPvHAAAAAAAA+8cAAAAAAAAAAAAAAADwvw"
				],
				[
					15,
					1,
					"insert",
					{
						"characters": " f"
					},
					"AgAAAP/HAAAAAAAAAMgAAAAAAAAAAAAAAMgAAAAAAAAByAAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAP/HAAAAAAAA/8cAAAAAAAAAAAAAAADwvw"
				],
				[
					16,
					1,
					"insert_completion",
					{
						"completion": "false",
						"format": "text",
						"keep_prefix": false,
						"must_insert": false,
						"trigger": "false"
					},
					"AgAAAADIAAAAAAAAAMgAAAAAAAABAAAAZgDIAAAAAAAABcgAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAHIAAAAAAAAAcgAAAAAAAAAAAAAAADwvw"
				],
				[
					17,
					1,
					"insert",
					{
						"characters": ";"
					},
					"AQAAAAXIAAAAAAAABsgAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAXIAAAAAAAABcgAAAAAAAAAAAAAAADwvw"
				],
				[
					23,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AgAAAP7IAAAAAAAA/8gAAAAAAAAAAAAA/8gAAAAAAAAEyQAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAP7IAAAAAAAA/sgAAAAAAAAAAAAAAADwvw"
				],
				[
					25,
					1,
					"insert",
					{
						"characters": "\t"
					},
					"AQAAAP7IAAAAAAAA/8gAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAP7IAAAAAAAA/sgAAAAAAAAAAAAAAABSQA"
				],
				[
					26,
					1,
					"paste",
					null,
					"AQAAAP/IAAAAAAAAFMkAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAP/IAAAAAAAA/8gAAAAAAAAAAAAAAADwvw"
				],
				[
					29,
					1,
					"insert",
					{
						"characters": "\t"
					},
					"AQAAAP/IAAAAAAAAAMkAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAP/IAAAAAAAA/8gAAAAAAAAAAAAAAABbQA"
				],
				[
					32,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AgAAAAbKAAAAAAAAB8oAAAAAAAAAAAAAB8oAAAAAAAAMygAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAbKAAAAAAAABsoAAAAAAAAAAAAAAADwvw"
				],
				[
					34,
					1,
					"insert",
					{
						"characters": "\t"
					},
					"AQAAAAbKAAAAAAAAB8oAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAbKAAAAAAAABsoAAAAAAAAAAAAAAABSQA"
				],
				[
					35,
					1,
					"paste",
					null,
					"AQAAAAfKAAAAAAAAHMoAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAfKAAAAAAAAB8oAAAAAAAAAAAAAAADwvw"
				],
				[
					38,
					1,
					"insert",
					{
						"characters": "\t"
					},
					"AQAAAAfKAAAAAAAACMoAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAfKAAAAAAAAB8oAAAAAAAAAAAAAAADwvw"
				],
				[
					41,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AgAAABHLAAAAAAAAEssAAAAAAAAAAAAAEssAAAAAAAAXywAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAABHLAAAAAAAAEcsAAAAAAAAAAAAAAADwvw"
				],
				[
					43,
					1,
					"insert",
					{
						"characters": "\t"
					},
					"AQAAABHLAAAAAAAAEssAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAABHLAAAAAAAAEcsAAAAAAAAAAAAAAABSQA"
				],
				[
					44,
					1,
					"paste",
					null,
					"AQAAABLLAAAAAAAAJ8sAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAABLLAAAAAAAAEssAAAAAAAAAAAAAAADwvw"
				],
				[
					47,
					1,
					"insert",
					{
						"characters": "\t"
					},
					"AQAAABLLAAAAAAAAE8sAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAABLLAAAAAAAAEssAAAAAAAAAAAAAAADwvw"
				],
				[
					50,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AgAAAB/MAAAAAAAAIMwAAAAAAAAAAAAAIMwAAAAAAAAlzAAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAB/MAAAAAAAAH8wAAAAAAAAAAAAAAADwvw"
				],
				[
					52,
					1,
					"insert",
					{
						"characters": "\t"
					},
					"AQAAAB/MAAAAAAAAIMwAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAB/MAAAAAAAAH8wAAAAAAAAAAAAAAABSQA"
				],
				[
					53,
					1,
					"paste",
					null,
					"AQAAACDMAAAAAAAANcwAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAACDMAAAAAAAAIMwAAAAAAAAAAAAAAADwvw"
				],
				[
					56,
					1,
					"insert",
					{
						"characters": "\t"
					},
					"AQAAACDMAAAAAAAAIcwAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAACDMAAAAAAAAIMwAAAAAAAAAAAAAAABbQA"
				],
				[
					64,
					1,
					"paste",
					null,
					"AQAAAGzIAAAAAAAAcMgAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAGzIAAAAAAAAbMgAAAAAAAAAAAAAAADwvw"
				],
				[
					67,
					1,
					"paste",
					null,
					"AQAAAHjJAAAAAAAAfMkAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAHjJAAAAAAAAeMkAAAAAAAAAAAAAAADwvw"
				],
				[
					70,
					1,
					"paste",
					null,
					"AQAAAIXKAAAAAAAAicoAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAIXKAAAAAAAAhcoAAAAAAAAAAAAAAADwvw"
				],
				[
					73,
					1,
					"paste",
					null,
					"AQAAAJjLAAAAAAAAnMsAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAJjLAAAAAAAAmMsAAAAAAAAAAAAAAADwvw"
				],
				[
					79,
					1,
					"paste",
					null,
					"AgAAAPvIAAAAAAAA/sgAAAAAAAAAAAAA/sgAAAAAAAD+yAAAAAAAAAEAAAA7",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAPvIAAAAAAAA/MgAAAAAAAAAAAAAAADwvw"
				],
				[
					82,
					1,
					"paste",
					null,
					"AgAAAAnKAAAAAAAADMoAAAAAAAAAAAAADMoAAAAAAAAMygAAAAAAAAEAAAA7",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAnKAAAAAAAACsoAAAAAAAAAAAAAAADwvw"
				],
				[
					85,
					1,
					"paste",
					null,
					"AgAAABrLAAAAAAAAHcsAAAAAAAAAAAAAHcsAAAAAAAAdywAAAAAAAAEAAAA7",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAABrLAAAAAAAAG8sAAAAAAAAAAAAAAADwvw"
				],
				[
					88,
					1,
					"paste",
					null,
					"AgAAAC7MAAAAAAAAMcwAAAAAAAAAAAAAMcwAAAAAAAAxzAAAAAAAAAEAAAA7",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAC7MAAAAAAAAL8wAAAAAAAAAAAAAAADwvw"
				],
				[
					7,
					1,
					"insert",
					{
						"characters": "retur"
					},
					"BgAAALmTAAAAAAAAupMAAAAAAAAAAAAAupMAAAAAAAC6kwAAAAAAAAQAAABpZighupMAAAAAAAC7kwAAAAAAAAAAAAC7kwAAAAAAALyTAAAAAAAAAAAAALyTAAAAAAAAvZMAAAAAAAAAAAAAvZMAAAAAAAC+kwAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAC5kwAAAAAAAL2TAAAAAAAAAAAAAAAA8L8"
				],
				[
					8,
					1,
					"insert",
					{
						"characters": "n"
					},
					"AQAAAL6TAAAAAAAAv5MAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAC+kwAAAAAAAL6TAAAAAAAAAAAAAAAA8L8"
				],
				[
					9,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAAL+TAAAAAAAAwJMAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAC/kwAAAAAAAL+TAAAAAAAAAAAAAAAA8L8"
				],
				[
					12,
					1,
					"left_delete",
					null,
					"AQAAAN+TAAAAAAAA35MAAAAAAAAOAAAAKSByZXR1cm4gZmFsc2U",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADfkwAAAAAAAO2TAAAAAAAAAAAAAAAA8L8"
				],
				[
					23,
					1,
					"insert",
					{
						"characters": "\t"
					},
					"AQAAAEseAAAAAAAATB4AAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABLHgAAAAAAAEseAAAAAAAAAAAAAAAA8L8"
				],
				[
					26,
					1,
					"insert",
					{
						"characters": "\t"
					},
					"AQAAALUeAAAAAAAAth4AAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAC1HgAAAAAAALUeAAAAAAAAAAAAAAAA8L8"
				],
				[
					32,
					1,
					"insert",
					{
						"characters": "if!"
					},
					"BAAAALuTAAAAAAAAvJMAAAAAAAAAAAAAvJMAAAAAAAC8kwAAAAAAAAcAAAByZXR1cm4gvJMAAAAAAAC9kwAAAAAAAAAAAAC9kwAAAAAAAL6TAAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADCkwAAAAAAALuTAAAAAAAAAAAAAAAA8L8"
				],
				[
					33,
					1,
					"left_delete",
					null,
					"AQAAAL2TAAAAAAAAvZMAAAAAAAABAAAAIQ",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAC+kwAAAAAAAL6TAAAAAAAAAAAAAAAA8L8"
				],
				[
					34,
					1,
					"insert",
					{
						"characters": "(!"
					},
					"AgAAAL2TAAAAAAAAvpMAAAAAAAAAAAAAvpMAAAAAAAC/kwAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAC9kwAAAAAAAL2TAAAAAAAAAAAAAAAA8L8"
				],
				[
					36,
					1,
					"left_delete",
					null,
					"AQAAAN6TAAAAAAAA3pMAAAAAAAABAAAAOw",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADfkwAAAAAAAN+TAAAAAAAAAAAAAAAA8L8"
				],
				[
					37,
					1,
					"insert",
					{
						"characters": ")"
					},
					"AQAAAN6TAAAAAAAA35MAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADekwAAAAAAAN6TAAAAAAAAAAAAAAAA8L8"
				],
				[
					38,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAAN+TAAAAAAAA4JMAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADfkwAAAAAAAN+TAAAAAAAAAAAAAAAA8L8"
				],
				[
					39,
					1,
					"insert_snippet",
					{
						"contents": "{$0}"
					},
					"AQAAAOCTAAAAAAAA4pMAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADgkwAAAAAAAOCTAAAAAAAAAAAAAAAA8L8"
				],
				[
					40,
					1,
					"run_macro_file",
					{
						"file": "res://Packages/Default/Add Line in Braces.sublime-macro"
					},
					"BgAAAOGTAAAAAAAA4pMAAAAAAAAAAAAA4pMAAAAAAADmkwAAAAAAAAAAAADmkwAAAAAAAOeTAAAAAAAAAAAAAOeTAAAAAAAA65MAAAAAAAAAAAAA4pMAAAAAAADikwAAAAAAAAQAAAAJCQkJ4pMAAAAAAADnkwAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADhkwAAAAAAAOGTAAAAAAAAAAAAAAAA8L8"
				],
				[
					41,
					1,
					"insert",
					{
						"characters": "mf"
					},
					"AgAAAOeTAAAAAAAA6JMAAAAAAAAAAAAA6JMAAAAAAADpkwAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADnkwAAAAAAAOeTAAAAAAAAAAAAAAAA8L8"
				],
				[
					42,
					1,
					"insert_completion",
					{
						"completion": "mFailed",
						"format": "text",
						"keep_prefix": false,
						"must_insert": false,
						"trigger": "mFailed"
					},
					"AgAAAOeTAAAAAAAA55MAAAAAAAACAAAAbWbnkwAAAAAAAO6TAAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADpkwAAAAAAAOmTAAAAAAAAAAAAAAAA8L8"
				],
				[
					43,
					1,
					"insert",
					{
						"characters": " ="
					},
					"AgAAAO6TAAAAAAAA75MAAAAAAAAAAAAA75MAAAAAAADwkwAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADukwAAAAAAAO6TAAAAAAAAAAAAAAAA8L8"
				],
				[
					44,
					1,
					"insert",
					{
						"characters": " tr"
					},
					"AwAAAPCTAAAAAAAA8ZMAAAAAAAAAAAAA8ZMAAAAAAADykwAAAAAAAAAAAADykwAAAAAAAPOTAAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADwkwAAAAAAAPCTAAAAAAAAAAAAAAAA8L8"
				],
				[
					45,
					1,
					"insert_completion",
					{
						"completion": "true",
						"format": "text",
						"keep_prefix": false,
						"must_insert": false,
						"trigger": "true"
					},
					"AgAAAPGTAAAAAAAA8ZMAAAAAAAACAAAAdHLxkwAAAAAAAPWTAAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADzkwAAAAAAAPOTAAAAAAAAAAAAAAAA8L8"
				],
				[
					46,
					1,
					"insert",
					{
						"characters": ";"
					},
					"AQAAAPWTAAAAAAAA9pMAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAD1kwAAAAAAAPWTAAAAAAAAAAAAAAAA8L8"
				],
				[
					47,
					1,
					"insert",
					{
						"characters": "\nre"
					},
					"BAAAAPaTAAAAAAAA95MAAAAAAAAAAAAA95MAAAAAAAD8kwAAAAAAAAAAAAD8kwAAAAAAAP2TAAAAAAAAAAAAAP2TAAAAAAAA/pMAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAD2kwAAAAAAAPaTAAAAAAAAAAAAAAAA8L8"
				],
				[
					48,
					1,
					"insert_completion",
					{
						"completion": "return",
						"format": "text",
						"keep_prefix": false,
						"must_insert": false,
						"trigger": "return"
					},
					"AgAAAPyTAAAAAAAA/JMAAAAAAAACAAAAcmX8kwAAAAAAAAKUAAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAD+kwAAAAAAAP6TAAAAAAAAAAAAAAAA8L8"
				],
				[
					49,
					1,
					"insert",
					{
						"characters": " f"
					},
					"AgAAAAKUAAAAAAAAA5QAAAAAAAAAAAAAA5QAAAAAAAAElAAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAClAAAAAAAAAKUAAAAAAAAAAAAAAAA8L8"
				],
				[
					50,
					1,
					"insert_completion",
					{
						"completion": "false",
						"format": "text",
						"keep_prefix": false,
						"must_insert": false,
						"trigger": "false"
					},
					"AgAAAAOUAAAAAAAAA5QAAAAAAAABAAAAZgOUAAAAAAAACJQAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAElAAAAAAAAASUAAAAAAAAAAAAAAAA8L8"
				],
				[
					51,
					1,
					"insert",
					{
						"characters": ";"
					},
					"AQAAAAiUAAAAAAAACZQAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAIlAAAAAAAAAiUAAAAAAAAAAAAAAAA8L8"
				],
				[
					1,
					1,
					"revert",
					null,
					"AwAAAAAAAAAAAAAAAAAAAAAAAACD1QAAI2luY2x1ZGUgPHV0aWxpdHk+CiNpbmNsdWRlIDxtdXRleD4KI2luY2x1ZGUgPGxpbWl0cz4KI2luY2x1ZGUgPGZzdHJlYW0+CiNpbmNsdWRlIDxjc3RkbGliPgoKI2luY2x1ZGUgPG1hdGguaD4KCiNpbmNsdWRlICJGYWxjb3IvQ29yZS9BUEkvVGV4dHVyZS5oIgojaW5jbHVkZSAiRmFsY29yL1NjZW5lL0xpZ2h0cy9MaWdodC5oIgojaW5jbHVkZSAiRmFsY29yL1NjZW5lL01hdGVyaWFsL1N0YW5kYXJkTWF0ZXJpYWwuaCIKI2luY2x1ZGUgIkZhbGNvci9TY2VuZS9NYXRlcmlhbFgvTXhOb2RlLmgiCiNpbmNsdWRlICJGYWxjb3IvU2NlbmUvTWF0ZXJpYWxYL01hdGVyaWFsWC5oIgojaW5jbHVkZSAiRmFsY29yL1V0aWxzL0NvbmZpZ1N0b3JlLmgiCiNpbmNsdWRlICJGYWxjb3IvVXRpbHMvTWF0aC9GYWxjb3JNYXRoLmgiCiNpbmNsdWRlICJGYWxjb3IvVXRpbHMvVGltaW5nL1RpbWVSZXBvcnQuaCIKCiNpbmNsdWRlICJzZXNzaW9uLmgiCiNpbmNsdWRlICJzZXNzaW9uX2hlbHBlcnMuaCIKCiNpbmNsdWRlICIuLi9kaXNwbGF5LmgiCiNpbmNsdWRlICIuLi9hb3YuaCIKI2luY2x1ZGUgIi4uL3JlbmRlcmVyLmgiCiNpbmNsdWRlICIuLi9zY2VuZV9idWlsZGVyLmgiIAoKI2luY2x1ZGUgImxhdmFfdXRpbHNfbGliL3V0X2ZzeXMuaCIKI2luY2x1ZGUgImxhdmFfdXRpbHNfbGliL3V0X3N0cmluZy5oIgojaW5jbHVkZSAibGF2YV91dGlsc19saWIvbG9nZ2luZy5oIgoKI2luY2x1ZGUgImdsbS9ndHgvc3RyaW5nX2Nhc3QuaHBwIgoKCnN0YXRpYyBjb25zdGV4cHIgZmxvYXQgaGFsZkMgPSAoZmxvYXQpTV9QSSAvIDE4MC4wZjsKCm5hbWVzcGFjZSBsYXZhIHsKCm5hbWVzcGFjZSBsc2QgewoKdXNpbmcgRGlzcGxheVR5cGUgPSBEaXNwbGF5OjpEaXNwbGF5VHlwZTsKCgpTZXNzaW9uOjpVbmlxdWVQdHIgU2Vzc2lvbjo6Y3JlYXRlKHN0ZDo6c2hhcmVkX3B0cjxSZW5kZXJlcj4gcFJlbmRlcmVyKSB7Cglhc3NlcnQocFJlbmRlcmVyKTsKCglhdXRvIHBTZXNzaW9uID0gU2Vzc2lvbjo6VW5pcXVlUHRyKG5ldyBTZXNzaW9uKHBSZW5kZXJlcikpOwoJYXV0byBwR2xvYmFsID0gc2NvcGU6Okdsb2JhbDo6Y3JlYXRlKCk7CglpZiAoIXBHbG9iYWwpIHsKCQlyZXR1cm4gbnVsbHB0cjsKCX0KCglwU2Vzc2lvbi0+bXBHbG9iYWwgPSBwR2xvYmFsOwoJcFNlc3Npb24tPm1wQ3VycmVudFNjb3BlID0gcEdsb2JhbDsKCglyZXR1cm4gc3RkOjptb3ZlKHBTZXNzaW9uKTsKfQoKU2Vzc2lvbjo6U2Vzc2lvbihzdGQ6OnNoYXJlZF9wdHI8UmVuZGVyZXI+IHBSZW5kZXJlcik6bUZpcnN0UnVuKHRydWUpIHsgCgltcFJlbmRlcmVyID0gcFJlbmRlcmVyOwoJbXBEZXZpY2UgPSBtcFJlbmRlcmVyLT5kZXZpY2UoKTsKfQoKU2Vzc2lvbjo6flNlc3Npb24oKSB7CglpZihtcERpc3BsYXkpIG1wRGlzcGxheSA9IG51bGxwdHI7Cn0KCnZvaWQgU2Vzc2lvbjo6Y21kU2V0RW52KGNvbnN0IHN0ZDo6c3RyaW5nJiBrZXksIGNvbnN0IHN0ZDo6c3RyaW5nJiB2YWx1ZSkgewoJc2V0RW52VmFyaWFibGUoa2V5LCB2YWx1ZSk7Cn0KCnZvaWQgU2Vzc2lvbjo6Y21kQ29uZmlnKGxzZDo6YXN0OjpUeXBlIHR5cGUsIGNvbnN0IHN0ZDo6c3RyaW5nJiBuYW1lLCBjb25zdCBsc2Q6OlByb3BWYWx1ZSYgdmFsdWUpIHsKLyoKCWF1dG8mIGNvbmZpZyA9IENvbmZpZ1N0b3JlOjppbnN0YW5jZSgpOwoJc3dpdGNoKHR5cGUpIHsKCQljYXNlIGxzZDo6YXN0OjpUeXBlOjpCT09MOgoJCQljb25maWcuc2V0PGJvb2w+KG5hbWUsIHZhbHVlKTsKCQkJYnJlYWs7CgkJZGVmYXVsdDoKCQkJYnJlYWs7Cgl9CiovCiNkZWZpbmUgZ2V0X2Jvb2woX2EpIChib29zdDo6Z2V0PGludD4oX2EpID09IDApID8gZmFsc2UgOiB0cnVlCgoJaWYgKG5hbWUgPT0gInZ0b2ZmIikgewoJCW1SZW5kZXJlckNvbmZpZy51c2VWaXJ0dWFsVGV4dHVyaW5nID0gZ2V0X2Jvb2wodmFsdWUpOyByZXR1cm47Cgl9CglpZiAobmFtZSA9PSAiZmNvbnYiKSB7CgkJbVJlbmRlcmVyQ29uZmlnLmZvcmNlVmlydHVhbFRleHR1cmVzUmVjb252ZXJzaW9uID0gZ2V0X2Jvb2wodmFsdWUpOyByZXR1cm47Cgl9CglpZiAobmFtZSA9PSAiYXN5bmNfZ2VvIikgewoJCW1SZW5kZXJlckNvbmZpZy51c2VBc3luY0dlb21ldHJ5UHJvY2Vzc2luZyA9IGdldF9ib29sKHZhbHVlKTsgcmV0dXJuOwoJfQoJaWYgKG5hbWUgPT0gImN1bGxfbW9kZSIpIHsKCQltUmVuZGVyZXJDb25maWcuY3VsbE1vZGUgPSBib29zdDo6Z2V0PHN0ZDo6c3RyaW5nPih2YWx1ZSk7IHJldHVybjsKCX0KCWlmIChuYW1lID09ICJ2dGV4X2NvbnZfcXVhbGl0eSIpIHsKCQltUmVuZGVyZXJDb25maWcudmlydHVhbFRleHR1cmVzQ29tcHJlc3Npb25RdWFsaXR5ID0gYm9vc3Q6OmdldDxzdGQ6OnN0cmluZz4odmFsdWUpOyByZXR1cm47Cgl9CglpZiAobmFtZSA9PSAidnRleF90bGMiKSB7CgkJbVJlbmRlcmVyQ29uZmlnLnZpcnR1YWxUZXh0dXJlc0NvbXByZXNzb3JUeXBlID0gYm9vc3Q6OmdldDxzdGQ6OnN0cmluZz4odmFsdWUpOyByZXR1cm47Cgl9CglpZiAobmFtZSA9PSAidnRleF90bGNfbGV2ZWwiKSB7CgkJbVJlbmRlcmVyQ29uZmlnLnZpcnR1YWxUZXh0dXJlc0NvbXByZXNzaW9uTGV2ZWwgPSAodWludDhfdClib29zdDo6Z2V0PGludD4odmFsdWUpOyByZXR1cm47Cgl9CglpZiAobmFtZSA9PSAiZ2VvX3RhbmdlbnRfZ2VuZXJhdGlvbiIpIHsKCQltUmVuZGVyZXJDb25maWcudGFuZ2VudEdlbmVyYXRpb25Nb2RlID0gYm9vc3Q6OmdldDxzdGQ6OnN0cmluZz4odmFsdWUpOyByZXR1cm47Cgl9CgoJTExPR19XUk4gPDwgIlVuc3VwcG9ydGVkIHJlbmRlcmVyIGNvbmZpZ3VyYXRpb24gcHJvcGVydHk6ICIgPDwgbmFtZSA8PCAiIG9mIHR5cGU6IiA8PCB0b19zdHJpbmcodHlwZSk7CglyZXR1cm47CgojdW5kZWYgZ2V0X2Jvb2wKfQoKdm9pZCBTZXNzaW9uOjpzZXRFbnZWYXJpYWJsZShjb25zdCBzdGQ6OnN0cmluZyYga2V5LCBjb25zdCBzdGQ6OnN0cmluZyYgdmFsdWUpewoJTExPR19EQkcgPDwgInNldEVudlZhcmlhYmxlOiAiIDw8IGtleSA8PCAiIDogIiA8PCB2YWx1ZTsKCW1FbnZtYXBba2V5XSA9IHZhbHVlOwp9CgpzdGQ6OnN0cmluZyBTZXNzaW9uOjpnZXRFeHBhbmRlZFN0cmluZyhjb25zdCBzdGQ6OnN0cmluZyYgcykgewoJCXN0ZDo6c3RyaW5nIHJlc3VsdCA9IHM7CgoJZm9yKCBhdXRvIGNvbnN0JiBba2V5LCB2YWxdIDogbUVudm1hcCApCgkJcmVzdWx0ID0gdXQ6OnN0cmluZzo6cmVwbGFjZShyZXN1bHQsICckJyArIGtleSwgdmFsKTsKCglyZXR1cm4gcmVzdWx0Owp9Cgp2b2lkIFNlc3Npb246OmNtZEltYWdlKGxzZDo6YXN0OjpEaXNwbGF5VHlwZSBkaXNwbGF5X3R5cGUsIGNvbnN0IHN0ZDo6c3RyaW5nJiBmaWxlbmFtZSkgewoJbUN1cnJlbnREaXNwbGF5SW5mby5vdXRwdXRGaWxlTmFtZSA9ICgoIWZpbGVuYW1lLmVtcHR5KCkpID8gZmlsZW5hbWUgOiBzdGQ6OnN0cmluZygidW5uYW1lZCIpKTsKCglpZiAobUlQUikgewoJCW1DdXJyZW50RGlzcGxheUluZm8uZGlzcGxheVR5cGUgPSBEaXNwbGF5OjpEaXNwbGF5VHlwZTo6SVA7Cgl9IGVsc2UgaWYgKGRpc3BsYXlfdHlwZSA9PSBsc2Q6OmFzdDo6RGlzcGxheVR5cGU6Ok5PTkUgKSB7CgkJbUN1cnJlbnREaXNwbGF5SW5mby5kaXNwbGF5VHlwZSA9IHJlc29sdmVEaXNwbGF5VHlwZUJ5RmlsZU5hbWUoZmlsZW5hbWUpOwoJfSBlbHNlIHsKICAgIAltQ3VycmVudERpc3BsYXlJbmZvLmRpc3BsYXlUeXBlID0gZGlzcGxheV90eXBlOwogICAgfQp9CgovLyBpbml0aWFsaXplIGZyYW1lIGluZGVwZW5kZXQgcmVuZGVyIGRhdGEKYm9vbCBTZXNzaW9uOjpwcmVwYXJlRGlzcGxheURhdGEoKSB7CgkvLyBwcmVwYXJlIGRpc3BsYXkgZHJpdmVyIHBhcmFtZXRlcnMKCWF1dG8mIHByb3BzX2NvbnRhaW5lciA9IG1wR2xvYmFsLT5maWx0ZXJQcm9wZXJ0aWVzKGFzdDo6U3R5bGU6OlBMQU5FLCBzdGQ6OnJlZ2V4KCJeSVBsYXlcXC5bYS16QS1aXSoiKSk7Cglmb3IoIGF1dG8gY29uc3QmIGl0ZW06IHByb3BzX2NvbnRhaW5lci5wcm9wZXJ0aWVzKCkpIHsKCQlMTE9HX0RCRyA8PCAiRGlzcGxheSBwcm9wZXJ0eTogIiA8PCB0b19zdHJpbmcoaXRlbS5maXJzdCk7CgoJCWNvbnN0IHN0ZDo6c3RyaW5nJiBwYXJtX25hbWUgPSBpdGVtLmZpcnN0LnNlY29uZC5zdWJzdHIoNik7IC8vIHJlbW92ZSBsZWFkaW5nICJJUGxheS4iCgkJY29uc3QgUHJvcGVydHkmIHByb3AgPSBpdGVtLnNlY29uZDsKCQlzd2l0Y2goaXRlbS5zZWNvbmQudHlwZSgpKSB7CgkJCWNhc2UgYXN0OjpUeXBlOjpGTE9BVDoKCQkJCW1DdXJyZW50RGlzcGxheUluZm8uZGlzcGxheUZsb2F0UGFyYW1ldGVycy5wdXNoX2JhY2soc3RkOjpwYWlyPHN0ZDo6c3RyaW5nLCBzdGQ6OnZlY3RvcjxmbG9hdD4+KCBwYXJtX25hbWUsIHtwcm9wLmdldDxmbG9hdD4oKX0gKSk7CgkJCQlicmVhazsKCQkJY2FzZSBhc3Q6OlR5cGU6OklOVDoKCQkJCW1DdXJyZW50RGlzcGxheUluZm8uZGlzcGxheUludFBhcmFtZXRlcnMucHVzaF9iYWNrKHN0ZDo6cGFpcjxzdGQ6OnN0cmluZywgc3RkOjp2ZWN0b3I8aW50Pj4oIHBhcm1fbmFtZSwge3Byb3AuZ2V0PGludD4oKX0gKSk7CgkJCQlicmVhazsKCQkJY2FzZSBhc3Q6OlR5cGU6OlNUUklORzoKCQkJCW1DdXJyZW50RGlzcGxheUluZm8uZGlzcGxheVN0cmluZ1BhcmFtZXRlcnMucHVzaF9iYWNrKHN0ZDo6cGFpcjxzdGQ6OnN0cmluZywgc3RkOjp2ZWN0b3I8c3RkOjpzdHJpbmc+PiggcGFybV9uYW1lLCB7cHJvcC5nZXQ8c3RkOjpzdHJpbmc+KCl9ICkpOwoJCQkJYnJlYWs7CgkJCWRlZmF1bHQ6CgkJCQlicmVhazsKCQl9Cgl9CgoJLy8gcXVhbnRpemF0aW9uIHBhcmFtZXRlcnMKCXN0ZDo6c3RyaW5nIHR5cGVGb3JtYXROYW1lID0gbXBHbG9iYWwtPmdldFByb3BlcnR5VmFsdWUoYXN0OjpTdHlsZTo6SU1BR0UsICJxdWFudGl6ZSIsIHN0ZDo6c3RyaW5nKCJmbG9hdDE2IikpOwoKCW1DdXJyZW50RGlzcGxheUluZm8udHlwZUZvcm1hdCA9IHJlc29sdmVEaXNwbGF5VHlwZUZvcm1hdCh0eXBlRm9ybWF0TmFtZSk7CglyZXR1cm4gdHJ1ZTsKfQoKdm9pZCBTZXNzaW9uOjpzZXRVcENhbWVyYShGYWxjb3I6OkNhbWVyYTo6U2hhcmVkUHRyIHBDYW1lcmEsIEZhbGNvcjo6ZmxvYXQ0IGNyb3BSZWdpb24pIHsKCWFzc2VydChwQ2FtZXJhKTsKCQoJLy8gc2V0IHVwIGNhbWVyYSBkYXRhCglWZWN0b3IyIGNhbWVyYV9jbGlwID0gbXBHbG9iYWwtPmdldFByb3BlcnR5VmFsdWUoYXN0OjpTdHlsZTo6Q0FNRVJBLCAiY2xpcCIsIFZlY3RvcjJ7MC4wMSwgMTAwMC4wfSk7CgoJc3RkOjpzdHJpbmcgY2FtZXJhX3Byb2plY3Rpb25fbmFtZSA9IG1wR2xvYmFsLT5nZXRQcm9wZXJ0eVZhbHVlKGFzdDo6U3R5bGU6OkNBTUVSQSwgInByb2plY3Rpb24iLCBzdGQ6OnN0cmluZygicGVyc3BlY3RpdmUiKSk7CgoJYXV0byBkaW1zID0gbUN1cnJlbnRGcmFtZUluZm8ucmVuZGVyUmVnaW9uRGltcygpOwoKCWZsb2F0IGFzcGVjdF9yYXRpbyA9IHN0YXRpY19jYXN0PGZsb2F0PihtQ3VycmVudEZyYW1lSW5mby5pbWFnZVdpZHRoKSAvIHN0YXRpY19jYXN0PGZsb2F0PihtQ3VycmVudEZyYW1lSW5mby5pbWFnZUhlaWdodCk7CgkKCXBDYW1lcmEtPnNldEFzcGVjdFJhdGlvKGFzcGVjdF9yYXRpbyk7CglwQ2FtZXJhLT5zZXRWaWV3TWF0cml4KG1wR2xvYmFsLT5nZXRUcmFuc2Zvcm1MaXN0KClbMF0pOwoJcENhbWVyYS0+c2V0TmVhclBsYW5lKGNhbWVyYV9jbGlwWzBdKTsKCXBDYW1lcmEtPnNldEZhclBsYW5lKGNhbWVyYV9jbGlwWzFdKTsKCXBDYW1lcmEtPnNldENyb3BSZWdpb24oY3JvcFJlZ2lvbik7CgoJY29uc3QgYXV0byYgc2VnbWVudHMgPSBtcEdsb2JhbC0+c2VnbWVudHMoKTsKCWlmKHNlZ21lbnRzLnNpemUoKSkgewoJCWNvbnN0IGF1dG8mIHBTZWdtZW50ID0gc2VnbWVudHNbMF07CgoJCWNvbnN0IGZsb2F0IGNhbWVyYV9mb2N1c19kaXN0YW5jZSA9IHBTZWdtZW50LT5nZXRQcm9wZXJ0eVZhbHVlKGFzdDo6U3R5bGU6OkNBTUVSQSwgImZvY3VzIiwgMTAwMDAuMGYpOwoJCWNvbnN0IGZsb2F0IGNhbWVyYV9mc3RvcCA9IHBTZWdtZW50LT5nZXRQcm9wZXJ0eVZhbHVlKGFzdDo6U3R5bGU6OkNBTUVSQSwgImZzdG9wIiwgNS42Zik7CgkJY29uc3QgZmxvYXQgY2FtZXJhX2ZvY2FsID0gcFNlZ21lbnQtPmdldFByb3BlcnR5VmFsdWUoYXN0OjpTdHlsZTo6Q0FNRVJBLCAiZm9jYWwiLCA1MC4wZik7CgkJY29uc3QgYm9vbCB1c2VfZG9mID0gcFNlZ21lbnQtPmdldFByb3BlcnR5VmFsdWUoYXN0OjpTdHlsZTo6SU1BR0UsICJ1c2Vkb2YiLCBib29sKGZhbHNlKSk7CgoJCWZsb2F0IGFwZXJ0dXJlUmFkaXVzID0gMC4wZjsKCQlpZiAodXNlX2RvZikgewoJCQlmbG9hdCBzY2VuZVVuaXQgPSAxLjBmOwoJCQlmbG9hdCBmb2NhbExlbmd0aCA9IGNhbWVyYV9mb2NhbDsKCSAJCWFwZXJ0dXJlUmFkaXVzID0gYXBlcnR1cmVGTnVtYmVyVG9SYWRpdXMoY2FtZXJhX2ZzdG9wLCBmb2NhbExlbmd0aCwgc2NlbmVVbml0KTsKCQl9CgoJCXBDYW1lcmEtPnNldEZvY2FsRGlzdGFuY2UoY2FtZXJhX2ZvY3VzX2Rpc3RhbmNlKTsKCQlwQ2FtZXJhLT5zZXRBcGVydHVyZVJhZGl1cyhhcGVydHVyZVJhZGl1cyk7CgkJcENhbWVyYS0+c2V0Rm9jYWxMZW5ndGgoNTAuMCAqIHBTZWdtZW50LT5nZXRQcm9wZXJ0eVZhbHVlKGFzdDo6U3R5bGU6OkNBTUVSQSwgInpvb20iLCAoZG91YmxlKTEuMCkpOwoJCXBDYW1lcmEtPnNldEZyYW1lSGVpZ2h0KCgxLjBmIC8gYXNwZWN0X3JhdGlvKSAqIDUwLjApOwoJfQp9Cgp2b2lkIFNlc3Npb246OmNtZFF1aXQoKSB7CgkvL21wUmVuZGVyZXJJZmFjZSA9IG51bGxwdHI7Cn0KCmJvb2wgU2Vzc2lvbjo6Y21kUmF5dHJhY2UoKSB7CglQUk9GSUxFKG1wRGV2aWNlLCAiY21kUmF5dHJhY2UiKTsKCgkvLyBTZXQgdXAgaW1hZ2Ugc2FtcGxpbmcKCWNvbnN0IGludCBpbWFnZVNhbXBsZXMgPSBtQ3VycmVudEZyYW1lSW5mby5pbWFnZVNhbXBsZXMgPSBtcEdsb2JhbC0+Z2V0UHJvcGVydHlWYWx1ZShhc3Q6OlN0eWxlOjpJTUFHRSwgInNhbXBsZXMiLCAxKTsKCWludCAgc2FtcGxlVXBkYXRlSW50ZXJ2YWwgPSBtcEdsb2JhbC0+Z2V0UHJvcGVydHlWYWx1ZShhc3Q6OlN0eWxlOjpJTUFHRSwgInNhbXBsZXVwZGF0ZSIsIDApOwoKCWNvbnN0IEludDIgdGlsZVNpemUgPSBtcEdsb2JhbC0+Z2V0UHJvcGVydHlWYWx1ZShhc3Q6OlN0eWxlOjpJTUFHRSwgInRpbGVzaXplIiwgSW50MnsyNTYsIDI1Nn0pOwoJY29uc3QgYm9vbCB0aWxlZF9yZW5kZXJpbmdfbW9kZSA9IG1wR2xvYmFsLT5nZXRQcm9wZXJ0eVZhbHVlKGFzdDo6U3R5bGU6OklNQUdFLCAidGlsaW5nIiwgZmFsc2UpOwoKCS8vIFJlbmRlcmVyIGFuZCBpdCdzIHJlbmRlcmdyYXBoIGNvbmZpZ3VyYXRpb24KCWF1dG8mIGNvbmZEaWN0ID0gbXBSZW5kZXJlci0+Z2V0UmVuZGVyZXJDb25mRGljdCgpOwoJY29uZkRpY3RbInByaW1hcnlyYXlnZW50eXBlIl0gPSBtcEdsb2JhbC0+Z2V0UHJvcGVydHlWYWx1ZShhc3Q6OlN0eWxlOjpSRU5ERVJFUiwgInByaW1hcnlyYXlnZW50eXBlIiwgc3RkOjpzdHJpbmcoImh3cmFzdGVyIikpOwoJY29uZkRpY3RbInNoYWRpbmdwYXNzdHlwZSJdID0gbXBHbG9iYWwtPmdldFByb3BlcnR5VmFsdWUoYXN0OjpTdHlsZTo6UkVOREVSRVIsICJzaGFkaW5ncGFzc3R5cGUiLCBzdGQ6OnN0cmluZygiZGVmZXJyZWQiKSk7CgoJLy8gUmVuZGVyaW5nIHBhc3NlcyBjb25maWd1cmF0aW9uCglhdXRvJiBwYXNzRGljdCA9IG1wUmVuZGVyZXItPmdldFJlbmRlclBhc3Nlc0RpY3QoKTsKCiAgCXBhc3NEaWN0WyJydXNzUm91bGxldGVMZXZlbCJdID0gbXBHbG9iYWwtPmdldFByb3BlcnR5VmFsdWUoYXN0OjpTdHlsZTo6SU1BR0UsICJycm91bGV0bGV2ZWwiLCBpbnQoMikpOwogIAlwYXNzRGljdFsicmF5Q29udHJpYlRocmVzaG9sZCJdID0gbXBHbG9iYWwtPmdldFByb3BlcnR5VmFsdWUoYXN0OjpTdHlsZTo6SU1BR0UsICJyYXl0aHJlc2hvbGQiLCBmbG9hdCgwLjFmKSk7CglwYXNzRGljdFsidXNlRE9GIl0gPSBtcEdsb2JhbC0+Z2V0UHJvcGVydHlWYWx1ZShhc3Q6OlN0eWxlOjpJTUFHRSwgInVzZWRvZiIsIGJvb2woZmFsc2UpKTsKCXBhc3NEaWN0WyJ1c2VTVEJOIl0gPSBtcEdsb2JhbC0+Z2V0UHJvcGVydHlWYWx1ZShhc3Q6OlN0eWxlOjpJTUFHRSwgInN0Ym5fc2FtcGxpbmciLCBib29sKGZhbHNlKSk7CglwYXNzRGljdFsic2hhZGluZ1JhdGUiXSA9IG1wR2xvYmFsLT5nZXRQcm9wZXJ0eVZhbHVlKGFzdDo6U3R5bGU6OklNQUdFLCAic2hhZGluZ3JhdGUiLCBpbnQoMSkpOwoKCXBhc3NEaWN0WyJhc3luY0x0eExvYWRpbmciXSA9IG1wR2xvYmFsLT5nZXRQcm9wZXJ0eVZhbHVlKGFzdDo6U3R5bGU6OklNQUdFLCAiYXN5bmNsdHhsb2FkaW5nIiwgYm9vbCh0cnVlKSk7CgoJcGFzc0RpY3RbInJheUJpYXMiXSA9IG1wR2xvYmFsLT5nZXRQcm9wZXJ0eVZhbHVlKGFzdDo6U3R5bGU6OklNQUdFLCAicmF5YmlhcyIsIDAuMDAxZik7CglwYXNzRGljdFsiY29sb3JMaW1pdCJdID0gdG9fZmxvYXQzKG1wR2xvYmFsLT5nZXRQcm9wZXJ0eVZhbHVlKGFzdDo6U3R5bGU6OklNQUdFLCAiY29sb3JsaW1pdCIsIGxzZDo6VmVjdG9yM3sxMC4wZiwgMTAuMGYsIDEwLjBmfSkpOwoJcGFzc0RpY3RbImluZGlyZWN0Q29sb3JMaW1pdCJdID0gdG9fZmxvYXQzKG1wR2xvYmFsLT5nZXRQcm9wZXJ0eVZhbHVlKGFzdDo6U3R5bGU6OklNQUdFLCAiaW5kaXJlY3Rjb2xvcmxpbWl0IiwgbHNkOjpWZWN0b3IzezMuMGYsIDMuMGYsIDMuMGZ9KSk7CglwYXNzRGljdFsicmF5UmVmbGVjdExpbWl0Il0gPSBtcEdsb2JhbC0+Z2V0UHJvcGVydHlWYWx1ZShhc3Q6OlN0eWxlOjpJTUFHRSwgInJlZmxlY3RsaW1pdCIsIGludCgwKSk7CglwYXNzRGljdFsicmF5UmVmcmFjdExpbWl0Il0gPSBtcEdsb2JhbC0+Z2V0UHJvcGVydHlWYWx1ZShhc3Q6OlN0eWxlOjpJTUFHRSwgInJlZnJhY3RsaW1pdCIsIGludCgwKSk7CglwYXNzRGljdFsicmF5RGlmZnVzZUxpbWl0Il0gPSBtcEdsb2JhbC0+Z2V0UHJvcGVydHlWYWx1ZShhc3Q6OlN0eWxlOjpJTUFHRSwgImRpZmZ1c2VsaW1pdCIsIGludCgwKSk7CglwYXNzRGljdFsiYXJlYUxpZ2h0c1NhbXBsaW5nTW9kZSJdID0gbXBHbG9iYWwtPmdldFByb3BlcnR5VmFsdWUoYXN0OjpTdHlsZTo6SU1BR0UsICJhcmVhc2FtcGxpbmciLCBzdGQ6OnN0cmluZygidXJlbmEiKSk7CgoJcGFzc0RpY3RbIk1BSU4uVG9uZU1hcHBpbmdQYXNzLmVuYWJsZSJdID0gbXBHbG9iYWwtPmdldFByb3BlcnR5VmFsdWUoYXN0OjpTdHlsZTo6SU1BR0UsICJUb25lTWFwcGluZ1Bhc3MuZW5hYmxlIiwgYm9vbChmYWxzZSkpOwoJcGFzc0RpY3RbIk1BSU4uVG9uZU1hcHBpbmdQYXNzLm9wZXJhdG9yIl0gPSAodWludDMyX3QpbXBHbG9iYWwtPmdldFByb3BlcnR5VmFsdWUoYXN0OjpTdHlsZTo6SU1BR0UsICJUb25lTWFwcGluZ1Bhc3Mub3BlcmF0b3IiLCBpbnQoNCkpOwoKCXBhc3NEaWN0WyJNQUlOLlRvbmVNYXBwaW5nUGFzcy5maWxtU3BlZWQiXSA9IG1wR2xvYmFsLT5nZXRQcm9wZXJ0eVZhbHVlKGFzdDo6U3R5bGU6OklNQUdFLCAiVG9uZU1hcHBpbmdQYXNzLmZpbG1TcGVlZCIsIGZsb2F0KDEwMC4wKSk7CglwYXNzRGljdFsiTUFJTi5Ub25lTWFwcGluZ1Bhc3MuZXhwb3N1cmVWYWx1ZSJdID0gbXBHbG9iYWwtPmdldFByb3BlcnR5VmFsdWUoYXN0OjpTdHlsZTo6SU1BR0UsICJUb25lTWFwcGluZ1Bhc3MuZXhwb3N1cmVWYWx1ZSIsIGZsb2F0KDAuMCkpOwoJcGFzc0RpY3RbIk1BSU4uVG9uZU1hcHBpbmdQYXNzLmF1dG9FeHBvc3VyZSJdID0gbXBHbG9iYWwtPmdldFByb3BlcnR5VmFsdWUoYXN0OjpTdHlsZTo6SU1BR0UsICJUb25lTWFwcGluZ1Bhc3MuYXV0b0V4cG9zdXJlIiwgYm9vbChmYWxzZSkpOwoKCXBhc3NEaWN0WyJNQUlOLk9wZW5EZW5vaXNlUGFzcy5lbmFibGUiXSA9IG1wR2xvYmFsLT5nZXRQcm9wZXJ0eVZhbHVlKGFzdDo6U3R5bGU6OklNQUdFLCAiT3BlbkRlbm9pc2VQYXNzLmVuYWJsZSIsIGJvb2woZmFsc2UpKTsKCXBhc3NEaWN0WyJNQUlOLk9wZW5EZW5vaXNlUGFzcy51c2VBbGJlZG8iXSA9IG1wR2xvYmFsLT5nZXRQcm9wZXJ0eVZhbHVlKGFzdDo6U3R5bGU6OklNQUdFLCAiT3BlbkRlbm9pc2VQYXNzLnVzZUFsYmVkbyIsIGJvb2wodHJ1ZSkpOwoJcGFzc0RpY3RbIk1BSU4uT3BlbkRlbm9pc2VQYXNzLnVzZU5vcm1hbCJdID0gbXBHbG9iYWwtPmdldFByb3BlcnR5VmFsdWUoYXN0OjpTdHlsZTo6SU1BR0UsICJPcGVuRGVub2lzZVBhc3MudXNlTm9ybWFsIiwgYm9vbCh0cnVlKSk7CgoJYXV0byBwTWFpbk91dHB1dFBsYW5lID0gbXBSZW5kZXJlci0+Z2V0QU9WUGxhbmUoIk1BSU4iKTsKCglpZighcE1haW5PdXRwdXRQbGFuZSkgewoJCUxMT0dfRVJSIDw8ICJObyBtYWluIG91dHB1dCBwbGFuZSBleGlzdHMgISI7CgkJcmV0dXJuIGZhbHNlOwoJfQoKI2lmZGVmIF9ERUJVRwoJbXBHbG9iYWwtPnByaW50U3VtbWFyeShzdGQ6OmNvdXQpOwojZW5kaWYKCglpZighbXBEaXNwbGF5KSB7CgkJbXBEaXNwbGF5ID0gY3JlYXRlRGlzcGxheShtQ3VycmVudERpc3BsYXlJbmZvKTsKCQlpZighbXBEaXNwbGF5KSB7CgkJCXJldHVybiBmYWxzZTsKCQl9Cgl9OwoKCWlmICghbXBEaXNwbGF5LT5pc0ludGVyYWN0aXZlKCkpIHsKCQkvLyBOb24gaW50ZXJhY3RpdmUgZGlzcGxheS4gTm8gbmVlZCB0byBtYWtlIGludGVybWVkaWF0ZSB1cGRhdGVzCgkJc2FtcGxlVXBkYXRlSW50ZXJ2YWwgPSAwOwoJfQoKCS8vIFByZXBhcmUgZnJhbWUgZGF0YQoJLy8gU2V0IHVwIGZyYW1lIHJlc29sdXRpb24gKGFzIHRoZXkgZG9uJ3QgaGF2ZSB0byBiZSB0aGUgc2FtZSBzaXplKQoJSW50MiByZXNvbHV0aW9uID0gbXBHbG9iYWwtPmdldFByb3BlcnR5VmFsdWUoYXN0OjpTdHlsZTo6SU1BR0UsICJyZXNvbHV0aW9uIiwgSW50Mns2NDAsIDQ4MH0pOwoJbUN1cnJlbnRGcmFtZUluZm8uaW1hZ2VXaWR0aCA9IHJlc29sdXRpb25bMF07CgltQ3VycmVudEZyYW1lSW5mby5pbWFnZUhlaWdodCA9IHJlc29sdXRpb25bMV07CgoJaWYoKG1DdXJyZW50RnJhbWVJbmZvLmltYWdlV2lkdGggPT0gMCkgfHwgKG1DdXJyZW50RnJhbWVJbmZvLmltYWdlSGVpZ2h0ID09IDApKSB7CgkJTExPR19FUlIgPDwgIldyb25nIHJlbmRlciBmcmFtZSBzaXplOiAiIDw8IHRvX3N0cmluZyhyZXNvbHV0aW9uKSA8PCAiICEhISI7CgkJcmV0dXJuIGZhbHNlOwoJfQoKCS8vIENyb3AgcmVnaW9uCglWZWN0b3I0IGNyb3AgPSBtcEdsb2JhbC0+Z2V0UHJvcGVydHlWYWx1ZShhc3Q6OlN0eWxlOjpJTUFHRSwgImNyb3AiLCBWZWN0b3I0KHswLCAwLCAwLCAwfSkpOyAvLyBkZWZhdWx0IG5vIGNyb3AuIGhvdWRpbmkgY3JvcCBpczogMC1sZWZ0LCAxLXJpZ2h0LCAyLWJvdHRvbSwgMy10b3AKCQoJaWYoKGNyb3BbMF0gPiAwLjApIHx8IChjcm9wWzFdIDwgMS4wKSB8fCAoY3JvcFsyXSA+IDApIHx8IChjcm9wWzNdIDwgMS4wKSkgeyAKCQltQ3VycmVudEZyYW1lSW5mby5yZW5kZXJSZWdpb24gPSB7CgkJCXVpbnQoKGZsb2F0KW1DdXJyZW50RnJhbWVJbmZvLmltYWdlV2lkdGggKiBjcm9wWzBdKSwgCgkJCXVpbnQoKGZsb2F0KW1DdXJyZW50RnJhbWVJbmZvLmltYWdlSGVpZ2h0ICogKDEuMGYgLSBjcm9wWzNdKSksIAoJCQl1aW50KChmbG9hdCltQ3VycmVudEZyYW1lSW5mby5pbWFnZVdpZHRoICogY3JvcFsxXSksIAoJCQl1aW50KChmbG9hdCltQ3VycmVudEZyYW1lSW5mby5pbWFnZUhlaWdodCAqICgxLjBmIC0gY3JvcFsyXSkpCgkJfTsKCgkJaWYoKG1DdXJyZW50RnJhbWVJbmZvLmltYWdlV2lkdGggPT0gMCkgfHwgKG1DdXJyZW50RnJhbWVJbmZvLmltYWdlSGVpZ2h0ID09IDApKSB7CgkJCUxMT0dfRVJSIDw8ICJXcm9uZyByZW5kZXIgaW1hZ2UgcmVnaW9uOiAiIDw8IHRvX3N0cmluZyhjcm9wKSA8PCAiICEhISI7CgkJCXJldHVybiBmYWxzZTsKCQl9Cgl9IGVsc2UgewoJCS8vIE5vIHJlbmRlciByZWdpb24gc3BlY2lmaWVkIHNvIGl0IHRha2VzIGEgd2hvbGUgZnJhbWUKCQltQ3VycmVudEZyYW1lSW5mby5yZW5kZXJSZWdpb24gPSB7MCwgMCwgcmVzb2x1dGlvblswXSAtIDEsIHJlc29sdXRpb25bMV0gLSAxfTsKCX0KCgkvLyBTZXQgdXAgdGlsZXMgaWYgcmVxdWlyZWQgb3Igb25lIGZ1bGwgZnJhbWUgdGlsZQoJc3RkOjp2ZWN0b3I8VGlsZUluZm8+IHRpbGVzOwoJaWYgKHRpbGVkX3JlbmRlcmluZ19tb2RlKSB7CgkJTExPR19EQkcgPDwgIlRpbGVzIG1vZGUiOwoJCW1ha2VJbWFnZVRpbGVzKG1DdXJyZW50RnJhbWVJbmZvLCB0b191aW50Mih0aWxlU2l6ZSksIHRpbGVzKTsKCX0gZWxzZSB7CgkJTExPR19EQkcgPDwgIkZ1bGwgZnJhbWUgbW9kZSI7CgkJbWFrZUltYWdlVGlsZXMobUN1cnJlbnRGcmFtZUluZm8sIG1DdXJyZW50RnJhbWVJbmZvLnJlbmRlclJlZ2lvbkRpbXMoKSwgdGlsZXMpOwoJfQoKCUxMT0dfSU5GIDw8ICJSZW5kZXJpbmcgaW1hZ2UgdGlsZXM6IjsKCWZvcihjb25zdCBUaWxlSW5mbyYgdGlsZUluZm86IHRpbGVzKSBMTE9HX0lORiA8PCB0b19zdHJpbmcodGlsZUluZm8pOwoKCS8vIEdldCByZW5kZXJlciBhb3YgcGxhbmVzCglzdGQ6OnZlY3RvcjxzdGQ6OnBhaXI8dWludCwgQU9WUGxhbmU6OlNoYXJlZFB0cj4+IGFvdlBsYW5lczsKCWZvcihhdXRvJiBlbnRyeTogbXBSZW5kZXJlci0+YW92UGxhbmVzKCkpIHsKCQlpZighZW50cnkuc2Vjb25kLT5pc01haW4oKSkgYW92UGxhbmVzLnB1c2hfYmFjayh7MCwgZW50cnkuc2Vjb25kfSk7Cgl9CgoJLy8gT3BlbiBkaXNwbGF5IGltYWdlCgl1aW50IGhJbWFnZTsKCiAgICBpZighbUlQUikgbXBEaXNwbGF5LT5jbG9zZUFsbCgpOyAvLyBjbG9zZSBwcmV2aW91cyBmcmFtZSBkaXNwbGF5IGltYWdlcyAoaWYgc3RpbGwgb3BlbmVkKSAKCglzdGQ6OnN0cmluZyBpbWFnZUZpbGVOYW1lID0gbUN1cnJlbnREaXNwbGF5SW5mby5vdXRwdXRGaWxlTmFtZTsKCXN0ZDo6c3RyaW5nIHJlbmRlckxhYmVsID0gbXBHbG9iYWwtPmdldFByb3BlcnR5VmFsdWUoYXN0OjpTdHlsZTo6UkVOREVSRVIsICJyZW5kZXJsYWJlbCIsIHN0ZDo6c3RyaW5nKCIiKSk7CgoJYm9vbCBjbGVhckRpc3BsYXlCZWZvcmVSZW5kZXJpbmcgPSBmYWxzZTsKCgkvLyBJbiBjYXNlIGRpc3BsYXkgc3VwcG9ydHMgbWV0YWRhdGEgb3V0cHV0IGFuZCB0aGVyZSBhcmUgcGxhbmVzIHRoYXQgaGFzIG1ldGFkYXRhIHdlIG5lZWQgdG8gb3BlbiBpbWFnZXMKCS8vIGFmdGVyIHRoZSByZW5kcmluZyBwcm9jZXNzIGlzIGNvbXBsZXRlZCBhcyB0aGVyZSBpcyBubyBtZWNoYW5pc20gdG8gc3VjaCBtZXRhZGF0YSBhZnRlciBpbWFnZSBhbHJlYWR5IG9wZW5lZAoJc3RkOjp2ZWN0b3I8c3RkOjpmdW5jdGlvbjxib29sKCk+PiBkZWxheWVkSW1hZ2VPcGVuczsgLy8gVGFza3MgdG8gb3BlbiBkaXNwbGF5IGltYWdlcyBpZiByZXF1ZXN0ZWQgdG8gYmUgb3BlbmVkIGxhdGVyCgoJVGltZVJlcG9ydCBpbml0RGlzcGxheVRpbWVSZXBvcnQ7CgoJewoJCXN0ZDo6dmVjdG9yPERpc3BsYXk6OlVzZXJQYXJtPiB1c2VyUGFyYW1zOwoJCgkJLy8gaG91ZGluaSBkaXNwbGF5IGRyaXZlciBzZWN0aW9uCgkJaWYoKG1wRGlzcGxheS0+dHlwZSgpID09IERpc3BsYXlUeXBlOjpIT1VESU5JKSB8fCAobXBEaXNwbGF5LT50eXBlKCkgPT0gRGlzcGxheVR5cGU6Ok1EKSB8fCAobXBEaXNwbGF5LT50eXBlKCkgPT0gRGlzcGxheVR5cGU6OklQKSkgewoJCQljbGVhckRpc3BsYXlCZWZvcmVSZW5kZXJpbmcgPSBtcEdsb2JhbC0+Z2V0UHJvcGVydHlWYWx1ZShhc3Q6OlN0eWxlOjpQTEFORSwgIklQbGF5Lnplcm9pbWFnZSIsIGJvb2wodHJ1ZSkpOwoJCQljb25zdCBpbnQgaG91ZGluaVBvcnROdW0gPSBtcEdsb2JhbC0+Z2V0UHJvcGVydHlWYWx1ZShhc3Q6OlN0eWxlOjpQTEFORSwgIklQbGF5LmhvdWRpbmlwb3J0bnVtIiwgaW50KDApKTsgCgkJCWNvbnN0IGludCBtcGxheVBvcnROdW0gPSBtcEdsb2JhbC0+Z2V0UHJvcGVydHlWYWx1ZShhc3Q6OlN0eWxlOjpQTEFORSwgIklQbGF5LnNvY2tldHBvcnQiLCBpbnQoMCkpOwoJCQljb25zdCBzdGQ6OnN0cmluZyBtcGxheUhvc3RuYW1lID0gbXBHbG9iYWwtPmdldFByb3BlcnR5VmFsdWUoYXN0OjpTdHlsZTo6UExBTkUsICJJUGxheS5zb2NrZXRob3N0Iiwgc3RkOjpzdHJpbmcoImxvY2FsaG9zdCIpKTsKCQkJY29uc3Qgc3RkOjpzdHJpbmcgbXBsYXlSZW5kZXJtb2RlID0gbXBHbG9iYWwtPmdldFByb3BlcnR5VmFsdWUoYXN0OjpTdHlsZTo6UExBTkUsICJJUGxheS5yZW5kZXJtb2RlIiwgc3RkOjpzdHJpbmcoIiIpKTsKCQkJLy9zdGQ6OnN0cmluZyBtcGxheUxhYmVsID0gbXBHbG9iYWwtPmdldFByb3BlcnR5VmFsdWUoYXN0OjpTdHlsZTo6UExBTkUsICJJUGxheS5sYWJlbCIsIHJlbmRlckxhYmVsKTsKCQkJY29uc3Qgc3RkOjpzdHJpbmcgbXBsYXlGcmFuZ2UgPSBtcEdsb2JhbC0+Z2V0UHJvcGVydHlWYWx1ZShhc3Q6OlN0eWxlOjpQTEFORSwgIklQbGF5LmZyYW1lcmFuZ2UiLCBzdGQ6OnN0cmluZygiMSAxIikpOwoJCQljb25zdCBpbnQgbXBsYXlDZnJhbWUgPSBtcEdsb2JhbC0+Z2V0UHJvcGVydHlWYWx1ZShhc3Q6OlN0eWxlOjpQTEFORSwgIklQbGF5LmN1cnJlbnRmcmFtZSIsIGludCgxKSk7CgoJCQlpbWFnZUZpbGVOYW1lID0gbXBHbG9iYWwtPmdldFByb3BlcnR5VmFsdWUoYXN0OjpTdHlsZTo6UExBTkUsICJJUGxheS5yZW5kZXJzb3VyY2UiLCBzdGQ6OnN0cmluZyhtQ3VycmVudERpc3BsYXlJbmZvLm91dHB1dEZpbGVOYW1lKSk7CgoJCQl1c2VyUGFyYW1zLnB1c2hfYmFjayhEaXNwbGF5OjptYWtlU3RyaW5nc1BhcmFtZXRlcigibGFiZWwiLCB7cmVuZGVyTGFiZWx9KSk7CgoJCQlpZiAobXBsYXlSZW5kZXJtb2RlICE9ICIiKSB1c2VyUGFyYW1zLnB1c2hfYmFjayhEaXNwbGF5OjptYWtlU3RyaW5nc1BhcmFtZXRlcigibnVtYmVyaW5nIiwge21wbGF5UmVuZGVybW9kZX0pKTsKCgkJCXVzZXJQYXJhbXMucHVzaF9iYWNrKERpc3BsYXk6Om1ha2VTdHJpbmdzUGFyYW1ldGVyKCJmcmFuZ2UiLCB7c3RkOjp0b19zdHJpbmcobXBsYXlDZnJhbWUpICsgIiAiICsgbXBsYXlGcmFuZ2V9KSk7CgkgICAgCQoJCQlpZiAoKG1wbGF5UG9ydE51bSA+IDApICYmIG1JUFIpIHsKCSAgICAJCXVzZXJQYXJhbXMucHVzaF9iYWNrKERpc3BsYXk6Om1ha2VTdHJpbmdzUGFyYW1ldGVyKCJyZW1vdGVkaXNwbGF5Iiwge21wbGF5SG9zdG5hbWUgKyAiOiIgKyBzdGQ6OnRvX3N0cmluZyhtcGxheVBvcnROdW0pfSkpOwoJICAgIAkJaW1hZ2VGaWxlTmFtZSA9ICJpcHJzb2NrZXQ6IiArIHN0ZDo6dG9fc3RyaW5nKG1wbGF5UG9ydE51bSk7CgkgICAgCX0KCgkgICAgCWlmIChob3VkaW5pUG9ydE51bSA+IDApIHVzZXJQYXJhbXMucHVzaF9iYWNrKERpc3BsYXk6Om1ha2VJbnRzUGFyYW1ldGVyKCJob3VkaW5pcG9ydG51bSIsIHtob3VkaW5pUG9ydE51bX0pKTsKCQl9CgogICAgCS8vIE9wZW4gbWFpbiBpbWFnZSBwbGFuZQogICAgCWNvbnN0IGJvb2wgZGVsYXllZE1haW5JbWFnZUZpbGVDcmVhdGlvbiA9IG1wRGlzcGxheS0+c3VwcG9ydHNNZXRhRGF0YSgpOwogICAgCWF1dG8gX29wZW5NYWluSW1hZ2UgPSBbdGhpcywgaW1hZ2VGaWxlTmFtZSwgdXNlclBhcmFtcywgcE1haW5PdXRwdXRQbGFuZSwgJmhJbWFnZV0oKSB7CiAgICAJCWJvb2wgcmVzdWx0ID0gZmFsc2U7CiAgICAJCUZhbGNvcjo6UmVzb3VyY2VGb3JtYXQgZm9ybWF0ID0gcE1haW5PdXRwdXRQbGFuZS0+Zm9ybWF0KCk7CiAgICAJCWlmKHBNYWluT3V0cHV0UGxhbmUtPmhhc01ldGFEYXRhKCkpIHsKICAgIAkJCWF1dG8gbWV0YURhdGEgPSBwTWFpbk91dHB1dFBsYW5lLT5nZXRNZXRhRGF0YSgpOwkKICAgIAkJCXJlc3VsdCA9IG1wRGlzcGxheS0+b3BlbkltYWdlKGltYWdlRmlsZU5hbWUsIG1DdXJyZW50RnJhbWVJbmZvLmltYWdlV2lkdGgsIG1DdXJyZW50RnJhbWVJbmZvLmltYWdlSGVpZ2h0LCBmb3JtYXQsIGhJbWFnZSwgdXNlclBhcmFtcywgIkMiLCAmbWV0YURhdGEpOwogICAgICAgIAl9IGVsc2UgewogICAgICAgIAkJcmVzdWx0ID0gbXBEaXNwbGF5LT5vcGVuSW1hZ2UoaW1hZ2VGaWxlTmFtZSwgbUN1cnJlbnRGcmFtZUluZm8uaW1hZ2VXaWR0aCwgbUN1cnJlbnRGcmFtZUluZm8uaW1hZ2VIZWlnaHQsIGZvcm1hdCwgaEltYWdlLCB1c2VyUGFyYW1zLCAiQyIpOwogICAgICAgIAl9CiAgICAJCWlmKCFyZXN1bHQpIExMT0dfRlRMIDw8ICJVbmFibGUgdG8gb3BlbiBtYWluIG91dHB1dCBwbGFuZSBpbWFnZSAhISEiOwogICAgCQlyZXR1cm4gcmVzdWx0OwogICAgCX07CgogICAgCWlmKGRlbGF5ZWRNYWluSW1hZ2VGaWxlQ3JlYXRpb24pIHsKICAgIAkJZGVsYXllZEltYWdlT3BlbnMucHVzaF9iYWNrKF9vcGVuTWFpbkltYWdlKTsKICAgIAl9IGVsc2UgewogICAgCQlpZighX29wZW5NYWluSW1hZ2UoKSkgcmV0dXJuIGZhbHNlOwogICAgCX0KICAgIAlpbml0RGlzcGxheVRpbWVSZXBvcnQubWVhc3VyZSgiRGlzcGxheSBtYWluIGltYWdlIG9wZW4iKTsKCX0KCgkvLyBBdXhpbGlhcnkgaW1hZ2UgcGxhbmVzCglmb3IoYXV0byYgZW50cnk6IGFvdlBsYW5lcykgewogICAgCWF1dG8mIHBQbGFuZSA9IGVudHJ5LnNlY29uZDsKICAgIAlpZighcFBsYW5lLT5pc0VuYWJsZWQoKSkgY29udGludWU7CiAgICAJCiAgICAJY29uc3Qgc3RkOjpzdHJpbmcgYW92SW1hZ2VGaWxlTmFtZSA9IChwUGxhbmUtPmZpbGVuYW1lKCkgIT0gIiIpID8gcFBsYW5lLT5maWxlbmFtZSgpIDogaW1hZ2VGaWxlTmFtZTsKICAgIAlzdGQ6OnZlY3RvcjxEaXNwbGF5OjpVc2VyUGFybT4gdXNlclBhcmFtczsKICAgIAl1c2VyUGFyYW1zLnB1c2hfYmFjayhEaXNwbGF5OjptYWtlU3RyaW5nc1BhcmFtZXRlcigibGFiZWwiLCB7cmVuZGVyTGFiZWx9KSk7CiAgICAJYXV0byBwUGxhbmVEaXNwbGF5ID0gcFBsYW5lLT5oYXNEaXNwbGF5KCkgPyBwUGxhbmUtPmdldERpc3BsYXkoKSA6IG1wRGlzcGxheTsKICAgIAljb25zdCBib29sIGRlbGF5ZWRJbWFnRmlsZUNyZWF0aW9uID0gcFBsYW5lRGlzcGxheS0+c3VwcG9ydHNNZXRhRGF0YSgpOwoKICAgIAlhdXRvIF9vcGVuSW1hZ2UgPSBbdGhpcywgYW92SW1hZ2VGaWxlTmFtZSwgdXNlclBhcmFtcywgcFBsYW5lRGlzcGxheSwgcFBsYW5lLCAmZW50cnldKCkgewogICAgCQlib29sIHJlc3VsdCA9IGZhbHNlOwogICAgCQljb25zdCBzdGQ6OnN0cmluZyBjaGFubmVsX3ByZWZpeCA9IHBQbGFuZS0+b3V0cHV0TmFtZSgpOwogICAgCQljb25zdCBGYWxjb3I6OlJlc291cmNlRm9ybWF0IGZvcm1hdCA9IHBQbGFuZS0+Zm9ybWF0KCk7CiAgICAJCWlmKHBQbGFuZS0+aGFzTWV0YURhdGEoKSkgewogICAgCQkJYXV0byBtZXRhRGF0YSA9IHBQbGFuZS0+Z2V0TWV0YURhdGEoKTsKICAgIAkJCXJlc3VsdCA9IHBQbGFuZURpc3BsYXktPm9wZW5JbWFnZShhb3ZJbWFnZUZpbGVOYW1lLCBtQ3VycmVudEZyYW1lSW5mby5pbWFnZVdpZHRoLCBtQ3VycmVudEZyYW1lSW5mby5pbWFnZUhlaWdodCwgZm9ybWF0LCBlbnRyeS5maXJzdCwgdXNlclBhcmFtcywgY2hhbm5lbF9wcmVmaXgsICZtZXRhRGF0YSk7IAogICAgCQl9IGVsc2UgewogICAgCQkJcmVzdWx0ID0gcFBsYW5lRGlzcGxheS0+b3BlbkltYWdlKGFvdkltYWdlRmlsZU5hbWUsIG1DdXJyZW50RnJhbWVJbmZvLmltYWdlV2lkdGgsIG1DdXJyZW50RnJhbWVJbmZvLmltYWdlSGVpZ2h0LCBmb3JtYXQsIGVudHJ5LmZpcnN0LCB1c2VyUGFyYW1zLCBjaGFubmVsX3ByZWZpeCk7CiAgICAJCX0KICAgIAkJaWYoIXJlc3VsdCkgTExPR19FUlIgPDwgIlVuYWJsZSB0byBvcGVuIGltYWdlIGZpbGUgIiA8PCBhb3ZJbWFnZUZpbGVOYW1lIDw8ICIgZm9yIG91dHB1dCBwbGFuZSAiIDw8IGNoYW5uZWxfcHJlZml4IDw8ICIgISEhIjsKICAgIAkJcmV0dXJuIHJlc3VsdDsKICAgIAl9OwoKICAgIAlpZihkZWxheWVkSW1hZ0ZpbGVDcmVhdGlvbikgewogICAgCQlkZWxheWVkSW1hZ2VPcGVucy5wdXNoX2JhY2soX29wZW5JbWFnZSk7CiAgICAJfSBlbHNlIHsKICAgIAkJaWYoIV9vcGVuSW1hZ2UoKSkgZW50cnkuc2Vjb25kID0gbnVsbHB0cjsKICAgIAl9CiAgICB9CiAgICBpbml0RGlzcGxheVRpbWVSZXBvcnQubWVhc3VyZSgiRGlzcGxheSBhZGRpdGlvbmFsIGltYWdlcyBvcGVuIik7CgovLy8vLy8vCglpZiggMSA9PSAyICkgewoJCS8vIFNpbXBsZSBwZXJmb3JtYWNlIHRlc3QgYnkgc2VuZGluZyB6ZXJvIGltYWdlIGEgYnVuY2ggb2YgdGltZXMKICAgIAlmb3IodWludCBpID0gMDsgaSA8IDEwMDsgaSsrKSBzZW5kSW1hZ2VSZWdpb25EYXRhKGhJbWFnZSwgbXBEaXNwbGF5LmdldCgpLCBtQ3VycmVudEZyYW1lSW5mbywgbnVsbHB0cik7CiAgICAJaW5pdERpc3BsYXlUaW1lUmVwb3J0Lm1lYXN1cmUoIkRpc3BsYXkgaW5pdGlhbCB6ZXJvIGRhdGEgc2VudCAxMDAgdGltZXMgaW4iKTsKCX0KLy8vLy8vLwoKCS8vIEl0IHRoZXJlIHdhcyByZXF1ZXN0IHRvIGZpbGwgaW1hZ2Ugd2l0aCB6ZXJvIGRhdGEgYmVmb3JlIHRoZSByZW5kZXJpbmcgc3RhcnRzLCB3ZSBoYXZlIHRvIGNoZWNrIG91dCBjb25maWd1cmF0aW9uIG1lZXRzIGNlcnRhaW4gY3JpdGVyaWEKCS8vIEZpcnN0IGZvIGFsbCB0aGVyZSBzaG91bGQgYmUgbm8gYWRkaXRpb25hbCBkaXNwbGF5cyB0aGF0IHJlZmVycyB0byB0aGUgc2FtZSBpbWFnZSBhcyBtYWluIG91dHB1dCBwbGFuZSBkcml2ZXIgKG1wRGlzcGxheSkgdGhhdCBhcmUgcG9zdHBvbmVkCgkvLyB0byBiZSBvcGVuZWQgbGF0ZXIgKGFmdGVyIGZyYW1lIGlzIHJlbmRlcmVkKS4gQXNsbyB3ZSBza2lwIHRoaXMgc3RlcCBpZiB0aGUgbWFpbiBvdXRwdXQgZHJpdmVyIGlzIG5vdCBpbnRlcmFjdGl2ZSwgZS5nIGl0IHdyaXRlcyB0byBhIGZpbGVzeXN0ZW0KCS8vIGFzIHRoZXJlIGlzIG5vIGJlbmlmaXQgaW4gZG9pbmcgdGhpcy4KCS8vIFRPRE86IG1hcmsgZGlzcGxheXMgdGhhdCB3ZSBhcmUgZ29pbmcgdG8gb3BlbiBsYXRlciBhbmQgY2hlY2sgdGhleSBhcmUgd3JpdGluZyB0byB0aGUgc2FtZSBpbWFnZSBhcyBtYWluIG1wRGlzcGxheSEKCWlmKGNsZWFyRGlzcGxheUJlZm9yZVJlbmRlcmluZyAmJiBtcERpc3BsYXktPmlzSW50ZXJhY3RpdmUoKSkgc2VuZEltYWdlUmVnaW9uRGF0YShoSW1hZ2UsIG1wRGlzcGxheS5nZXQoKSwgbUN1cnJlbnRGcmFtZUluZm8sIG51bGxwdHIpOwoKCiAgICBpbml0RGlzcGxheVRpbWVSZXBvcnQuYWRkVG90YWwoIkRpc3BsYXkgaW5pdCB0b3RhbCB0aW1lIik7CiAgICBpbml0RGlzcGxheVRpbWVSZXBvcnQucHJpbnRUb0xvZygpOwoKICAgIC8vIEZyYW1lIHJlbmRlcmluZwogICAgVGltZVJlcG9ydCByZW5kZXJpbmdUaW1lUmVwb3J0OwoJCQoJCUxMT0dfSU5GIDw8ICJSZW5kZXJpbmcgaW1hZ2Ugc3RhcnRlZC4uLiI7CgkJc2V0VXBDYW1lcmEobXBSZW5kZXJlci0+Y3VycmVudENhbWVyYSgpKTsKICAgIAogICAgZm9yKGNvbnN0IGF1dG8mIHRpbGU6IHRpbGVzKSB7CiAgICAJTExPR19EQkcgPDwgIlJlbmRlcmluZyAiIDw8IHRvX3N0cmluZyh0aWxlKTsKCiAgICAJUmVuZGVyZXI6OkZyYW1lSW5mbyBmcmFtZUluZm8gPSBtQ3VycmVudEZyYW1lSW5mbzsKICAgICAgCWZyYW1lSW5mby5yZW5kZXJSZWdpb24gPSB0aWxlLnJlbmRlclJlZ2lvbjsKCiAgICAJbXBSZW5kZXJlci0+Y3VycmVudENhbWVyYSgpLT5zZXRDcm9wUmVnaW9uKHRpbGUuY2FtZXJhQ3JvcFJlZ2lvbik7CiAgICAJbXBSZW5kZXJlci0+cHJlcGFyZUZyYW1lKGZyYW1lSW5mbyk7CgoJCUFPVlBsYW5lR2VvbWV0cnkgYW92X2dlb21ldHJ5OwoJCWlmKCFwTWFpbk91dHB1dFBsYW5lLT5nZXRBT1ZQbGFuZUdlb21ldHJ5KGFvdl9nZW9tZXRyeSkpIHsKCQkJTExPR19GVEwgPDwgIk5vIEFPViAhISEiOwoJCQlicmVhazsKCQl9CgoJCWxvbmcgaW50IHNhbXBsZVVwZGF0ZUl0ZXJhdGlvbnMgPSAwOwoJCWNvbnN0IGJvb2wgZG9JbnRlcmFjdGl2ZUltYWdlVXBkYXRlcyA9IChzYW1wbGVVcGRhdGVJbnRlcnZhbCA+IDApICYmIG1wRGlzcGxheS0+aXNJbnRlcmFjdGl2ZSgpICYmIG1wRGlzcGxheS0+b3BlbmVkKGhJbWFnZSk7CgoJCWZvcih1aW50MzJfdCBzYW1wbGVfbnVtYmVyID0gMDsgc2FtcGxlX251bWJlciA8IG1DdXJyZW50RnJhbWVJbmZvLmltYWdlU2FtcGxlczsgc2FtcGxlX251bWJlcisrKSB7CgkJCW1wUmVuZGVyZXItPnJlbmRlclNhbXBsZSgpOwoJCQlpZiAoZG9JbnRlcmFjdGl2ZUltYWdlVXBkYXRlcykgewoJCQkJbG9uZyBpbnQgdXBkYXRlSXRlciA9IGxkaXYoc2FtcGxlX251bWJlciwgc2FtcGxlVXBkYXRlSW50ZXJ2YWwpLnF1b3Q7CgkJCQlpZiAodXBkYXRlSXRlciA+IHNhbXBsZVVwZGF0ZUl0ZXJhdGlvbnMpIHsKCQkJCQlMTE9HX0RCRyA8PCAiVXBkYXRpbmcgZGlzcGxheSBkYXRhIGF0IHNhbXBsZSBudW1iZXIgIiA8PCBzdGQ6OnRvX3N0cmluZyhzYW1wbGVfbnVtYmVyKTsKCQkJCQkvLyBTZW5kIGltYWdlL3JlZ2lvbiByZWdpb24gZm9yIGludGVyYWN0aXZlL2xpdmUgaW1hZ2UgdXBkYXRlCgkJCQkJaWYgKCFzZW5kSW1hZ2VSZWdpb25EYXRhKGhJbWFnZSwgbXBEaXNwbGF5LmdldCgpLCBmcmFtZUluZm8sIHBNYWluT3V0cHV0UGxhbmUuZ2V0KCkpKSBicmVhazsKCQkJCQlzYW1wbGVVcGRhdGVJdGVyYXRpb25zID0gdXBkYXRlSXRlcjsKCQkJCX0KCQkJfQoJCX0KCgkJbXBSZW5kZXJlci0+ZGV2aWNlKCktPmdldFJlbmRlckNvbnRleHQoKS0+Zmx1c2godHJ1ZSk7CgkJcmVuZGVyaW5nVGltZVJlcG9ydC5tZWFzdXJlKCJJbWFnZSByZW5kZXJpbmcgdGltZSIpOwoJCUxMT0dfSU5GIDw8IHJlbmRlcmluZ1RpbWVSZXBvcnQucHJpbnRUb1N0cmluZygpOwoJCQoJCS8vIE9wZW4gZGVsYXllZCBpbWFnZXMgCgkJTExPR19EQkcgPDwgIk9wZW4gIiA8PCBkZWxheWVkSW1hZ2VPcGVucy5zaXplKCkgPDwgIiBkZWxheWVkIGltYWdlcy4iOwoJCWZvcihzaXplX3QgaSA9IDA7IGkgPCBkZWxheWVkSW1hZ2VPcGVucy5zaXplKCk7IGkrKykgewoJCQlkZWxheWVkSW1hZ2VPcGVuc1tpXSgpOwoJCX0KCgkJTExPR19EQkcgPDwgIlNlbmRpbmcgTUFJTiBvdXRwdXQgIiA8PCBzdGQ6OnN0cmluZyhwTWFpbk91dHB1dFBsYW5lLT5uYW1lKCkpIDw8ICIgZGF0YSB0byBpbWFnZSBoYW5kbGUgIiA8PCBzdGQ6OnRvX3N0cmluZyhoSW1hZ2UpOwoJCS8vIFNlbmQgaW1hZ2UgcmVnaW9uCgkJaWYgKCFzZW5kSW1hZ2VSZWdpb25EYXRhKGhJbWFnZSwgbXBEaXNwbGF5LmdldCgpLCBmcmFtZUluZm8sIHBNYWluT3V0cHV0UGxhbmUuZ2V0KCkpKSBicmVhazsKCQkKCQkvLyBTZW5kIHNlY29uZGFyeSBhb3YgaW1hZ2UgcGxhbmVzIGRhdGEKICAgIAlmb3IoYXV0byYgZW50cnk6IGFvdlBsYW5lcykgewogICAgCQl1aW50IGhJbWFnZSA9IGVudHJ5LmZpcnN0OwoJICAgIAlhdXRvJiBwUGxhbmUgPSBlbnRyeS5zZWNvbmQ7CgkgICAgCWlmIChwUGxhbmUgJiYgcFBsYW5lLT5pc0VuYWJsZWQoKSkgewoJICAgIAkJQU9WUGxhbmVHZW9tZXRyeSBhb3ZfZ2VvbWV0cnk7CgkJCQlpZighcFBsYW5lLT5nZXRBT1ZQbGFuZUdlb21ldHJ5KGFvdl9nZW9tZXRyeSkpIHsKCQkJCQlMTE9HX0VSUiA8PCAiRXJyb3IgZ2V0dGluZyBBT1YgIiA8PCBzdGQ6OnN0cmluZyhwUGxhbmUtPm5hbWUoKSkgPDwgIiBnZW9tZXRyeSEiOwoJCQkJCWNvbnRpbnVlOwoJCQkJfQoKCQkJCUxMT0dfREJHIDw8ICJTZW5kaW5nIEFPViAiIDw8IHN0ZDo6c3RyaW5nKHBQbGFuZS0+bmFtZSgpKSA8PCAiIGRhdGEgdG8gaW1hZ2UgaGFuZGxlICIgPDwgc3RkOjp0b19zdHJpbmcoaEltYWdlKTsKCQkJCS8vIFNlbmQgaW1hZ2UgcmVnaW9uCgkJCQlhdXRvIHBEaXNwbGF5ID0gcFBsYW5lLT5oYXNEaXNwbGF5KCkgPyBwUGxhbmUtPmdldERpc3BsYXkoKSA6IG1wRGlzcGxheTsKCQkJCWlmICghc2VuZEltYWdlUmVnaW9uRGF0YShoSW1hZ2UsIHBEaXNwbGF5LmdldCgpLCBmcmFtZUluZm8sIHBQbGFuZS5nZXQoKSkpIHsKCQkJCQlMTE9HX0VSUiA8PCAiRXJyb3Igc2VuZGluZyBBT1YgIiA8PCBzdGQ6OnN0cmluZyhwUGxhbmUtPm5hbWUoKSkgPDwgIiB0byBkaXNwbGF5ISI7CgkJCQkJY29udGludWU7CgkJCQl9CgkgICAgCX0KCSAgICB9Cgl9CgoJTExPR19EQkcgPDwgIkNsb3NpbmcgZGlzcGxheS4uLiI7CiAgaWYoIW1JUFIpIG1wRGlzcGxheS0+Y2xvc2VJbWFnZShoSW1hZ2UpOwoKICAvLyBDbG9zZSBzZWNvbmRhcnkgYW92IGltYWdlcwoJZm9yKGF1dG8mIGVudHJ5OiBhb3ZQbGFuZXMpIHsKCXVpbnQgaEltYWdlID0gZW50cnkuZmlyc3Q7CiAgCWF1dG8mIHBQbGFuZSA9IGVudHJ5LnNlY29uZDsKICAJaWYgKHBQbGFuZSkgewogIAkJYXV0byBwRGlzcGxheSA9IHBQbGFuZS0+aGFzRGlzcGxheSgpID8gcFBsYW5lLT5nZXREaXNwbGF5KCkgOiBtcERpc3BsYXk7CiAgCQlpZighbUlQUikgcERpc3BsYXktPmNsb3NlSW1hZ2UoaEltYWdlKTsKICAJfQogIH0KCiAgTExPR19EQkcgPDwgIkRpc3BsYXkgY2xvc2VkISI7CgovLyNpZmRlZiBGQUxDT1JfRU5BQkxFX1BST0ZJTEVSCi8vICAgIGF1dG8gcHJvZmlsZXIgPSBGYWxjb3I6OlByb2ZpbGVyOjppbnN0YW5jZShtcERldmljZSk7Ci8vICAgIHByb2ZpbGVyLmVuZEZyYW1lKCk7Ci8vI2VuZGlmCglyZXR1cm4gdHJ1ZTsKfQoKdm9pZCBTZXNzaW9uOjpwdXNoQmdlbyhjb25zdCBzdGQ6OnN0cmluZyYgbmFtZSwgbHNkOjpzY29wZTo6R2VvOjpTaGFyZWRQdHIgcEdlbykgewoJYXNzZXJ0KHBHZW8pOwoKICBhdXRvIHBTY2VuZUJ1aWxkZXIgPSBtcFJlbmRlcmVyLT5zY2VuZUJ1aWxkZXIoKTsKICBpZighcFNjZW5lQnVpbGRlcikgewoJTExPR19FUlIgPDwgIkNhbid0IHB1c2ggZ2VvbWV0cnkgKGJnZW8pLiBTY2VuZUJ1aWxkZXIgbm90IHJlYWR5ICEhISI7CglyZXR1cm47CiAgfQoKIAkvLyBpbW1lZGlhdGUgbWVzaCBhZGQKIAlpa2E6OmJnZW86OkJnZW86OlNoYXJlZFB0ciBwQmdlbyA9IHBHZW8tPmJnZW8oKTsKIAlzdGQ6OnN0cmluZyBmdWxscGF0aCA9IHBHZW8tPmRldGFpbEZpbGVQYXRoKCkuc3RyaW5nKCk7CiAgcEJnZW8tPnJlYWRHZW9Gcm9tRmlsZShmdWxscGF0aC5jX3N0cigpLCBmYWxzZSk7IC8vIEZJWE1FOiBkb24ndCBjaGVjayB2ZXJzaW9uIGZvciBub3cKCiAJaWYoIXBCZ2VvKSB7CiAJCUxMT0dfRVJSIDw8ICJDYW4ndCBsb2FkIGdlb21ldHJ5IChiZ2VvKSAhISEiOwogCQlyZXR1cm47CiAJfQoKI2lmZGVmIF9ERUJVRwogICAgcEJnZW8tPnByaW50U3VtbWFyeShzdGQ6OmNvdXQpOwojZW5kaWYKCiAgIG1NZXNoTWFwW25hbWVdID0gcFNjZW5lQnVpbGRlci0+YWRkR2VvbWV0cnkocEJnZW8sIG5hbWUpOwp9Cgp2b2lkIFNlc3Npb246OnB1c2hCZ2VvQXN5bmMoY29uc3Qgc3RkOjpzdHJpbmcmIG5hbWUsIGxzZDo6c2NvcGU6Okdlbzo6U2hhcmVkUHRyIHBHZW8pIHsKCWFzc2VydChwR2VvKTsKCglhdXRvIHBTY2VuZUJ1aWxkZXIgPSBtcFJlbmRlcmVyLT5zY2VuZUJ1aWxkZXIoKTsKCWlmKCFwU2NlbmVCdWlsZGVyKSB7CgkJTExPR19FUlIgPDwgIkNhbid0IHB1c2ggZ2VvbWV0cnkgKGJnZW8pLiBTY2VuZUJ1aWxkZXIgbm90IHJlYWR5ICEhISI7CgkJcmV0dXJuOwoJfQoKCS8vIGFzeW5jIG1lc2ggYWRkIAogICAJbU1lc2hNYXBbbmFtZV0gPSBwU2NlbmVCdWlsZGVyLT5hZGRHZW9tZXRyeUFzeW5jKHBHZW8sIG5hbWUpOwp9Cgp2b2lkIFNlc3Npb246OnB1c2hMaWdodChjb25zdCBzY29wZTo6TGlnaHQ6OlNoYXJlZFB0ciBwTGlnaHRTY29wZSkgewoJYXNzZXJ0KHBMaWdodFNjb3BlKTsKCglhdXRvIHBTY2VuZUJ1aWxkZXIgPSBtcFJlbmRlcmVyLT5zY2VuZUJ1aWxkZXIoKTsKCiAgICBpZiAoIXBTY2VuZUJ1aWxkZXIpIHsKCQlMTE9HX0VSUiA8PCAiVW5hYmxlIHRvIHB1c2ggbGlnaHQuIFNjZW5lQnVpbGRlciBub3QgcmVhZHkgISEhIjsKCQlyZXR1cm47Cgl9CgoJY29uc3Qgc3RkOjpzdHJpbmcmIGxpZ2h0X3R5cGUgPSBwTGlnaHRTY29wZS0+Z2V0UHJvcGVydHlWYWx1ZShhc3Q6OlN0eWxlOjpMSUdIVCwgInR5cGUiLCBzdGQ6OnN0cmluZygicG9pbnQiKSk7Cgljb25zdCBzdGQ6OnN0cmluZyYgbGlnaHRfbmFtZSA9IHBMaWdodFNjb3BlLT5nZXRQcm9wZXJ0eVZhbHVlKGFzdDo6U3R5bGU6Ok9CSkVDVCwgIm5hbWUiLCBzdGQ6OnN0cmluZygiIikpOwoJZ2xtOjptYXQ0IHRyYW5zZm9ybSA9IHBMaWdodFNjb3BlLT5nZXRUcmFuc2Zvcm1MaXN0KClbMF07CgoJbHNkOjpWZWN0b3IzIGxpZ2h0X2NvbG9yID0gbHNkOjpWZWN0b3IzezEuMCwgMS4wLCAxLjB9OyAvLyBkZWZ1YWx0IGxpZ2h0IGNvbG9yCglGYWxjb3I6OmZsb2F0MyBsaWdodF9wb3MgPSB7dHJhbnNmb3JtWzNdWzBdLCB0cmFuc2Zvcm1bM11bMV0sIHRyYW5zZm9ybVszXVsyXX07IC8vIGxpZ2h0IHBvc2l0aW9uCglGYWxjb3I6OmZsb2F0MyBsaWdodF9kaXIgPSB7LXRyYW5zZm9ybVsyXVswXSwgLXRyYW5zZm9ybVsyXVsxXSwgLXRyYW5zZm9ybVsyXVsyXX07CgkKCVByb3BlcnR5KiBwU2hhZGVyUHJvcCA9IHBMaWdodFNjb3BlLT5nZXRQcm9wZXJ0eShhc3Q6OlN0eWxlOjpMSUdIVCwgInNoYWRlciIpOwoJc3RkOjpzaGFyZWRfcHRyPFByb3BlcnRpZXNDb250YWluZXI+IHBTaGFkZXJQcm9wczsKCglpZihwU2hhZGVyUHJvcCkgewoJCXBTaGFkZXJQcm9wcyA9IHBTaGFkZXJQcm9wLT5zdWJDb250YWluZXIoKTsKCQlsaWdodF9jb2xvciA9IHBTaGFkZXJQcm9wcy0+Z2V0UHJvcGVydHlWYWx1ZShhc3Q6OlN0eWxlOjpMSUdIVCwgImxpZ2h0Y29sb3IiLCBsc2Q6OlZlY3RvcjN7MS4wLCAxLjAsIDEuMH0pOwoJfSBlbHNlIHsKCQlMTE9HX0VSUiA8PCAiTm8gc2hhZGVyIHByb3BlcnR5IHNldCBmb3IgbGlnaHQgIiA8PCBsaWdodF9uYW1lOwoJfQoKCWxzZDo6VmVjdG9yMyBsaWdodF9kaWZmdXNlX2NvbG9yID0gcExpZ2h0U2NvcGUtPmdldFByb3BlcnR5VmFsdWUoYXN0OjpTdHlsZTo6TElHSFQsICJkaWZmdXNlX2NvbG9yIiwgbGlnaHRfY29sb3IpOwoJbHNkOjpWZWN0b3IzIGxpZ2h0X3NwZWN1bGFyX2NvbG9yID0gcExpZ2h0U2NvcGUtPmdldFByb3BlcnR5VmFsdWUoYXN0OjpTdHlsZTo6TElHSFQsICJzcGVjdWxhcl9jb2xvciIsIGxpZ2h0X2RpZmZ1c2VfY29sb3IpOwoJbHNkOjpWZWN0b3IzIGxpZ2h0X2luZGlyZWN0X2RpZmZ1c2VfY29sb3IgPSBwTGlnaHRTY29wZS0+Z2V0UHJvcGVydHlWYWx1ZShhc3Q6OlN0eWxlOjpMSUdIVCwgImluZGlyZWN0X2RpZmZ1c2VfY29sb3IiLCBsaWdodF9kaWZmdXNlX2NvbG9yKTsKCWxzZDo6VmVjdG9yMyBsaWdodF9pbmRpcmVjdF9zcGVjdWxhcl9jb2xvciA9IHBMaWdodFNjb3BlLT5nZXRQcm9wZXJ0eVZhbHVlKGFzdDo6U3R5bGU6OkxJR0hULCAiaW5kaXJlY3Rfc3BlY3VsYXJfY29sb3IiLCBsaWdodF9zcGVjdWxhcl9jb2xvcik7CgoJRmFsY29yOjpMaWdodDo6U2hhcmVkUHRyIHBMaWdodCA9IG51bGxwdHI7CgoJaWYobGlnaHRfdHlwZSA9PSAiZGlzdGFudCIpIHsKCQkvLyBEaXJlY3Rpb25hbCBsaWdodAoKCQlhdXRvIHBEaXJlY3Rpb25hbExpZ2h0ID0gRmFsY29yOjpEaXJlY3Rpb25hbExpZ2h0OjpjcmVhdGUoIm5vbmFtZV9kaXN0YW50Iik7CgkJcERpcmVjdGlvbmFsTGlnaHQtPnNldFdvcmxkRGlyZWN0aW9uKGxpZ2h0X2Rpcik7CgoJCXBMaWdodCA9IHN0ZDo6ZHluYW1pY19wb2ludGVyX2Nhc3Q8RmFsY29yOjpMaWdodD4ocERpcmVjdGlvbmFsTGlnaHQpOwoJfSBlbHNlIGlmIChsaWdodF90eXBlID09ICJzdW4iKSB7CgkJLy8gRGlzdGFudC9TdW4gbGlnaHQKCgkJYXV0byBwRGlzdGFudExpZ2h0ID0gRmFsY29yOjpEaXN0YW50TGlnaHQ6OmNyZWF0ZSgibm9uYW1lX3N1biIpOwoJCXBEaXN0YW50TGlnaHQtPnNldFdvcmxkRGlyZWN0aW9uKGxpZ2h0X2Rpcik7CgoJCWNvbnN0IGZsb2F0IGVudl9hbmdsZSA9IHBMaWdodFNjb3BlLT5nZXRQcm9wZXJ0eVZhbHVlKGFzdDo6U3R5bGU6OkxJR0hULCAiZW52YW5nbGUiLCBmbG9hdCg1LjApKTsKCQlwRGlzdGFudExpZ2h0LT5zZXRBbmdsZURlZ3JlZXMoZW52X2FuZ2xlKTsKCgkJcExpZ2h0ID0gc3RkOjpkeW5hbWljX3BvaW50ZXJfY2FzdDxGYWxjb3I6OkxpZ2h0PihwRGlzdGFudExpZ2h0KTsKCX0gZWxzZSBpZiggbGlnaHRfdHlwZSA9PSAicG9pbnQiKSB7CgkJLy8gUG9pbnQvU3BvdCBsaWdodAoKCgkJZmxvYXQgbGlnaHRfcmFkaXVzID0gcExpZ2h0U2NvcGUtPmdldFByb3BlcnR5VmFsdWUoYXN0OjpTdHlsZTo6TElHSFQsICJsaWdodHJhZGl1cyIsIChmbG9hdCkwLjBmKTsKCgkJYXV0byBwUG9pbnRMaWdodCA9IEZhbGNvcjo6UG9pbnRMaWdodDo6Y3JlYXRlKCJub25hbWVfcG9pbnQiKTsKCQlwUG9pbnRMaWdodC0+c2V0V29ybGRQb3NpdGlvbihsaWdodF9wb3MpOwoJCXBQb2ludExpZ2h0LT5zZXRXb3JsZERpcmVjdGlvbihsaWdodF9kaXIpOwoKCQlpZihsaWdodF9yYWRpdXMgPiAwLjBmKSBwUG9pbnRMaWdodC0+c2V0TGlnaHRSYWRpdXMobGlnaHRfcmFkaXVzKTsKCgkJYm9vbCBkb19jb25lID0gZmFsc2U7CgkJZmxvYXQgY29uZWFuZ2xlX2RlZ3JlZXMgPSAzNjAuMGY7CgkJZmxvYXQgY29uZWRlbHRhX2RlZ3JlZXMgPSAwLjBmOwoKCQlpZihwU2hhZGVyUHJvcHMpIHsKCQkJZG9fY29uZSA9IHBTaGFkZXJQcm9wcy0+Z2V0UHJvcGVydHlWYWx1ZShhc3Q6OlN0eWxlOjpMSUdIVCwgImRvY29uZSIsIGJvb2woZmFsc2UpKTsKCQkJY29uZWFuZ2xlX2RlZ3JlZXMgPSBwU2hhZGVyUHJvcHMtPmdldFByb3BlcnR5VmFsdWUoYXN0OjpTdHlsZTo6TElHSFQsICJjb25lYW5nbGUiLCAoZmxvYXQpMzYwLjBmKTsKCQkJY29uZWRlbHRhX2RlZ3JlZXMgPSBwU2hhZGVyUHJvcHMtPmdldFByb3BlcnR5VmFsdWUoYXN0OjpTdHlsZTo6TElHSFQsICJjb25lZGVsdGEiLCAoZmxvYXQpMC4wZik7CgkJfQoKCQkvLyBTcG90IGxpZ2h0IGNhc2UKCQlpZihkb19jb25lICYmIChjb25lYW5nbGVfZGVncmVlcyA8PSAxODAuMGYpKSB7CgkJCXBQb2ludExpZ2h0LT5zZXRPcGVuaW5nQW5nbGUoKGNvbmVhbmdsZV9kZWdyZWVzICsgY29uZWRlbHRhX2RlZ3JlZXMgKiAyLjBmKSAqIGhhbGZDKTsKCQkJcFBvaW50TGlnaHQtPnNldFBlbnVtYnJhSGFsZkFuZ2xlKGNvbmVkZWx0YV9kZWdyZWVzICogaGFsZkMpOwoJCX0KCgkJcExpZ2h0ID0gc3RkOjpkeW5hbWljX3BvaW50ZXJfY2FzdDxGYWxjb3I6OkxpZ2h0PihwUG9pbnRMaWdodCk7Cgl9IGVsc2UgaWYoIGxpZ2h0X3R5cGUgPT0gImdyaWQiIHx8IGxpZ2h0X3R5cGUgPT0gImRpc2siIHx8IGxpZ2h0X3R5cGUgPT0gInNwaGVyZSIpIHsKCQkvLyBBcmVhIGxpZ2h0cwoJCUZhbGNvcjo6QW5hbHl0aWNBcmVhTGlnaHQ6OlNoYXJlZFB0ciBwQXJlYUxpZ2h0ID0gbnVsbHB0cjsKCgkJYm9vbCBzaW5nbGVTaWRlZExpZ2h0ID0gcExpZ2h0U2NvcGUtPmdldFByb3BlcnR5VmFsdWUoYXN0OjpTdHlsZTo6TElHSFQsICJzaW5nbGVzaWRlZCIsIGJvb2woZmFsc2UpKTsKCQlib29sIHJldmVyc2VMaWdodCA9IGZhbHNlOwoKCQlsc2Q6OlZlY3RvcjIgYXJlYV9zaXplID0gcExpZ2h0U2NvcGUtPmdldFByb3BlcnR5VmFsdWUoYXN0OjpTdHlsZTo6TElHSFQsICJhcmVhc2l6ZSIsIGxzZDo6VmVjdG9yMnsxLjAsIDEuMH0pOwoJCWJvb2wgYXJlYV9ub3JtYWxpemUgPSBwTGlnaHRTY29wZS0+Z2V0UHJvcGVydHlWYWx1ZShhc3Q6OlN0eWxlOjpMSUdIVCwgImFyZWFub3JtYWxpemUiLCBib29sKHRydWUpKTsKCgkJaWYocFNoYWRlclByb3ApIHsKCQkJcFNoYWRlclByb3BzID0gcFNoYWRlclByb3AtPnN1YkNvbnRhaW5lcigpOwoJCQlyZXZlcnNlTGlnaHQgPSBwU2hhZGVyUHJvcHMtPmdldFByb3BlcnR5VmFsdWUoYXN0OjpTdHlsZTo6TElHSFQsICJyZXZlcnNlIiwgYm9vbChmYWxzZSkpOwoJCX0KCgkJaWYoIGxpZ2h0X3R5cGUgPT0gImdyaWQiKSB7CgkJCXBBcmVhTGlnaHQgPSBGYWxjb3I6OlJlY3RMaWdodDo6Y3JlYXRlKCJub25hbWVfcmVjdCIpOwoJCQlwQXJlYUxpZ2h0LT5zZXRTY2FsaW5nKHthcmVhX3NpemVbMF0sIGFyZWFfc2l6ZVsxXSwgMS4wZn0pOwoJCX0gZWxzZSBpZiAoIGxpZ2h0X3R5cGUgPT0gImRpc2siKSB7CgkJCXBBcmVhTGlnaHQgPSBGYWxjb3I6OkRpc2NMaWdodDo6Y3JlYXRlKCJub25hbWVfZGlzayIpOwoJCQlwQXJlYUxpZ2h0LT5zZXRTY2FsaW5nKHthcmVhX3NpemVbMF0sIGFyZWFfc2l6ZVsxXSwgMS4wZn0pOwoJCX0gZWxzZSBpZiAoIGxpZ2h0X3R5cGUgPT0gInNwaGVyZSIpIHsKCQkJcEFyZWFMaWdodCA9IEZhbGNvcjo6U3BoZXJlTGlnaHQ6OmNyZWF0ZSgibm9uYW1lX3NwaGVyZSIpOwoJCQlwQXJlYUxpZ2h0LT5zZXRTY2FsaW5nKHthcmVhX3NpemVbMF0sIGFyZWFfc2l6ZVsxXSwgYXJlYV9zaXplWzBdfSk7CgkJfQoKCQlpZiAoIXBBcmVhTGlnaHQpIHsKCQkJTExPR19FUlIgPDwgIkVycm9yIGNyZWF0aW5nIEFuYWx5dGljQXJlYUxpZ2h0ICEhISBTa2lwcGluZy4uLiI7CgkJCXJldHVybjsKCQl9CgoJCXBBcmVhTGlnaHQtPnNldFRyYW5zZm9ybU1hdHJpeCh0cmFuc2Zvcm0pOwoJCXBBcmVhTGlnaHQtPnNldFNpbmdsZVNpZGVkKHNpbmdsZVNpZGVkTGlnaHQpOwoJCXBBcmVhTGlnaHQtPnNldE5vcm1hbGl6ZUFyZWEoYXJlYV9ub3JtYWxpemUpOwoKCQlwTGlnaHQgPSBzdGQ6OmR5bmFtaWNfcG9pbnRlcl9jYXN0PEZhbGNvcjo6TGlnaHQ+KHBBcmVhTGlnaHQpOwoJfSBlbHNlIGlmKCBsaWdodF90eXBlID09ICJlbnYiKSB7CgkJLy8gRW52aXJvbm1lbnQgbGlnaHQgcHJvYmUgaXMgbm90IGEgY2xhc3NpZCBsaWdodCBzb3VyY2UuIEl0IHNob3VsZCBiZSBjcmVhdGVkIGxhdGVyIGJ5IHNjZW5lIGJ1aWxkZXIgb3IgcmVuZGVyZXIKCgkJc3RkOjpzdHJpbmcgdGV4dHVyZV9maWxlX25hbWUgPSBwTGlnaHRTY29wZS0+Z2V0UHJvcGVydHlWYWx1ZShhc3Q6OlN0eWxlOjpMSUdIVCwgImFyZWFtYXAiLCBzdGQ6OnN0cmluZygiIikpOwoJCWJvb2wgcGhhbnRvbSA9ICFwTGlnaHRTY29wZS0+Z2V0UHJvcGVydHlWYWx1ZShhc3Q6OlN0eWxlOjpMSUdIVCwgInZpc2libGVfcHJpbWFyeSIsIGJvb2woZmFsc2UpKTsKCgkJYXV0byBwRGV2aWNlID0gcFNjZW5lQnVpbGRlci0+ZGV2aWNlKCk7CgkJLy9MaWdodFByb2JlOjpTaGFyZWRQdHIgcExpZ2h0UHJvYmU7CgkJCgkJVGV4dHVyZTo6U2hhcmVkUHRyIHBFbnZNYXBUZXh0dXJlOwoJCWlmICh0ZXh0dXJlX2ZpbGVfbmFtZS5zaXplKCkgPiAwKSB7CgkJCWJvb2wgbG9hZEFzU3JnYiA9IGZhbHNlOwkKICAgIAkJcEVudk1hcFRleHR1cmUgPSBUZXh0dXJlOjpjcmVhdGVGcm9tRmlsZShwRGV2aWNlLCB0ZXh0dXJlX2ZpbGVfbmFtZSwgdHJ1ZSwgbG9hZEFzU3JnYik7CiAgICAJfQogICAgCQogICAgCUVudk1hcDo6U2hhcmVkUHRyIHBFbnZNYXAgPSBFbnZNYXA6OmNyZWF0ZShwRGV2aWNlLCBwRW52TWFwVGV4dHVyZSk7CiAgICAJcEVudk1hcC0+c2V0VGludCh0b19mbG9hdDMobGlnaHRfY29sb3IpKTsKICAgIAlwRW52TWFwLT5zZXRQaGFudG9tKHBoYW50b20pOwoKICAgIAlwU2NlbmVCdWlsZGVyLT5zZXRFbnZNYXAocEVudk1hcCk7CgogICAgCS8vIE5ldyBFbnZpcm9ubWVudExpZ2h0IHRlc3QKICAgIAlhdXRvIHBFbnZMaWdodCA9IEVudmlyb25tZW50TGlnaHQ6OmNyZWF0ZShsaWdodF9uYW1lLCBwRW52TWFwVGV4dHVyZSk7CiAgICAJcExpZ2h0ID0gc3RkOjpkeW5hbWljX3BvaW50ZXJfY2FzdDxGYWxjb3I6OkxpZ2h0PihwRW52TGlnaHQpOwoKCX0gZWxzZSB7IAoJCUxMT0dfV1JOIDw8ICJVbnN1cHBvcnRlZCBsaWdodCB0eXBlICIgPDwgbGlnaHRfdHlwZSA8PCAiLiBTa2lwcGluZy4uLiI7CgkJcmV0dXJuOwoJfQoKCWlmKHBMaWdodCkgewoJCUxMT0dfREJHIDw8ICJMaWdodCAiIDw8IGxpZ2h0X25hbWUgPDwgIiAgdHlwZSAiIDw8IEZhbGNvcjo6dG9fc3RyaW5nKHBMaWdodC0+Z2V0RGF0YSgpLnR5cGUpOwoKCQlpZiAobGlnaHRfbmFtZSAhPSAiIikgewoJCQlwTGlnaHQtPnNldE5hbWUobGlnaHRfbmFtZSk7CgkJfQoKCQlwTGlnaHQtPnNldEhhc0FuaW1hdGlvbihmYWxzZSk7CgoJCVByb3BlcnR5KiBwU2hhZG93UHJvcCA9IHBMaWdodFNjb3BlLT5nZXRQcm9wZXJ0eShhc3Q6OlN0eWxlOjpMSUdIVCwgInNoYWRvdyIpOwoJCQoJCS8vIHNldCBzaGFkb3cgcGFyYW1ldGVycwoJCWlmIChwU2hhZG93UHJvcCkgewoJCQlhdXRvIHBTaGFkb3dQcm9wcyA9IHBTaGFkb3dQcm9wLT5zdWJDb250YWluZXIoKTsKCQkJaWYgKHBTaGFkb3dQcm9wcykgewoJCQkJY29uc3Qgc3RkOjpzdHJpbmcgc2hhZG93X3R5cGVfbmFtZSA9IHBTaGFkb3dQcm9wcy0+Z2V0UHJvcGVydHlWYWx1ZShhc3Q6OlN0eWxlOjpMSUdIVCwgInNoYWRvd3R5cGUiLCBzdGQ6OnN0cmluZygiIikpOwoJCQkJaWYgKHNoYWRvd190eXBlX25hbWUgPT0gImZpbHRlciIpIHsKCQkJCQkvLyBhbHBoYSBhd2FyZSByYXkgdHJhY2VkIHNoYWRvd3MKCQkJCQlwTGlnaHQtPnNldFNoYWRvd1R5cGUoTGlnaHRTaGFkb3dUeXBlOjpSYXlUcmFjZWQpOwoJCQkJfSBlbHNlIGlmIChzaGFkb3dfdHlwZV9uYW1lID09ICJmYXN0IikgewoJCQkJCS8vIG9wYXF1ZSByYXkgdHJhY2VkIHNoYWRvd3MKCQkJCQlwTGlnaHQtPnNldFNoYWRvd1R5cGUoTGlnaHRTaGFkb3dUeXBlOjpSYXlUcmFjZWQpOwoJCQkJfSBlbHNlIGlmIChzaGFkb3dfdHlwZV9uYW1lID09ICJkZWVwIikgewoJCQkJCXBMaWdodC0+c2V0U2hhZG93VHlwZShMaWdodFNoYWRvd1R5cGU6OlNoYWRvd01hcCk7CgkJCQl9CgkJCQljb25zdCBGYWxjb3I6OmZsb2F0MyBzaGFkb3dfY29sb3IgPSB0b19mbG9hdDMocFNoYWRvd1Byb3BzLT5nZXRQcm9wZXJ0eVZhbHVlKGFzdDo6U3R5bGU6OkxJR0hULCAic2hhZG93X2NvbG9yIiwgbHNkOjpWZWN0b3IzezAuMCwgMC4wLCAwLjB9KSk7CgkJCQlwTGlnaHQtPnNldFNoYWRvd0NvbG9yKHNoYWRvd19jb2xvcik7CgkJCX0KCQl9CgoJCXBMaWdodC0+c2V0RGlmZnVzZUludGVuc2l0eSh0b19mbG9hdDMobGlnaHRfZGlmZnVzZV9jb2xvcikpOwoJCXBMaWdodC0+c2V0U3BlY3VsYXJJbnRlbnNpdHkodG9fZmxvYXQzKGxpZ2h0X3NwZWN1bGFyX2NvbG9yKSk7CgkJcExpZ2h0LT5zZXRJbmRpcmVjdERpZmZ1c2VJbnRlbnNpdHkodG9fZmxvYXQzKGxpZ2h0X2luZGlyZWN0X2RpZmZ1c2VfY29sb3IpKTsKCQlwTGlnaHQtPnNldEluZGlyZWN0U3BlY3VsYXJJbnRlbnNpdHkodG9fZmxvYXQzKGxpZ2h0X2luZGlyZWN0X3NwZWN1bGFyX2NvbG9yKSk7CgkJdWludDMyX3QgbGlnaHRfaWQgPSBwU2NlbmVCdWlsZGVyLT5hZGRMaWdodChwTGlnaHQpOwoJCW1MaWdodHNNYXBbbGlnaHRfbmFtZV0gPSBsaWdodF9pZDsKCX0KfQoKdm9pZCBTZXNzaW9uOjpjbWRQcm9wZXJ0eShsc2Q6OmFzdDo6U3R5bGUgc3R5bGUsIGNvbnN0IHN0ZDo6c3RyaW5nJiB0b2tlbiwgY29uc3QgUHJvcGVydHk6OlZhbHVlJiB2YWx1ZSkgewoJaWYoIW1wQ3VycmVudFNjb3BlKSB7CgkJTExPR19FUlIgPDwgIk5vIGN1cnJlbnQgc2NvcGUgaXMgc2V0ICEhISI7CgkJcmV0dXJuOyAKCX0KCWF1dG8gcFByb3AgPSBtcEN1cnJlbnRTY29wZS0+Z2V0UHJvcGVydHkoc3R5bGUsIHRva2VuKTsKCWlmKCFtcEN1cnJlbnRTY29wZS0+Z2V0UHJvcGVydHkoc3R5bGUsIHRva2VuKSkgewoJCW1wQ3VycmVudFNjb3BlLT5kZWNsYXJlUHJvcGVydHkoc3R5bGUsIHZhbHVlVHlwZSh2YWx1ZSksIHRva2VuLCB2YWx1ZSwgUHJvcGVydHk6Ok93bmVyOjpVU0VSKTsKCX0gZWxzZSB7CgkJbXBDdXJyZW50U2NvcGUtPnNldFByb3BlcnR5KHN0eWxlLCB0b2tlbiwgdmFsdWUpOwoJfQp9Cgp2b2lkIFNlc3Npb246OmNtZFByb3BlcnR5Vihsc2Q6OmFzdDo6U3R5bGUgc3R5bGUsIGNvbnN0IHN0ZDo6dmVjdG9yPHN0ZDo6cGFpcjxzdGQ6OnN0cmluZywgUHJvcGVydHk6OlZhbHVlPj4mIHZhbHVlcykgewoJaWYoIW1wQ3VycmVudFNjb3BlKSB7CgkJTExPR19FUlIgPDwgIk5vIGN1cnJlbnQgc2NvcGUgaXMgc2V0ICEhISI7CgkJcmV0dXJuOyAKCX0KCglpZiAodmFsdWVzLnNpemUoKSA8IDIpIHsKCQlMTE9HX0VSUiA8PCAiUHJvcGVydHkgYXJyYXkgc2l6ZSBzaG91bGQgYmUgYXQgbGVhc3QgMiBlbGVtZW50cyAhISEiOwoJCXJldHVybjsKCX0KCgltcEN1cnJlbnRTY29wZS0+c2V0UHJvcGVydHkoc3R5bGUsIHZhbHVlc1swXS5maXJzdCwgdmFsdWVzWzBdLnNlY29uZCk7CglQcm9wZXJ0eSogcFByb3AgPSBtcEN1cnJlbnRTY29wZS0+Z2V0UHJvcGVydHkoc3R5bGUsIHZhbHVlc1swXS5maXJzdCk7CgoJaWYoIXBQcm9wKSB7CgkJTExPR19FUlIgPDwgIkVycm9yIGdldHRpbmcgcHJvcGVydHkgIiA8PCB2YWx1ZXNbMF0uZmlyc3Q7CgkJcmV0dXJuOwoJfQoKCWF1dG8gcFN1YkNvbnRhaW5lciA9IHBQcm9wLT5zdWJDb250YWluZXIoKTsKCWlmKCFwU3ViQ29udGFpbmVyKSB7CgkJTExPR19EQkcgPDwgIk5vIHN1Yi1jb250YWluZXIgZm9yIHByb3BlcnR5ICIgPDwgdmFsdWVzWzBdLmZpcnN0OwoJCXJldHVybjsKCX0KCglmb3IoYXV0byBpdCA9IHZhbHVlcy5iZWdpbigpICsgMTsgaXQgIT0gdmFsdWVzLmVuZCgpOyBpdCsrKSB7CgkJcFN1YkNvbnRhaW5lci0+c2V0UHJvcGVydHkoc3R5bGUsIGl0LT5maXJzdCwgaXQtPnNlY29uZCk7Cgl9Cn0KCnZvaWQgU2Vzc2lvbjo6Y21kRWRnZShjb25zdCBzdGQ6OnN0cmluZyYgc3JjX25vZGVfdXVpZCwgY29uc3Qgc3RkOjpzdHJpbmcmIHNyY19ub2RlX291dHB1dF9zb2NrZXQsIGNvbnN0IHN0ZDo6c3RyaW5nJiBkc3Rfbm9kZV91dWlkLCBjb25zdCBzdGQ6OnN0cmluZyYgZHN0X25vZGVfaW5wdXRfc29ja2V0KSB7CglhdXRvIHBOb2RlID0gc3RkOjpkeW5hbWljX3BvaW50ZXJfY2FzdDxzY29wZTo6Tm9kZT4obXBDdXJyZW50U2NvcGUpOwoJaWYocE5vZGUpIHsKCQlwTm9kZS0+YWRkQ2hpbGRFZGdlKHNyY19ub2RlX3V1aWQsIHNyY19ub2RlX291dHB1dF9zb2NrZXQsIGRzdF9ub2RlX3V1aWQsIGRzdF9ub2RlX2lucHV0X3NvY2tldCk7Cgl9Cn0KCnZvaWQgU2Vzc2lvbjo6Y21kRGVjbGFyZShsc2Q6OmFzdDo6U3R5bGUgc3R5bGUsIGxzZDo6YXN0OjpUeXBlIHR5cGUsIGNvbnN0IHN0ZDo6c3RyaW5nJiB0b2tlbiwgY29uc3QgbHNkOjpQcm9wVmFsdWUmIHZhbHVlKSB7CglpZihtcEN1cnJlbnRTY29wZSkgewoJCW1wQ3VycmVudFNjb3BlLT5kZWNsYXJlUHJvcGVydHkoc3R5bGUsIHR5cGUsIHRva2VuLCB2YWx1ZS5nZXQoKSwgUHJvcGVydHk6Ok93bmVyOjpVU0VSKTsKCX0KfQoKdm9pZCBTZXNzaW9uOjpjbWRUcmFuc2Zvcm0oY29uc3QgTWF0cml4NCYgdHJhbnNmb3JtKSB7CglhdXRvIHBTY29wZSA9IHN0ZDo6ZHluYW1pY19wb2ludGVyX2Nhc3Q8c2NvcGU6OlRyYW5zZm9ybWFibGU+KG1wQ3VycmVudFNjb3BlKTsKCWlmKCFwU2NvcGUpIHsKCQlMTE9HX0RCRyA8PCAiVHJ5aW5nIHRvIHNldCB0cmFuc2Zvcm0gb24gbm9uLXRyYW5zZm9ybWFibGUgc2NvcGUgISEhIjsKCQlyZXR1cm47Cgl9CglwU2NvcGUtPnNldFRyYW5zZm9ybSh0cmFuc2Zvcm0pOwp9Cgp2b2lkIFNlc3Npb246OmNtZE1UcmFuc2Zvcm0oY29uc3QgTWF0cml4NCYgdHJhbnNmb3JtKSB7CglhdXRvIHBTY29wZSA9IHN0ZDo6ZHluYW1pY19wb2ludGVyX2Nhc3Q8c2NvcGU6OlRyYW5zZm9ybWFibGU+KG1wQ3VycmVudFNjb3BlKTsKCWlmKCFwU2NvcGUpIHsKCQlMTE9HX0RCRyA8PCAiVHJ5aW5nIHRvIGFkZCB0cmFuc2Zvcm0gdG8gbm9uLXRyYW5zZm9ybWFibGUgc2NvcGUgISEhIjsKCQlyZXR1cm47Cgl9CglwU2NvcGUtPmFkZFRyYW5zZm9ybSh0cmFuc2Zvcm0pOwp9CgpzY29wZTo6R2VvOjpTaGFyZWRQdHIgU2Vzc2lvbjo6Z2V0Q3VycmVudEdlbygpIHsKCWF1dG8gcEdlbyA9IHN0ZDo6ZHluYW1pY19wb2ludGVyX2Nhc3Q8c2NvcGU6Okdlbz4obXBDdXJyZW50U2NvcGUpOwoJaWYoIXBHZW8pIHsKCQlMTE9HX0VSUiA8PCAiVW5hYmxlIHRvIGdldCBzY29wZTo6R2VvLiBDdXJyZW50IHNjb3BlIHR5cGUgaXMgIiA8PCB0b19zdHJpbmcobXBDdXJyZW50U2NvcGUtPnR5cGUoKSkgPDwgIiAhISEiOwoJCXJldHVybiBudWxscHRyOwoJfQoJcmV0dXJuIHBHZW87Cn0KCnNjb3BlOjpTY29wZUJhc2U6OlNoYXJlZFB0ciBTZXNzaW9uOjpnZXRDdXJyZW50U2NvcGUoKSB7CglyZXR1cm4gc3RkOjpkeW5hbWljX3BvaW50ZXJfY2FzdDxzY29wZTo6U2NvcGVCYXNlPihtcEN1cnJlbnRTY29wZSk7Cn0KCnZvaWQgU2Vzc2lvbjo6Y21kSVBSbW9kZShsc2Q6OmFzdDo6SVBSTW9kZSBtb2RlLCBib29sIHN0YXNoKSB7CglMTE9HX0RCRyA8PCAiY21kSVBSbW9kZSAiIDw8IHRvX3N0cmluZyhtb2RlKSA8PCAiIHN0YXNoICIgPDwgc3Rhc2g7CglpZiAoIW1JUFIpIG1JUFIgPSB0cnVlOwoJbUlQUm1vZGUgPSBtb2RlOwp9Cgpib29sIFNlc3Npb246OmNtZFN0YXJ0KGxzZDo6YXN0OjpTdHlsZSBvYmplY3RfdHlwZSkgewoJbXBSZW5kZXJlci0+aW5pdChtUmVuZGVyZXJDb25maWcpOwoKCXN3aXRjaCAob2JqZWN0X3R5cGUpIHsKCQljYXNlIGxzZDo6YXN0OjpTdHlsZTo6R0VPOgoJCQl7IAoJCQkJYXV0byBwR2xvYmFsID0gc3RkOjpkeW5hbWljX3BvaW50ZXJfY2FzdDxzY29wZTo6R2xvYmFsPihtcEN1cnJlbnRTY29wZSk7CgkJCQlpZighcEdsb2JhbCkgewoJCQkJCUxMT0dfRlRMIDw8ICJHZW9tZXRyaWVzIGNyZWF0aW9uIGFsbG93ZWQgb25seSBpbnNpZGUgZ2xvYmFsIHNjb3BlICEhISI7CgkJCQkJcmV0dXJuIGZhbHNlOwoJCQkJfQoJCQkJbXBDdXJyZW50U2NvcGUgPSBwR2xvYmFsLT5hZGRHZW8oKTsKCQkJCWJyZWFrOwoJCQl9CgkJY2FzZSBsc2Q6OmFzdDo6U3R5bGU6Ok9CSkVDVDoKCQkJewoJCQkJYXV0byBwR2xvYmFsID0gc3RkOjpkeW5hbWljX3BvaW50ZXJfY2FzdDxzY29wZTo6R2xvYmFsPihtcEN1cnJlbnRTY29wZSk7CgkJCQlpZighcEdsb2JhbCkgewoJCQkJCUxMT0dfRlRMIDw8ICJPYmplY3RzIGNyZWF0aW9uIGFsbG93ZWQgb25seSBpbnNpZGUgZ2xvYmFsIHNjb3BlICEhISI7CgkJCQkJcmV0dXJuIGZhbHNlOwoJCQkJfSAKCQkJCW1wQ3VycmVudFNjb3BlID0gcEdsb2JhbC0+YWRkT2JqZWN0KCk7CgkJCQlicmVhazsKCQkJfQoJCWNhc2UgbHNkOjphc3Q6OlN0eWxlOjpMSUdIVDoKCQkJewoJCQkJYXV0byBwR2xvYmFsID0gc3RkOjpkeW5hbWljX3BvaW50ZXJfY2FzdDxzY29wZTo6R2xvYmFsPihtcEN1cnJlbnRTY29wZSk7CgkJCQlpZighcEdsb2JhbCkgewoJCQkJCUxMT0dfRlRMIDw8ICJMaWdodHMgY3JlYXRpb24gYWxsb3dlZCBvbmx5IGluc2lkZSBnbG9iYWwgc2NvcGUgISEhIjsKCQkJCQlyZXR1cm4gZmFsc2U7CgkJCQl9CgkJCQltcEN1cnJlbnRTY29wZSA9IHBHbG9iYWwtPmFkZExpZ2h0KCk7CgkJCQlicmVhazsKCQkJfQoJCWNhc2UgbHNkOjphc3Q6OlN0eWxlOjpQTEFORToKCQkJewoJCQkJYXV0byBwR2xvYmFsID0gc3RkOjpkeW5hbWljX3BvaW50ZXJfY2FzdDxzY29wZTo6R2xvYmFsPihtcEN1cnJlbnRTY29wZSk7CgkJCQlpZighcEdsb2JhbCkgewoJCQkJCUxMT0dfRlRMIDw8ICJQbGFuZXMgY3JlYXRpb24gYWxsb3dlZCBvbmx5IGluc2lkZSBnbG9iYWwgc2NvcGUgISEhIjsKCQkJCQlyZXR1cm4gZmFsc2U7CgkJCQl9CgkJCQltcEN1cnJlbnRTY29wZSA9IHBHbG9iYWwtPmFkZFBsYW5lKCk7CgkJCQlicmVhazsKCQkJfQoJCWNhc2UgbHNkOjphc3Q6OlN0eWxlOjpTRUdNRU5UOgoJCQl7CgkJCQlhdXRvIHBHbG9iYWwgPSBzdGQ6OmR5bmFtaWNfcG9pbnRlcl9jYXN0PHNjb3BlOjpHbG9iYWw+KG1wQ3VycmVudFNjb3BlKTsKCQkJCWlmKCFwR2xvYmFsKSB7CgkJCQkJTExPR19GVEwgPDwgIlNlZ21lbnRzIGNyZWF0aW9uIGFsbG93ZWQgb25seSBpbnNpZGUgZ2xvYmFsIHNjb3BlICEhISI7CgkJCQkJcmV0dXJuIGZhbHNlOwoJCQkJfQoJCQkJbXBDdXJyZW50U2NvcGUgPSBwR2xvYmFsLT5hZGRTZWdtZW50KCk7CgkJCQlicmVhazsKCQkJfQoJCWNhc2UgbHNkOjphc3Q6OlN0eWxlOjpNQVRFUklBTDoKCQkJewoJCQkJYXV0byBwR2xvYmFsID0gc3RkOjpkeW5hbWljX3BvaW50ZXJfY2FzdDxzY29wZTo6R2xvYmFsPihtcEN1cnJlbnRTY29wZSk7IAoJCQkJaWYoIXBHbG9iYWwpIHsKCQkJCQlMTE9HX0ZUTCA8PCAiTWF0ZXJpYWxzIGNyZWF0aW9uIGFsbG93ZWQgb25seSBpbnNpZGUgZ2xvYmFsIHNjb3BlICEhISI7CgkJCQkJcmV0dXJuIGZhbHNlOwoJCQkJfQoJCQkJbXBDdXJyZW50U2NvcGUgPSBwR2xvYmFsLT5hZGRNYXRlcmlhbCgpOwoJCQkJbXBNYXRlcmlhbFNjb3BlID0gc3RkOjpkeW5hbWljX3BvaW50ZXJfY2FzdDxzY29wZTo6TWF0ZXJpYWw+KG1wQ3VycmVudFNjb3BlKTsKCQkJCWJyZWFrOwoJCQl9CgkJY2FzZSBsc2Q6OmFzdDo6U3R5bGU6Ok5PREU6CgkJCXsgCgkJCQlhdXRvIHBOb2RlID0gc3RkOjpkeW5hbWljX3BvaW50ZXJfY2FzdDxzY29wZTo6Tm9kZT4obXBDdXJyZW50U2NvcGUpOwoJCQkJaWYoIXBOb2RlKSB7CgkJCQkJTExPR19GVEwgPDwgIk5vZGVzIGNyZWF0aW9uIGFsbG93ZWQgb25seSBpbnNpZGUgbWF0ZXJpYWwvbm9kZSBzY29wZSAhISEiOwoJCQkJCXJldHVybiBmYWxzZTsKCQkJCX0KCQkJCW1wQ3VycmVudFNjb3BlID0gcE5vZGUtPmFkZENoaWxkTm9kZSgpOwoJCQkJYnJlYWs7CgkJCX0KCQlkZWZhdWx0OgoJCQlMTE9HX0ZUTCA8PCAiVW5zdXBwb3J0ZWQgY21kX3N0YXJ0IHN0eWxlOiAiIDw8IHRvX3N0cmluZyhvYmplY3RfdHlwZSk7CgkJCXJldHVybiBmYWxzZTsKCX0KCglyZXR1cm4gbXBDdXJyZW50U2NvcGUgPyB0cnVlIDogZmFsc2U7Cn0KCmJvb2wgU2Vzc2lvbjo6Y21kRW5kKCkgewoJYXV0byBwR2xvYmFsU2NvcGUgPSBzdGQ6OmR5bmFtaWNfcG9pbnRlcl9jYXN0PHNjb3BlOjpHbG9iYWw+KG1wQ3VycmVudFNjb3BlKTsKCWlmKHBHbG9iYWxTY29wZSkgewoJCUxMT0dfRlRMIDw8ICJDYW4ndCBlbmQgZ2xvYmFsIHNjb3BlICEhISI7CgkJcmV0dXJuIGZhbHNlOwoJfQoKCWF1dG8gcFBhcmVudFNjb3BlID0gbXBDdXJyZW50U2NvcGUtPnBhcmVudCgpOwoJaWYoIXBQYXJlbnRTY29wZSkgewoJCUxMT0dfRlRMIDw8ICJVbmFibGUgdG8gZW5kIHNjb3BlIHdpdGggbm8gcGFyZW50ICEhISI7CgkJcmV0dXJuIGZhbHNlOwoJfQoKCWNvbnN0IGF1dG8mIGNvbmZpZ1N0b3JlID0gRmFsY29yOjpDb25maWdTdG9yZTo6aW5zdGFuY2UoKTsKCglib29sIHJlc3VsdCA9IHRydWU7CgoJc3dpdGNoKG1wQ3VycmVudFNjb3BlLT50eXBlKCkpIHsKCQljYXNlIGFzdDo6U3R5bGU6OkdFTzoKCQkJewoJCQkJc2NvcGU6Okdlbzo6U2hhcmVkUHRyIHBTY29wZUdlbyA9IHN0ZDo6ZHluYW1pY19wb2ludGVyX2Nhc3Q8c2NvcGU6Okdlbz4obXBDdXJyZW50U2NvcGUpOwoJCQkJaWYoIXBTY29wZUdlbykgewoJCQkJCUxMT0dfRVJSIDw8ICJFcnJvciBlbmRpbmcgc2NvcGUgb2YgdHlwZSBcImdlb21ldHJ5XCIhISEiOwoJCQkJCXJldHVybiBmYWxzZTsKCQkJCX0KCgkJCQlib29sIHB1c2hHZW9Bc3luYyA9IG1wR2xvYmFsLT5nZXRQcm9wZXJ0eVZhbHVlKGFzdDo6U3R5bGU6OkdMT0JBTCwgImFzeW5jX2dlbyIsIGJvb2wodHJ1ZSkpOwoJCQkJaWYoIHBTY29wZUdlby0+aXNJbmxpbmUoKSB8fCAhcHVzaEdlb0FzeW5jKSB7CgkJCQkJcHVzaEJnZW8ocFNjb3BlR2VvLT5kZXRhaWxOYW1lKCksIHBTY29wZUdlbyk7CgkJCQl9IGVsc2UgewoJCQkJCXB1c2hCZ2VvQXN5bmMocFNjb3BlR2VvLT5kZXRhaWxOYW1lKCksIHBTY29wZUdlbyk7CgkJCQl9CgkJCX0KCQkJYnJlYWs7CgkJY2FzZSBhc3Q6OlN0eWxlOjpPQkpFQ1Q6CgkJCXsKCQkJCXNjb3BlOjpPYmplY3Q6OlNoYXJlZFB0ciBwU2NvcGVPYmogPSBzdGQ6OmR5bmFtaWNfcG9pbnRlcl9jYXN0PHNjb3BlOjpPYmplY3Q+KG1wQ3VycmVudFNjb3BlKTsKCQkJCWlmKCFwU2NvcGVPYmopIHsKCQkJCQlMTE9HX0VSUiA8PCAiRXJyb3IgZW5kaW5nIHNjb3BlIG9mIHR5cGUgXCJvYmplY3RcIiEhISI7CgkJCQkJcmV0dXJuIGZhbHNlOwoJCQkJfQoKCQkJCWlmKCFwdXNoR2VvbWV0cnlJbnN0YW5jZShwU2NvcGVPYmopKSB7CgkJCQkJbUZhaWxlZCA9IHRydWU7CgkJCQkJcmV0dXJuIGZhbHNlOwoJCQkJfQoJCQl9CgkJCWJyZWFrOwoJCWNhc2UgYXN0OjpTdHlsZTo6UExBTkU6CgkJCXsKCQkJCXNjb3BlOjpQbGFuZTo6U2hhcmVkUHRyIHBTY29wZVBsYW5lID0gc3RkOjpkeW5hbWljX3BvaW50ZXJfY2FzdDxzY29wZTo6UGxhbmU+KG1wQ3VycmVudFNjb3BlKTsKCQkJCWF1dG8gcFBsYW5lID0gbXBSZW5kZXJlci0+YWRkQU9WUGxhbmUoYW92SW5mb0Zyb21MU0QocFNjb3BlUGxhbmUpKTsKCQkJCQoJCQkJLy8gQ2hlY2sgaWYgb3V0cHV0IHBsYW5lIHdhbnRzIG93biBkaXNwbGF5IGZvciBpbWFnZSBvdXRwdXQKCQkJCWNvbnN0IHN0ZDo6c3RyaW5nJiBkaXNwbGF5X2ZpbGVuYW1lID0gcFBsYW5lLT5maWxlbmFtZSgpOwoJCQkJaWYoZGlzcGxheV9maWxlbmFtZSAhPSAiIiAmJiAhcFBsYW5lLT5oYXNEaXNwbGF5KCkpIHsKCQkJCQlEaXNwbGF5OjpTaGFyZWRQdHIgcERpc3BsYXk7CgkJCQkJaWYgKG1EaXNwbGF5cy5maW5kKGRpc3BsYXlfZmlsZW5hbWUpICE9IG1EaXNwbGF5cy5lbmQoKSkgewoJCQkJCQlwRGlzcGxheSA9IG1EaXNwbGF5c1tkaXNwbGF5X2ZpbGVuYW1lXTsKCQkJCQl9ZWxzZSB7CgkJCQkJCURpc3BsYXlJbmZvIGNyZWF0ZURpc3BsYXlJbmZvOwoJCQkJCQljcmVhdGVEaXNwbGF5SW5mby5kaXNwbGF5VHlwZSA9IHJlc29sdmVEaXNwbGF5VHlwZUJ5RmlsZU5hbWUoZGlzcGxheV9maWxlbmFtZSk7CgkJCQkJCW1EaXNwbGF5c1tkaXNwbGF5X2ZpbGVuYW1lXSA9IHBEaXNwbGF5ID0gY3JlYXRlRGlzcGxheShjcmVhdGVEaXNwbGF5SW5mbyk7CgkJCQkJfQoJCQkJCWlmKCFwRGlzcGxheSkgewoJCQkJCQlMTE9HX0ZUTCA8PCAiT3V0cHV0IHBsYW5lICIgPDwgcFBsYW5lLT5uYW1lKCkgPDwgIiBuZWVkcyBvd24gZGlzcGxheSBidXQgaGFzIG5vbmUhIjsKCQkJCQkJcmV0dXJuIGZhbHNlOwoJCQkJCX0KCQkJCQlwUGxhbmUtPnNldERpc3BsYXkocERpc3BsYXkpOwoJCQkJfQoJCQkJCgkJCQlpZiAoIXBQbGFuZSkgewoJCQkJCUxMT0dfRlRMIDw8ICJFcnJvciBjcmVhdGluZyBvdXRwdXQgcGxhbmUgIiA8PCBwUGxhbmUtPm5hbWUoKTsKCQkJCQlyZXR1cm4gZmFsc2U7CgkJCQl9CgkJCQl0cmFuc2xhdGVMU0RQbGFuZVByb3BlcnRpZXNUb0xhdmFEaWN0KHBTY29wZVBsYW5lLCBwUGxhbmUtPmdldFJlbmRlclBhc3Nlc0RpY3QoKSk7CgkJCX0KCQkJYnJlYWs7CgkJY2FzZSBhc3Q6OlN0eWxlOjpMSUdIVDoKCQkJewoJCQkJc2NvcGU6OkxpZ2h0OjpTaGFyZWRQdHIgcFNjb3BlTGlnaHQgPSBzdGQ6OmR5bmFtaWNfcG9pbnRlcl9jYXN0PHNjb3BlOjpMaWdodD4obXBDdXJyZW50U2NvcGUpOwoJCQkJaWYoIXBTY29wZUxpZ2h0KSB7CgkJCQkJTExPR19FUlIgPDwgIkVycm9yIGVuZGluZyBzY29wZSBvZiB0eXBlIFwibGlnaHRcIiEhISI7CgkJCQkJcmV0dXJuIGZhbHNlOwoJCQkJfQoJCQkJcHVzaExpZ2h0KHBTY29wZUxpZ2h0KTsKCQkJfQoJCQlicmVhazsKCQljYXNlIGFzdDo6U3R5bGU6Ok1BVEVSSUFMOgoJCQl7CgkJCQlzY29wZTo6TWF0ZXJpYWw6OlNoYXJlZFB0ciBwTWF0ZXJpYWxTY29wZSA9IHN0ZDo6ZHluYW1pY19wb2ludGVyX2Nhc3Q8c2NvcGU6Ok1hdGVyaWFsPihtcEN1cnJlbnRTY29wZSk7CgkJCQlpZihwTWF0ZXJpYWxTY29wZSkgewoJCQkJCWF1dG8gcE1hdGVyaWFsWCA9IGNyZWF0ZU1hdGVyaWFsWEZyb21MU0QocE1hdGVyaWFsU2NvcGUpOwoJCQkJCWlmIChwTWF0ZXJpYWxYKSB7CgkJCQkJCS8vbXBSZW5kZXJlci0+YWRkTWF0ZXJpYWxYKHN0ZDo6bW92ZShwTWF0ZXJpYWxYKSk7CgkJCQkJfQoJCQkJfSBlbHNlIHsKCQkJCQlyZXN1bHQgPSBmYWxzZTsKCQkJCX0KCQkJfQoJCQlicmVhazsKCQljYXNlIGFzdDo6U3R5bGU6Ok5PREU6CgkJCXsKCQkJCXNjb3BlOjpOb2RlOjpTaGFyZWRQdHIgcFNjb3BlTm9kZSA9IHN0ZDo6ZHluYW1pY19wb2ludGVyX2Nhc3Q8c2NvcGU6Ok5vZGU+KG1wQ3VycmVudFNjb3BlKTsKCQkJfQoJCQlicmVhazsKCQljYXNlIGFzdDo6U3R5bGU6OlNFR01FTlQ6CgkJY2FzZSBhc3Q6OlN0eWxlOjpHTE9CQUw6CgkJCWJyZWFrOwoJCWRlZmF1bHQ6CgkJCUxMT0dfRVJSIDw8ICJjbWRfZW5kIG1ha2VzIG5vIHNlbnNlLiBDdXJyZW50IHNjb3BlIHR5cGUgaXMgIiA8PCB0b19zdHJpbmcobXBDdXJyZW50U2NvcGUtPnR5cGUoKSkgPDwgIiAhISEiOwoJCQlicmVhazsKCX0KCgltcEN1cnJlbnRTY29wZSA9IHBQYXJlbnRTY29wZTsKCXJldHVybiByZXN1bHQ7Cn0KCnZvaWQgU2Vzc2lvbjo6YWRkTXhOb2RlKEZhbGNvcjo6TXhOb2RlOjpTaGFyZWRQdHIgcFBhcmVudCwgc2NvcGU6Ok5vZGU6OlNoYXJlZENvbnN0UHRyIHBOb2RlTFNEKSB7CglyZXR1cm47Cglhc3NlcnQocFBhcmVudCk7CgoJYm9vbCBpc19zdWJuZXQgPSBwTm9kZUxTRC0+Z2V0UHJvcGVydHlWYWx1ZShhc3Q6OlN0eWxlOjpPQkpFQ1QsICJpc19zdWJuZXQiLCBib29sKGZhbHNlKSk7CglzdGQ6OnN0cmluZyBub2RlX25hbWUgPSBwTm9kZUxTRC0+Z2V0UHJvcGVydHlWYWx1ZShhc3Q6OlN0eWxlOjpPQkpFQ1QsICJub2RlX25hbWUiLCBzdGQ6OnN0cmluZygiIikpOwoJc3RkOjpzdHJpbmcgbm9kZV90eXBlID0gcE5vZGVMU0QtPmdldFByb3BlcnR5VmFsdWUoYXN0OjpTdHlsZTo6T0JKRUNULCAibm9kZV90eXBlIiwgc3RkOjpzdHJpbmcoIiIpKTsKCXN0ZDo6c3RyaW5nIG5vZGVfdXVpZCA9IHBOb2RlTFNELT5nZXRQcm9wZXJ0eVZhbHVlKGFzdDo6U3R5bGU6Ok9CSkVDVCwgIm5vZGVfdXVpZCIsIHN0ZDo6c3RyaW5nKCIiKSk7CglzdGQ6OnN0cmluZyBub2RlX25hbWVzcGFjZSA9IHBOb2RlTFNELT5nZXRQcm9wZXJ0eVZhbHVlKGFzdDo6U3R5bGU6Ok9CSkVDVCwgIm5vZGVfbmFtZXNwYWNlIiwgc3RkOjpzdHJpbmcoImhvdWRpbmkiKSk7CgoJTXhOb2RlOjpUeXBlQ3JlYXRlSW5mbyBpbmZvID0ge307CiAgICBpbmZvLm5hbWVTcGFjZSA9IG5vZGVfbmFtZXNwYWNlOwogICAgaW5mby50eXBlTmFtZSA9IG5vZGVfdHlwZTsKICAgIGluZm8udmVyc2lvbiA9IDA7CgoJYXV0byBwTm9kZSA9IHBQYXJlbnQtPmNyZWF0ZU5vZGUoaW5mbywgbm9kZV9uYW1lKTsKCWlmIChwTm9kZSkgewoJCWlmIChtcE1hdGVyaWFsU2NvcGUtPmluc2VydE5vZGUobm9kZV91dWlkLCBwTm9kZSkpIHsKCgkJCWZvciggY29uc3QgYXV0byYgdG1wbDogcE5vZGVMU0QtPnNvY2tldFRlbXBsYXRlcygpKSB7CgkJCQlhdXRvIHBTb2NrZXQgPSBwTm9kZS0+YWRkRGF0YVNvY2tldCh0bXBsLm5hbWUsIHRtcGwuZGF0YVR5cGUsIHRtcGwuZGlyZWN0aW9uKTsKCQkJCWlmICghcFNvY2tldCkgewoJCQkJCUxMT0dfRVJSIDw8ICJFcnJvciBjcmVhdGluZyBzaGFkaW5nIG5vZGUgZGF0YSBzb2NrZXQgIiA8PCB0bXBsLm5hbWUgPDwgIiAhISEiOwoJCQkJfSBlbHNlIHsKCQkJCQlMTE9HX0RCRyA8PCAiQ3JlYXRlZCBub2RlICIgPDwgdG1wbC5kaXJlY3Rpb24gPDwgIiBzb2NrZXQgIiA8PCBwU29ja2V0LT5wYXRoKCk7IAoJCQkJfQoJCQl9CgoJCQlpZiAoaXNfc3VibmV0KSB7CgkJCQkvLyBhZGQgY2hpbGQgbm9kZXMKCQkJCWZvciggc2NvcGU6Ok5vZGU6OlNoYXJlZENvbnN0UHRyIHBDaGlsZE5vZGVMU0Q6IHBOb2RlTFNELT5jaGlsZE5vZGVzKCkpIHsKCQkJCQlhZGRNeE5vZGUocE5vZGUsIHBDaGlsZE5vZGVMU0QpOwoJCQkJfQoKCQkJCS8vIGxpbmsgc29ja2V0cwoJCQkJZm9yKCBjb25zdCBzY29wZTo6Tm9kZTo6RWRnZUluZm8mIGVkZ2U6IHBOb2RlTFNELT5jaGlsZEVkZ2VzKCkpIHsKCQkJCQlGYWxjb3I6Ok14Tm9kZTo6U2hhcmVkUHRyIHBTcmNOb2RlID0gcE5vZGUtPm5vZGUoZWRnZS5zcmNfbm9kZV91dWlkKTsKCQkJCQlGYWxjb3I6Ok14Tm9kZTo6U2hhcmVkUHRyIHBEc3ROb2RlID0gcE5vZGUtPm5vZGUoZWRnZS5kc3Rfbm9kZV91dWlkKTsKCgkJCQkJaWYoIHBTcmNOb2RlICYmIHBEc3ROb2RlKSB7CgkJCQkJCUZhbGNvcjo6TXhTb2NrZXQ6OlNoYXJlZFB0ciBwU3JjU29ja2V0ID0gcFNyY05vZGUtPm91dHB1dFNvY2tldChlZGdlLnNyY19ub2RlX291dHB1dF9zb2NrZXQpOwoJCQkJCQlGYWxjb3I6Ok14U29ja2V0OjpTaGFyZWRQdHIgcERzdFNvY2tldCA9IHBEc3ROb2RlLT5pbnB1dFNvY2tldChlZGdlLmRzdF9ub2RlX2lucHV0X3NvY2tldCk7CgkJCQkJCWlmKCBwU3JjU29ja2V0ICYmIHBEc3RTb2NrZXQpIHsKCQkJCQkJCWlmICghcERzdFNvY2tldC0+c2V0SW5wdXQocERzdFNvY2tldCkpIHsKCQkJCQkJCQlMTE9HX0VSUiA8PCAiRXJyb3IgY29ubmVjdGluZyBzb2NrZXQgIiA8PCBlZGdlLnNyY19ub2RlX291dHB1dF9zb2NrZXQgPDwgIiB0byAiIDw8IGVkZ2UuZHN0X25vZGVfaW5wdXRfc29ja2V0OwoJCQkJCQkJfQoJCQkJCQl9IGVsc2UgewoJCQkJCQkJaWYoICFwU3JjU29ja2V0KSBMTE9HX0VSUiA8PCAiTm8gc29ja2V0IG5hbWVkICIgPDwgZWRnZS5zcmNfbm9kZV9vdXRwdXRfc29ja2V0IDw8ICIgYXQgbm9kZSAiIDw8IHBTcmNOb2RlLT5uYW1lKCk7CgkJCQkJCQlpZiggIXBEc3RTb2NrZXQpIExMT0dfRVJSIDw8ICJObyBzb2NrZXQgbmFtZWQgIiA8PCBlZGdlLmRzdF9ub2RlX2lucHV0X3NvY2tldCA8PCAiIGF0IG5vZGUgIiA8PCBwRHN0Tm9kZS0+bmFtZSgpOwoJCQkJCQl9CgkJCQkJfSBlbHNlIHsKCQkJCQkJaWYoICFwU3JjTm9kZSkgTExPR19FUlIgPDwgIk5vIHNoYWRpbmcgbm9kZSAiIDw8IGVkZ2Uuc3JjX25vZGVfdXVpZCA8PCAiIGV4aXN0ICEhISI7CgkJCQkJCWlmKCAhcERzdE5vZGUpIExMT0dfRVJSIDw8ICJObyBzaGFkaW5nIG5vZGUgIiA8PCBlZGdlLmRzdF9ub2RlX3V1aWQgPDwgIiBleGlzdCAhISEiOwoJCQkJCX0KCQkJCX0KCQkJfQoJCX0KCX0KfQoKRmFsY29yOjpNYXRlcmlhbFg6OlVuaXF1ZVB0ciBTZXNzaW9uOjpjcmVhdGVNYXRlcmlhbFhGcm9tTFNEKHNjb3BlOjpNYXRlcmlhbDo6U2hhcmVkQ29uc3RQdHIgcE1hdGVyaWFsTFNEKSB7CgkKCXN0ZDo6c3RyaW5nIG1hdGVyaWFsX25hbWUgPSBwTWF0ZXJpYWxMU0QtPmdldFByb3BlcnR5VmFsdWUoYXN0OjpTdHlsZTo6T0JKRUNULCAibWF0ZXJpYWxfbmFtZSIsIHN0ZDo6c3RyaW5nKCIiKSk7CgoJLy8gV2UgY3JlYXRlIG1hdGVyaWFsIHdpdGhvdXQgZGV2aWNlIGF0IHRoaXMgc3RhZ2UuIEFjdHVhbCBkZXZpY2Ugd291bGQgYmUgc2V0IHVwIGZvciB0aGlzIG1hdGVyaWFsIGxhdGVyIGJ5IHRoZQoJLy8gcmVuZGVyZXIgaXRzZWxmLgoJYXV0byBwTXggPSBGYWxjb3I6Ok1hdGVyaWFsWDo6Y3JlYXRlVW5pcXVlKG51bGxwdHIsIG1hdGVyaWFsX25hbWUpOwoKCWZvciggc2NvcGU6Ok5vZGU6OlNoYXJlZENvbnN0UHRyIHBOb2RlTFNEOiBwTWF0ZXJpYWxMU0QtPmNoaWxkTm9kZXMoKSkgewoJCWFkZE14Tm9kZShwTXgtPnJvb3ROb2RlKCksIHBOb2RlTFNEKTsKCX0KCglyZXR1cm4gc3RkOjptb3ZlKHBNeCk7Cn0KCmJvb2wgU2Vzc2lvbjo6Y21kU29ja2V0KEZhbGNvcjo6TXhTb2NrZXREaXJlY3Rpb24gZGlyZWN0aW9uLCBGYWxjb3I6Ok14U29ja2V0RGF0YVR5cGUgZGF0YVR5cGUsIGNvbnN0IHN0ZDo6c3RyaW5nJiBuYW1lKSB7Cglhc3NlcnQobXBDdXJyZW50U2NvcGUpOwoKCWlmIChtcEN1cnJlbnRTY29wZS0+dHlwZSgpICE9IGFzdDo6U3R5bGU6Ok5PREUpIHsKCQlMTE9HX0VSUiA8PCAiRXJyb3IgYWRkaW5nIG5vZGUgc29ja2V0LiBDdXJyZW50IHNjb3BlIGlzIG5vdCBcIm5vZGVcIiAhISEiOwoJCXJldHVybiBmYWxzZTsKCX0KCglhdXRvIHBOb2RlID0gc3RkOjpkeW5hbWljX3BvaW50ZXJfY2FzdDxzY29wZTo6Tm9kZT4obXBDdXJyZW50U2NvcGUpOwoJcE5vZGUtPmFkZERhdGFTb2NrZXRUZW1wbGF0ZShuYW1lLCBkYXRhVHlwZSwgZGlyZWN0aW9uKTsKCXJldHVybiB0cnVlOwp9Cgpib29sIFNlc3Npb246OnB1c2hHZW9tZXRyeUluc3RhbmNlKHNjb3BlOjpPYmplY3Q6OlNoYXJlZENvbnN0UHRyIHBPYmopIHsKCWFzc2VydChwT2JqKTsKCglMTE9HX0RCRyA8PCAicHVzaEdlb21ldHJ5SW5zdGFuY2UgZm9yIGdlb21ldHJ5IChtZXNoKSBuYW1lOiAiIDw8IHBPYmotPmdlb21ldHJ5TmFtZSgpOwoJCglhdXRvIHBTY2VuZUJ1aWxkZXIgPSBtcFJlbmRlcmVyLT5zY2VuZUJ1aWxkZXIoKTsKCWlmICghcFNjZW5lQnVpbGRlcikgewoJCUxMT0dfRVJSIDw8ICJVbmFibGUgdG8gcHVzaCBnZW9tZXRyeSBpbnN0YW5jZS4gU2NlbmVCdWlsZGVyIG5vdCByZWFkeSAhISEiOwoJCXJldHVybiBmYWxzZTsKCX0KCglhdXRvIGl0ID0gbU1lc2hNYXAuZmluZChwT2JqLT5nZW9tZXRyeU5hbWUoKSk7CglpZihpdCA9PSBtTWVzaE1hcC5lbmQoKSkgewoJCUxMT0dfRVJSIDw8ICJObyBnZW9tZXRyeSBmb3VuZCBmb3IgbmFtZSAiIDw8IHBPYmotPmdlb21ldHJ5TmFtZSgpOwoJCXJldHVybiBmYWxzZTsKCX0KCgl1aW50MzJfdCBleHBvcnRlZEluc3RhbmNlSUQgPSBTY2VuZUJ1aWxkZXI6OmtJbnZhbGlkRXhwb3J0ZWRJRDsKCWNvbnN0IFByb3BlcnR5KiBwSURQcm9wZXJ0eSA9IHBPYmotPmdldFByb3BlcnR5KGFzdDo6U3R5bGU6Ok9CSkVDVCwgImlkIik7CglpZihwSURQcm9wZXJ0eSkgewoJCWV4cG9ydGVkSW5zdGFuY2VJRCA9IHBJRFByb3BlcnR5LT5nZXQ8dWludDMyX3Q+KCk7Cgl9CglzdGQ6OnN0cmluZyBvYmpfbmFtZSA9IHBPYmotPmdldFByb3BlcnR5VmFsdWUoYXN0OjpTdHlsZTo6T0JKRUNULCAibmFtZSIsIHN0ZDo6c3RyaW5nKCkpOwoKCXVpbnQzMl90IG1lc2hfaWQgPSBzdGQ6Om51bWVyaWNfbGltaXRzPHVpbnQzMl90Pjo6bWF4KCk7CgoJdHJ5IHsKCQltZXNoX2lkID0gc3RkOjpnZXQ8dWludDMyX3Q+KGl0LT5zZWNvbmQpOwkKCQlMTE9HX0RCRyA8PCAiR2V0dGluZyBzeW5jIG1lc2hfaWQgZm9yIG9iaiBuYW1lIGluc3RhbmNlOiAiICA8PCBvYmpfbmFtZSA8PCAiIGdlbyBuYW1lOiAiIDw8IHBPYmotPmdlb21ldHJ5TmFtZSgpOwoJfSBjYXRjaCAoY29uc3Qgc3RkOjpiYWRfdmFyaWFudF9hY2Nlc3MmKSB7CgkJYXV0byYgZiA9IHN0ZDo6Z2V0PHN0ZDo6c2hhcmVkX2Z1dHVyZTx1aW50MzJfdD4+KGl0LT5zZWNvbmQpOwoJCXRyeSB7CgkJCW1lc2hfaWQgPSBmLmdldCgpOwoJCQlMTE9HX0RCRyA8PCAiR2V0dGluZyBhc3luYyBtZXNoX2lkIGZvciBvYmpfbmFtZSAiIDw8IG9ial9uYW1lOwkKCQl9IGNhdGNoKGNvbnN0IHN0ZDo6ZXhjZXB0aW9uJiBlKSB7CiAgICAgICAgCUxMT0dfRVJSIDw8ICJBc3luYyBnZW8gaW5zdGFuY2UgY3JlYXRpb24gZXJyb3IhISEgRXhjZXB0aW9uIGZyb20gdGhlIHRocmVhZDogIiA8PCBlLndoYXQoKTsKICAgICAgICAJcmV0dXJuIGZhbHNlOwogICAgCX0KCX0gY2F0Y2ggKC4uLikgewoJCUxMT0dfRVJSIDw8ICJBc3luYyBnZW8gaW5zdGFuY2UgY3JlYXRpb24gZXJyb3IhISEgVW5hYmxlIHRvIGdldCBtZXNoIGlkIGZvciBvYmplY3Q6ICIgPDwgb2JqX25hbWU7Cgl9CgoJaWYgKG1lc2hfaWQgPT0gc3RkOjpudW1lcmljX2xpbWl0czx1aW50MzJfdD46Om1heCgpKSB7CgkJcmV0dXJuIGZhbHNlOwoJfQoJaXQtPnNlY29uZCA9IG1lc2hfaWQ7CgoJTExPR19UUkMgPDwgIm1lc2hfaWQgIiA8PCBtZXNoX2lkOwoKCUZhbGNvcjo6U2NlbmVCdWlsZGVyOjpOb2RlIG5vZGUgPSB7fTsKCW5vZGUubmFtZSA9IGl0LT5maXJzdDsKCW5vZGUudHJhbnNmb3JtID0gcE9iai0+Z2V0VHJhbnNmb3JtTGlzdCgpWzBdOwoJbm9kZS5tZXNoQmluZCA9IGdsbTo6bWF0NCgxKTsgICAgICAgICAgLy8gRm9yIHNraW5uZWQgbWVzaGVzLiBXb3JsZCB0cmFuc2Zvcm0gYXQgYmluZCB0aW1lLgogICAgbm9kZS5sb2NhbFRvQmluZFBvc2UgPSBnbG06Om1hdDQoMSk7ICAgLy8gRm9yIGJvbmVzLiBJbnZlcnNlIGJpbmQgdHJhbnNmb3JtLgoJLyoKCQlnbG06Om1hdDQoMSksIC8vIEZvciBza2lubmVkIG1lc2hlcy4gV29ybGQgdHJhbnNmb3JtIGF0IGJpbmQgdGltZS4KCQlnbG06Om1hdDQoMSksIC8vIEZvciBib25lcy4gSW52ZXJzZSBiaW5kIHRyYW5zZm9ybS4KCQlGYWxjb3I6OlNjZW5lQnVpbGRlcjo6a0ludmFsaWROb2RlIC8vIGp1c3QgYSBub2RlIHdpdGggbm8gcGFyZW50Cgl9OwoJKi8KCgl1aW50MzJfdCBub2RlX2lkID0gcFNjZW5lQnVpbGRlci0+YWRkTm9kZShub2RlKTsKCgkvLyBUT0RPOiB0aGlzIGlzIG5haXZlIHRlc3QuIGZldGNoIGJhc2ljIG1hdGVyaWFsIGRhdGEKCWNvbnN0IFByb3BlcnR5KiBwU2hhZGVyUHJvcCA9IHBPYmotPmdldFByb3BlcnR5KGFzdDo6U3R5bGU6Ok9CSkVDVCwgInN1cmZhY2UiKTsKICAgIAogICAgRmFsY29yOjpmbG9hdDMgCXN1cmZhY2VfYmFzZV9jb2xvciA9IHswLjIsIDAuMiwgMC4yfTsKICAgIHN0ZDo6c3RyaW5nIAlzdXJmYWNlX2Jhc2VfY29sb3JfdGV4dHVyZV9wYXRoICA9ICIiOwogICAgc3RkOjpzdHJpbmcgCXN1cmZhY2VfYmFzZV9ub3JtYWxfdGV4dHVyZV9wYXRoID0gIiI7CiAgICBzdGQ6OnN0cmluZyAJc3VyZmFjZV9tZXRhbGxpY190ZXh0dXJlX3BhdGggICAgPSAiIjsKICAgIHN0ZDo6c3RyaW5nIAlzdXJmYWNlX3JvdWdobmVzc190ZXh0dXJlX3BhdGggICA9ICIiOwogICAgc3RkOjpzdHJpbmcJCXN1cmZhY2VfZW1pc3Npb25fdGV4dHVyZV9wYXRoICAgID0gIiI7CgogICAgYm9vbCAJCQlzdXJmYWNlX3VzZV9iYXNlY29sb3JfdGV4dHVyZSAgPSBmYWxzZTsKICAgIGJvb2wgCQkJc3VyZmFjZV91c2Vfcm91Z2huZXNzX3RleHR1cmUgID0gZmFsc2U7CiAgICBib29sIAkJCXN1cmZhY2VfdXNlX21ldGFsbGljX3RleHR1cmUgICA9IGZhbHNlOwogICAgYm9vbCAJCQlzdXJmYWNlX3VzZV9iYXNlbm9ybWFsX3RleHR1cmUgPSBmYWxzZTsKICAgIGJvb2wgCQkJc3VyZmFjZV91c2VfZW1pc3Npb25fdGV4dHVyZSAgID0gZmFsc2U7CgogICAgYm9vbCAgICAgICAgICAgIGZyb250X2ZhY2UgPSBmYWxzZTsKCiAgICBmbG9hdCAJCSAJc3VyZmFjZV9pb3IgPSAxLjU7CiAgICBmbG9hdCAJCQlzdXJmYWNlX21ldGFsbGljID0gMC4wOwogICAgZmxvYXQgCQkJc3VyZmFjZV9yb3VnaG5lc3MgPSAwLjM7CiAgICBmbG9hdCAJCQlzdXJmYWNlX3JlZmxlY3Rpdml0eSA9IDEuMDsKCiAgICBGYWxjb3I6OmZsb2F0MyAgZW1pc3NpdmVfY29sb3IgPSB7MC4wLCAwLjAsIDAuMH07CiAgICBmbG9hdCAgICAgICAgICAgZW1pc3NpdmVfZmFjdG9yID0gMS4wZjsKCiAgICBGYWxjb3I6OmZsb2F0MyAgdHJhbnNfY29sb3IgPSB7MS4wLCAxLjAsIDEuMH07CiAgICBmbG9hdCAgICAgICAgICAgdHJhbnNtaXNzaW9uID0gMC4wZjsKCiAgICBmbG9hdCAgICAgICAgICAgYW9fZGlzdGFuY2UgPSAxLjBmOwoKICAgIGlmKHBTaGFkZXJQcm9wKSB7CiAgICAJYXV0byBwU2hhZGVyUHJvcHMgPSBwU2hhZGVyUHJvcC0+c3ViQ29udGFpbmVyKCk7CiAgICAJc3VyZmFjZV9iYXNlX2NvbG9yID0gdG9fZmxvYXQzKHBTaGFkZXJQcm9wcy0+Z2V0UHJvcGVydHlWYWx1ZShhc3Q6OlN0eWxlOjpPQkpFQ1QsICJiYXNlY29sb3IiLCBsc2Q6OlZlY3RvcjN7MC4yLCAwLjIsIDAuMn0pKTsKICAgIAlzdXJmYWNlX2Jhc2VfY29sb3JfdGV4dHVyZV9wYXRoID0gcFNoYWRlclByb3BzLT5nZXRQcm9wZXJ0eVZhbHVlKGFzdDo6U3R5bGU6Ok9CSkVDVCwgImJhc2Vjb2xvcl90ZXh0dXJlIiwgc3RkOjpzdHJpbmcoKSk7CiAgICAJc3VyZmFjZV9iYXNlX25vcm1hbF90ZXh0dXJlX3BhdGggPSBwU2hhZGVyUHJvcHMtPmdldFByb3BlcnR5VmFsdWUoYXN0OjpTdHlsZTo6T0JKRUNULCAiYmFzZU5vcm1hbF90ZXh0dXJlIiwgc3RkOjpzdHJpbmcoKSk7CiAgICAJc3VyZmFjZV9tZXRhbGxpY190ZXh0dXJlX3BhdGggPSBwU2hhZGVyUHJvcHMtPmdldFByb3BlcnR5VmFsdWUoYXN0OjpTdHlsZTo6T0JKRUNULCAibWV0YWxsaWNfdGV4dHVyZSIsIHN0ZDo6c3RyaW5nKCkpOwogICAgCXN1cmZhY2Vfcm91Z2huZXNzX3RleHR1cmVfcGF0aCA9IHBTaGFkZXJQcm9wcy0+Z2V0UHJvcGVydHlWYWx1ZShhc3Q6OlN0eWxlOjpPQkpFQ1QsICJyb3VnaF90ZXh0dXJlIiwgc3RkOjpzdHJpbmcoKSk7CiAgICAJc3VyZmFjZV9lbWlzc2lvbl90ZXh0dXJlX3BhdGggPSBwU2hhZGVyUHJvcHMtPmdldFByb3BlcnR5VmFsdWUoYXN0OjpTdHlsZTo6T0JKRUNULCAiZW1pdGNvbG9yX3RleHR1cmUiLCBzdGQ6OnN0cmluZygpKTsKCiAgICAJc3VyZmFjZV91c2VfYmFzZWNvbG9yX3RleHR1cmUgPSBwU2hhZGVyUHJvcHMtPmdldFByb3BlcnR5VmFsdWUoYXN0OjpTdHlsZTo6T0JKRUNULCAiYmFzZWNvbG9yX3VzZVRleHR1cmUiLCBmYWxzZSk7CiAgICAJc3VyZmFjZV91c2VfbWV0YWxsaWNfdGV4dHVyZSA9IHBTaGFkZXJQcm9wcy0+Z2V0UHJvcGVydHlWYWx1ZShhc3Q6OlN0eWxlOjpPQkpFQ1QsICJtZXRhbGxpY191c2VUZXh0dXJlIiwgZmFsc2UpOwogICAgCXN1cmZhY2VfdXNlX3JvdWdobmVzc190ZXh0dXJlID0gcFNoYWRlclByb3BzLT5nZXRQcm9wZXJ0eVZhbHVlKGFzdDo6U3R5bGU6Ok9CSkVDVCwgInJvdWdoX3VzZVRleHR1cmUiLCBmYWxzZSk7CiAgICAJc3VyZmFjZV91c2VfZW1pc3Npb25fdGV4dHVyZSA9IHBTaGFkZXJQcm9wcy0+Z2V0UHJvcGVydHlWYWx1ZShhc3Q6OlN0eWxlOjpPQkpFQ1QsICJlbWl0Y29sb3JfdXNlVGV4dHVyZSIsIGZhbHNlKTsKICAgIAlzdXJmYWNlX3VzZV9iYXNlbm9ybWFsX3RleHR1cmUgPSBwU2hhZGVyUHJvcHMtPmdldFByb3BlcnR5VmFsdWUoYXN0OjpTdHlsZTo6T0JKRUNULCAiYmFzZUJ1bXBBbmROb3JtYWxfZW5hYmxlIiwgZmFsc2UpOwoKICAgIAlzdXJmYWNlX2lvciA9IHBTaGFkZXJQcm9wcy0+Z2V0UHJvcGVydHlWYWx1ZShhc3Q6OlN0eWxlOjpPQkpFQ1QsICJpb3IiLCAxLjVmKTsKICAgIAlzdXJmYWNlX21ldGFsbGljID0gcFNoYWRlclByb3BzLT5nZXRQcm9wZXJ0eVZhbHVlKGFzdDo6U3R5bGU6Ok9CSkVDVCwgIm1ldGFsbGljIiwgMC4wZik7CiAgICAJc3VyZmFjZV9yb3VnaG5lc3MgPSBwU2hhZGVyUHJvcHMtPmdldFByb3BlcnR5VmFsdWUoYXN0OjpTdHlsZTo6T0JKRUNULCAicm91Z2giLCAwLjNmKTsKICAgIAlzdXJmYWNlX3JlZmxlY3Rpdml0eSA9IHBTaGFkZXJQcm9wcy0+Z2V0UHJvcGVydHlWYWx1ZShhc3Q6OlN0eWxlOjpPQkpFQ1QsICJyZWZsZWN0IiwgMS4wZik7CgogICAgCWVtaXNzaXZlX2NvbG9yID0gdG9fZmxvYXQzKHBTaGFkZXJQcm9wcy0+Z2V0UHJvcGVydHlWYWx1ZShhc3Q6OlN0eWxlOjpPQkpFQ1QsICJlbWl0Y29sb3IiLCBsc2Q6OlZlY3RvcjN7MS4wLCAxLjAsIDEuMH0pKTsKICAgIAllbWlzc2l2ZV9mYWN0b3IgPSBwU2hhZGVyUHJvcHMtPmdldFByb3BlcnR5VmFsdWUoYXN0OjpTdHlsZTo6T0JKRUNULCAiZW1pdGludCIsIDAuMGYpOwoKICAgIAl0cmFuc19jb2xvciA9IHRvX2Zsb2F0MyhwU2hhZGVyUHJvcHMtPmdldFByb3BlcnR5VmFsdWUoYXN0OjpTdHlsZTo6T0JKRUNULCAidHJhbnNjb2xvciIsIGxzZDo6VmVjdG9yM3sxLjAsIDEuMCwgMS4wfSkpOwogICAgCXRyYW5zbWlzc2lvbiA9IHBTaGFkZXJQcm9wcy0+Z2V0UHJvcGVydHlWYWx1ZShhc3Q6OlN0eWxlOjpPQkpFQ1QsICJ0cmFuc3BhcmVuY3kiLCAwLjBmKTsKCiAgICAJYW9fZGlzdGFuY2UgPSBwU2hhZGVyUHJvcHMtPmdldFByb3BlcnR5VmFsdWUoYXN0OjpTdHlsZTo6T0JKRUNULCAiYW9fZGlzdGFuY2UiLCAxLjBmKTsKCiAgICAJZnJvbnRfZmFjZSA9IHBTaGFkZXJQcm9wcy0+Z2V0UHJvcGVydHlWYWx1ZShhc3Q6OlN0eWxlOjpPQkpFQ1QsICJmcm9udGZhY2UiLCBmYWxzZSk7CiAgICB9IGVsc2UgewogICAgCUxMT0dfRVJSIDw8ICJObyBzdXJmYWNlIHByb3BlcnR5IHNldCBmb3Igb2JqZWN0ICIgPDwgb2JqX25hbWU7CiAgICB9CgogICAgc3RkOjpzdHJpbmcgbWF0ZXJpYWxfbmFtZSA9IHBPYmotPmdldFByb3BlcnR5VmFsdWUoYXN0OjpTdHlsZTo6T0JKRUNULCAibWF0ZXJpYWxuYW1lIiwgc3RkOjpzdHJpbmcob2JqX25hbWUgKyAiX21hdGVyaWFsIikpOwogICAgCglGYWxjb3I6OlN0YW5kYXJkTWF0ZXJpYWw6OlNoYXJlZFB0ciBwTWF0ZXJpYWwgPSBzdGQ6OmR5bmFtaWNfcG9pbnRlcl9jYXN0PEZhbGNvcjo6U3RhbmRhcmRNYXRlcmlhbD4ocFNjZW5lQnVpbGRlci0+Z2V0TWF0ZXJpYWwobWF0ZXJpYWxfbmFtZSkpOwoJCglpZiAoIXBNYXRlcmlhbCkgewoJCS8vIEl0J3MgdGhlIGZpcnN0IHRpbWUgbWF0ZXJpYWwgZGVjbGFyYXRpb24gb3IgaW5zdGFuY2UgZGVmYXVsdCBtYXRlcmlhbCB0aGF0IHNob3VsZCBiZSByZXNvbHZlZCB0byBpbnN0YW5jZWQgb2JqZWN0IG1hdGVyaWFsIGluc3RlYWQgCgkJcE1hdGVyaWFsID0gRmFsY29yOjpTdGFuZGFyZE1hdGVyaWFsOjpjcmVhdGUobXBEZXZpY2UsIG1hdGVyaWFsX25hbWUpOwoJfQoKCWlmIChwTWF0ZXJpYWwpIHsKCSAgICBwTWF0ZXJpYWwtPnNldEJhc2VDb2xvcihzdXJmYWNlX2Jhc2VfY29sb3IpOwoJICAgIHBNYXRlcmlhbC0+c2V0SW5kZXhPZlJlZnJhY3Rpb24oc3VyZmFjZV9pb3IpOwoJICAgIHBNYXRlcmlhbC0+c2V0TWV0YWxsaWMoc3VyZmFjZV9tZXRhbGxpYyk7CgkgICAgcE1hdGVyaWFsLT5zZXRSb3VnaG5lc3Moc3VyZmFjZV9yb3VnaG5lc3MpOwoJICAgIHBNYXRlcmlhbC0+c2V0UmVmbGVjdGl2aXR5KHN1cmZhY2VfcmVmbGVjdGl2aXR5KTsKCSAgICBwTWF0ZXJpYWwtPnNldEVtaXNzaXZlQ29sb3IoZW1pc3NpdmVfY29sb3IpOwoJICAgIHBNYXRlcmlhbC0+c2V0RW1pc3NpdmVGYWN0b3IoZW1pc3NpdmVfZmFjdG9yKTsKCSAgICBwTWF0ZXJpYWwtPnNldEFPRGlzdGFuY2UoYW9fZGlzdGFuY2UpOwoJICAgIHBNYXRlcmlhbC0+c2V0RG91YmxlU2lkZWQoIWZyb250X2ZhY2UpOwoKCSAgICBwTWF0ZXJpYWwtPnNldFRyYW5zbWlzc2lvbkNvbG9yKHRyYW5zX2NvbG9yKTsKCSAgICBwTWF0ZXJpYWwtPnNldFNwZWN1bGFyVHJhbnNtaXNzaW9uKHRyYW5zbWlzc2lvbik7CgoJICAJLy9ib29sIGxvYWRBc1NyZ2IgPSB0cnVlOwoJICAgIGJvb2wgbG9hZFRleHR1cmVzQXNTcGFyc2UgPSAhbXBHbG9iYWwtPmdldFByb3BlcnR5VmFsdWUoYXN0OjpTdHlsZTo6R0xPQkFMLCAidnRvZmYiLCBib29sKGZhbHNlKSk7CgoJICAgIExMT0dfREJHIDw8ICJTZXR0aW5nICIgPDwgKGxvYWRUZXh0dXJlc0FzU3BhcnNlID8gInNwYXJzZSIgOiAic2ltcGxlIikgPDwgIiB0ZXh0dXJlcyBmb3IgbWF0ZXJpYWw6ICIgPDwgcE1hdGVyaWFsLT5nZXROYW1lKCk7CgoJICAgIGlmKHN1cmZhY2VfYmFzZV9jb2xvcl90ZXh0dXJlX3BhdGggIT0gIiIgJiYgc3VyZmFjZV91c2VfYmFzZWNvbG9yX3RleHR1cmUpIHsKCSAgICAJaWYoIXBTY2VuZUJ1aWxkZXItPmxvYWRNYXRlcmlhbFRleHR1cmUocE1hdGVyaWFsLCBGYWxjb3I6Ok1hdGVyaWFsOjpUZXh0dXJlU2xvdDo6QmFzZUNvbG9yLCBzdXJmYWNlX2Jhc2VfY29sb3JfdGV4dHVyZV9wYXRoLCBsb2FkVGV4dHVyZXNBc1NwYXJzZSkpIHsKCSAgICAJCXJldHVybiBmYWxzZTsKCSAgICAJfQoJICAgIH0KCgkgICAgaWYoc3VyZmFjZV9tZXRhbGxpY190ZXh0dXJlX3BhdGggIT0gIiIgJiYgc3VyZmFjZV91c2VfbWV0YWxsaWNfdGV4dHVyZSkgewoJICAgIAlpZighcFNjZW5lQnVpbGRlci0+bG9hZE1hdGVyaWFsVGV4dHVyZShwTWF0ZXJpYWwsIEZhbGNvcjo6TWF0ZXJpYWw6OlRleHR1cmVTbG90OjpNZXRhbGxpYywgc3VyZmFjZV9tZXRhbGxpY190ZXh0dXJlX3BhdGgsIGxvYWRUZXh0dXJlc0FzU3BhcnNlKSkgewoJICAgIAkJcmV0dXJuIGZhbHNlOwoJICAgIAl9CgkgICAgfQoKCSAgICBpZihzdXJmYWNlX2VtaXNzaW9uX3RleHR1cmVfcGF0aCAhPSAiIiAmJiBzdXJmYWNlX3VzZV9lbWlzc2lvbl90ZXh0dXJlKSB7IAoJICAgIAlpZighcFNjZW5lQnVpbGRlci0+bG9hZE1hdGVyaWFsVGV4dHVyZShwTWF0ZXJpYWwsIEZhbGNvcjo6TWF0ZXJpYWw6OlRleHR1cmVTbG90OjpFbWlzc2l2ZSwgc3VyZmFjZV9lbWlzc2lvbl90ZXh0dXJlX3BhdGgsIGxvYWRUZXh0dXJlc0FzU3BhcnNlKSkgewoJICAgIAkJcmV0dXJuIGZhbHNlOwoJICAgIAl9CgkgICAgfQoKCSAgICBpZihzdXJmYWNlX3JvdWdobmVzc190ZXh0dXJlX3BhdGggIT0gIiIgJiYgc3VyZmFjZV91c2Vfcm91Z2huZXNzX3RleHR1cmUpIHsKCSAgICAJaWYoIXBTY2VuZUJ1aWxkZXItPmxvYWRNYXRlcmlhbFRleHR1cmUocE1hdGVyaWFsLCBGYWxjb3I6Ok1hdGVyaWFsOjpUZXh0dXJlU2xvdDo6Um91Z2huZXNzLCBzdXJmYWNlX3JvdWdobmVzc190ZXh0dXJlX3BhdGgsIGxvYWRUZXh0dXJlc0FzU3BhcnNlKSkgewoJICAgIAkJcmV0dXJuIGZhbHNlOwoJICAgIAl9CgkgICAgfQoKCSAgICBpZihzdXJmYWNlX2Jhc2Vfbm9ybWFsX3RleHR1cmVfcGF0aCAhPSAiIiAmJiBzdXJmYWNlX3VzZV9iYXNlbm9ybWFsX3RleHR1cmUpIHsgCgkgICAgCWlmKCFwU2NlbmVCdWlsZGVyLT5sb2FkTWF0ZXJpYWxUZXh0dXJlKHBNYXRlcmlhbCwgRmFsY29yOjpNYXRlcmlhbDo6VGV4dHVyZVNsb3Q6Ok5vcm1hbCwgc3VyZmFjZV9iYXNlX25vcm1hbF90ZXh0dXJlX3BhdGgsIGxvYWRUZXh0dXJlc0FzU3BhcnNlKSkgewoJICAgIAkJcmV0dXJuIGZhbHNlOwoJICAgIAl9CgkgICAgfQoJfQoKCS8vIEluc3RhbmNlIGV4cG9ydGVkIGRhdGEKCVNjZW5lQnVpbGRlcjo6SW5zdGFuY2VFeHBvcnRlZERhdGFTcGVjIGV4cG9ydGVkU3BlYzsKCWV4cG9ydGVkU3BlYy5pZCA9IGV4cG9ydGVkSW5zdGFuY2VJRDsKCWV4cG9ydGVkU3BlYy5uYW1lID0gb2JqX25hbWU7CgogICAgLy8gSW5zdGFuY2Ugc2hhZGluZyBzcGVjCiAgICBTY2VuZUJ1aWxkZXI6Okluc3RhbmNlU2hhZGluZ1NwZWMgc2hhZGluZ1NwZWM7CiAgICBzaGFkaW5nU3BlYy5pc01hdHRlID0gcE9iai0+Z2V0UHJvcGVydHlWYWx1ZShhc3Q6OlN0eWxlOjpPQkpFQ1QsICJtYXR0ZSIsIGZhbHNlKTsKICAgIHNoYWRpbmdTcGVjLmZpeFNoYWRvd1Rlcm1pbmF0b3IgPSBwT2JqLT5nZXRQcm9wZXJ0eVZhbHVlKGFzdDo6U3R5bGU6Ok9CSkVDVCwgImZpeF9zaGFkb3ciLCB0cnVlKTsKICAgIHNoYWRpbmdTcGVjLmJpYXNBbG9uZ05vcm1hbCA9IHBPYmotPmdldFByb3BlcnR5VmFsdWUoYXN0OjpTdHlsZTo6T0JKRUNULCAiYmlhc25vcm1hbCIsIGZhbHNlKTsKICAgIHNoYWRpbmdTcGVjLmRvdWJsZVNpZGVkID0gcE9iai0+Z2V0UHJvcGVydHlWYWx1ZShhc3Q6OlN0eWxlOjpPQkpFQ1QsICJkb3VibGVfc2lkZWQiLCB0cnVlKTsKCiAgICAvLyBJbnN0YW5jZSB2aXNpYmlsaXR5IHNwZWMKICAgIFNjZW5lQnVpbGRlcjo6SW5zdGFuY2VWaXNpYmlsaXR5U3BlYyB2aXNpYmlsaXR5U3BlYzsKICAgIHZpc2liaWxpdHlTcGVjLnZpc2libGVUb1ByaW1hcnlSYXlzID0gcE9iai0+Z2V0UHJvcGVydHlWYWx1ZShhc3Q6OlN0eWxlOjpPQkpFQ1QsICJ2aXNpYmxlX3ByaW1hcnkiLCB0cnVlKTsKICAgIHZpc2liaWxpdHlTcGVjLnZpc2libGVUb1NoYWRvd1JheXMgPSBwT2JqLT5nZXRQcm9wZXJ0eVZhbHVlKGFzdDo6U3R5bGU6Ok9CSkVDVCwgInZpc2libGVfc2hhZG93cyIsIHRydWUpOwogICAgdmlzaWJpbGl0eVNwZWMudmlzaWJsZVRvRGlmZnVzZVJheXMgPSBwT2JqLT5nZXRQcm9wZXJ0eVZhbHVlKGFzdDo6U3R5bGU6Ok9CSkVDVCwgInZpc2libGVfZGlmZnVzZSIsIHRydWUpOwogICAgdmlzaWJpbGl0eVNwZWMudmlzaWJsZVRvUmVmbGVjdGlvblJheXMgPSBwT2JqLT5nZXRQcm9wZXJ0eVZhbHVlKGFzdDo6U3R5bGU6Ok9CSkVDVCwgInZpc2libGVfcmVmbGVjdCIsIHRydWUpOwogICAgdmlzaWJpbGl0eVNwZWMudmlzaWJsZVRvUmVmcmFjdGlvblJheXMgPSBwT2JqLT5nZXRQcm9wZXJ0eVZhbHVlKGFzdDo6U3R5bGU6Ok9CSkVDVCwgInZpc2libGVfcmVmcmFjdCIsIHRydWUpOwogICAgdmlzaWJpbGl0eVNwZWMucmVjZWl2ZVNoYWRvd3MgPSBwT2JqLT5nZXRQcm9wZXJ0eVZhbHVlKGFzdDo6U3R5bGU6Ok9CSkVDVCwgInJlY2VpdmVfc2hhZG93cyIsIHRydWUpOwogICAgdmlzaWJpbGl0eVNwZWMucmVjZWl2ZVNlbGZTaGFkb3dzID0gcE9iai0+Z2V0UHJvcGVydHlWYWx1ZShhc3Q6OlN0eWxlOjpPQkpFQ1QsICJyZWNlaXZlX3NlbGZfc2hhZG93cyIsIHRydWUpOwogICAgCiAgICBTY2VuZUJ1aWxkZXI6Ok1lc2hJbnN0YW5jZUNyZWF0aW9uU3BlYyBjcmVhdGlvblNwZWM7CiAgICBjcmVhdGlvblNwZWMucEV4cG9ydGVkRGF0YVNwZWMgPSAmZXhwb3J0ZWRTcGVjOwogICAgY3JlYXRpb25TcGVjLnBWaXNpYmlsaXR5U3BlYyA9ICZ2aXNpYmlsaXR5U3BlYzsKICAgIGNyZWF0aW9uU3BlYy5wU2hhZGluZ1NwZWMgPSAmc2hhZGluZ1NwZWM7CiAgICBjcmVhdGlvblNwZWMucE1hdGVyaWFsT3ZlcnJpZGUgPSBwTWF0ZXJpYWw7CgogICAgLy8gQWRkIGEgbWVzaCBpbnN0YW5jZSB0byBhIG5vZGUKICAgIHJldHVybiBwU2NlbmVCdWlsZGVyLT5hZGRNZXNoSW5zdGFuY2Uobm9kZV9pZCwgbWVzaF9pZCwgJmNyZWF0aW9uU3BlYyk7Cn0KCgpib29sIFNlc3Npb246OmNtZEdlb21ldHJ5KGNvbnN0IHN0ZDo6c3RyaW5nJiBuYW1lKSB7CiAJaWYoIG1wQ3VycmVudFNjb3BlLT50eXBlKCkgIT0gYXN0OjpTdHlsZTo6T0JKRUNUKSB7CiAJCUxMT0dfRVJSIDw8ICJjbWRfZ2VvbWV0cnkgb3V0c2lkZSBvYmplY3Qgc2NvcGUgISEhIjsKIAkJcmV0dXJuIGZhbHNlOwogCX0KCiAJYXV0byBwT2JqID0gc3RkOjpkeW5hbWljX3BvaW50ZXJfY2FzdDxzY29wZTo6T2JqZWN0PihtcEN1cnJlbnRTY29wZSk7CiAJcE9iai0+c2V0R2VvbWV0cnlOYW1lKG5hbWUpOwoKIAlyZXR1cm4gdHJ1ZTsKfQoKdm9pZCBTZXNzaW9uOjpjbWRUaW1lKGRvdWJsZSB0aW1lKSB7CgltQ3VycmVudFRpbWUgPSB0aW1lOwoJbXBSZW5kZXJlci0+aW5pdChtUmVuZGVyZXJDb25maWcpOwp9CgoKfSAgLy8gbmFtZXNwYWNlIGxzZAoKfSAgLy8gbmFtZXNwYWNlIGxhdmEAAAAAAAAAAB9NAAAAAAAAAAAAAAAAAAAAAAAAH00AAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAC9hQAAAAAAAL2FAAAAAAAAAAAAAAAA8L8"
				]
			]
		},
		{
			"contents": "#include <chrono>\n#include <exception>\n\n#include \"visitor.h\"\n#include \"session.h\"\n#include \"uudecode.h\"\n\n#include \"properties_container.h\"\n\nnamespace x3 = boost::spirit::x3;\nnamespace fs = boost::filesystem;\n\nnamespace lava { \n\nnamespace lsd {\n\nbool readEmbeddedFileUU(std::istream* pParserStream, size_t size, std::vector<unsigned char>& decoded_data) {\n    LLOG_DBG << \"Reading \" << size << \" bytes of embedded data\";\n\n    bool result = true;\n    std::istream &in = *pParserStream;\n\n    std::vector<char> buff(size);\n \n    // read size amount of bytes from stream into buff\n    in.unsetf(std::ios::skipws);\n    in.read((char *)buff.data(), size);\n    in.setf(std::ios::skipws);\n\n    // decode data\n    FILE* inMemFile = fmemopen((void *)buff.data(), size, \"rw\");\n    \n    FILE* outTestFile = fopen(\"/home/max/Desktop/mistery_file_decoded\", \"w\");\n\n    if(!uu::decodeUU(inMemFile, outTestFile)) {\n        LLOG_DBG << \"Error decoding embedded data !!!\";\n    }\n\n    fclose(inMemFile);\n    \n    if(outTestFile)\n        fclose(outTestFile);\n    // test write\n    //std::ofstream fout(\"/home/max/Desktop/mistery_file\", std::ios::out | std::ios::binary);\n    //fout.write((char*)&buff[0], buff.size() * sizeof(unsigned char));\n    //fout.close();\n\n    return result;\n}\n\nbool readInlineBGEO(std::istream* pParserStream, ika::bgeo::Bgeo::SharedPtr pBgeo) {\n    auto t1 = std::chrono::high_resolution_clock::now();\n    \n    uint lines = 0;\n    std::string bgeo_str;\n    bgeo_str.reserve(104857600); // 100MB\n\n    std::string str;\n    str.reserve(10485760); // 10MB\n\n    uint oc = 0; // open brackets count\n    uint cc = 0; // closing brackets count\n    \n    bool bgeo_json_found = false;\n    char* char_ptr = nullptr;\n    std::istream &in = *pParserStream;\n    while( std::getline(in, str) ){\n        bgeo_str += str;\n        lines += 1;\n        char_ptr = str.data();\n        \n        for (uint i = 0; i < str.size(); i++)  {\n            if (*(char_ptr) == '[') { oc++; }    \n            else if (*(char_ptr) == ']') { cc++; }\n            if((oc > 0) && (oc == cc)){\n                bgeo_json_found = true;\n                break;\n            }\n        }\n\n        if(bgeo_json_found)\n            break;\n    }\n\n    if (!bgeo_json_found)\n        return false;\n\n    auto t2 = std::chrono::high_resolution_clock::now();\n    auto duration = std::chrono::duration_cast<std::chrono::milliseconds>( t2 - t1 ).count();\n    \n    LLOG_DBG << \"Inline BGEO \" << lines << \"lines read in: \" << duration << \" milsec.\";\n    LLOG_DBG << \"Inline BGEO string size: \" << bgeo_str.size() << \" bytes.\";\n\n    t1 = std::chrono::high_resolution_clock::now();\n    pBgeo->readInlineGeo(bgeo_str, false);\n    t2 = std::chrono::high_resolution_clock::now();\n    duration = std::chrono::duration_cast<std::chrono::milliseconds>( t2 - t1 ).count();\n    LLOG_DBG << \"BGEO object parsed in: \" << duration << \" milsecs.\";\n    \n    return true;\n}\n\nVisitor::Visitor(std::unique_ptr<Session>& pSession): mpSession(std::move(pSession)), mpParserStream(nullptr), mIgnoreCommands(false) { } \n\nvoid Visitor::setParserStream(std::istream& in) {\n    if (!mpParserStream) {\n        mpParserStream = &in;\n    }\n}\n\nvoid Visitor::operator()(ast::ifthen const& c) {\n    if (!c.expr) {\n        // false expression evaluation, ignore commands until 'endif'\n        mIgnoreCommands = true;\n    }\n}\n\nvoid Visitor::operator()(ast::endif const& c) {\n    if (mIgnoreCommands)\n        mIgnoreCommands = false;\n}\n\nvoid Visitor::operator()(ast::setenv const& c) const {\n    std::cout << \"Visitor setenv\\n\";\n    mpSession->cmdSetEnv(c.key, c.value);\n};\n\nvoid Visitor::operator()(ast::cmd_image const& c) const {\n    mpSession->cmdImage(c.display_type, c.filename);\n}\n\nvoid Visitor::operator()(ast::cmd_quit const& c) const { \n    std::cout << \"LSDVisitor cmd_quit\\n\";\n}\n\nvoid Visitor::operator()(ast::cmd_start const& c) const {\n    std::cout << \"LSDVisitor cmd_start\\n\";\n    if(!mpSession->cmdStart(c.object_type))\n        throw std::runtime_error(\"Error starting new scope !!!\");\n}\n\nvoid Visitor::operator()(ast::cmd_end const& c) const { \n    std::cout << \"LSDVisitor cmd_end\\n\";\n    if(!mpSession->cmdEnd())\n        throw std::runtime_error(\"Error ending current scope !!!\");\n}\n\nvoid Visitor::operator()(ast::cmd_time const& c) const {\n    mpSession->cmdTime(c.time);\n}\n\nvoid Visitor::operator()(ast::cmd_detail const& c) {\n    auto pGeo = mpSession->getCurrentGeo();\n    pGeo->setDetailFilename(c.filename);\n    pGeo->setDetailName(c.name);\n    \n    if(!pGeo) {\n        LLOG_ERR << \"Unable to process cmd_detail out of Geo scope !!!\";\n        throw std::runtime_error(\"Unable to process cmd_detail out of Geo scope !!!\");\n    }\n\n    ika::bgeo::Bgeo::SharedPtr pBgeo = pGeo->bgeo();\n    if(c.filename == \"stdin\") {\n        bool result = readInlineBGEO(mpParserStream, pBgeo);\n        if (!result) {\n            LLOG_ERR << \"Error reading inline bgeo !!!\";\n            return;\n        }\n        pBgeo->preCachePrimitives();\n    } else {\n        pBgeo->readGeoFromFile(mpSession->getExpandedString(c.filename).c_str(), false); // FIXME: don't check version for now\n        pBgeo->preCachePrimitives();\n    }\n}\n\nvoid Visitor::operator()(ast::cmd_version const& c) const {\n\n}\n\nvoid Visitor::operator()(ast::cmd_config const& c) const {\n    mpSession->cmdConfig(c.filename);\n}\n\nvoid Visitor::operator()(ast::cmd_defaults const& c) const {\n\n}\n\nvoid Visitor::operator()(ast::cmd_transform const& c) const {\n    mpSession->cmdTransform(c.m);\n}\n\nvoid Visitor::operator()(ast::cmd_iprmode const& c) const {\n    mpSession->cmdIPRmode(c.mode);\n}\n\nvoid Visitor::operator()(ast::cmd_mtransform const& c) const {\n    mpSession->cmdMTransform(c.m);\n}\n\nvoid Visitor::operator()(ast::cmd_geometry const& c) const {\n    mpSession->cmdGeometry(c.geometry_name);\n}\n\nvoid Visitor::operator()(ast::cmd_deviceoption const& c) const {\n\n}\n\nvoid Visitor::operator()(ast::cmd_property const& c) const {\n    if (c.values.size() == 0)\n        return;\n\n    if (c.values.size() != 1) {\n        std::vector<std::pair<std::string, Property::Value>> v;\n        for(auto const& value: c.values) {\n            v.push_back({value.first, value.second.get()});\n        }\n        mpSession->cmdPropertyV(c.style, v);\n        return;\n    }\n   \n   auto const& value = c.values[0];\n   mpSession->cmdProperty(c.style, value.first, value.second.get());\n}\n\nvoid Visitor::operator()(ast::cmd_declare const& c) const {\n    if(!c.values.size())\n        return;\n\n    if (c.values.size() > 1) {\n        LLOG_WRN << \"Value arrays not supported !!! Ignored for token: \" << c.token;\n        return;\n    }\n\n    mpSession->cmdDeclare(c.style, c.type, c.token, c.values[0]);\n}\n\nvoid Visitor::operator()(ast::cmd_raytrace const& c) const {\n    if(!mpSession->cmdRaytrace())\n        throw std::runtime_error(\"Error rendering image !!!\");\n}\n\nvoid Visitor::operator()(ast::cmd_reset const& c) const {\n\n}\n\nvoid Visitor::operator()(ast::ray_embeddedfile const& c) const {\n    auto pScope = mpSession->getCurrentScope();\n    if(!pScope)\n        return;\n\n    if(c.encoding == ast::EmbedDataEncoding::UUENCODED) {\n        if(readEmbeddedFileUU(mpParserStream, c.size, pScope->getEmbeddedData(c.name))) {\n            LLOG_DBG << \"Read embedded data size: \" << pScope->getEmbeddedData(c.name).size();\n        }\n    } else {\n        LLOG_WRN << \"Unknown embedded data encoding !!!\";\n        return;\n    }\n}\n\n}  // namespace lsd\n\n}  // namespace lava\n",
			"file": "src/lava_lib/reader_lsd/visitor.cpp",
			"file_size": 7415,
			"file_write_time": 133352798597267383,
			"settings":
			{
				"buffer_size": 7415,
				"encoding": "UTF-8",
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					4,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAAO4PAAAAAAAA7w8AAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADuDwAAAAAAAO4PAAAAAAAAAAAAAAAA8L8"
				],
				[
					5,
					1,
					"wrap_block",
					{
						"begin": "{",
						"end": "}"
					},
					"AgAAAO8PAAAAAAAA8A8AAAAAAAAAAAAANRAAAAAAAAA7EAAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADvDwAAAAAAAO8PAAAAAAAAAAAAAAAA8L8"
				],
				[
					10,
					1,
					"insert",
					{
						"characters": "//"
					},
					"AgAAAPkPAAAAAAAA+g8AAAAAAAAAAAAA+g8AAAAAAAD7DwAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAD5DwAAAAAAAPkPAAAAAAAAAAAAAAAA8L8"
				],
				[
					13,
					2,
					"left_delete",
					null,
					"AgAAAN0UAAAAAAAA3RQAAAAAAAAtAQAAICAgIC8qCiAgICAgZWxzZSB7CiAgICAgICAgYXV0byBmdWxscGF0aCA9IG1wU2Vzc2lvbi0+Z2V0RXhwYW5kZWRTdHJpbmcoYy5maWxlbmFtZSk7CiAgICAgICAgcEJnZW8tPnJlYWRHZW9Gcm9tRmlsZShmdWxscGF0aC5jX3N0cigpLCBmYWxzZSk7IC8vIEZJWE1FOiBkb24ndCBjaGVjayB2ZXJzaW9uIGZvciBub3cKCiAgICAgICAgaWYoYy50ZW1wb3JhcnkpIHsKICAgICAgICAgICAgZnM6OnJlbW92ZShmdWxscGF0aCk7CiAgICAgICAgfQoKICAgICAgICBwQmdlby0+cHJlQ2FjaGVQcmltaXRpdmVzKCk7CiAgICB9CiAgICAqL9wUAAAAAAAA3BQAAAAAAAABAAAACg",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAKFgAAAAAAAN0UAAAAAAAAAAAAAAAA8L8"
				],
				[
					18,
					1,
					"insert",
					{
						"characters": "\nmFa"
					},
					"BgAAAPAPAAAAAAAA8Q8AAAAAAAAAAAAA8Q8AAAAAAAD1DwAAAAAAAAAAAAD1DwAAAAAAAPkPAAAAAAAAAAAAAPkPAAAAAAAA+g8AAAAAAAAAAAAA+g8AAAAAAAD7DwAAAAAAAAAAAAD7DwAAAAAAAPwPAAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADwDwAAAAAAAPAPAAAAAAAAAAAAAAAA8L8"
				],
				[
					19,
					1,
					"insert",
					{
						"characters": "il"
					},
					"AgAAAPwPAAAAAAAA/Q8AAAAAAAAAAAAA/Q8AAAAAAAD+DwAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAD8DwAAAAAAAPwPAAAAAAAAAAAAAAAA8L8"
				],
				[
					20,
					1,
					"insert",
					{
						"characters": "ed"
					},
					"AgAAAP4PAAAAAAAA/w8AAAAAAAAAAAAA/w8AAAAAAAAAEAAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAD+DwAAAAAAAP4PAAAAAAAAAAAAAAAA8L8"
				],
				[
					21,
					1,
					"insert",
					{
						"characters": " ="
					},
					"AgAAAAAQAAAAAAAAARAAAAAAAAAAAAAAARAAAAAAAAACEAAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAA8L8"
				],
				[
					22,
					1,
					"insert",
					{
						"characters": " tr"
					},
					"AwAAAAIQAAAAAAAAAxAAAAAAAAAAAAAAAxAAAAAAAAAEEAAAAAAAAAAAAAAEEAAAAAAAAAUQAAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAACEAAAAAAAAAIQAAAAAAAAAAAAAAAA8L8"
				],
				[
					23,
					1,
					"insert_completion",
					{
						"completion": "true",
						"format": "text",
						"keep_prefix": false,
						"must_insert": false,
						"trigger": "true"
					},
					"AgAAAAMQAAAAAAAAAxAAAAAAAAACAAAAdHIDEAAAAAAAAAcQAAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAFEAAAAAAAAAUQAAAAAAAAAAAAAAAA8L8"
				],
				[
					24,
					1,
					"insert",
					{
						"characters": ";"
					},
					"AQAAAAcQAAAAAAAACBAAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAHEAAAAAAAAAcQAAAAAAAAAAAAAAAA8L8"
				],
				[
					27,
					1,
					"insert",
					{
						"characters": "LLO"
					},
					"BAAAAPkPAAAAAAAA+g8AAAAAAAAAAAAA+g8AAAAAAAD6DwAAAAAAADMAAABtRmFpbGVkID0gdHJ1ZTsKICAgICAgICAvL3Rocm93IHN0ZDo6cnVudGltZV9lcnJvcij6DwAAAAAAAPsPAAAAAAAAAAAAAPsPAAAAAAAA/A8AAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAsEAAAAAAAAPkPAAAAAAAAAAAAAAAA8L8"
				],
				[
					29,
					1,
					"insert_completion",
					{
						"completion": "LLOG_ERR",
						"format": "text",
						"keep_prefix": false,
						"must_insert": false,
						"trigger": "LLOG_ERR"
					},
					"AgAAAPkPAAAAAAAA+Q8AAAAAAAADAAAATExP+Q8AAAAAAAABEAAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAD8DwAAAAAAAPwPAAAAAAAAAAAAAAAA8L8"
				],
				[
					30,
					1,
					"insert",
					{
						"characters": " <<"
					},
					"AwAAAAEQAAAAAAAAAhAAAAAAAAAAAAAAAhAAAAAAAAADEAAAAAAAAAAAAAADEAAAAAAAAAQQAAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAABEAAAAAAAAAEQAAAAAAAAAAAAAAAA8L8"
				],
				[
					31,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAAAQQAAAAAAAABRAAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAEEAAAAAAAAAQQAAAAAAAAAAAAAAAA8L8"
				],
				[
					34,
					1,
					"right_delete",
					null,
					"AQAAACUQAAAAAAAAJRAAAAAAAAABAAAAKQ",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAlEAAAAAAAACUQAAAAAAAAAAAAAAAA8L8"
				],
				[
					38,
					1,
					"insert",
					{
						"characters": "\n\nbool"
					},
					"BgAAAGMMAAAAAAAAZAwAAAAAAAAAAAAAZAwAAAAAAABlDAAAAAAAAAAAAABlDAAAAAAAAGYMAAAAAAAAAAAAAGYMAAAAAAAAZwwAAAAAAAAAAAAAZwwAAAAAAABoDAAAAAAAAAAAAABoDAAAAAAAAGkMAAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABjDAAAAAAAAGMMAAAAAAAAAAAAAAAA8L8"
				],
				[
					39,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAAGkMAAAAAAAAagwAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABpDAAAAAAAAGkMAAAAAAAAAAAAAAAA8L8"
				],
				[
					40,
					1,
					"paste",
					null,
					"AQAAAGoMAAAAAAAAswwAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABqDAAAAAAAAGoMAAAAAAAAAAAAAAAA8L8"
				],
				[
					46,
					1,
					"paste",
					null,
					"AgAAAGsMAAAAAAAAdAwAAAAAAAAAAAAAdAwAAAAAAAB0DAAAAAAAAAUAAABib29sIA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABrDAAAAAAAAHAMAAAAAAAAAAAAAAAA8L8"
				],
				[
					50,
					1,
					"right_delete",
					null,
					"AQAAAGoMAAAAAAAAagwAAAAAAAABAAAAIA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABqDAAAAAAAAGoMAAAAAAAAAAAAAAAA8L8"
				],
				[
					1,
					1,
					"revert",
					null,
					"AwAAAAAAAAAAAAAAAAAAAAAAAAAnHgAAI2luY2x1ZGUgPGNocm9ubz4KI2luY2x1ZGUgPGV4Y2VwdGlvbj4KCiNpbmNsdWRlICJ2aXNpdG9yLmgiCiNpbmNsdWRlICJzZXNzaW9uLmgiCiNpbmNsdWRlICJ1dWRlY29kZS5oIgoKI2luY2x1ZGUgInByb3BlcnRpZXNfY29udGFpbmVyLmgiCgpuYW1lc3BhY2UgeDMgPSBib29zdDo6c3Bpcml0Ojp4MzsKbmFtZXNwYWNlIGZzID0gYm9vc3Q6OmZpbGVzeXN0ZW07CgpuYW1lc3BhY2UgbGF2YSB7IAoKbmFtZXNwYWNlIGxzZCB7Cgpib29sIHJlYWRFbWJlZGRlZEZpbGVVVShzdGQ6OmlzdHJlYW0qIHBQYXJzZXJTdHJlYW0sIHNpemVfdCBzaXplLCBzdGQ6OnZlY3Rvcjx1bnNpZ25lZCBjaGFyPiYgZGVjb2RlZF9kYXRhKSB7CiAgICBMTE9HX0RCRyA8PCAiUmVhZGluZyAiIDw8IHNpemUgPDwgIiBieXRlcyBvZiBlbWJlZGRlZCBkYXRhIjsKCiAgICBib29sIHJlc3VsdCA9IHRydWU7CiAgICBzdGQ6OmlzdHJlYW0gJmluID0gKnBQYXJzZXJTdHJlYW07CgogICAgc3RkOjp2ZWN0b3I8Y2hhcj4gYnVmZihzaXplKTsKIAogICAgLy8gcmVhZCBzaXplIGFtb3VudCBvZiBieXRlcyBmcm9tIHN0cmVhbSBpbnRvIGJ1ZmYKICAgIGluLnVuc2V0ZihzdGQ6Omlvczo6c2tpcHdzKTsKICAgIGluLnJlYWQoKGNoYXIgKilidWZmLmRhdGEoKSwgc2l6ZSk7CiAgICBpbi5zZXRmKHN0ZDo6aW9zOjpza2lwd3MpOwoKICAgIC8vIGRlY29kZSBkYXRhCiAgICBGSUxFKiBpbk1lbUZpbGUgPSBmbWVtb3Blbigodm9pZCAqKWJ1ZmYuZGF0YSgpLCBzaXplLCAicnciKTsKICAgIAogICAgRklMRSogb3V0VGVzdEZpbGUgPSBmb3BlbigiL2hvbWUvbWF4L0Rlc2t0b3AvbWlzdGVyeV9maWxlX2RlY29kZWQiLCAidyIpOwoKICAgIGlmKCF1dTo6ZGVjb2RlVVUoaW5NZW1GaWxlLCBvdXRUZXN0RmlsZSkpIHsKICAgICAgICBMTE9HX0RCRyA8PCAiRXJyb3IgZGVjb2RpbmcgZW1iZWRkZWQgZGF0YSAhISEiOwogICAgfQoKICAgIGZjbG9zZShpbk1lbUZpbGUpOwogICAgCiAgICBpZihvdXRUZXN0RmlsZSkKICAgICAgICBmY2xvc2Uob3V0VGVzdEZpbGUpOwogICAgLy8gdGVzdCB3cml0ZQogICAgLy9zdGQ6Om9mc3RyZWFtIGZvdXQoIi9ob21lL21heC9EZXNrdG9wL21pc3RlcnlfZmlsZSIsIHN0ZDo6aW9zOjpvdXQgfCBzdGQ6Omlvczo6YmluYXJ5KTsKICAgIC8vZm91dC53cml0ZSgoY2hhciopJmJ1ZmZbMF0sIGJ1ZmYuc2l6ZSgpICogc2l6ZW9mKHVuc2lnbmVkIGNoYXIpKTsKICAgIC8vZm91dC5jbG9zZSgpOwoKICAgIHJldHVybiByZXN1bHQ7Cn0KCmJvb2wgcmVhZElubGluZUJHRU8oc3RkOjppc3RyZWFtKiBwUGFyc2VyU3RyZWFtLCBpa2E6OmJnZW86OkJnZW86OlNoYXJlZFB0ciBwQmdlbykgewogICAgYXV0byB0MSA9IHN0ZDo6Y2hyb25vOjpoaWdoX3Jlc29sdXRpb25fY2xvY2s6Om5vdygpOwogICAgCiAgICB1aW50IGxpbmVzID0gMDsKICAgIHN0ZDo6c3RyaW5nIGJnZW9fc3RyOwogICAgYmdlb19zdHIucmVzZXJ2ZSgxMDQ4NTc2MDApOyAvLyAxMDBNQgoKICAgIHN0ZDo6c3RyaW5nIHN0cjsKICAgIHN0ci5yZXNlcnZlKDEwNDg1NzYwKTsgLy8gMTBNQgoKICAgIHVpbnQgb2MgPSAwOyAvLyBvcGVuIGJyYWNrZXRzIGNvdW50CiAgICB1aW50IGNjID0gMDsgLy8gY2xvc2luZyBicmFja2V0cyBjb3VudAogICAgCiAgICBib29sIGJnZW9fanNvbl9mb3VuZCA9IGZhbHNlOwogICAgY2hhciogY2hhcl9wdHIgPSBudWxscHRyOwogICAgc3RkOjppc3RyZWFtICZpbiA9ICpwUGFyc2VyU3RyZWFtOwogICAgd2hpbGUoIHN0ZDo6Z2V0bGluZShpbiwgc3RyKSApewogICAgICAgIGJnZW9fc3RyICs9IHN0cjsKICAgICAgICBsaW5lcyArPSAxOwogICAgICAgIGNoYXJfcHRyID0gc3RyLmRhdGEoKTsKICAgICAgICAKICAgICAgICBmb3IgKHVpbnQgaSA9IDA7IGkgPCBzdHIuc2l6ZSgpOyBpKyspICB7CiAgICAgICAgICAgIGlmICgqKGNoYXJfcHRyKSA9PSAnWycpIHsgb2MrKzsgfSAgICAKICAgICAgICAgICAgZWxzZSBpZiAoKihjaGFyX3B0cikgPT0gJ10nKSB7IGNjKys7IH0KICAgICAgICAgICAgaWYoKG9jID4gMCkgJiYgKG9jID09IGNjKSl7CiAgICAgICAgICAgICAgICBiZ2VvX2pzb25fZm91bmQgPSB0cnVlOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGlmKGJnZW9fanNvbl9mb3VuZCkKICAgICAgICAgICAgYnJlYWs7CiAgICB9CgogICAgaWYgKCFiZ2VvX2pzb25fZm91bmQpCiAgICAgICAgcmV0dXJuIGZhbHNlOwoKICAgIGF1dG8gdDIgPSBzdGQ6OmNocm9ubzo6aGlnaF9yZXNvbHV0aW9uX2Nsb2NrOjpub3coKTsKICAgIGF1dG8gZHVyYXRpb24gPSBzdGQ6OmNocm9ubzo6ZHVyYXRpb25fY2FzdDxzdGQ6OmNocm9ubzo6bWlsbGlzZWNvbmRzPiggdDIgLSB0MSApLmNvdW50KCk7CiAgICAKICAgIExMT0dfREJHIDw8ICJJbmxpbmUgQkdFTyAiIDw8IGxpbmVzIDw8ICJsaW5lcyByZWFkIGluOiAiIDw8IGR1cmF0aW9uIDw8ICIgbWlsc2VjLiI7CiAgICBMTE9HX0RCRyA8PCAiSW5saW5lIEJHRU8gc3RyaW5nIHNpemU6ICIgPDwgYmdlb19zdHIuc2l6ZSgpIDw8ICIgYnl0ZXMuIjsKCiAgICB0MSA9IHN0ZDo6Y2hyb25vOjpoaWdoX3Jlc29sdXRpb25fY2xvY2s6Om5vdygpOwogICAgcEJnZW8tPnJlYWRJbmxpbmVHZW8oYmdlb19zdHIsIGZhbHNlKTsKICAgIHQyID0gc3RkOjpjaHJvbm86OmhpZ2hfcmVzb2x1dGlvbl9jbG9jazo6bm93KCk7CiAgICBkdXJhdGlvbiA9IHN0ZDo6Y2hyb25vOjpkdXJhdGlvbl9jYXN0PHN0ZDo6Y2hyb25vOjptaWxsaXNlY29uZHM+KCB0MiAtIHQxICkuY291bnQoKTsKICAgIExMT0dfREJHIDw8ICJCR0VPIG9iamVjdCBwYXJzZWQgaW46ICIgPDwgZHVyYXRpb24gPDwgIiBtaWxzZWNzLiI7CiAgICAKICAgIHJldHVybiB0cnVlOwp9CgpWaXNpdG9yOjpWaXNpdG9yKHN0ZDo6dW5pcXVlX3B0cjxTZXNzaW9uPiYgcFNlc3Npb24pOiBtcFNlc3Npb24oc3RkOjptb3ZlKHBTZXNzaW9uKSksIG1wUGFyc2VyU3RyZWFtKG51bGxwdHIpLCBtSWdub3JlQ29tbWFuZHMoZmFsc2UpLCBtUXVpdChmYWxzZSkgeyB9IAoKdm9pZCBWaXNpdG9yOjpzZXRQYXJzZXJTdHJlYW0oc3RkOjppc3RyZWFtJiBpbikgewogICAgaWYgKCFtcFBhcnNlclN0cmVhbSkgewogICAgICAgIG1wUGFyc2VyU3RyZWFtID0gJmluOwogICAgfQp9Cgpib29sIFZpc2l0b3I6OmZhaWxlZCgpIGNvbnN0IHsgcmV0dXJuIG1wU2Vzc2lvbiA/IG1wU2Vzc2lvbi0+ZmFpbGVkKCkgOiBmYWxzZTsgfTsKCnZvaWQgVmlzaXRvcjo6b3BlcmF0b3IoKShhc3Q6OmlmdGhlbiBjb25zdCYgYykgewogICAgaWYgKCFjLmV4cHIpIHsKICAgICAgICAvLyBmYWxzZSBleHByZXNzaW9uIGV2YWx1YXRpb24sIGlnbm9yZSBjb21tYW5kcyB1bnRpbCAnZW5kaWYnCiAgICAgICAgbUlnbm9yZUNvbW1hbmRzID0gdHJ1ZTsKICAgIH0KfQoKdm9pZCBWaXNpdG9yOjpvcGVyYXRvcigpKGFzdDo6ZW5kaWYgY29uc3QmIGMpIHsKICAgIGlmIChtSWdub3JlQ29tbWFuZHMpCiAgICAgICAgbUlnbm9yZUNvbW1hbmRzID0gZmFsc2U7Cn0KCnZvaWQgVmlzaXRvcjo6b3BlcmF0b3IoKShhc3Q6OnNldGVudiBjb25zdCYgYykgY29uc3QgewogICAgbXBTZXNzaW9uLT5jbWRTZXRFbnYoYy5rZXksIGMudmFsdWUpOwp9OwoKdm9pZCBWaXNpdG9yOjpvcGVyYXRvcigpKGFzdDo6Y21kX2ltYWdlIGNvbnN0JiBjKSBjb25zdCB7CiAgICBtcFNlc3Npb24tPmNtZEltYWdlKGMuZGlzcGxheV90eXBlLCBjLmZpbGVuYW1lKTsKfQoKdm9pZCBWaXNpdG9yOjpvcGVyYXRvcigpKGFzdDo6Y21kX3F1aXQgY29uc3QmIGMpIGNvbnN0IHsgCiAgICAvL21wU2Vzc2lvbi0+Y21kUXVpdCgpOwogICAgLy9tUXVpdCA9IHRydWU7CiAgICAvL3ByaW50ZigibVF1aXQgc2V0IHRvIHRydWVcbiIpOwp9Cgp2b2lkIFZpc2l0b3I6Om9wZXJhdG9yKCkoYXN0OjpjbWRfc3RhcnQgY29uc3QmIGMpIGNvbnN0IHsKICAgIGlmKCFtcFNlc3Npb24tPmNtZFN0YXJ0KGMub2JqZWN0X3R5cGUpKQogICAgICAgIHRocm93IHN0ZDo6cnVudGltZV9lcnJvcigiRXJyb3Igc3RhcnRpbmcgbmV3IHNjb3BlICEhISIpOwp9Cgp2b2lkIFZpc2l0b3I6Om9wZXJhdG9yKCkoYXN0OjpjbWRfZW5kIGNvbnN0JiBjKSBjb25zdCB7IAogICAgaWYoIW1wU2Vzc2lvbi0+Y21kRW5kKCkpIHsKICAgICAgICBMTE9HX0VSUiA8PCAiRXJyb3IgZW5kaW5nIGN1cnJlbnQgc2NvcGUgISEhIjsKICAgIH0KfQoKdm9pZCBWaXNpdG9yOjpvcGVyYXRvcigpKGFzdDo6Y21kX2VkZ2UgY29uc3QmIGMpIGNvbnN0IHsgCiAgICBtcFNlc3Npb24tPmNtZEVkZ2UoYy5zcmNfbm9kZV91dWlkLCBjLnNyY19ub2RlX291dHB1dF9zb2NrZXQsIGMuZHN0X25vZGVfdXVpZCwgYy5kc3Rfbm9kZV9pbnB1dF9zb2NrZXQpOwp9Cgp2b2lkIFZpc2l0b3I6Om9wZXJhdG9yKCkoYXN0OjpjbWRfc29ja2V0IGNvbnN0JiBjKSBjb25zdCB7IAogICAgaWYoIW1wU2Vzc2lvbi0+Y21kU29ja2V0KGMuZGlyZWN0aW9uLCBjLmRhdGFfdHlwZSwgYy5uYW1lKSkKICAgICAgICB0aHJvdyBzdGQ6OnJ1bnRpbWVfZXJyb3IoIkVycm9yIGFkZGluZyBub2RlIHNvY2tldCAhISEiKTsKfQoKdm9pZCBWaXNpdG9yOjpvcGVyYXRvcigpKGFzdDo6Y21kX3RpbWUgY29uc3QmIGMpIGNvbnN0IHsKICAgIG1wU2Vzc2lvbi0+Y21kVGltZShjLnRpbWUpOwp9Cgp2b2lkIFZpc2l0b3I6Om9wZXJhdG9yKCkoYXN0OjpjbWRfZGV0YWlsIGNvbnN0JiBjKSB7CiAgICBhdXRvIHBHZW8gPSBtcFNlc3Npb24tPmdldEN1cnJlbnRHZW8oKTsKCiAgICBpZighcEdlbykgewogICAgICAgIExMT0dfRVJSIDw8ICJVbmFibGUgdG8gcHJvY2VzcyBjbWRfZGV0YWlsIG91dCBvZiBHZW8gc2NvcGUgISEhIjsKICAgICAgICB0aHJvdyBzdGQ6OnJ1bnRpbWVfZXJyb3IoIlVuYWJsZSB0byBwcm9jZXNzIGNtZF9kZXRhaWwgb3V0IG9mIEdlbyBzY29wZSAhISEiKTsKICAgIH0KCiAgICBwR2VvLT5zZXREZXRhaWxGaWxlUGF0aChtcFNlc3Npb24tPmdldEV4cGFuZGVkU3RyaW5nKGMuZmlsZW5hbWUpKTsKICAgIHBHZW8tPnNldERldGFpbE5hbWUoYy5uYW1lKTsKICAgIHBHZW8tPnNldFRlbXBvcmFyeShjLnRlbXBvcmFyeSk7CgogICAgaWYoYy5maWxlbmFtZSA9PSAic3RkaW4iKSB7CiAgICAgICAgaWthOjpiZ2VvOjpCZ2VvOjpTaGFyZWRQdHIgcEJnZW8gPSBwR2VvLT5iZ2VvKCk7CiAgICAgICAgYm9vbCByZXN1bHQgPSByZWFkSW5saW5lQkdFTyhtcFBhcnNlclN0cmVhbSwgcEJnZW8pOwogICAgICAgIGlmICghcmVzdWx0KSB7CiAgICAgICAgICAgIExMT0dfRVJSIDw8ICJFcnJvciByZWFkaW5nIGlubGluZSBiZ2VvICEhISI7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgcEJnZW8tPnByZUNhY2hlUHJpbWl0aXZlcygpOwogICAgfQp9Cgp2b2lkIFZpc2l0b3I6Om9wZXJhdG9yKCkoYXN0OjpjbWRfdmVyc2lvbiBjb25zdCYgYykgY29uc3QgewoKfQoKdm9pZCBWaXNpdG9yOjpvcGVyYXRvcigpKGFzdDo6Y21kX2NvbmZpZyBjb25zdCYgYykgY29uc3QgewogICAgbXBTZXNzaW9uLT5jbWRDb25maWcoYy5wcm9wX3R5cGUsIGMucHJvcF9uYW1lLCBjLnByb3BfdmFsdWUpOwp9Cgp2b2lkIFZpc2l0b3I6Om9wZXJhdG9yKCkoYXN0OjpjbWRfZGVmYXVsdHMgY29uc3QmIGMpIGNvbnN0IHsKCn0KCnZvaWQgVmlzaXRvcjo6b3BlcmF0b3IoKShhc3Q6OmNtZF90cmFuc2Zvcm0gY29uc3QmIGMpIGNvbnN0IHsKICAgIG1wU2Vzc2lvbi0+Y21kVHJhbnNmb3JtKGMubSk7Cn0KCnZvaWQgVmlzaXRvcjo6b3BlcmF0b3IoKShhc3Q6OmNtZF9pcHJtb2RlIGNvbnN0JiBjKSBjb25zdCB7CiAgICBtcFNlc3Npb24tPmNtZElQUm1vZGUoYy5tb2RlLCBjLnN0YXNoKTsKfQoKdm9pZCBWaXNpdG9yOjpvcGVyYXRvcigpKGFzdDo6Y21kX210cmFuc2Zvcm0gY29uc3QmIGMpIGNvbnN0IHsKICAgIG1wU2Vzc2lvbi0+Y21kTVRyYW5zZm9ybShjLm0pOwp9Cgp2b2lkIFZpc2l0b3I6Om9wZXJhdG9yKCkoYXN0OjpjbWRfZ2VvbWV0cnkgY29uc3QmIGMpIGNvbnN0IHsKICAgIG1wU2Vzc2lvbi0+Y21kR2VvbWV0cnkoYy5nZW9tZXRyeV9uYW1lKTsKfQoKdm9pZCBWaXNpdG9yOjpvcGVyYXRvcigpKGFzdDo6Y21kX2RldmljZW9wdGlvbiBjb25zdCYgYykgY29uc3QgewoKfQoKdm9pZCBWaXNpdG9yOjpvcGVyYXRvcigpKGFzdDo6Y21kX3Byb3BlcnR5IGNvbnN0JiBjKSBjb25zdCB7CiAgICBpZiAoYy52YWx1ZXMuc2l6ZSgpID09IDApCiAgICAgICAgcmV0dXJuOwoKICAgIGlmIChjLnZhbHVlcy5zaXplKCkgIT0gMSkgewogICAgICAgIHN0ZDo6dmVjdG9yPHN0ZDo6cGFpcjxzdGQ6OnN0cmluZywgUHJvcGVydHk6OlZhbHVlPj4gdjsKICAgICAgICBmb3IoYXV0byBjb25zdCYgdmFsdWU6IGMudmFsdWVzKSB7CiAgICAgICAgICAgIHYucHVzaF9iYWNrKHt2YWx1ZS5maXJzdCwgdmFsdWUuc2Vjb25kLmdldCgpfSk7CiAgICAgICAgfQogICAgICAgIG1wU2Vzc2lvbi0+Y21kUHJvcGVydHlWKGMuc3R5bGUsIHYpOwogICAgICAgIHJldHVybjsKICAgIH0KICAgCiAgIGF1dG8gY29uc3QmIHZhbHVlID0gYy52YWx1ZXNbMF07CiAgIG1wU2Vzc2lvbi0+Y21kUHJvcGVydHkoYy5zdHlsZSwgdmFsdWUuZmlyc3QsIHZhbHVlLnNlY29uZC5nZXQoKSk7Cn0KCnZvaWQgVmlzaXRvcjo6b3BlcmF0b3IoKShhc3Q6OmNtZF9kZWNsYXJlIGNvbnN0JiBjKSBjb25zdCB7CiAgICBpZighYy52YWx1ZXMuc2l6ZSgpKQogICAgICAgIHJldHVybjsKCiAgICBpZiAoYy52YWx1ZXMuc2l6ZSgpID4gMSkgewogICAgICAgIExMT0dfV1JOIDw8ICJWYWx1ZSBhcnJheXMgbm90IHN1cHBvcnRlZCAhISEgSWdub3JlZCBmb3IgdG9rZW46ICIgPDwgYy50b2tlbjsKICAgICAgICByZXR1cm47CiAgICB9CgogICAgbXBTZXNzaW9uLT5jbWREZWNsYXJlKGMuc3R5bGUsIGMudHlwZSwgYy50b2tlbiwgYy52YWx1ZXNbMF0pOwp9Cgp2b2lkIFZpc2l0b3I6Om9wZXJhdG9yKCkoYXN0OjpjbWRfcmF5dHJhY2UgY29uc3QmIGMpIGNvbnN0IHsKICAgIGlmKCFtcFNlc3Npb24tPmNtZFJheXRyYWNlKCkpCiAgICAgICAgdGhyb3cgc3RkOjpydW50aW1lX2Vycm9yKCJFcnJvciByZW5kZXJpbmcgaW1hZ2UgISEhIik7Cn0KCnZvaWQgVmlzaXRvcjo6b3BlcmF0b3IoKShhc3Q6OmNtZF9yZXNldCBjb25zdCYgYykgY29uc3QgewoKfQoKdm9pZCBWaXNpdG9yOjpvcGVyYXRvcigpKGFzdDo6cmF5X2VtYmVkZGVkZmlsZSBjb25zdCYgYykgY29uc3QgewogICAgYXV0byBwU2NvcGUgPSBtcFNlc3Npb24tPmdldEN1cnJlbnRTY29wZSgpOwogICAgaWYoIXBTY29wZSkKICAgICAgICByZXR1cm47CgogICAgaWYoYy5lbmNvZGluZyA9PSBhc3Q6OkVtYmVkRGF0YUVuY29kaW5nOjpVVUVOQ09ERUQpIHsKICAgICAgICBpZihyZWFkRW1iZWRkZWRGaWxlVVUobXBQYXJzZXJTdHJlYW0sIGMuc2l6ZSwgcFNjb3BlLT5nZXRFbWJlZGRlZERhdGEoYy5uYW1lKSkpIHsKICAgICAgICAgICAgTExPR19EQkcgPDwgIlJlYWQgZW1iZWRkZWQgZGF0YSBzaXplOiAiIDw8IHBTY29wZS0+Z2V0RW1iZWRkZWREYXRhKGMubmFtZSkuc2l6ZSgpOwogICAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgICAgTExPR19XUk4gPDwgIlVua25vd24gZW1iZWRkZWQgZGF0YSBlbmNvZGluZyAhISEiOwogICAgICAgIHJldHVybjsKICAgIH0KfQoKfSAgLy8gbmFtZXNwYWNlIGxzZAoKfSAgLy8gbmFtZXNwYWNlIGxhdmEKAAAAAAAAAAD3HAAAAAAAAAAAAAAAAAAAAAAAAPccAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABqDAAAAAAAAGoMAAAAAAAAAAAAAAAA8L8"
				]
			]
		},
		{
			"contents": "if(STATIC_LIB)\n\texecute_process( COMMAND ${CMAKE_COMMAND} -E copy_if_different ${SRC_DIR}/libfreeimage.a ${DEST_DIR}/lib/libfreeimage.a )\nelse()\n\texecute_process( COMMAND ${CMAKE_COMMAND} -E copy_if_different ${SRC_DIR}/libfreeimage-3.18.0.so ${DEST_DIR}/lib/libfreeimage-3.18.0.so )\n\tSET(TARGET_LIB ${DEST_DIR}/lib/libfreeimage-3.18.0.so)\n\tSET(LINK_LIB ${DEST_DIR}/lib/libfreeimage.so.3)\n\texecute_process( COMMAND ${CMAKE_COMMAND} -E create_symlink ${TARGET_LIB} ${LINK_LIB} )\nendif()\nexecute_process( COMMAND ${CMAKE_COMMAND} -E copy_if_different ${SRC_DIR}/FreeImage.h ${DEST_DIR}/include/FreeImage.h )\n",
			"file": "third_party/freeimage_install_files.cmake",
			"file_size": 606,
			"file_write_time": 133342450074994044,
			"settings":
			{
				"buffer_size": 606,
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					3,
					1,
					"insert",
					{
						"characters": "\n\n\n\n"
					},
					"CwAAABsBAAAAAAAAHAEAAAAAAAAAAAAAHAEAAAAAAAAdAQAAAAAAAAAAAAAdAQAAAAAAAB4BAAAAAAAAAAAAAB4BAAAAAAAAHwEAAAAAAAAAAAAAHAEAAAAAAAAcAQAAAAAAAAEAAAAJHgEAAAAAAAAfAQAAAAAAAAAAAAAfAQAAAAAAACABAAAAAAAAAAAAAB0BAAAAAAAAHQEAAAAAAAABAAAACR8BAAAAAAAAIAEAAAAAAAAAAAAAIAEAAAAAAAAhAQAAAAAAAAAAAAAeAQAAAAAAAB4BAAAAAAAAAQAAAAk",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAbAQAAAAAAABsBAAAAAAAAAAAAAAAA8L8"
				],
				[
					5,
					1,
					"reindent",
					null,
					"AQAAAB4BAAAAAAAAHwEAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAeAQAAAAAAAB4BAAAAAAAAAAAAAAAAQkA"
				],
				[
					6,
					1,
					"paste",
					null,
					"AQAAAB8BAAAAAAAAmQEAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAfAQAAAAAAAB8BAAAAAAAAAAAAAAAA8L8"
				],
				[
					9,
					1,
					"right_delete",
					null,
					"AgAAAB8BAAAAAAAAHwEAAAAAAAAOAAAASU5TVEFMTChDT0RFICKMAQAAAAAAAIwBAAAAAAAAAQAAAAk",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAtAQAAAAAAAB8BAAAAAAAAAAAAAAAA8L8"
				],
				[
					11,
					6,
					"left_delete",
					null,
					"BgAAADUBAAAAAAAANQEAAAAAAAABAAAAIDQBAAAAAAAANAEAAAAAAAABAAAAIDMBAAAAAAAAMwEAAAAAAAABAAAAIDIBAAAAAAAAMgEAAAAAAAABAAAAIDEBAAAAAAAAMQEAAAAAAAABAAAACjABAAAAAAAAMAEAAAAAAAABAAAAXA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAA2AQAAAAAAADYBAAAAAAAAAAAAAAAAQkA"
				],
				[
					14,
					6,
					"left_delete",
					null,
					"BgAAAGABAAAAAAAAYAEAAAAAAAABAAAAIF8BAAAAAAAAXwEAAAAAAAABAAAAIF4BAAAAAAAAXgEAAAAAAAABAAAAIF0BAAAAAAAAXQEAAAAAAAABAAAAIFwBAAAAAAAAXAEAAAAAAAABAAAAClsBAAAAAAAAWwEAAAAAAAABAAAAXA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABhAQAAAAAAAGEBAAAAAAAAAAAAAAAA8L8"
				],
				[
					16,
					4,
					"left_delete",
					null,
					"BAAAAHUBAAAAAAAAdQEAAAAAAAABAAAAXHQBAAAAAAAAdAEAAAAAAAABAAAAIHMBAAAAAAAAcwEAAAAAAAABAAAAIHIBAAAAAAAAcgEAAAAAAAABAAAAIA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAB2AQAAAAAAAHYBAAAAAAAAAAAAAAAAgkA"
				],
				[
					18,
					6,
					"left_delete",
					null,
					"BgAAAGoBAAAAAAAAagEAAAAAAAABAAAAIGkBAAAAAAAAaQEAAAAAAAABAAAAIGgBAAAAAAAAaAEAAAAAAAABAAAAIGcBAAAAAAAAZwEAAAAAAAABAAAAIGYBAAAAAAAAZgEAAAAAAAABAAAACmUBAAAAAAAAZQEAAAAAAAABAAAAXA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABrAQAAAAAAAGsBAAAAAAAAAAAAAAAA8L8"
				],
				[
					22,
					1,
					"left_delete",
					null,
					"AQAAAHIBAAAAAAAAcgEAAAAAAAABAAAAIg",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABzAQAAAAAAAHMBAAAAAAAAAAAAAAAA8L8"
				],
				[
					24,
					5,
					"left_delete",
					null,
					"BQAAAHABAAAAAAAAcAEAAAAAAAABAAAAIG8BAAAAAAAAbwEAAAAAAAABAAAAIG4BAAAAAAAAbgEAAAAAAAABAAAAIG0BAAAAAAAAbQEAAAAAAAABAAAAIGwBAAAAAAAAbAEAAAAAAAABAAAACg",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABxAQAAAAAAAHEBAAAAAAAAAAAAAAAA8L8"
				],
				[
					25,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAAGwBAAAAAAAAbQEAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABsAQAAAAAAAGwBAAAAAAAAAAAAAAAA8L8"
				],
				[
					27,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AQAAAJAAAAAAAAAAkQAAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACQAAAAAAAAAJAAAAAAAAAAAAAAAAAQh0A"
				],
				[
					28,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AQAAAJEAAAAAAAAAkgAAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACRAAAAAAAAAJEAAAAAAAAAAAAAAAAA8L8"
				],
				[
					30,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AQAAAJEAAAAAAAAAkgAAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACRAAAAAAAAAJEAAAAAAAAAAAAAAAAAAAA"
				],
				[
					31,
					1,
					"reindent",
					null,
					"AQAAAJIAAAAAAAAAkwAAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACSAAAAAAAAAJIAAAAAAAAAAAAAAAAA8L8"
				],
				[
					32,
					1,
					"insert",
					{
						"characters": "SET"
					},
					"AwAAAJMAAAAAAAAAlAAAAAAAAAAAAAAAlAAAAAAAAACVAAAAAAAAAAAAAACVAAAAAAAAAJYAAAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACTAAAAAAAAAJMAAAAAAAAAAAAAAAAA8L8"
				],
				[
					33,
					1,
					"insert_snippet",
					{
						"contents": "($0)"
					},
					"AQAAAJYAAAAAAAAAmAAAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACWAAAAAAAAAJYAAAAAAAAAAAAAAAAA8L8"
				],
				[
					34,
					1,
					"insert",
					{
						"characters": "TARGET"
					},
					"BgAAAJcAAAAAAAAAmAAAAAAAAAAAAAAAmAAAAAAAAACZAAAAAAAAAAAAAACZAAAAAAAAAJoAAAAAAAAAAAAAAJoAAAAAAAAAmwAAAAAAAAAAAAAAmwAAAAAAAACcAAAAAAAAAAAAAACcAAAAAAAAAJ0AAAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACXAAAAAAAAAJcAAAAAAAAAAAAAAAAA8L8"
				],
				[
					35,
					1,
					"insert",
					{
						"characters": "+:"
					},
					"AgAAAJ0AAAAAAAAAngAAAAAAAAAAAAAAngAAAAAAAACfAAAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACdAAAAAAAAAJ0AAAAAAAAAAAAAAAAA8L8"
				],
				[
					36,
					2,
					"left_delete",
					null,
					"AgAAAJ4AAAAAAAAAngAAAAAAAAABAAAAOp0AAAAAAAAAnQAAAAAAAAABAAAAKw",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACfAAAAAAAAAJ8AAAAAAAAAAAAAAAAA8L8"
				],
				[
					37,
					1,
					"insert",
					{
						"characters": "_LIB"
					},
					"BAAAAJ0AAAAAAAAAngAAAAAAAAAAAAAAngAAAAAAAACfAAAAAAAAAAAAAACfAAAAAAAAAKAAAAAAAAAAAAAAAKAAAAAAAAAAoQAAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACdAAAAAAAAAJ0AAAAAAAAAAAAAAAAA8L8"
				],
				[
					38,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAAKEAAAAAAAAAogAAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAChAAAAAAAAAKEAAAAAAAAAAAAAAAAA8L8"
				],
				[
					44,
					1,
					"paste",
					null,
					"AQAAAKIAAAAAAAAAwwAAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACiAAAAAAAAAKIAAAAAAAAAAAAAAAAA8L8"
				],
				[
					52,
					1,
					"paste",
					null,
					"AgAAAAgBAAAAAAAAEgEAAAAAAAAAAAAAEgEAAAAAAAASAQAAAAAAAAcAAABTUkNfRElS",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAIAQAAAAAAAA8BAAAAAAAAAAAAAAAA8L8"
				],
				[
					55,
					1,
					"right_delete",
					null,
					"AQAAABMBAAAAAAAAEwEAAAAAAAAXAAAAL2xpYmZyZWVpbWFnZS0zLjE4LjAuc28",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAATAQAAAAAAACoBAAAAAAAAAAAAAAAA8L8"
				],
				[
					63,
					1,
					"paste",
					null,
					"AgAAAH4BAAAAAAAAiAEAAAAAAAAAAAAAiAEAAAAAAACIAQAAAAAAAAYAAAB0YXJnZXQ",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAB+AQAAAAAAAIQBAAAAAAAAAAAAAAAA8L8"
				],
				[
					66,
					1,
					"insert",
					{
						"characters": "\nSET"
					},
					"BQAAAMQAAAAAAAAAxQAAAAAAAAAAAAAAxQAAAAAAAADGAAAAAAAAAAAAAADGAAAAAAAAAMcAAAAAAAAAAAAAAMcAAAAAAAAAyAAAAAAAAAAAAAAAyAAAAAAAAADJAAAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADEAAAAAAAAAMQAAAAAAAAAAAAAAAAA8L8"
				],
				[
					67,
					1,
					"insert_snippet",
					{
						"contents": "($0)"
					},
					"AQAAAMkAAAAAAAAAywAAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADJAAAAAAAAAMkAAAAAAAAAAAAAAAAA8L8"
				],
				[
					68,
					1,
					"insert",
					{
						"characters": "LINK_"
					},
					"BQAAAMoAAAAAAAAAywAAAAAAAAAAAAAAywAAAAAAAADMAAAAAAAAAAAAAADMAAAAAAAAAM0AAAAAAAAAAAAAAM0AAAAAAAAAzgAAAAAAAAAAAAAAzgAAAAAAAADPAAAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADKAAAAAAAAAMoAAAAAAAAAAAAAAAAA8L8"
				],
				[
					70,
					1,
					"left_delete",
					null,
					"AQAAAM8AAAAAAAAAzwAAAAAAAAABAAAAKQ",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADQAAAAAAAAANAAAAAAAAAAAAAAAAAA8L8"
				],
				[
					71,
					1,
					"insert",
					{
						"characters": "LIB"
					},
					"AwAAAM8AAAAAAAAA0AAAAAAAAAAAAAAA0AAAAAAAAADRAAAAAAAAAAAAAADRAAAAAAAAANIAAAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADPAAAAAAAAAM8AAAAAAAAAAAAAAAAA8L8"
				],
				[
					72,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAANIAAAAAAAAA0wAAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADSAAAAAAAAANIAAAAAAAAAAAAAAAAA8L8"
				],
				[
					73,
					1,
					"paste",
					null,
					"AQAAANMAAAAAAAAA5AAAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADTAAAAAAAAANMAAAAAAAAAAAAAAAAA8L8"
				],
				[
					79,
					1,
					"paste",
					null,
					"AQAAANMAAAAAAAAA3gAAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADTAAAAAAAAANMAAAAAAAAAAAAAAAAA8L8"
				],
				[
					82,
					1,
					"insert",
					{
						"characters": ")"
					},
					"AQAAAO8AAAAAAAAA8AAAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADvAAAAAAAAAO8AAAAAAAAAAAAAAAAA8L8"
				],
				[
					90,
					1,
					"paste",
					null,
					"AgAAALgBAAAAAAAAwAEAAAAAAAAAAAAAwAEAAAAAAADAAQAAAAAAAAQAAABsaW5r",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAC4AQAAAAAAALwBAAAAAAAAAAAAAAAA8L8"
				],
				[
					93,
					2,
					"left_delete",
					null,
					"AgAAAGkBAAAAAAAAaQEAAAAAAAABAAAACmgBAAAAAAAAaAEAAAAAAAABAAAACg",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABqAQAAAAAAAGoBAAAAAAAAAAAAAAAA8L8"
				],
				[
					96,
					1,
					"left_delete",
					null,
					"AQAAAMIBAAAAAAAAwgEAAAAAAAABAAAAKQ",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADDAQAAAAAAAMMBAAAAAAAAAAAAAAAEkUA"
				],
				[
					98,
					2,
					"left_delete",
					null,
					"AgAAAMIBAAAAAAAAwgEAAAAAAAABAAAACsEBAAAAAAAAwQEAAAAAAAABAAAACg",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADDAQAAAAAAAMMBAAAAAAAAAAAAAAAAAAA"
				],
				[
					99,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AgAAAMEBAAAAAAAAwgEAAAAAAAAAAAAAwgEAAAAAAADDAQAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADBAQAAAAAAAMEBAAAAAAAAAAAAAAAA8L8"
				],
				[
					105,
					1,
					"paste",
					null,
					"AgAAADIBAAAAAAAAUwEAAAAAAAAAAAAAUwEAAAAAAABTAQAAAAAAAA0AAAAke1RBUkdFVF9MSUJ9",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAyAQAAAAAAAD8BAAAAAAAAAAAAAAAA8L8"
				],
				[
					109,
					1,
					"left_delete",
					null,
					"AgAAAJIAAAAAAAAAkgAAAAAAAABeAAAACVNFVChUQVJHRVRfTElCICR7U1JDX0RJUn0vbGliZnJlZWltYWdlLTMuMTguMC5zbykKCVNFVChMSU5LX0xJQiAke1NSQ19ESVJ9L2xpYmZyZWVpbWFnZS5zby4zKXgBAAAAAAAAeAEAAAAAAAABAAAACQ",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADwAAAAAAAAAJIAAAAAAAAAAAAAAAAA8L8"
				],
				[
					111,
					3,
					"left_delete",
					null,
					"AwAAAJIAAAAAAAAAkgAAAAAAAAABAAAACpEAAAAAAAAAkQAAAAAAAAABAAAACpAAAAAAAAAAkAAAAAAAAAABAAAACg",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACTAAAAAAAAAJMAAAAAAAAAAAAAAAAAAAA"
				],
				[
					113,
					1,
					"left_delete",
					null,
					"AQAAAHQBAAAAAAAAdAEAAAAAAAABAAAACg",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAB1AQAAAAAAAHUBAAAAAAAAAAAAAAAAS0A"
				],
				[
					118,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AgAAAB0BAAAAAAAAHgEAAAAAAAAAAAAAHgEAAAAAAAAfAQAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAdAQAAAAAAAB0BAAAAAAAAAAAAAAAA8L8"
				],
				[
					120,
					1,
					"paste",
					null,
					"AQAAAB0BAAAAAAAAewEAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAdAQAAAAAAAB0BAAAAAAAAAAAAAAAAQkA"
				],
				[
					125,
					1,
					"left_delete",
					null,
					"AQAAAB0BAAAAAAAAHQEAAAAAAAABAAAACQ",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAeAQAAAAAAAB4BAAAAAAAAAAAAAAAA8L8"
				],
				[
					131,
					1,
					"paste",
					null,
					"AgAAACwBAAAAAAAAUgEAAAAAAAAAAAAAUgEAAAAAAABSAQAAAAAAACEAAAAke1NSQ19ESVJ9L2xpYmZyZWVpbWFnZS0zLjE4LjAuc28",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAsAQAAAAAAAE0BAAAAAAAAAAAAAAAA8L8"
				],
				[
					134,
					1,
					"paste",
					null,
					"AgAAAGIBAAAAAAAAiAEAAAAAAAAAAAAAiAEAAAAAAACIAQAAAAAAAAsAAAAke1NSQ19ESVJ9Lw",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABiAQAAAAAAAG0BAAAAAAAAAAAAAAAA8L8"
				],
				[
					135,
					22,
					"left_delete",
					null,
					"FgAAAIcBAAAAAAAAhwEAAAAAAAABAAAAb4YBAAAAAAAAhgEAAAAAAAABAAAAc4UBAAAAAAAAhQEAAAAAAAABAAAALoQBAAAAAAAAhAEAAAAAAAABAAAAMIMBAAAAAAAAgwEAAAAAAAABAAAALoIBAAAAAAAAggEAAAAAAAABAAAAOIEBAAAAAAAAgQEAAAAAAAABAAAAMYABAAAAAAAAgAEAAAAAAAABAAAALn8BAAAAAAAAfwEAAAAAAAABAAAAM34BAAAAAAAAfgEAAAAAAAABAAAALX0BAAAAAAAAfQEAAAAAAAABAAAAZXwBAAAAAAAAfAEAAAAAAAABAAAAZ3sBAAAAAAAAewEAAAAAAAABAAAAYXoBAAAAAAAAegEAAAAAAAABAAAAbXkBAAAAAAAAeQEAAAAAAAABAAAAaXgBAAAAAAAAeAEAAAAAAAABAAAAZXcBAAAAAAAAdwEAAAAAAAABAAAAZXYBAAAAAAAAdgEAAAAAAAABAAAAcnUBAAAAAAAAdQEAAAAAAAABAAAAZnQBAAAAAAAAdAEAAAAAAAABAAAAYnMBAAAAAAAAcwEAAAAAAAABAAAAaXIBAAAAAAAAcgEAAAAAAAABAAAAbA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACIAQAAAAAAAIgBAAAAAAAAAAAAAAAA8L8"
				]
			]
		},
		{
			"contents": "/***************************************************************************\n # Copyright (c) 2020, NVIDIA CORPORATION. All rights reserved.\n #\n # Redistribution and use in source and binary forms, with or without\n # modification, are permitted provided that the following conditions\n # are met:\n #  * Redistributions of source code must retain the above copyright\n #    notice, this list of conditions and the following disclaimer.\n #  * Redistributions in binary form must reproduce the above copyright\n #    notice, this list of conditions and the following disclaimer in the\n #    documentation and/or other materials provided with the distribution.\n #  * Neither the name of NVIDIA CORPORATION nor the names of its\n #    contributors may be used to endorse or promote products derived\n #    from this software without specific prior written permission.\n #\n # THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS ``AS IS'' AND ANY\n # EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n # IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR\n # PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT OWNER OR\n # CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,\n # EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,\n # PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n # PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY\n # OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n # (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n # OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n **************************************************************************/\n#ifdef _WIN32\n#include <filesystem>\nnamespace fs = std::filesystem;\n#else\n#include \"boost/filesystem.hpp\"\nnamespace fs = boost::filesystem;\n#endif\n\n#include <fstream>\n\n#include \"stdafx.h\"\n#include \"Falcor/Utils/StringUtils.h\"\n#include \"Falcor/Utils/Debug/debug.h\"\n#include \"OS.h\"\n\n#ifndef PROJECT_DIR\n#define PROJECT_DIR \"/home/max/dev/Falcor/\"\n#endif\n\n#ifndef LAVA_INSTALL_DIR\n#define LAVA_INSTALL_DIR \"/opt/lava/\"\n#endif\n\nnamespace Falcor {\n\nstd::string gMsgBoxTitle = \"Falcor\";\n\nvoid msgBoxTitle(const std::string& title) {\n    gMsgBoxTitle = title;\n}\n\nuint32_t getLowerPowerOf2(uint32_t a) {\n    assert(a != 0);\n    return 1 << bitScanReverse(a);\n}\n\ninline std::vector<std::string> getInitialShaderDirectories() {\n    std::vector<std::string> developmentDirectories = {\n        // First we search in source folders.\n        //std::string(PROJECT_DIR),\n        //std::string(PROJECT_DIR) + \"../\",\n        //std::string(PROJECT_DIR) + \"../Tools/FalcorTest/\",\n        \n        // Then we search in deployment folders (necessary to pickup NVAPI and other third-party shaders).\n        std::string(LAVA_INSTALL_DIR) + \"shaders\",\n        //getExecutableDirectory() + \"../shaders\",\n    };\n\n    std::vector<std::string> deploymentDirectories = {\n        std::string(LAVA_INSTALL_DIR) + \"shaders\",\n        //getExecutableDirectory() + \"../shaders\"\n    };\n\n    std::cout << \"mode: \" << (isDevelopmentMode() ? \"development\" : \"production\") << \"\\n\";\n    //std::cout << \"exec dir: \" << getExecutableDirectory() << \"\\n\";\n\n    return isDevelopmentMode() ? developmentDirectories : deploymentDirectories;\n}\n\ninline std::vector<std::string> getInitialRenderPassDirectories() {\n    std::vector<std::string> developmentDirectories = {\n        // Then we search in deployment folders (necessary to pickup NVAPI and other third-party shaders).\n        std::string(LAVA_INSTALL_DIR) + \"render_passes\",\n        getExecutableDirectory() + \"../render_passes\",\n    };\n\n    std::vector<std::string> deploymentDirectories = {\n        std::string(LAVA_INSTALL_DIR) + \"render_passes\",\n        getExecutableDirectory() + \"../render_passes\"\n    };\n\n    return isDevelopmentMode() ? developmentDirectories : deploymentDirectories;\n}\n\nstatic std::vector<std::string> gShaderDirectories = getInitialShaderDirectories();\nstatic std::vector<std::string> gRenderPassDirectories = getInitialRenderPassDirectories();\n\ninline std::vector<std::string> getInitialDataDirectories() {\n    std::vector<std::string> developmentDirectories = {\n        //std::string(PROJECT_DIR) + \"/Data\",\n        std::string(LAVA_INSTALL_DIR) + \"data\",\n        getExecutableDirectory() + \"../data\",\n    };\n\n    std::vector<std::string> deploymentDirectories = {\n        std::string(LAVA_INSTALL_DIR) + \"data\",\n        getExecutableDirectory() + \"../data\"\n    };\n\n    std::vector<std::string> directories = isDevelopmentMode() ? developmentDirectories : deploymentDirectories;\n\n    // Add development media folder.\n#ifdef _MSC_VER\n    directories.push_back(getExecutableDirectory() + \"/../../../Media\"); // Relative to Visual Studio output folder\n#else\n    directories.push_back(getExecutableDirectory() + \"/../Media\"); // Relative to Makefile output folder\n#endif\n\n    // Add additional media folders.\n    std::string mediaFolders;\n    if (getEnvironmentVariable(\"FALCOR_MEDIA_FOLDERS\", mediaFolders)) {\n        auto folders = splitString(mediaFolders, \";\");\n        directories.insert(directories.end(), folders.begin(), folders.end());\n    }\n\n    return directories;\n}\n\nstatic std::vector<std::string> gDataDirectories = getInitialDataDirectories();\n\nconst std::vector<std::string>& getDataDirectoriesList() {\n    return gDataDirectories;\n}\n\nvoid addDataDirectory(const std::string& dir) {\n    if (std::find(gDataDirectories.begin(), gDataDirectories.end(), dir) == gDataDirectories.end()) {\n        gDataDirectories.push_back(dir);\n    }\n}\n\nvoid removeDataDirectory(const std::string& dir) {\n    auto it = std::find(gDataDirectories.begin(), gDataDirectories.end(), dir);\n    if (it != gDataDirectories.end()) {\n        gDataDirectories.erase(it);\n    }\n}\n\nbool isDevelopmentMode() {\n    static bool initialized = false;\n    static bool devMode = false;\n\n    if (!initialized) {\n        std::string value;\n        #ifdef DEBUG\n        devMode = true;\n        #else\n        devMode = getEnvironmentVariable(\"FALCOR_DEVMODE\", value) && value == \"1\";\n        #endif\n        initialized = true;\n    }\n\n    return devMode;\n}\n\nstd::string canonicalizeFilename(const std::string& filename) {\n    fs::path path(replaceSubstring(filename, \"\\\\\", \"/\"));\n    return fs::exists(path) ? fs::canonical(path).string() : \"\";\n}\n\nbool findFileInDataDirectories(const std::string& filename, std::string& fullPath) {\n    // Check if this is an absolute path\n    if (fs::path(filename).is_absolute()) {\n        fullPath = canonicalizeFilename(filename);\n        return !fullPath.empty(); // Empty fullPath means path doesn't exist\n    }\n\n    for (const auto& dir : gDataDirectories) {\n        fullPath = canonicalizeFilename(dir + '/' + filename);\n        if (doesFileExist(fullPath)) {\n            return true;\n        }\n    }\n\n    return false;\n}\n\nconst std::vector<std::string>& getShaderDirectoriesList() {\n    return gShaderDirectories;\n}\n\nbool findFileInShaderDirectories(const std::string& filename, std::string& fullPath) {\n    for (const auto& dir : gShaderDirectories) {\n        fullPath = canonicalizeFilename(dir + '/' + filename);\n        if (doesFileExist(fullPath)) {\n            LOG_DBG(\"Shader: %s found as: %s\", filename.c_str(), fullPath.c_str());\n            return true;\n        }\n    }\n    return false;\n}\n\nbool findFileInRenderPassDirectories(const std::string& filename, std::string& fullPath) {\n    for (const auto& dir : gRenderPassDirectories) {\n        fullPath = canonicalizeFilename(dir + '/' + filename);\n        if (doesFileExist(fullPath)) {\n            LOG_DBG(\"RenderPass library: %s found as: %s\", filename.c_str(), fullPath.c_str());\n            return true;\n        }\n    }\n    return false;\n}\n\nbool findAvailableFilename(const std::string& prefix, const std::string& directory, const std::string& extension, std::string& filename) {\n    for (uint32_t i = 0; i < (uint32_t)-1; i++) {\n        std::string newPrefix = prefix + '.' + std::to_string(i);\n        filename = directory + '/' + newPrefix + \".\" + extension;\n\n        if (doesFileExist(filename) == false) {\n            return true;\n        }\n    }\n    should_not_get_here();\n    filename = \"\";\n    return false;\n}\n\nstd::string stripDataDirectories(const std::string& filename) {\n    std::string stripped = filename;\n    std::string canonFile = canonicalizeFilename(filename);\n\n    for (const auto& dir : gDataDirectories) {\n        std::string canonDir = canonicalizeFilename(dir);\n\n        if (canonDir.size() && hasPrefix(canonFile, canonDir, false)) {\n            // canonicalizeFilename adds trailing \\\\ to drive letters and removes them from paths containing folders\n            // The entire prefix directory including the slash should be removed\n            bool trailingSlash = canonDir.back() == '\\\\' || canonDir.back() == '/';\n            size_t len = trailingSlash ? canonDir.length() : canonDir.length() + 1;\n            std::string tmp = canonFile.erase(0, len);\n            \n            if (tmp.length() < stripped.length()) {\n                stripped = tmp;\n            }\n        }\n    }\n\n    return stripped;\n}\n\nstd::string swapFileExtension(const std::string& str, const std::string& currentExtension, const std::string& newExtension) {\n    if (hasSuffix(str, currentExtension)) {\n        std::string ret = str;\n        return (ret.erase(ret.rfind(currentExtension)) + newExtension);\n    } else {\n        return str;\n    }\n}\n\nstd::string getDirectoryFromFile(const std::string& filename) {\n    fs::path path = filename;\n    return path.has_filename() ? path.parent_path().string() : filename;\n}\n\nstd::string getExtensionFromFile(const std::string& filename) {\n    fs::path path = filename;\n    std::string ext;\n    if (path.has_extension()) {\n        // remove the leading '.' that filesystem gives us\n        ext = path.extension().string();\n        if (hasPrefix(ext, \".\"))   ext = ext.substr(1, ext.size());\n    }\n    return ext;\n}\n\nstd::string getFilenameFromPath(const std::string& filename) {\n    return fs::path(filename).filename().string();\n}\n\nstd::string readFile(const std::string& filename) {\n    std::ifstream filestream(filename);\n    std::string str;\n    filestream.seekg(0, std::ios::end);\n    str.reserve(filestream.tellg());\n    filestream.seekg(0, std::ios::beg);\n    str.assign(std::istreambuf_iterator<char>(filestream), std::istreambuf_iterator<char>());\n    return str;\n}\n\n}  // namespace Falcor\n",
			"file": "src/Falcor/Core/Platform/OS.cpp",
			"file_size": 10466,
			"file_write_time": 133352798596867382,
			"settings":
			{
				"buffer_size": 10466,
				"encoding": "UTF-8",
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					3,
					1,
					"left_delete",
					null,
					"AQAAADQJAAAAAAAANAkAAAAAAAAwAQAAIC8vIEZpcnN0IHdlIHNlYXJjaCBpbiBzb3VyY2UgZm9sZGVycy4KICAgICAgICAvL3N0ZDo6c3RyaW5nKFBST0pFQ1RfRElSKSwKICAgICAgICAvL3N0ZDo6c3RyaW5nKFBST0pFQ1RfRElSKSArICIuLi8iLAogICAgICAgIC8vc3RkOjpzdHJpbmcoUFJPSkVDVF9ESVIpICsgIi4uL1Rvb2xzL0ZhbGNvclRlc3QvIiwKICAgICAgICAKICAgICAgICAvLyBUaGVuIHdlIHNlYXJjaCBpbiBkZXBsb3ltZW50IGZvbGRlcnMgKG5lY2Vzc2FyeSB0byBwaWNrdXAgTlZBUEkgYW5kIG90aGVyIHRoaXJkLXBhcnR5IHNoYWRlcnMpLgogICAgICAgIA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAA0CQAAAAAAAGQKAAAAAAAAAAAAAAAA8L8"
				],
				[
					4,
					2,
					"left_delete",
					null,
					"AgAAADEJAAAAAAAAMQkAAAAAAAADAAAAICAgLQkAAAAAAAAtCQAAAAAAAAQAAAAgICAg",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAA0CQAAAAAAADQJAAAAAAAAAAAAAAAA8L8"
				],
				[
					5,
					1,
					"insert",
					{
						"characters": "\t\t"
					},
					"AgAAAC0JAAAAAAAAMQkAAAAAAAAAAAAAMQkAAAAAAAA1CQAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAtCQAAAAAAAC0JAAAAAAAAAAAAAAAA8L8"
				],
				[
					11,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AgAAAGAJAAAAAAAAYQkAAAAAAAAAAAAAYQkAAAAAAABpCQAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABgCQAAAAAAAGAJAAAAAAAAAAAAAAAA8L8"
				],
				[
					12,
					1,
					"paste",
					null,
					"AQAAAGkJAAAAAAAAlwkAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABpCQAAAAAAAGkJAAAAAAAAAAAAAAAA8L8"
				],
				[
					18,
					1,
					"paste",
					null,
					"AgAAAIUJAAAAAAAAjQkAAAAAAAAAAAAAjQkAAAAAAACNCQAAAAAAABAAAAAuLi9yZW5kZXJfcGFzc2Vz",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACFCQAAAAAAAJUJAAAAAAAAAAAAAAAA8L8"
				],
				[
					24,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AgAAAP8JAAAAAAAAAAoAAAAAAAAAAAAAAAoAAAAAAAAICgAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAD/CQAAAAAAAP8JAAAAAAAAAAAAAAAA8L8"
				],
				[
					25,
					1,
					"paste",
					null,
					"AQAAAAgKAAAAAAAALgoAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAICgAAAAAAAAgKAAAAAAAAAAAAAAAA8L8"
				],
				[
					28,
					1,
					"insert",
					{
						"characters": ".."
					},
					"AgAAACQKAAAAAAAAJQoAAAAAAAAAAAAAJQoAAAAAAAAmCgAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAkCgAAAAAAACQKAAAAAAAAAAAAAAAA8L8"
				],
				[
					31,
					1,
					"insert",
					{
						"characters": ".."
					},
					"AgAAAIUJAAAAAAAAhgkAAAAAAAAAAAAAhgkAAAAAAACHCQAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACFCQAAAAAAAIUJAAAAAAAAAAAAAAAA8L8"
				],
				[
					34,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AgAAAJEJAAAAAAAAkgkAAAAAAAAAAAAAkgkAAAAAAACaCQAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACRCQAAAAAAAJEJAAAAAAAAAAAAAAAA8L8"
				],
				[
					35,
					1,
					"paste",
					null,
					"AQAAAJoJAAAAAAAAxQkAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACaCQAAAAAAAJoJAAAAAAAAAAAAAAAA8L8"
				],
				[
					37,
					4,
					"left_delete",
					null,
					"BAAAAMEJAAAAAAAAwQkAAAAAAAABAAAASMAJAAAAAAAAwAkAAAAAAAABAAAAVL8JAAAAAAAAvwkAAAAAAAABAAAAQb4JAAAAAAAAvgkAAAAAAAABAAAAUA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADCCQAAAAAAAMIJAAAAAAAAAAAAAAAA8L8"
				],
				[
					38,
					1,
					"insert",
					{
						"characters": "LA"
					},
					"AgAAAL4JAAAAAAAAvwkAAAAAAAAAAAAAvwkAAAAAAADACQAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAC+CQAAAAAAAL4JAAAAAAAAAAAAAAAA8L8"
				],
				[
					39,
					1,
					"insert_completion",
					{
						"completion": "LAVA_HOME",
						"format": "text",
						"keep_prefix": false,
						"must_insert": false,
						"trigger": "LAVA_HOME"
					},
					"AgAAAL4JAAAAAAAAvgkAAAAAAAACAAAATEG+CQAAAAAAAMcJAAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADACQAAAAAAAMAJAAAAAAAAAAAAAAAA8L8"
				],
				[
					41,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAAMoJAAAAAAAAywkAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADKCQAAAAAAAMoJAAAAAAAAAAAAAAAA8L8"
				],
				[
					45,
					4,
					"left_delete",
					null,
					"BAAAAJoJAAAAAAAAmgkAAAAAAAAxAAAAaWYoY29uc3QgY2hhciogZW52X3AgPSBzdGQ6OmdldGVudigiTEFWQV9IT01FIikpIJYJAAAAAAAAlgkAAAAAAAAEAAAAICAgIJIJAAAAAAAAkgkAAAAAAAAEAAAAICAgIJEJAAAAAAAAkQkAAAAAAAABAAAACg",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACaCQAAAAAAAMsJAAAAAAAAAAAAAAAA8L8"
				],
				[
					47,
					1,
					"insert",
					{
						"characters": "\n\n"
					},
					"BQAAADkKAAAAAAAAOgoAAAAAAAAAAAAAOgoAAAAAAAA+CgAAAAAAAAAAAAA+CgAAAAAAAD8KAAAAAAAAAAAAAD8KAAAAAAAAQwoAAAAAAAAAAAAAOgoAAAAAAAA6CgAAAAAAAAQAAAAgICAg",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAA5CgAAAAAAADkKAAAAAAAAAAAAAAAAe0A"
				],
				[
					48,
					1,
					"paste",
					null,
					"AQAAAD8KAAAAAAAAcAoAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAA/CgAAAAAAAD8KAAAAAAAAAAAAAAAA8L8"
				],
				[
					49,
					1,
					"insert_snippet",
					{
						"contents": "{$0}"
					},
					"AQAAAHAKAAAAAAAAcgoAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABwCgAAAAAAAHAKAAAAAAAAAAAAAAAA8L8"
				],
				[
					50,
					1,
					"run_macro_file",
					{
						"file": "res://Packages/Default/Add Line in Braces.sublime-macro"
					},
					"BgAAAHEKAAAAAAAAcgoAAAAAAAAAAAAAcgoAAAAAAAB2CgAAAAAAAAAAAAB2CgAAAAAAAHcKAAAAAAAAAAAAAHcKAAAAAAAAewoAAAAAAAAAAAAAcgoAAAAAAAByCgAAAAAAAAQAAAAgICAgcgoAAAAAAAB6CgAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABxCgAAAAAAAHEKAAAAAAAAAAAAAAAA8L8"
				],
				[
					51,
					1,
					"insert",
					{
						"characters": "de"
					},
					"AgAAAHoKAAAAAAAAewoAAAAAAAAAAAAAewoAAAAAAAB8CgAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAB6CgAAAAAAAHoKAAAAAAAAAAAAAAAA8L8"
				],
				[
					54,
					1,
					"insert_completion",
					{
						"completion": "developmentDirectories",
						"format": "text",
						"keep_prefix": false,
						"must_insert": false,
						"trigger": "developmentDirectories"
					},
					"AgAAAHoKAAAAAAAAegoAAAAAAAACAAAAZGV6CgAAAAAAAJAKAAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAB8CgAAAAAAAHwKAAAAAAAAAAAAAAAA8L8"
				],
				[
					55,
					1,
					"insert",
					{
						"characters": ".p"
					},
					"AgAAAJAKAAAAAAAAkQoAAAAAAAAAAAAAkQoAAAAAAACSCgAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACQCgAAAAAAAJAKAAAAAAAAAAAAAAAA8L8"
				],
				[
					56,
					1,
					"insert_completion",
					{
						"completion": "push_back",
						"format": "text",
						"keep_prefix": false,
						"must_insert": false,
						"trigger": "push_back"
					},
					"AgAAAJEKAAAAAAAAkQoAAAAAAAABAAAAcJEKAAAAAAAAmgoAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACSCgAAAAAAAJIKAAAAAAAAAAAAAAAA8L8"
				],
				[
					57,
					1,
					"insert_snippet",
					{
						"contents": "($0)"
					},
					"AQAAAJoKAAAAAAAAnAoAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACaCgAAAAAAAJoKAAAAAAAAAAAAAAAA8L8"
				],
				[
					58,
					1,
					"insert",
					{
						"characters": "s"
					},
					"AQAAAJsKAAAAAAAAnAoAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACbCgAAAAAAAJsKAAAAAAAAAAAAAAAA8L8"
				],
				[
					59,
					1,
					"left_delete",
					null,
					"AQAAAJsKAAAAAAAAmwoAAAAAAAABAAAAcw",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACcCgAAAAAAAJwKAAAAAAAAAAAAAAAA8L8"
				],
				[
					60,
					1,
					"insert",
					{
						"characters": "std"
					},
					"AwAAAJsKAAAAAAAAnAoAAAAAAAAAAAAAnAoAAAAAAACdCgAAAAAAAAAAAACdCgAAAAAAAJ4KAAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACbCgAAAAAAAJsKAAAAAAAAAAAAAAAA8L8"
				],
				[
					61,
					1,
					"insert",
					{
						"characters": "::s"
					},
					"AwAAAJ4KAAAAAAAAnwoAAAAAAAAAAAAAnwoAAAAAAACgCgAAAAAAAAAAAACgCgAAAAAAAKEKAAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACeCgAAAAAAAJ4KAAAAAAAAAAAAAAAA8L8"
				],
				[
					62,
					1,
					"insert_completion",
					{
						"completion": "string",
						"format": "text",
						"keep_prefix": false,
						"must_insert": false,
						"trigger": "string"
					},
					"AgAAAKAKAAAAAAAAoAoAAAAAAAABAAAAc6AKAAAAAAAApgoAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAChCgAAAAAAAKEKAAAAAAAAAAAAAAAA8L8"
				],
				[
					63,
					1,
					"insert_snippet",
					{
						"contents": "($0)"
					},
					"AQAAAKYKAAAAAAAAqAoAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACmCgAAAAAAAKYKAAAAAAAAAAAAAAAA8L8"
				],
				[
					64,
					1,
					"insert",
					{
						"characters": "e"
					},
					"AQAAAKcKAAAAAAAAqAoAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACnCgAAAAAAAKcKAAAAAAAAAAAAAAAA8L8"
				],
				[
					67,
					1,
					"insert_completion",
					{
						"completion": "env_p",
						"format": "text",
						"keep_prefix": false,
						"must_insert": false,
						"trigger": "env_p"
					},
					"AgAAAKcKAAAAAAAApwoAAAAAAAABAAAAZacKAAAAAAAArAoAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACoCgAAAAAAAKgKAAAAAAAAAAAAAAAA8L8"
				],
				[
					69,
					1,
					"insert",
					{
						"characters": " +"
					},
					"AgAAAK0KAAAAAAAArgoAAAAAAAAAAAAArgoAAAAAAACvCgAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACtCgAAAAAAAK0KAAAAAAAAAAAAAAAA8L8"
				],
				[
					70,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAAK8KAAAAAAAAsAoAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACvCgAAAAAAAK8KAAAAAAAAAAAAAAAA8L8"
				],
				[
					71,
					1,
					"insert_snippet",
					{
						"contents": "\"$0\""
					},
					"AQAAALAKAAAAAAAAsgoAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACwCgAAAAAAALAKAAAAAAAAAAAAAAAA8L8"
				],
				[
					72,
					1,
					"insert",
					{
						"characters": "/shaders"
					},
					"CAAAALEKAAAAAAAAsgoAAAAAAAAAAAAAsgoAAAAAAACzCgAAAAAAAAAAAACzCgAAAAAAALQKAAAAAAAAAAAAALQKAAAAAAAAtQoAAAAAAAAAAAAAtQoAAAAAAAC2CgAAAAAAAAAAAAC2CgAAAAAAALcKAAAAAAAAAAAAALcKAAAAAAAAuAoAAAAAAAAAAAAAuAoAAAAAAAC5CgAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACxCgAAAAAAALEKAAAAAAAAAAAAAAAA8L8"
				],
				[
					78,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AgAAALsKAAAAAAAAvAoAAAAAAAAAAAAAvAoAAAAAAADECgAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAC7CgAAAAAAALsKAAAAAAAAAAAAAAAA8L8"
				],
				[
					79,
					1,
					"paste",
					null,
					"AQAAAMQKAAAAAAAABQsAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADECgAAAAAAAMQKAAAAAAAAAAAAAAAA8L8"
				],
				[
					80,
					1,
					"insert",
					{
						"characters": ";"
					},
					"AQAAAAULAAAAAAAABgsAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAFCwAAAAAAAAULAAAAAAAAAAAAAAAA8L8"
				],
				[
					82,
					1,
					"insert",
					{
						"characters": ";"
					},
					"AQAAALsKAAAAAAAAvAoAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAC7CgAAAAAAALsKAAAAAAAAAAAAAADQhEA"
				],
				[
					90,
					1,
					"paste",
					null,
					"AgAAAMUKAAAAAAAA2goAAAAAAAAAAAAA2goAAAAAAADaCgAAAAAAABYAAABkZXZlbG9wbWVudERpcmVjdG9yaWVz",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADFCgAAAAAAANsKAAAAAAAAAAAAAAAA8L8"
				],
				[
					96,
					1,
					"insert",
					{
						"characters": "\n\n"
					},
					"BQAAAMsNAAAAAAAAzA0AAAAAAAAAAAAAzA0AAAAAAADQDQAAAAAAAAAAAADQDQAAAAAAANENAAAAAAAAAAAAANENAAAAAAAA1Q0AAAAAAAAAAAAAzA0AAAAAAADMDQAAAAAAAAQAAAAgICAg",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADLDQAAAAAAAMsNAAAAAAAAAAAAAAAA8L8"
				],
				[
					97,
					1,
					"paste",
					null,
					"AQAAANENAAAAAAAAng4AAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADRDQAAAAAAANENAAAAAAAAAAAAAAAA8L8"
				],
				[
					111,
					1,
					"paste",
					null,
					"AgAAAEQOAAAAAAAAUQ4AAAAAAAAAAAAAUQ4AAAAAAABRDgAAAAAAAAcAAABzaGFkZXJz",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABEDgAAAAAAAEsOAAAAAAAAAAAAAAAA8L8"
				],
				[
					115,
					1,
					"paste",
					null,
					"AgAAAJQOAAAAAAAAoQ4AAAAAAAAAAAAAoQ4AAAAAAAChDgAAAAAAAAcAAABzaGFkZXJz",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACUDgAAAAAAAJsOAAAAAAAAAAAAAAAA8L8"
				],
				[
					122,
					1,
					"insert",
					{
						"characters": "\n\n"
					},
					"AgAAAFURAAAAAAAAVhEAAAAAAAAAAAAAVhEAAAAAAABXEQAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABVEQAAAAAAAFURAAAAAAAAAAAAAAAA8L8"
				],
				[
					124,
					1,
					"reindent",
					null,
					"AQAAAFYRAAAAAAAAWhEAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABWEQAAAAAAAFYRAAAAAAAAAAAAAAAAAAA"
				],
				[
					125,
					1,
					"paste",
					null,
					"AQAAAFoRAAAAAAAANxIAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABaEQAAAAAAAFoRAAAAAAAAAAAAAAAA8L8"
				],
				[
					128,
					1,
					"left_delete",
					null,
					"AQAAAFoRAAAAAAAAWhEAAAAAAAAEAAAAICAgIA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABeEQAAAAAAAF4RAAAAAAAAAAAAAAAA8L8"
				],
				[
					136,
					1,
					"paste",
					null,
					"AgAAAM0RAAAAAAAA0REAAAAAAAAAAAAA0REAAAAAAADREQAAAAAAAA0AAAByZW5kZXJfcGFzc2Vz",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADNEQAAAAAAANoRAAAAAAAAAAAAAAAA8L8"
				],
				[
					140,
					1,
					"paste",
					null,
					"AgAAABQSAAAAAAAAGBIAAAAAAAAAAAAAGBIAAAAAAAAYEgAAAAAAAA0AAAByZW5kZXJfcGFzc2Vz",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAUEgAAAAAAACESAAAAAAAAAAAAAAAA8L8"
				],
				[
					150,
					1,
					"right_delete",
					null,
					"AQAAACwQAAAAAAAALBAAAAAAAAAuAAAALy9zdGQ6OnN0cmluZyhQUk9KRUNUX0RJUikgKyAiL0RhdGEiLAogICAgICAgIA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAsEAAAAAAAAFoQAAAAAAAAAAAAAAAAUkA"
				],
				[
					156,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AgAAAOsPAAAAAAAA7A8AAAAAAAAAAAAA7A8AAAAAAADwDwAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADrDwAAAAAAAOsPAAAAAAAAAAAAAAAA8L8"
				],
				[
					157,
					1,
					"paste",
					null,
					"AQAAAPAPAAAAAAAAHxAAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADwDwAAAAAAAPAPAAAAAAAAAAAAAAAA8L8"
				],
				[
					158,
					1,
					"insert",
					{
						"characters": "\n\n"
					},
					"BQAAAB8QAAAAAAAAIBAAAAAAAAAAAAAAIBAAAAAAAAAkEAAAAAAAAAAAAAAkEAAAAAAAACUQAAAAAAAAAAAAACUQAAAAAAAAKRAAAAAAAAAAAAAAIBAAAAAAAAAgEAAAAAAAAAQAAAAgICAg",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAfEAAAAAAAAB8QAAAAAAAAAAAAAAAA8L8"
				],
				[
					164,
					1,
					"reindent",
					null,
					"AQAAACAQAAAAAAAAJBAAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAgEAAAAAAAACAQAAAAAAAAAAAAAAAA8L8"
				],
				[
					165,
					1,
					"paste",
					null,
					"AQAAACQQAAAAAAAAUhAAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAkEAAAAAAAACQQAAAAAAAAAAAAAAAA8L8"
				],
				[
					166,
					1,
					"insert",
					{
						"characters": "ж"
					},
					"AgAAAFIQAAAAAAAAUxAAAAAAAAAAAAAAVBAAAAAAAABUEAAAAAAAAAQAAAAgICAg",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABSEAAAAAAAAFIQAAAAAAAAAAAAAAAA8L8"
				],
				[
					169,
					1,
					"insert",
					{
						"characters": "ж"
					},
					"AQAAAB8QAAAAAAAAIBAAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAfEAAAAAAAAB8QAAAAAAAAAAAAAAAA8L8"
				],
				[
					170,
					1,
					"left_delete",
					null,
					"AQAAAB8QAAAAAAAAHxAAAAAAAAACAAAA0LY",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAgEAAAAAAAACAQAAAAAAAAAAAAAAAA8L8"
				],
				[
					171,
					1,
					"insert",
					{
						"characters": ";"
					},
					"AQAAAB8QAAAAAAAAIBAAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAfEAAAAAAAAB8QAAAAAAAAAAAAAAAA8L8"
				],
				[
					174,
					1,
					"insert",
					{
						"characters": ";"
					},
					"AgAAAFMQAAAAAAAAVBAAAAAAAAAAAAAAVBAAAAAAAABUEAAAAAAAAAIAAADQtg",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABTEAAAAAAAAFQQAAAAAAAAAAAAAAAA8L8"
				],
				[
					177,
					1,
					"insert",
					{
						"characters": "static"
					},
					"BgAAAPAPAAAAAAAA8Q8AAAAAAAAAAAAA8Q8AAAAAAADyDwAAAAAAAAAAAADyDwAAAAAAAPMPAAAAAAAAAAAAAPMPAAAAAAAA9A8AAAAAAAAAAAAA9A8AAAAAAAD1DwAAAAAAAAAAAAD1DwAAAAAAAPYPAAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADwDwAAAAAAAPAPAAAAAAAAAAAAAAAA8L8"
				],
				[
					178,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAAPYPAAAAAAAA9w8AAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAD2DwAAAAAAAPYPAAAAAAAAAAAAAAAA8L8"
				],
				[
					181,
					1,
					"insert",
					{
						"characters": "static"
					},
					"BgAAACwQAAAAAAAALRAAAAAAAAAAAAAALRAAAAAAAAAuEAAAAAAAAAAAAAAuEAAAAAAAAC8QAAAAAAAAAAAAAC8QAAAAAAAAMBAAAAAAAAAAAAAAMBAAAAAAAAAxEAAAAAAAAAAAAAAxEAAAAAAAADIQAAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAsEAAAAAAAACwQAAAAAAAAAAAAAAAA8L8"
				],
				[
					182,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAADIQAAAAAAAAMxAAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAyEAAAAAAAADIQAAAAAAAAAAAAAAAA8L8"
				],
				[
					184,
					1,
					"insert",
					{
						"characters": "\n\n"
					},
					"AgAAAGMQAAAAAAAAZBAAAAAAAAAAAAAAZBAAAAAAAABlEAAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABjEAAAAAAAAGMQAAAAAAAAAAAAAADAWEA"
				],
				[
					186,
					1,
					"reindent",
					null,
					"AQAAAGQQAAAAAAAAaBAAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABkEAAAAAAAAGQQAAAAAAAAAAAAAAAAAAA"
				],
				[
					187,
					1,
					"insert",
					{
						"characters": "if"
					},
					"AgAAAGgQAAAAAAAAaRAAAAAAAAAAAAAAaRAAAAAAAABqEAAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABoEAAAAAAAAGgQAAAAAAAAAAAAAAAA8L8"
				],
				[
					188,
					1,
					"insert_snippet",
					{
						"contents": "($0)"
					},
					"AQAAAGoQAAAAAAAAbBAAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABqEAAAAAAAAGoQAAAAAAAAAAAAAAAA8L8"
				],
				[
					189,
					1,
					"insert",
					{
						"characters": " d"
					},
					"AgAAAGsQAAAAAAAAbBAAAAAAAAAAAAAAbBAAAAAAAABtEAAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABrEAAAAAAAAGsQAAAAAAAAAAAAAAAA8L8"
				],
				[
					190,
					1,
					"insert_completion",
					{
						"completion": "developmentDirectories",
						"format": "text",
						"keep_prefix": false,
						"must_insert": false,
						"trigger": "developmentDirectories"
					},
					"AgAAAGwQAAAAAAAAbBAAAAAAAAABAAAAZGwQAAAAAAAAghAAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABtEAAAAAAAAG0QAAAAAAAAAAAAAAAA8L8"
				],
				[
					191,
					1,
					"insert",
					{
						"characters": ".em"
					},
					"AwAAAIIQAAAAAAAAgxAAAAAAAAAAAAAAgxAAAAAAAACEEAAAAAAAAAAAAACEEAAAAAAAAIUQAAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACCEAAAAAAAAIIQAAAAAAAAAAAAAAAA8L8"
				],
				[
					192,
					1,
					"insert_completion",
					{
						"completion": "empty",
						"format": "text",
						"keep_prefix": false,
						"must_insert": false,
						"trigger": "empty"
					},
					"AgAAAIMQAAAAAAAAgxAAAAAAAAACAAAAZW2DEAAAAAAAAIgQAAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACFEAAAAAAAAIUQAAAAAAAAAAAAAAAA8L8"
				],
				[
					193,
					1,
					"insert_snippet",
					{
						"contents": "($0)"
					},
					"AQAAAIgQAAAAAAAAihAAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACIEAAAAAAAAIgQAAAAAAAAAAAAAAAA8L8"
				],
				[
					195,
					1,
					"insert",
					{
						"characters": " ||"
					},
					"AwAAAIoQAAAAAAAAixAAAAAAAAAAAAAAixAAAAAAAACMEAAAAAAAAAAAAACMEAAAAAAAAI0QAAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACKEAAAAAAAAIoQAAAAAAAAAAAAAAAA8L8"
				],
				[
					196,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAAI0QAAAAAAAAjhAAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACNEAAAAAAAAI0QAAAAAAAAAAAAAAAA8L8"
				],
				[
					197,
					1,
					"insert",
					{
						"characters": "depl"
					},
					"BAAAAI4QAAAAAAAAjxAAAAAAAAAAAAAAjxAAAAAAAACQEAAAAAAAAAAAAACQEAAAAAAAAJEQAAAAAAAAAAAAAJEQAAAAAAAAkhAAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACOEAAAAAAAAI4QAAAAAAAAAAAAAAAA8L8"
				],
				[
					198,
					1,
					"insert_completion",
					{
						"completion": "deploymentDirectories",
						"format": "text",
						"keep_prefix": false,
						"must_insert": false,
						"trigger": "deploymentDirectories"
					},
					"AgAAAI4QAAAAAAAAjhAAAAAAAAAEAAAAZGVwbI4QAAAAAAAAoxAAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACSEAAAAAAAAJIQAAAAAAAAAAAAAAAA8L8"
				],
				[
					199,
					1,
					"insert",
					{
						"characters": ".em"
					},
					"AwAAAKMQAAAAAAAApBAAAAAAAAAAAAAApBAAAAAAAAClEAAAAAAAAAAAAAClEAAAAAAAAKYQAAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACjEAAAAAAAAKMQAAAAAAAAAAAAAAAA8L8"
				],
				[
					200,
					1,
					"insert_completion",
					{
						"completion": "empty",
						"format": "text",
						"keep_prefix": false,
						"must_insert": false,
						"trigger": "empty"
					},
					"AgAAAKQQAAAAAAAApBAAAAAAAAACAAAAZW2kEAAAAAAAAKkQAAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACmEAAAAAAAAKYQAAAAAAAAAAAAAAAA8L8"
				],
				[
					201,
					1,
					"insert_snippet",
					{
						"contents": "($0)"
					},
					"AQAAAKkQAAAAAAAAqxAAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACpEAAAAAAAAKkQAAAAAAAAAAAAAAAA8L8"
				],
				[
					203,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAAKwQAAAAAAAArRAAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACsEAAAAAAAAKwQAAAAAAAAAAAAAAAA8L8"
				],
				[
					204,
					1,
					"insert_snippet",
					{
						"contents": "{$0}"
					},
					"AQAAAK0QAAAAAAAArxAAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACtEAAAAAAAAK0QAAAAAAAAAAAAAAAA8L8"
				],
				[
					205,
					1,
					"right_delete",
					null,
					"AQAAAK4QAAAAAAAArhAAAAAAAAABAAAAfQ",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACuEAAAAAAAAK4QAAAAAAAAAAAAAAAA8L8"
				],
				[
					210,
					1,
					"insert",
					{
						"characters": "\n}"
					},
					"BQAAALcSAAAAAAAAuBIAAAAAAAAAAAAAuBIAAAAAAAC8EgAAAAAAAAAAAAC8EgAAAAAAAL0SAAAAAAAAAAAAALgSAAAAAAAAuBIAAAAAAAAEAAAAICAgILgSAAAAAAAAuBIAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAC3EgAAAAAAALcSAAAAAAAAAAAAAADQhEA"
				],
				[
					213,
					1,
					"indent",
					null,
					"DQAAALAQAAAAAAAAtBAAAAAAAAAAAAAA7BAAAAAAAADwEAAAAAAAAAAAAAAhEQAAAAAAACURAAAAAAAAAAAAAFMRAAAAAAAAVxEAAAAAAAAAAAAAXxEAAAAAAABjEQAAAAAAAAAAAACaEQAAAAAAAJ4RAAAAAAAAAAAAAM8RAAAAAAAA0xEAAAAAAAAAAAAAABIAAAAAAAAEEgAAAAAAAAAAAAAMEgAAAAAAABASAAAAAAAAAAAAAEcSAAAAAAAASxIAAAAAAAAAAAAAkxIAAAAAAACXEgAAAAAAAAAAAADeEgAAAAAAAOISAAAAAAAAAAAAAOgSAAAAAAAA7BIAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAC5EgAAAAAAALAQAAAAAAAAAAAAAAAA8L8"
				],
				[
					215,
					1,
					"left_delete",
					null,
					"AQAAAK4QAAAAAAAArhAAAAAAAAABAAAACg",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACvEAAAAAAAAK8QAAAAAAAAAAAAAAAA8L8"
				],
				[
					221,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AgAAAAEMAAAAAAAAAgwAAAAAAAAAAAAAAgwAAAAAAAAGDAAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAABDAAAAAAAAAEMAAAAAAAAAAAAAAAA8L8"
				],
				[
					222,
					1,
					"paste",
					null,
					"AQAAAAYMAAAAAAAAeAwAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAGDAAAAAAAAAYMAAAAAAAAAAAAAAAA8L8"
				],
				[
					223,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AgAAAHgMAAAAAAAAeQwAAAAAAAAAAAAAeQwAAAAAAAB9DAAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAB4DAAAAAAAAHgMAAAAAAAAAAAAAAAA8L8"
				],
				[
					229,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AwAAAH0MAAAAAAAAfgwAAAAAAAAAAAAAfgwAAAAAAACCDAAAAAAAAAAAAAB5DAAAAAAAAHkMAAAAAAAABAAAACAgICA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAB9DAAAAAAAAH0MAAAAAAAAAAAAAAAA8L8"
				],
				[
					230,
					1,
					"paste",
					null,
					"AQAAAH4MAAAAAAAAxAwAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAB+DAAAAAAAAH4MAAAAAAAAAAAAAAAA8L8"
				],
				[
					232,
					1,
					"insert",
					{
						"characters": "\n}"
					},
					"BQAAAG0PAAAAAAAAbg8AAAAAAAAAAAAAbg8AAAAAAAByDwAAAAAAAAAAAAByDwAAAAAAAHMPAAAAAAAAAAAAAG4PAAAAAAAAbg8AAAAAAAAEAAAAICAgIG4PAAAAAAAAbg8AAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABtDwAAAAAAAG0PAAAAAAAAAAAAAADQhEA"
				],
				[
					235,
					1,
					"indent",
					null,
					"DgAAAMUMAAAAAAAAyQwAAAAAAAAAAAAAAQ0AAAAAAAAFDQAAAAAAAAAAAABwDQAAAAAAAHQNAAAAAAAAAAAAAK4NAAAAAAAAsg0AAAAAAAAAAAAA6Q0AAAAAAADtDQAAAAAAAAAAAAD1DQAAAAAAAPkNAAAAAAAAAAAAADAOAAAAAAAANA4AAAAAAAAAAAAAbg4AAAAAAAByDgAAAAAAAAAAAACoDgAAAAAAAKwOAAAAAAAAAAAAALQOAAAAAAAAuA4AAAAAAAAAAAAA7w4AAAAAAADzDgAAAAAAAAAAAABEDwAAAAAAAEgPAAAAAAAAAAAAAJgPAAAAAAAAnA8AAAAAAAAAAAAAog8AAAAAAACmDwAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABvDwAAAAAAAMUMAAAAAAAAAAAAAAAA8L8"
				],
				[
					240,
					1,
					"right_delete",
					null,
					"AQAAAM0MAAAAAAAAzQwAAAAAAAAZAAAAc3RkOjp2ZWN0b3I8c3RkOjpzdHJpbmc+IA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADmDAAAAAAAAM0MAAAAAAAAAAAAAAAA8L8"
				],
				[
					243,
					23,
					"right_delete",
					null,
					"FwAAAOQNAAAAAAAA5A0AAAAAAAABAAAAc+QNAAAAAAAA5A0AAAAAAAABAAAAdOQNAAAAAAAA5A0AAAAAAAABAAAAZOQNAAAAAAAA5A0AAAAAAAABAAAAOuQNAAAAAAAA5A0AAAAAAAABAAAAOuQNAAAAAAAA5A0AAAAAAAABAAAAduQNAAAAAAAA5A0AAAAAAAABAAAAZeQNAAAAAAAA5A0AAAAAAAABAAAAY+QNAAAAAAAA5A0AAAAAAAABAAAAdOQNAAAAAAAA5A0AAAAAAAABAAAAb+QNAAAAAAAA5A0AAAAAAAABAAAAcuQNAAAAAAAA5A0AAAAAAAABAAAAPOQNAAAAAAAA5A0AAAAAAAABAAAAc+QNAAAAAAAA5A0AAAAAAAABAAAAdOQNAAAAAAAA5A0AAAAAAAABAAAAZOQNAAAAAAAA5A0AAAAAAAABAAAAOuQNAAAAAAAA5A0AAAAAAAABAAAAOuQNAAAAAAAA5A0AAAAAAAABAAAAc+QNAAAAAAAA5A0AAAAAAAABAAAAdOQNAAAAAAAA5A0AAAAAAAABAAAAcuQNAAAAAAAA5A0AAAAAAAABAAAAaeQNAAAAAAAA5A0AAAAAAAABAAAAbuQNAAAAAAAA5A0AAAAAAAABAAAAZw",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADkDQAAAAAAAOQNAAAAAAAAAAAAAAAAUkA"
				],
				[
					244,
					2,
					"right_delete",
					null,
					"AgAAAOQNAAAAAAAA5A0AAAAAAAABAAAAPuQNAAAAAAAA5A0AAAAAAAABAAAAIA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADkDQAAAAAAAOQNAAAAAAAAAAAAAAAA8L8"
				],
				[
					247,
					1,
					"right_delete",
					null,
					"AQAAAIIRAAAAAAAAghEAAAAAAAAZAAAAc3RkOjp2ZWN0b3I8c3RkOjpzdHJpbmc+IA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACCEQAAAAAAAJsRAAAAAAAAAAAAAAAA8L8"
				],
				[
					249,
					24,
					"right_delete",
					null,
					"GAAAABgSAAAAAAAAGBIAAAAAAAABAAAAcxgSAAAAAAAAGBIAAAAAAAABAAAAdBgSAAAAAAAAGBIAAAAAAAABAAAAZBgSAAAAAAAAGBIAAAAAAAABAAAAOhgSAAAAAAAAGBIAAAAAAAABAAAAOhgSAAAAAAAAGBIAAAAAAAABAAAAdhgSAAAAAAAAGBIAAAAAAAABAAAAZRgSAAAAAAAAGBIAAAAAAAABAAAAYxgSAAAAAAAAGBIAAAAAAAABAAAAdBgSAAAAAAAAGBIAAAAAAAABAAAAbxgSAAAAAAAAGBIAAAAAAAABAAAAchgSAAAAAAAAGBIAAAAAAAABAAAAPBgSAAAAAAAAGBIAAAAAAAABAAAAcxgSAAAAAAAAGBIAAAAAAAABAAAAdBgSAAAAAAAAGBIAAAAAAAABAAAAZBgSAAAAAAAAGBIAAAAAAAABAAAAOhgSAAAAAAAAGBIAAAAAAAABAAAAOhgSAAAAAAAAGBIAAAAAAAABAAAAcxgSAAAAAAAAGBIAAAAAAAABAAAAdBgSAAAAAAAAGBIAAAAAAAABAAAAchgSAAAAAAAAGBIAAAAAAAABAAAAaRgSAAAAAAAAGBIAAAAAAAABAAAAbhgSAAAAAAAAGBIAAAAAAAABAAAAZxgSAAAAAAAAGBIAAAAAAAABAAAAPg",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAYEgAAAAAAABgSAAAAAAAAAAAAAAAAUkA"
				],
				[
					250,
					1,
					"right_delete",
					null,
					"AQAAABgSAAAAAAAAGBIAAAAAAAABAAAAIA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAYEgAAAAAAABgSAAAAAAAAAAAAAAAA8L8"
				],
				[
					256,
					1,
					"insert",
					{
						"characters": "\n\n"
					},
					"BQAAAPcIAAAAAAAA+AgAAAAAAAAAAAAA+AgAAAAAAAD8CAAAAAAAAAAAAAD8CAAAAAAAAP0IAAAAAAAAAAAAAP0IAAAAAAAAAQkAAAAAAAAAAAAA+AgAAAAAAAD4CAAAAAAAAAQAAAAgICAg",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAD3CAAAAAAAAPcIAAAAAAAAAAAAAAAA8L8"
				],
				[
					257,
					1,
					"paste",
					null,
					"AQAAAP0IAAAAAAAAuwkAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAD9CAAAAAAAAP0IAAAAAAAAAAAAAAAA8L8"
				],
				[
					260,
					1,
					"insert",
					{
						"characters": "\n}"
					},
					"BQAAANALAAAAAAAA0QsAAAAAAAAAAAAA0QsAAAAAAADVCwAAAAAAAAAAAADVCwAAAAAAANYLAAAAAAAAAAAAANELAAAAAAAA0QsAAAAAAAAEAAAAICAgINELAAAAAAAA0QsAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADQCwAAAAAAANALAAAAAAAAAAAAAADQhEA"
				],
				[
					263,
					1,
					"indent",
					null,
					"DQAAALwJAAAAAAAAwAkAAAAAAAAAAAAA9QkAAAAAAAD5CQAAAAAAAAAAAAAtCgAAAAAAADEKAAAAAAAAAAAAAGIKAAAAAAAAZgoAAAAAAAAAAAAAbgoAAAAAAAByCgAAAAAAAAAAAACmCgAAAAAAAKoKAAAAAAAAAAAAAN4KAAAAAAAA4goAAAAAAAAAAAAAEwsAAAAAAAAXCwAAAAAAAAAAAAAfCwAAAAAAACMLAAAAAAAAAAAAAFoLAAAAAAAAXgsAAAAAAAAAAAAAqQsAAAAAAACtCwAAAAAAAAAAAAD3CwAAAAAAAPsLAAAAAAAAAAAAAAEMAAAAAAAABQwAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADSCwAAAAAAALwJAAAAAAAAAAAAAAAA8L8"
				],
				[
					268,
					22,
					"right_delete",
					null,
					"FgAAAMQJAAAAAAAAxAkAAAAAAAABAAAAc8QJAAAAAAAAxAkAAAAAAAABAAAAdMQJAAAAAAAAxAkAAAAAAAABAAAAZMQJAAAAAAAAxAkAAAAAAAABAAAAOsQJAAAAAAAAxAkAAAAAAAABAAAAOsQJAAAAAAAAxAkAAAAAAAABAAAAdsQJAAAAAAAAxAkAAAAAAAABAAAAZcQJAAAAAAAAxAkAAAAAAAABAAAAY8QJAAAAAAAAxAkAAAAAAAABAAAAdMQJAAAAAAAAxAkAAAAAAAABAAAAb8QJAAAAAAAAxAkAAAAAAAABAAAAcsQJAAAAAAAAxAkAAAAAAAABAAAAPMQJAAAAAAAAxAkAAAAAAAABAAAAZsQJAAAAAAAAxAkAAAAAAAABAAAAc8QJAAAAAAAAxAkAAAAAAAABAAAAOsQJAAAAAAAAxAkAAAAAAAABAAAAOsQJAAAAAAAAxAkAAAAAAAABAAAAcMQJAAAAAAAAxAkAAAAAAAABAAAAYcQJAAAAAAAAxAkAAAAAAAABAAAAdMQJAAAAAAAAxAkAAAAAAAABAAAAaMQJAAAAAAAAxAkAAAAAAAABAAAAPsQJAAAAAAAAxAkAAAAAAAABAAAAIA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADECQAAAAAAAMQJAAAAAAAAAAAAAAAA8L8"
				],
				[
					270,
					21,
					"right_delete",
					null,
					"FQAAAGAKAAAAAAAAYAoAAAAAAAABAAAAc2AKAAAAAAAAYAoAAAAAAAABAAAAdGAKAAAAAAAAYAoAAAAAAAABAAAAZGAKAAAAAAAAYAoAAAAAAAABAAAAOmAKAAAAAAAAYAoAAAAAAAABAAAAOmAKAAAAAAAAYAoAAAAAAAABAAAAdmAKAAAAAAAAYAoAAAAAAAABAAAAZWAKAAAAAAAAYAoAAAAAAAABAAAAY2AKAAAAAAAAYAoAAAAAAAABAAAAdGAKAAAAAAAAYAoAAAAAAAABAAAAb2AKAAAAAAAAYAoAAAAAAAABAAAAcmAKAAAAAAAAYAoAAAAAAAABAAAAPGAKAAAAAAAAYAoAAAAAAAABAAAAZmAKAAAAAAAAYAoAAAAAAAABAAAAc2AKAAAAAAAAYAoAAAAAAAABAAAAOmAKAAAAAAAAYAoAAAAAAAABAAAAOmAKAAAAAAAAYAoAAAAAAAABAAAAcGAKAAAAAAAAYAoAAAAAAAABAAAAYWAKAAAAAAAAYAoAAAAAAAABAAAAdGAKAAAAAAAAYAoAAAAAAAABAAAAaGAKAAAAAAAAYAoAAAAAAAABAAAAPg",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABgCgAAAAAAAGAKAAAAAAAAAAAAAAAAUkA"
				],
				[
					271,
					1,
					"right_delete",
					null,
					"AQAAAGAKAAAAAAAAYAoAAAAAAAABAAAAIA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABgCgAAAAAAAGAKAAAAAAAAAAAAAAAA8L8"
				],
				[
					277,
					1,
					"paste",
					null,
					"AgAAABAJAAAAAAAAGAkAAAAAAAAAAAAAGAkAAAAAAAAYCQAAAAAAAAsAAABzdGQ6OnN0cmluZw",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAQCQAAAAAAABsJAAAAAAAAAAAAAAAA8L8"
				],
				[
					280,
					1,
					"paste",
					null,
					"AgAAAEkJAAAAAAAAUQkAAAAAAAAAAAAAUQkAAAAAAABRCQAAAAAAAAsAAABzdGQ6OnN0cmluZw",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABUCQAAAAAAAEkJAAAAAAAAAAAAAAAA8L8"
				],
				[
					1,
					1,
					"revert",
					null,
					"AwAAAAAAAAAAAAAAAAAAAAAAAADyNAAALyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKgogIyBDb3B5cmlnaHQgKGMpIDIwMjAsIE5WSURJQSBDT1JQT1JBVElPTi4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KICMKICMgUmVkaXN0cmlidXRpb24gYW5kIHVzZSBpbiBzb3VyY2UgYW5kIGJpbmFyeSBmb3Jtcywgd2l0aCBvciB3aXRob3V0CiAjIG1vZGlmaWNhdGlvbiwgYXJlIHBlcm1pdHRlZCBwcm92aWRlZCB0aGF0IHRoZSBmb2xsb3dpbmcgY29uZGl0aW9ucwogIyBhcmUgbWV0OgogIyAgKiBSZWRpc3RyaWJ1dGlvbnMgb2Ygc291cmNlIGNvZGUgbXVzdCByZXRhaW4gdGhlIGFib3ZlIGNvcHlyaWdodAogIyAgICBub3RpY2UsIHRoaXMgbGlzdCBvZiBjb25kaXRpb25zIGFuZCB0aGUgZm9sbG93aW5nIGRpc2NsYWltZXIuCiAjICAqIFJlZGlzdHJpYnV0aW9ucyBpbiBiaW5hcnkgZm9ybSBtdXN0IHJlcHJvZHVjZSB0aGUgYWJvdmUgY29weXJpZ2h0CiAjICAgIG5vdGljZSwgdGhpcyBsaXN0IG9mIGNvbmRpdGlvbnMgYW5kIHRoZSBmb2xsb3dpbmcgZGlzY2xhaW1lciBpbiB0aGUKICMgICAgZG9jdW1lbnRhdGlvbiBhbmQvb3Igb3RoZXIgbWF0ZXJpYWxzIHByb3ZpZGVkIHdpdGggdGhlIGRpc3RyaWJ1dGlvbi4KICMgICogTmVpdGhlciB0aGUgbmFtZSBvZiBOVklESUEgQ09SUE9SQVRJT04gbm9yIHRoZSBuYW1lcyBvZiBpdHMKICMgICAgY29udHJpYnV0b3JzIG1heSBiZSB1c2VkIHRvIGVuZG9yc2Ugb3IgcHJvbW90ZSBwcm9kdWN0cyBkZXJpdmVkCiAjICAgIGZyb20gdGhpcyBzb2Z0d2FyZSB3aXRob3V0IHNwZWNpZmljIHByaW9yIHdyaXR0ZW4gcGVybWlzc2lvbi4KICMKICMgVEhJUyBTT0ZUV0FSRSBJUyBQUk9WSURFRCBCWSBUSEUgQ09QWVJJR0hUIEhPTERFUlMgYGBBUyBJUycnIEFORCBBTlkKICMgRVhQUkVTUyBPUiBJTVBMSUVEIFdBUlJBTlRJRVMsIElOQ0xVRElORywgQlVUIE5PVCBMSU1JVEVEIFRPLCBUSEUKICMgSU1QTElFRCBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSBBTkQgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSCiAjIFBVUlBPU0UgQVJFIERJU0NMQUlNRUQuICBJTiBOTyBFVkVOVCBTSEFMTCBUSEUgQ09QWVJJR0hUIE9XTkVSIE9SCiAjIENPTlRSSUJVVE9SUyBCRSBMSUFCTEUgRk9SIEFOWSBESVJFQ1QsIElORElSRUNULCBJTkNJREVOVEFMLCBTUEVDSUFMLAogIyBFWEVNUExBUlksIE9SIENPTlNFUVVFTlRJQUwgREFNQUdFUyAoSU5DTFVESU5HLCBCVVQgTk9UIExJTUlURUQgVE8sCiAjIFBST0NVUkVNRU5UIE9GIFNVQlNUSVRVVEUgR09PRFMgT1IgU0VSVklDRVM7IExPU1MgT0YgVVNFLCBEQVRBLCBPUgogIyBQUk9GSVRTOyBPUiBCVVNJTkVTUyBJTlRFUlJVUFRJT04pIEhPV0VWRVIgQ0FVU0VEIEFORCBPTiBBTlkgVEhFT1JZCiAjIE9GIExJQUJJTElUWSwgV0hFVEhFUiBJTiBDT05UUkFDVCwgU1RSSUNUIExJQUJJTElUWSwgT1IgVE9SVAogIyAoSU5DTFVESU5HIE5FR0xJR0VOQ0UgT1IgT1RIRVJXSVNFKSBBUklTSU5HIElOIEFOWSBXQVkgT1VUIE9GIFRIRSBVU0UKICMgT0YgVEhJUyBTT0ZUV0FSRSwgRVZFTiBJRiBBRFZJU0VEIE9GIFRIRSBQT1NTSUJJTElUWSBPRiBTVUNIIERBTUFHRS4KICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqLwojaW5jbHVkZSA8ZnN0cmVhbT4KI2luY2x1ZGUgPHJlZ2V4PgoKI2luY2x1ZGUgInN0ZGFmeC5oIgojaW5jbHVkZSAiRmFsY29yL1V0aWxzL1N0cmluZ1V0aWxzLmgiCiNpbmNsdWRlICJGYWxjb3IvVXRpbHMvRGVidWcvZGVidWcuaCIKI2luY2x1ZGUgIk9TLmgiCgojaWZuZGVmIFBST0pFQ1RfRElSCiNkZWZpbmUgUFJPSkVDVF9ESVIgIi9ob21lL21heC9kZXYvRmFsY29yLyIKI2VuZGlmCgojaWZuZGVmIExBVkFfSU5TVEFMTF9ESVIKI2RlZmluZSBMQVZBX0lOU1RBTExfRElSICIvb3B0L2xhdmEvIgojZW5kaWYKCm5hbWVzcGFjZSBGYWxjb3IgewoKc3RkOjpzdHJpbmcgZ01zZ0JveFRpdGxlID0gIkZhbGNvciI7Cgp2b2lkIG1zZ0JveFRpdGxlKGNvbnN0IHN0ZDo6c3RyaW5nJiB0aXRsZSkgewogICAgZ01zZ0JveFRpdGxlID0gdGl0bGU7Cn0KCnVpbnQzMl90IGdldExvd2VyUG93ZXJPZjIodWludDMyX3QgYSkgewogICAgYXNzZXJ0KGEgIT0gMCk7CiAgICByZXR1cm4gMSA8PCBiaXRTY2FuUmV2ZXJzZShhKTsKfQoKaW5saW5lIHN0ZDo6dmVjdG9yPGZzOjpwYXRoPiBnZXRJbml0aWFsU2hhZGVyRGlyZWN0b3JpZXMoKSB7CgogICAgc3RhdGljIHN0ZDo6dmVjdG9yPGZzOjpwYXRoPiBkZXZlbG9wbWVudERpcmVjdG9yaWVzOwogICAgc3RhdGljIHN0ZDo6dmVjdG9yPGZzOjpwYXRoPiBkZXBsb3ltZW50RGlyZWN0b3JpZXM7CgogICAgaWYoIGRldmVsb3BtZW50RGlyZWN0b3JpZXMuZW1wdHkoKSB8fCBkZXBsb3ltZW50RGlyZWN0b3JpZXMuZW1wdHkoKSkgewogICAgICAgIGRldmVsb3BtZW50RGlyZWN0b3JpZXMgPSB7CiAgICAgICAgICAgIHN0ZDo6c3RyaW5nKExBVkFfSU5TVEFMTF9ESVIpICsgIi9zaGFkZXJzIiwKICAgICAgICAgICAgZ2V0RXhlY3V0YWJsZURpcmVjdG9yeSgpICsgIi4uL3NoYWRlcnMiLAogICAgICAgIH07CgogICAgICAgIGRlcGxveW1lbnREaXJlY3RvcmllcyA9IHsKICAgICAgICAgICAgc3RkOjpzdHJpbmcoTEFWQV9JTlNUQUxMX0RJUikgKyAiL3NoYWRlcnMiLAogICAgICAgICAgICBnZXRFeGVjdXRhYmxlRGlyZWN0b3J5KCkgKyAiLi4vc2hhZGVycyIsCiAgICAgICAgfTsKCiAgICAgICAgaWYoY29uc3QgY2hhciogZW52X3AgPSBzdGQ6OmdldGVudigiTEFWQV9IT01FIikpIHsKICAgICAgICAgICAgZGV2ZWxvcG1lbnREaXJlY3Rvcmllcy5wdXNoX2JhY2soc3RkOjpzdHJpbmcoZW52X3ApICsgIi9zaGFkZXJzIik7CiAgICAgICAgICAgIGRlcGxveW1lbnREaXJlY3Rvcmllcy5wdXNoX2JhY2soc3RkOjpzdHJpbmcoZW52X3ApICsgIi9zaGFkZXJzIik7CiAgICAgICAgfQogICAgfQoKICAgIHN0ZDo6Y291dCA8PCAibW9kZTogIiA8PCAoaXNEZXZlbG9wbWVudE1vZGUoKSA/ICJkZXZlbG9wbWVudCIgOiAicHJvZHVjdGlvbiIpIDw8ICJcbiI7CgogICAgcmV0dXJuIGlzRGV2ZWxvcG1lbnRNb2RlKCkgPyBkZXZlbG9wbWVudERpcmVjdG9yaWVzIDogZGVwbG95bWVudERpcmVjdG9yaWVzOwp9CgppbmxpbmUgc3RkOjp2ZWN0b3I8c3RkOjpzdHJpbmc+IGdldEluaXRpYWxSZW5kZXJQYXNzRGlyZWN0b3JpZXMoKSB7CiAgICBzdGF0aWMgc3RkOjp2ZWN0b3I8c3RkOjpzdHJpbmc+IGRldmVsb3BtZW50RGlyZWN0b3JpZXM7CiAgICBzdGF0aWMgc3RkOjp2ZWN0b3I8c3RkOjpzdHJpbmc+IGRlcGxveW1lbnREaXJlY3RvcmllczsKCiAgICBpZiggZGV2ZWxvcG1lbnREaXJlY3Rvcmllcy5lbXB0eSgpIHx8IGRlcGxveW1lbnREaXJlY3Rvcmllcy5lbXB0eSgpKSB7CiAgICAgICAgZGV2ZWxvcG1lbnREaXJlY3RvcmllcyA9IHsKICAgICAgICAgICAgLy8gVGhlbiB3ZSBzZWFyY2ggaW4gZGVwbG95bWVudCBmb2xkZXJzIChuZWNlc3NhcnkgdG8gcGlja3VwIE5WQVBJIGFuZCBvdGhlciB0aGlyZC1wYXJ0eSBzaGFkZXJzKS4KICAgICAgICAgICAgc3RkOjpzdHJpbmcoTEFWQV9JTlNUQUxMX0RJUikgKyAiL3JlbmRlcl9wYXNzZXMiLAogICAgICAgICAgICBnZXRFeGVjdXRhYmxlRGlyZWN0b3J5KCkgKyAiLi4vcmVuZGVyX3Bhc3NlcyIsCiAgICAgICAgfTsKCiAgICAgICAgZGVwbG95bWVudERpcmVjdG9yaWVzID0gewogICAgICAgICAgICBzdGQ6OnN0cmluZyhMQVZBX0lOU1RBTExfRElSKSArICIvcmVuZGVyX3Bhc3NlcyIsCiAgICAgICAgICAgIGdldEV4ZWN1dGFibGVEaXJlY3RvcnkoKSArICIuLi9yZW5kZXJfcGFzc2VzIgogICAgICAgIH07CgogICAgICAgIGlmKGNvbnN0IGNoYXIqIGVudl9wID0gc3RkOjpnZXRlbnYoIkxBVkFfSE9NRSIpKSB7CiAgICAgICAgICAgIGRldmVsb3BtZW50RGlyZWN0b3JpZXMucHVzaF9iYWNrKHN0ZDo6c3RyaW5nKGVudl9wKSArICIvcmVuZGVyX3Bhc3NlcyIpOwogICAgICAgICAgICBkZXBsb3ltZW50RGlyZWN0b3JpZXMucHVzaF9iYWNrKHN0ZDo6c3RyaW5nKGVudl9wKSArICIvcmVuZGVyX3Bhc3NlcyIpOwogICAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gaXNEZXZlbG9wbWVudE1vZGUoKSA/IGRldmVsb3BtZW50RGlyZWN0b3JpZXMgOiBkZXBsb3ltZW50RGlyZWN0b3JpZXM7Cn0KCnN0YXRpYyBzdGQ6OnZlY3Rvcjxmczo6cGF0aD4gZ1NoYWRlckRpcmVjdG9yaWVzID0gZ2V0SW5pdGlhbFNoYWRlckRpcmVjdG9yaWVzKCk7CnN0YXRpYyBzdGQ6OnZlY3RvcjxzdGQ6OnN0cmluZz4gZ1JlbmRlclBhc3NEaXJlY3RvcmllcyA9IGdldEluaXRpYWxSZW5kZXJQYXNzRGlyZWN0b3JpZXMoKTsKCmlubGluZSBzdGQ6OnZlY3RvcjxzdGQ6OnN0cmluZz4gZ2V0SW5pdGlhbERhdGFEaXJlY3RvcmllcygpIHsKICAgIHN0YXRpYyBzdGQ6OnZlY3RvcjxzdGQ6OnN0cmluZz4gZGV2ZWxvcG1lbnREaXJlY3RvcmllczsKICAgIHN0YXRpYyBzdGQ6OnZlY3RvcjxzdGQ6OnN0cmluZz4gZGVwbG95bWVudERpcmVjdG9yaWVzOwoKICAgIGlmKCBkZXZlbG9wbWVudERpcmVjdG9yaWVzLmVtcHR5KCkgfHwgZGVwbG95bWVudERpcmVjdG9yaWVzLmVtcHR5KCkpIHsKICAgICAgICBkZXZlbG9wbWVudERpcmVjdG9yaWVzID0gewogICAgICAgICAgICBzdGQ6OnN0cmluZyhMQVZBX0lOU1RBTExfRElSKSArICIvZGF0YSIsCiAgICAgICAgICAgIGdldEV4ZWN1dGFibGVEaXJlY3RvcnkoKSArICIuLi9kYXRhIiwKICAgICAgICB9OwoKICAgICAgICBkZXBsb3ltZW50RGlyZWN0b3JpZXMgPSB7CiAgICAgICAgICAgIHN0ZDo6c3RyaW5nKExBVkFfSU5TVEFMTF9ESVIpICsgIi9kYXRhIiwKICAgICAgICAgICAgZ2V0RXhlY3V0YWJsZURpcmVjdG9yeSgpICsgIi4uL2RhdGEiCiAgICAgICAgfTsKCiAgICAgICAgaWYoY29uc3QgY2hhciogZW52X3AgPSBzdGQ6OmdldGVudigiTEFWQV9IT01FIikpIHsKICAgICAgICAgICAgZGV2ZWxvcG1lbnREaXJlY3Rvcmllcy5wdXNoX2JhY2soc3RkOjpzdHJpbmcoZW52X3ApICsgIi9kYXRhIik7CiAgICAgICAgICAgIGRlcGxveW1lbnREaXJlY3Rvcmllcy5wdXNoX2JhY2soc3RkOjpzdHJpbmcoZW52X3ApICsgIi9kYXRhIik7CiAgICAgICAgfQogICAgfQoKICAgIHN0ZDo6dmVjdG9yPHN0ZDo6c3RyaW5nPiBkaXJlY3RvcmllcyA9IGlzRGV2ZWxvcG1lbnRNb2RlKCkgPyBkZXZlbG9wbWVudERpcmVjdG9yaWVzIDogZGVwbG95bWVudERpcmVjdG9yaWVzOwoKICAgIC8vIEFkZCBkZXZlbG9wbWVudCBtZWRpYSBmb2xkZXIuCiNpZmRlZiBfTVNDX1ZFUgogICAgZGlyZWN0b3JpZXMucHVzaF9iYWNrKGdldEV4ZWN1dGFibGVEaXJlY3RvcnkoKSArICIvLi4vLi4vLi4vTWVkaWEiKTsgLy8gUmVsYXRpdmUgdG8gVmlzdWFsIFN0dWRpbyBvdXRwdXQgZm9sZGVyCiNlbHNlCiAgICBkaXJlY3Rvcmllcy5wdXNoX2JhY2soZ2V0RXhlY3V0YWJsZURpcmVjdG9yeSgpICsgIi8uLi9NZWRpYSIpOyAvLyBSZWxhdGl2ZSB0byBNYWtlZmlsZSBvdXRwdXQgZm9sZGVyCiNlbmRpZgoKICAgIC8vIEFkZCBhZGRpdGlvbmFsIG1lZGlhIGZvbGRlcnMuCiAgICBzdGQ6OnN0cmluZyBtZWRpYUZvbGRlcnM7CiAgICBpZiAoZ2V0RW52aXJvbm1lbnRWYXJpYWJsZSgiRkFMQ09SX01FRElBX0ZPTERFUlMiLCBtZWRpYUZvbGRlcnMpKSB7CiAgICAgICAgYXV0byBmb2xkZXJzID0gc3BsaXRTdHJpbmcobWVkaWFGb2xkZXJzLCAiOyIpOwogICAgICAgIGRpcmVjdG9yaWVzLmluc2VydChkaXJlY3Rvcmllcy5lbmQoKSwgZm9sZGVycy5iZWdpbigpLCBmb2xkZXJzLmVuZCgpKTsKICAgIH0KCiAgICByZXR1cm4gZGlyZWN0b3JpZXM7Cn0KCnN0YXRpYyBzdGQ6OnZlY3RvcjxzdGQ6OnN0cmluZz4gZ0RhdGFEaXJlY3RvcmllcyA9IGdldEluaXRpYWxEYXRhRGlyZWN0b3JpZXMoKTsKCmNvbnN0IHN0ZDo6dmVjdG9yPHN0ZDo6c3RyaW5nPiYgZ2V0RGF0YURpcmVjdG9yaWVzTGlzdCgpIHsKICAgIHJldHVybiBnRGF0YURpcmVjdG9yaWVzOwp9Cgp2b2lkIGFkZERhdGFEaXJlY3RvcnkoY29uc3Qgc3RkOjpzdHJpbmcmIGRpcikgewogICAgaWYgKHN0ZDo6ZmluZChnRGF0YURpcmVjdG9yaWVzLmJlZ2luKCksIGdEYXRhRGlyZWN0b3JpZXMuZW5kKCksIGRpcikgPT0gZ0RhdGFEaXJlY3Rvcmllcy5lbmQoKSkgewogICAgICAgIGdEYXRhRGlyZWN0b3JpZXMucHVzaF9iYWNrKGRpcik7CiAgICB9Cn0KCnZvaWQgcmVtb3ZlRGF0YURpcmVjdG9yeShjb25zdCBzdGQ6OnN0cmluZyYgZGlyKSB7CiAgICBhdXRvIGl0ID0gc3RkOjpmaW5kKGdEYXRhRGlyZWN0b3JpZXMuYmVnaW4oKSwgZ0RhdGFEaXJlY3Rvcmllcy5lbmQoKSwgZGlyKTsKICAgIGlmIChpdCAhPSBnRGF0YURpcmVjdG9yaWVzLmVuZCgpKSB7CiAgICAgICAgZ0RhdGFEaXJlY3Rvcmllcy5lcmFzZShpdCk7CiAgICB9Cn0KCmJvb2wgaXNEZXZlbG9wbWVudE1vZGUoKSB7CiAgICBzdGF0aWMgYm9vbCBpbml0aWFsaXplZCA9IGZhbHNlOwogICAgc3RhdGljIGJvb2wgZGV2TW9kZSA9IGZhbHNlOwoKICAgIGlmICghaW5pdGlhbGl6ZWQpIHsKICAgICAgICBzdGQ6OnN0cmluZyB2YWx1ZTsKICAgICAgICAjaWZkZWYgREVCVUcKICAgICAgICBkZXZNb2RlID0gdHJ1ZTsKICAgICAgICAjZWxzZQogICAgICAgIGRldk1vZGUgPSBnZXRFbnZpcm9ubWVudFZhcmlhYmxlKCJGQUxDT1JfREVWTU9ERSIsIHZhbHVlKSAmJiB2YWx1ZSA9PSAiMSI7CiAgICAgICAgI2VuZGlmCiAgICAgICAgaW5pdGlhbGl6ZWQgPSB0cnVlOwogICAgfQoKICAgIHJldHVybiBkZXZNb2RlOwp9CgpzdGQ6OnN0cmluZyBjYW5vbmljYWxpemVGaWxlbmFtZShjb25zdCBzdGQ6OnN0cmluZyYgZmlsZW5hbWUpIHsKICAgIGZzOjpwYXRoIHBhdGgocmVwbGFjZVN1YnN0cmluZyhmaWxlbmFtZSwgIlxcIiwgIi8iKSk7CiAgICByZXR1cm4gZnM6OmV4aXN0cyhwYXRoKSA/IGZzOjpjYW5vbmljYWwocGF0aCkuc3RyaW5nKCkgOiAiIjsKfQoKYm9vbCBmaW5kRmlsZUluRGF0YURpcmVjdG9yaWVzKGNvbnN0IHN0ZDo6c3RyaW5nJiBmaWxlbmFtZSwgc3RkOjpzdHJpbmcmIGZ1bGxQYXRoKSB7CiAgICAvLyBDaGVjayBpZiB0aGlzIGlzIGFuIGFic29sdXRlIHBhdGgKICAgIGlmIChmczo6cGF0aChmaWxlbmFtZSkuaXNfYWJzb2x1dGUoKSkgewogICAgICAgIGZ1bGxQYXRoID0gY2Fub25pY2FsaXplRmlsZW5hbWUoZmlsZW5hbWUpOwogICAgICAgIHJldHVybiAhZnVsbFBhdGguZW1wdHkoKTsgLy8gRW1wdHkgZnVsbFBhdGggbWVhbnMgcGF0aCBkb2Vzbid0IGV4aXN0CiAgICB9CgogICAgZm9yIChjb25zdCBhdXRvJiBkaXIgOiBnRGF0YURpcmVjdG9yaWVzKSB7CiAgICAgICAgZnVsbFBhdGggPSBjYW5vbmljYWxpemVGaWxlbmFtZShkaXIgKyAnLycgKyBmaWxlbmFtZSk7CiAgICAgICAgaWYgKGRvZXNGaWxlRXhpc3QoZnVsbFBhdGgpKSB7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gZmFsc2U7Cn0KCmJvb2wgZmluZEZpbGVJbkRhdGFEaXJlY3Rvcmllcyhjb25zdCBmczo6cGF0aCYgcGF0aCwgZnM6OnBhdGgmIGZ1bGxQYXRoKSB7CiAgICBzdGQ6OnN0cmluZyBmaWxlX3BhdGg7CiAgICBpZiAoZmluZEZpbGVJbkRhdGFEaXJlY3RvcmllcyhwYXRoLnN0cmluZygpLCBmaWxlX3BhdGgpKSB7CiAgICAgICAgZnVsbFBhdGggPSBmczo6cGF0aChmaWxlX3BhdGgpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQogICAgcmV0dXJuIGZhbHNlOwp9Cgpib29sIGZpbmRGaWxlc0luRGF0YURpcmVjdG9yaWVzKGNvbnN0IHN0ZDo6c3RyaW5nJiBzZWFyY2hQYXRoLCBjb25zdCBzdGQ6OnJlZ2V4JiByZWdleCwgc3RkOjp2ZWN0b3I8c3RkOjpzdHJpbmc+JiBmaWxlbmFtZXMpIHsKICAgIC8vIENoZWNrIGlmIHNlYXJjaFBhdGggZXhpc3RzCiAgICBpZiAoIWZzOjpleGlzdHMoZnM6OnBhdGgoc2VhcmNoUGF0aCkpKSB7CiAgICAgICAgTExPR19XUk4gPDwgIlNlYXJjaCBwYXRoICciIDw8IHNlYXJjaFBhdGggPDwgIicgZG9lcyBub3QgZXhpc3QgISEhIjsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICB9CgogICAgYm9vbCByZXN1bHQgPSBmYWxzZTsKICAgIGNvbnN0IGZzOjpkaXJlY3RvcnlfaXRlcmF0b3IgZW5kOwogICAgCiAgICBmb3IgKGZzOjpkaXJlY3RvcnlfaXRlcmF0b3IgaXRlcntzZWFyY2hQYXRofTsgaXRlciAhPSBlbmQ7IGl0ZXIrKykgewogICAgICAgIGNvbnN0IHN0ZDo6c3RyaW5nIGZpbGVOYW1lID0gaXRlci0+cGF0aCgpLmZpbGVuYW1lKCkuc3RyaW5nKCk7CiAgICAgICAgaWYgKGZzOjppc19yZWd1bGFyX2ZpbGUoKml0ZXIpKSB7CiAgICAgICAgICAgIGlmIChzdGQ6OnJlZ2V4X21hdGNoKGZpbGVOYW1lLCByZWdleCkpIHsKICAgICAgICAgICAgICAgIGZpbGVuYW1lcy5wdXNoX2JhY2soaXRlci0+cGF0aCgpLnN0cmluZygpKTsKICAgICAgICAgICAgICAgIHJlc3VsdCA9IHRydWU7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9CiAgICAKICAgIHJldHVybiByZXN1bHQ7Cn0KCmNvbnN0IHN0ZDo6dmVjdG9yPGZzOjpwYXRoPiYgZ2V0U2hhZGVyRGlyZWN0b3JpZXNMaXN0KCkgewogICAgcmV0dXJuIGdTaGFkZXJEaXJlY3RvcmllczsKfQoKYm9vbCBmaW5kRmlsZUluU2hhZGVyRGlyZWN0b3JpZXMoY29uc3QgZnM6OnBhdGgmIHBhdGgsIGZzOjpwYXRoJiBmdWxsUGF0aCkgewogICAgLy8gQ2hlY2sgaWYgdGhpcyBpcyBhbiBhYnNvbHV0ZSBwYXRoLgogICAgaWYgKHBhdGguaXNfYWJzb2x1dGUoKSkgewogICAgICAgIGlmIChmczo6ZXhpc3RzKHBhdGgpKSB7CiAgICAgICAgICAgIGZ1bGxQYXRoID0gZnM6OmNhbm9uaWNhbChwYXRoKTsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQogICAgfQoKICAgIC8vIFNlYXJjaCBpbiBvdGhlciBwYXRocy4KICAgIGZvciAoY29uc3QgYXV0byYgZGlyIDogZ1NoYWRlckRpcmVjdG9yaWVzKSB7CiAgICAgICAgZnVsbFBhdGggPSBkaXIgLyBwYXRoOwogICAgICAgIGlmIChmczo6ZXhpc3RzKGZ1bGxQYXRoKSkgewogICAgICAgICAgICBmdWxsUGF0aCA9IGZzOjpjYW5vbmljYWwoZnVsbFBhdGgpOwogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CiAgICB9CgogICAgcmV0dXJuIGZhbHNlOwp9Cgp1aW50MzJfdCBnZXROZXh0UG93ZXJPZjIodWludDMyX3QgYSkgewogICAgLy8gVE9ETzogV2l0aCBDKysyMCB3ZSBjb3VsZCB1c2Ugc3RkOjpiaXRfY2VpbCBpbnN0ZWFkLgogICAgYS0tOwogICAgYSB8PSBhID4+IDE7CiAgICBhIHw9IGEgPj4gMjsKICAgIGEgfD0gYSA+PiA0OwogICAgYSB8PSBhID4+IDg7CiAgICBhIHw9IGEgPj4gMTY7CiAgICBhKys7CiAgICByZXR1cm4gYTsKfQoKYm9vbCBmaW5kRmlsZUluU2hhZGVyRGlyZWN0b3JpZXMoY29uc3QgZnM6OnBhdGgmIHBhdGgsIHN0ZDo6c3RyaW5nJiBmdWxsUGF0aCkgewogICAgZnM6OnBhdGggcDsKICAgIGJvb2wgcmVzdWx0ID0gZmluZEZpbGVJblNoYWRlckRpcmVjdG9yaWVzKHBhdGgsIHApOwogICAgZnVsbFBhdGggPSBwLnN0cmluZygpOwogICAgcmV0dXJuIHJlc3VsdDsKfQoKc3RkOjpzdHJpbmcgZ2V0RXh0ZW5zaW9uRnJvbVBhdGgoY29uc3QgZnM6OnBhdGgmIHBhdGgpIHsKICAgIHN0ZDo6c3RyaW5nIGV4dDsKICAgIGlmIChwYXRoLmhhc19leHRlbnNpb24oKSkgewogICAgICAgIGV4dCA9IHBhdGguZXh0ZW5zaW9uKCkuc3RyaW5nKCk7CiAgICAgICAgLy8gUmVtb3ZlIHRoZSBsZWFkaW5nICcuJyBmcm9tIGV4dC4KICAgICAgICBpZiAoZXh0LnNpemUoKSA+IDAgJiYgZXh0WzBdID09ICcuJykgZXh0LmVyYXNlKDAsIDEpOwogICAgICAgIC8vIENvbnZlcnQgdG8gbG93ZXItY2FzZS4KICAgICAgICBzdGQ6OnRyYW5zZm9ybShleHQuYmVnaW4oKSwgZXh0LmVuZCgpLCBleHQuYmVnaW4oKSwgW10oY2hhciBjKSB7IHJldHVybiBzdGQ6OnRvbG93ZXIoYyk7IH0pOwogICAgfQogICAgcmV0dXJuIGV4dDsKfQoKYm9vbCBoYXNFeHRlbnNpb24oY29uc3QgZnM6OnBhdGgmIHBhdGgsIHN0ZDo6c3RyaW5nX3ZpZXcgZXh0KSB7CiAgICAvLyBSZW1vdmUgbGVhZGluZyAnLicgZnJvbSBleHQuCiAgICBpZiAoZXh0LnNpemUoKSA+IDAgJiYgZXh0WzBdID09ICcuJykgZXh0LnJlbW92ZV9wcmVmaXgoMSk7CgogICAgc3RkOjpzdHJpbmcgcGF0aEV4dCA9IGdldEV4dGVuc2lvbkZyb21QYXRoKHBhdGgpOwoKICAgIGlmIChleHQuc2l6ZSgpICE9IHBhdGhFeHQuc2l6ZSgpKSByZXR1cm4gZmFsc2U7CgogICAgcmV0dXJuIHN0ZDo6ZXF1YWwoZXh0LnJiZWdpbigpLCBleHQucmVuZCgpLCBwYXRoRXh0LnJiZWdpbigpLAogICAgICAgIFtdKGNoYXIgYSwgY2hhciBiKSB7IHJldHVybiBzdGQ6OnRvbG93ZXIoYSkgPT0gc3RkOjp0b2xvd2VyKGIpOyB9KTsKfQoKYm9vbCBmaW5kRmlsZUluUmVuZGVyUGFzc0RpcmVjdG9yaWVzKGNvbnN0IHN0ZDo6c3RyaW5nJiBmaWxlbmFtZSwgc3RkOjpzdHJpbmcmIGZ1bGxQYXRoKSB7CiAgICBmb3IgKGNvbnN0IGF1dG8mIGRpciA6IGdSZW5kZXJQYXNzRGlyZWN0b3JpZXMpIHsKICAgICAgICBmdWxsUGF0aCA9IGNhbm9uaWNhbGl6ZUZpbGVuYW1lKGRpciArICcvJyArIGZpbGVuYW1lKTsKICAgICAgICBpZiAoZG9lc0ZpbGVFeGlzdChmdWxsUGF0aCkpIHsKICAgICAgICAgICAgTExPR19EQkcgPDwgIlJlbmRlclBhc3MgbGlicmFyeTogIiA8PCBmaWxlbmFtZSA8PCAiIGZvdW5kIGFzOiAiIDw8IGZ1bGxQYXRoOwogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CiAgICB9CiAgICByZXR1cm4gZmFsc2U7Cn0KCmJvb2wgZmluZEF2YWlsYWJsZUZpbGVuYW1lKGNvbnN0IHN0ZDo6c3RyaW5nJiBwcmVmaXgsIGNvbnN0IHN0ZDo6c3RyaW5nJiBkaXJlY3RvcnksIGNvbnN0IHN0ZDo6c3RyaW5nJiBleHRlbnNpb24sIHN0ZDo6c3RyaW5nJiBmaWxlbmFtZSkgewogICAgZm9yICh1aW50MzJfdCBpID0gMDsgaSA8ICh1aW50MzJfdCktMTsgaSsrKSB7CiAgICAgICAgc3RkOjpzdHJpbmcgbmV3UHJlZml4ID0gcHJlZml4ICsgJy4nICsgc3RkOjp0b19zdHJpbmcoaSk7CiAgICAgICAgZmlsZW5hbWUgPSBkaXJlY3RvcnkgKyAnLycgKyBuZXdQcmVmaXggKyAiLiIgKyBleHRlbnNpb247CgogICAgICAgIGlmIChkb2VzRmlsZUV4aXN0KGZpbGVuYW1lKSA9PSBmYWxzZSkgewogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CiAgICB9CiAgICBzaG91bGRfbm90X2dldF9oZXJlKCk7CiAgICBmaWxlbmFtZSA9ICIiOwogICAgcmV0dXJuIGZhbHNlOwp9CgpzdGQ6OnN0cmluZyBzdHJpcERhdGFEaXJlY3Rvcmllcyhjb25zdCBzdGQ6OnN0cmluZyYgZmlsZW5hbWUpIHsKICAgIHN0ZDo6c3RyaW5nIHN0cmlwcGVkID0gZmlsZW5hbWU7CiAgICBzdGQ6OnN0cmluZyBjYW5vbkZpbGUgPSBjYW5vbmljYWxpemVGaWxlbmFtZShmaWxlbmFtZSk7CgogICAgZm9yIChjb25zdCBhdXRvJiBkaXIgOiBnRGF0YURpcmVjdG9yaWVzKSB7CiAgICAgICAgc3RkOjpzdHJpbmcgY2Fub25EaXIgPSBjYW5vbmljYWxpemVGaWxlbmFtZShkaXIpOwoKICAgICAgICBpZiAoY2Fub25EaXIuc2l6ZSgpICYmIGhhc1ByZWZpeChjYW5vbkZpbGUsIGNhbm9uRGlyLCBmYWxzZSkpIHsKICAgICAgICAgICAgLy8gY2Fub25pY2FsaXplRmlsZW5hbWUgYWRkcyB0cmFpbGluZyBcXCB0byBkcml2ZSBsZXR0ZXJzIGFuZCByZW1vdmVzIHRoZW0gZnJvbSBwYXRocyBjb250YWluaW5nIGZvbGRlcnMKICAgICAgICAgICAgLy8gVGhlIGVudGlyZSBwcmVmaXggZGlyZWN0b3J5IGluY2x1ZGluZyB0aGUgc2xhc2ggc2hvdWxkIGJlIHJlbW92ZWQKICAgICAgICAgICAgYm9vbCB0cmFpbGluZ1NsYXNoID0gY2Fub25EaXIuYmFjaygpID09ICdcXCcgfHwgY2Fub25EaXIuYmFjaygpID09ICcvJzsKICAgICAgICAgICAgc2l6ZV90IGxlbiA9IHRyYWlsaW5nU2xhc2ggPyBjYW5vbkRpci5sZW5ndGgoKSA6IGNhbm9uRGlyLmxlbmd0aCgpICsgMTsKICAgICAgICAgICAgc3RkOjpzdHJpbmcgdG1wID0gY2Fub25GaWxlLmVyYXNlKDAsIGxlbik7CiAgICAgICAgICAgIAogICAgICAgICAgICBpZiAodG1wLmxlbmd0aCgpIDwgc3RyaXBwZWQubGVuZ3RoKCkpIHsKICAgICAgICAgICAgICAgIHN0cmlwcGVkID0gdG1wOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQoKICAgIHJldHVybiBzdHJpcHBlZDsKfQoKc3RkOjpzdHJpbmcgc3dhcEZpbGVFeHRlbnNpb24oY29uc3Qgc3RkOjpzdHJpbmcmIHN0ciwgY29uc3Qgc3RkOjpzdHJpbmcmIGN1cnJlbnRFeHRlbnNpb24sIGNvbnN0IHN0ZDo6c3RyaW5nJiBuZXdFeHRlbnNpb24pIHsKICAgIGlmIChoYXNTdWZmaXgoc3RyLCBjdXJyZW50RXh0ZW5zaW9uKSkgewogICAgICAgIHN0ZDo6c3RyaW5nIHJldCA9IHN0cjsKICAgICAgICByZXR1cm4gKHJldC5lcmFzZShyZXQucmZpbmQoY3VycmVudEV4dGVuc2lvbikpICsgbmV3RXh0ZW5zaW9uKTsKICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIHN0cjsKICAgIH0KfQoKc3RkOjpzdHJpbmcgZ2V0RGlyZWN0b3J5RnJvbUZpbGUoY29uc3Qgc3RkOjpzdHJpbmcmIGZpbGVuYW1lKSB7CiAgICBmczo6cGF0aCBwYXRoID0gZmlsZW5hbWU7CiAgICByZXR1cm4gcGF0aC5oYXNfZmlsZW5hbWUoKSA/IHBhdGgucGFyZW50X3BhdGgoKS5zdHJpbmcoKSA6IGZpbGVuYW1lOwp9CgpzdGQ6OnN0cmluZyBnZXRFeHRlbnNpb25Gcm9tRmlsZShjb25zdCBzdGQ6OnN0cmluZyYgZmlsZW5hbWUpIHsKICAgIGZzOjpwYXRoIHBhdGggPSBmaWxlbmFtZTsKICAgIHN0ZDo6c3RyaW5nIGV4dDsKICAgIGlmIChwYXRoLmhhc19leHRlbnNpb24oKSkgewogICAgICAgIC8vIHJlbW92ZSB0aGUgbGVhZGluZyAnLicgdGhhdCBmaWxlc3lzdGVtIGdpdmVzIHVzCiAgICAgICAgZXh0ID0gcGF0aC5leHRlbnNpb24oKS5zdHJpbmcoKTsKICAgICAgICBpZiAoaGFzUHJlZml4KGV4dCwgIi4iKSkgICBleHQgPSBleHQuc3Vic3RyKDEsIGV4dC5zaXplKCkpOwogICAgfQogICAgcmV0dXJuIGV4dDsKfQoKc3RkOjpzdHJpbmcgZ2V0RmlsZW5hbWVGcm9tUGF0aChjb25zdCBzdGQ6OnN0cmluZyYgZmlsZW5hbWUpIHsKICAgIHJldHVybiBmczo6cGF0aChmaWxlbmFtZSkuZmlsZW5hbWUoKS5zdHJpbmcoKTsKfQoKc3RkOjpzdHJpbmcgcmVhZEZpbGUoY29uc3Qgc3RkOjpzdHJpbmcmIGZpbGVuYW1lKSB7CiAgICBzdGQ6Omlmc3RyZWFtIGZpbGVzdHJlYW0oZmlsZW5hbWUpOwogICAgc3RkOjpzdHJpbmcgc3RyOwogICAgZmlsZXN0cmVhbS5zZWVrZygwLCBzdGQ6Omlvczo6ZW5kKTsKICAgIHN0ci5yZXNlcnZlKGZpbGVzdHJlYW0udGVsbGcoKSk7CiAgICBmaWxlc3RyZWFtLnNlZWtnKDAsIHN0ZDo6aW9zOjpiZWcpOwogICAgc3RyLmFzc2lnbihzdGQ6OmlzdHJlYW1idWZfaXRlcmF0b3I8Y2hhcj4oZmlsZXN0cmVhbSksIHN0ZDo6aXN0cmVhbWJ1Zl9pdGVyYXRvcjxjaGFyPigpKTsKICAgIHJldHVybiBzdHI7Cn0KCn0gIC8vIG5hbWVzcGFjZSBGYWxjb3IKAAAAAAAAAADiKAAAAAAAAAAAAAAAAAAAAAAAAOIoAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABRCQAAAAAAAFEJAAAAAAAAAAAAAAAA8L8"
				]
			]
		},
		{
			"contents": "Searching 59 files for \"USE_OPENCV\" (case sensitive)\n\n0 matches\n\nSearching 1308 files for \"OpenCV_INCLUDE_DIR\" (case sensitive)\n\n/mnt/misc_hdd/dev/Lava/third_party/external/openimageio/src/OpenImageIO/src/cmake/modules/FindOpenCV.cmake:\n   10  # variable or an environment variable).\n   11  \n   12: find_path (OpenCV_INCLUDE_DIR\n   13             NAMES opencv4/opencv2/opencv.hpp opencv2/opencv.hpp\n   14             PATHS\n   ..\n   19             )\n   20  \n   21: set (_ocv_include_root \"${OpenCV_INCLUDE_DIR}\")\n   22: if (OpenCV_INCLUDE_DIR AND EXISTS \"${OpenCV_INCLUDE_DIR}/opencv4/opencv2/core/version.hpp\")\n   23:     set (OpenCV_INCLUDE_DIR \"${OpenCV_INCLUDE_DIR}/opencv4\")\n   24  endif ()\n   25: set (_ocv_version_file \"${OpenCV_INCLUDE_DIR}/opencv2/core/version.hpp\")\n   26  if (EXISTS \"${_ocv_version_file}\")\n   27      file (STRINGS \"${_ocv_version_file}\" TMP REGEX \"^#define CV_VERSION_EPOCH .*$\")\n   ..\n   68  include (FindPackageHandleStandardArgs)\n   69  FIND_PACKAGE_HANDLE_STANDARD_ARGS (OpenCV\n   70:                 REQUIRED_VARS OpenCV_LIBS OpenCV_INCLUDE_DIR OpenCV_VERSION\n   71                  VERSION_VAR   OpenCV_VERSION )\n   72  \n   73  if (OPENCV_FOUND)\n   74:     set (OpenCV_INCLUDES ${OpenCV_INCLUDE_DIR})\n   75      set (OpenCV_LIBRARIES ${OpenCV_LIBS})\n   76  endif ()\n   77  \n   78: MARK_AS_ADVANCED (OpenCV_INCLUDE_DIR OpenCV_LIBS)\n   79  unset (_ocv_version_file)\n   80  unset (_ocv_include_root)\n\n10 matches in 1 file\n\n\nSearching 1308 files for \"OpenCV_LIBS\" (case sensitive)\n\n/mnt/misc_hdd/dev/Lava/third_party/external/openimageio/src/OpenImageIO/src/cmake/modules/FindOpenCV.cmake:\n   62                    HINTS ${libdirs})\n   63      if (${component}_lib)\n   64:         set (OpenCV_LIBS ${OpenCV_LIBS} ${${component}_lib})\n   65      endif ()\n   66  endforeach ()\n   ..\n   68  include (FindPackageHandleStandardArgs)\n   69  FIND_PACKAGE_HANDLE_STANDARD_ARGS (OpenCV\n   70:                 REQUIRED_VARS OpenCV_LIBS OpenCV_INCLUDE_DIR OpenCV_VERSION\n   71                  VERSION_VAR   OpenCV_VERSION )\n   72  \n   73  if (OPENCV_FOUND)\n   74      set (OpenCV_INCLUDES ${OpenCV_INCLUDE_DIR})\n   75:     set (OpenCV_LIBRARIES ${OpenCV_LIBS})\n   76  endif ()\n   77  \n   78: MARK_AS_ADVANCED (OpenCV_INCLUDE_DIR OpenCV_LIBS)\n   79  unset (_ocv_version_file)\n   80  unset (_ocv_include_root)\n\n5 matches in 1 file\n\n\nSearching 1308 files for \"OpenCV\" (case sensitive)\n\n/mnt/misc_hdd/dev/Lava/third_party/external/openimageio/src/OpenImageIO/CHANGES.md:\n  645    (2.2.2)\n  646  * Avoid possible link errors by fully hiding IBA functions taking IplImage\n  647:   parameters, when no OpenCV headers are encountered. #2568 (2.2.2)\n  648  * In (obsolete) FindOpenImageIO.cmake, avoid CMake warnings by changing\n  649    the name `OPENIMAGEIO_FOUND` -> `OpenImageIO_FOUND`. #2578 (2.2.3)\n  ...\n 1793        as having unasociated alpha already, they will not bracket the color\n 1794        conversion with the requested unpremult/premult. #1864 (1.9.2)\n 1795:     * Updated the OpenCV interoperability with new functions to_OpenCV (make\n 1796:       an ImageBuf out of a cv::Mat) and from_OpenCV (fill in a cv::Mat with\n 1797        the contents of an ImageBuf). Deprecated the old from_IplImage and\n 1798:       to_IplImage, which are very OpenCV-1.x-centric. (2.0.2)\n 1799  * **ImageCache/TextureSystem:**\n 1800      * ImageCache and TextureSystem now have `close(filename)` and\n ....\n 2156  * Fixes for Windows when making Unicode builds, and fix Plugin::dlopen\n 2157    on Windows to properly support UTF-8 filenames. #1454 (2.0.1)\n 2158: * Support added for OpenCV 4.0. (2.0.1)\n 2159  \n 2160  Developer goodies / internals:\n\n/mnt/misc_hdd/dev/Lava/third_party/external/openimageio/src/OpenImageIO/INSTALL.md:\n   45         through 2021)\n   46       * Note that OpenVDB 8.0+ requires C++14 or higher.\n   47:  * If you want support for converting to and from OpenCV data structures,\n   48     or for capturing images from a camera:\n   49:      * OpenCV 2.x, 3.x, or 4.x (tested through 4.5)\n   50   * If you want support for GIF images:\n   51       * giflib >= 4.1 (tested through 5.2; 5.0+ is strongly recommended for\n\n/mnt/misc_hdd/dev/Lava/third_party/external/openimageio/src/OpenImageIO/Makefile:\n  394  \t@echo \"      Note that it is case sensitive! The list of package names is:\"\n  395  \t@echo \"          DCMTK  FFmpeg  Field3D  Freetype  GIF  JPEGTurbo\"\n  396: \t@echo \"          LibRaw  OpenColorIO  OpenCV  OpenGL  OpenJpeg  OpenVDB\"\n  397  \t@echo \"          PTex  R3DSDK  TBB  TIFF  Webp\"\n  398  \t@echo \"  Finding and Using Dependencies:\"\n\n/mnt/misc_hdd/dev/Lava/third_party/external/openimageio/src/OpenImageIO/.github/workflows/ci.yml:\n  498    linux-oldest:\n  499      # Oldest versions of the dependencies that we can muster, and various\n  500:     # things disabled (no SSE, OCIO, or OpenCV, don't embed plugins).\n  501      name: \"Linux oldest/hobbled: gcc4.8/C++11 py2.7 boost-1.66 exr-2.2 no-sse no-ocio\"\n  502      runs-on: ubuntu-latest\n\n/mnt/misc_hdd/dev/Lava/third_party/external/openimageio/src/OpenImageIO/src/cmake/externalpackages.cmake:\n  166  checked_find_package (OpenColorIO\n  167                     DEFINITIONS  -DUSE_OCIO=1 -DUSE_OPENCOLORIO=1)\n  168: checked_find_package (OpenCV\n  169                     DEFINITIONS  -DUSE_OPENCV=1)\n  170  \n\n/mnt/misc_hdd/dev/Lava/third_party/external/openimageio/src/OpenImageIO/src/cmake/modules/FindOpenCV.cmake:\n    1: # - Find OpenCV\n    2: # Find the OpenCV library\n    3  # This module defines\n    4: #  OpenCV_VERSION, the version string of OpenCV\n    5: #  OpenCV_INCLUDES, where to find header files\n    6: #  OpenCV_LIBRARIES, the libraries needed to use OpenCV\n    7: #  OpenCV_DEFINITIONS, the definitions needed to use OpenCV\n    8  #\n    9: # You can provide a location hint with OpenCV_ROOT (either a defined CMake\n   10  # variable or an environment variable).\n   11  \n   12: find_path (OpenCV_INCLUDE_DIR\n   13             NAMES opencv4/opencv2/opencv.hpp opencv2/opencv.hpp\n   14             PATHS\n   ..\n   19             )\n   20  \n   21: set (_ocv_include_root \"${OpenCV_INCLUDE_DIR}\")\n   22: if (OpenCV_INCLUDE_DIR AND EXISTS \"${OpenCV_INCLUDE_DIR}/opencv4/opencv2/core/version.hpp\")\n   23:     set (OpenCV_INCLUDE_DIR \"${OpenCV_INCLUDE_DIR}/opencv4\")\n   24  endif ()\n   25: set (_ocv_version_file \"${OpenCV_INCLUDE_DIR}/opencv2/core/version.hpp\")\n   26  if (EXISTS \"${_ocv_version_file}\")\n   27      file (STRINGS \"${_ocv_version_file}\" TMP REGEX \"^#define CV_VERSION_EPOCH .*$\")\n   ..\n   36      string (REGEX MATCHALL \"[0-9]+\" CV_VERSION_REVISION ${TMP})\n   37      if (CV_VERSION_EPOCH)\n   38:         set (OpenCV_VERSION \"${CV_VERSION_EPOCH}.${CV_VERSION_MAJOR}.${CV_VERSION_MINOR}\")\n   39      else ()\n   40:         set (OpenCV_VERSION \"${CV_VERSION_MAJOR}.${CV_VERSION_MINOR}.${CV_VERSION_REVISION}\")\n   41      endif ()\n   42  endif ()\n   ..\n   50               )\n   51  \n   52: if (NOT ${OpenCV_VERSION} VERSION_LESS 4.0.0)\n   53      set (opencv_components opencv_core opencv_imgproc opencv_videoio)\n   54: elseif (NOT ${OpenCV_VERSION} VERSION_LESS 3.0.0)\n   55      set (opencv_components opencv_videoio opencv_imgproc opencv_core)\n   56: else (NOT ${OpenCV_VERSION} VERSION_LESS 2.0.0)\n   57      set (opencv_components opencv_highgui opencv_imgproc opencv_core)\n   58  endif ()\n   ..\n   62                    HINTS ${libdirs})\n   63      if (${component}_lib)\n   64:         set (OpenCV_LIBS ${OpenCV_LIBS} ${${component}_lib})\n   65      endif ()\n   66  endforeach ()\n   67  \n   68  include (FindPackageHandleStandardArgs)\n   69: FIND_PACKAGE_HANDLE_STANDARD_ARGS (OpenCV\n   70:                 REQUIRED_VARS OpenCV_LIBS OpenCV_INCLUDE_DIR OpenCV_VERSION\n   71:                 VERSION_VAR   OpenCV_VERSION )\n   72  \n   73  if (OPENCV_FOUND)\n   74:     set (OpenCV_INCLUDES ${OpenCV_INCLUDE_DIR})\n   75:     set (OpenCV_LIBRARIES ${OpenCV_LIBS})\n   76  endif ()\n   77  \n   78: MARK_AS_ADVANCED (OpenCV_INCLUDE_DIR OpenCV_LIBS)\n   79  unset (_ocv_version_file)\n   80  unset (_ocv_include_root)\n\n/mnt/misc_hdd/dev/Lava/third_party/external/openimageio/src/OpenImageIO/src/doc/CHANGES-1.x.md:\n 1222     the flag to compile with libc++ is now always called USE_LIBCPLUSPLUS,\n 1223     not sometimes OIIO_BUILD_LIBCPLUSPLUS. #1404 (1.7.3)\n 1224:  * Overhaul OpenCV dependency finding and make it work with OpenCV 3.x.\n 1225     #1409 (1.7.3/1.6.13)\n 1226   * Allow custom JPEG_PATH to hint location of JPEG library. #1411\n ....\n 1355  * Remove old embedded Ptex, now must find Ptex externally. Also modified\n 1356    the build scripts to correctly handle newer versions of Ptex. #1400\n 1357: * Overhaul OpenCV dependency finding and make it work with OpenCV 3.x. #1409\n 1358  * Allow custom JPEG_PATH to hint location of JPEG library. #1411\n 1359  \n ....\n 1875   * Fix signed/unsigned comparison error. #1186 (1.6.4)\n 1876   * Top-level Makefile option USE_OPENCV=0 to turn off even searching for\n 1877:    OpenCV components. #1194 (1.6.4/1.5.18)\n 1878   * If a system-installed (external) PTex implementation is found, use\n 1879     it.  Only use the \"bundled\" version if no other is found. Also add a\n ....\n 2022    read with very old versions of libtiff. #1185\n 2023  * Top-level Makefile option USE_OPENCV=0 to turn off even searching for\n 2024:   OpenCV components. #1194\n 2025  \n 2026  Release 1.5.17 (13 Jul 2015) -- compared to 1.5.16)\n ....\n 3608      tile cache rather than unique locks).\n 3609  * New ImageBufAlgo functions:\n 3610:     * `fromIplImage()` : converts/copies an OpenCV image to an ImageBuf.\n 3611:     * `capture_image()` : captures from a camera device (only if OpenCV is found)\n 3612      * `over()` : Porter/Duff \"over\" compositing operation\n 3613      * `render_text()` : render text into an image\n ....\n 3617      * `channels()` : select, shuffle, truncate, or extend channels of an image.\n 3618  * New oiiotool commands:\n 3619:     * `--capture` : captures from a camera device (only if OpenCV is found)\n 3620      * `--pattern` constant : creates a constant-color image\n 3621      * `--over` : Porter/Duff \"over\" compositing operation\n\n/mnt/misc_hdd/dev/Lava/third_party/external/openimageio/src/OpenImageIO/src/doc/imagebufalgo.rst:\n 1752  |\n 1753  \n 1754: OpenCV interoperability is performed by the `from_OpenCV()` and\n 1755: `to_OpenCV()` functions:\n 1756  \n 1757: .. doxygenfunction:: from_OpenCV\n 1758: .. doxygenfunction:: to_OpenCV\n 1759  \n 1760  .. doxygenfunction:: capture_image(int, TypeDesc)\n\n/mnt/misc_hdd/dev/Lava/third_party/external/openimageio/src/OpenImageIO/src/doc/imagebufalgo.tex:\n 2642  \n 2643  \n 2644: \\apiitem{ImageBuf {\\ce from_OpenCV} (const cv::Mat\\& mat, TypeDesc convert=TypeUnknown, \\\\\n 2645          \\bigspc  ROI roi=\\{\\}, int nthreads=0)}\n 2646: \\index{ImageBufAlgo!from_OpenCV} \\indexapi{from_OpenCV}\n 2647: \\index{OpenCV}\n 2648: Convert an OpenCV {\\cf cv::Mat} into an \\ImageBuf, copying the pixels\n 2649  (optionally converting to the pixel data type specified by {\\cf convert}, if\n 2650  not {\\cf UNKNOWN}, which means to preserve the original data type if\n 2651  possible).  Return true if ok, false if it couldn't figure out how to\n 2652  make the conversion from Mat to ImageBuf. If OpenImageIO was compiled\n 2653: without OpenCV support, this function will return an empty image with\n 2654  error message set.\n 2655  \n ....\n 2663  \n 2664  \n 2665: \\apiitem{bool {\\ce to_OpenCV} (cv::Mat\\& dst, const ImageBuf\\& src,\\\\\n 2666          \\bigspc  ROI roi=\\{\\}, int nthreads=0)}\n 2667: \\index{ImageBufAlgo!to_OpenCV} \\indexapi{to_OpenCV}\n 2668: \\index{OpenCV}\n 2669: Construct an OpenCV {\\cf cv::Mat} containing the contents of \\ImageBuf src,\n 2670  and return true. If it is not possible, or if OpenImageIO was compiled\n 2671: without OpenCV support, then return false. Note that OpenCV only supports up\n 2672  to 4 channels, so images with more than 4 channels will be truncated in the\n 2673  conversion.\n ....\n 2686  Capture a still image from a designated camera.  If able to do so,\n 2687  store the image in {\\cf dst} and return {\\cf true}.  If there is no such device,\n 2688: or support for camera capture is not available (such as if OpenCV\n 2689  support was not enabled at compile time), return {\\cf false} and do not\n 2690  alter {\\cf dst}.\n\n/mnt/misc_hdd/dev/Lava/third_party/external/openimageio/src/OpenImageIO/src/include/OpenImageIO/imagebufalgo.h:\n   24  \n   25  #if !defined(__OPENCV_CORE_TYPES_H__) && !defined(OPENCV_CORE_TYPES_H)\n   26: struct IplImage;  // Forward declaration; used by Intel Image lib & OpenCV\n   27  namespace cv {\n   28      class Mat;\n   ..\n 2053  \n 2054  \n 2055: /// Convert an OpenCV cv::Mat into an ImageBuf, copying the pixels\n 2056  /// (optionally converting to the pixel data type specified by `convert`, if\n 2057  /// not UNKNOWN, which means to preserve the original data type if\n 2058  /// possible).  Return true if ok, false if it couldn't figure out how to\n 2059  /// make the conversion from Mat to ImageBuf. If OpenImageIO was compiled\n 2060: /// without OpenCV support, this function will return an empty image with\n 2061  /// error message set.\n 2062  OIIO_API ImageBuf\n 2063: from_OpenCV (const cv::Mat& mat, TypeDesc convert = TypeUnknown,\n 2064               ROI roi={}, int nthreads=0);\n 2065  \n 2066: /// Construct an OpenCV cv::Mat containing the contents of ImageBuf src, and\n 2067  /// return true. If it is not possible, or if OpenImageIO was compiled\n 2068: /// without OpenCV support, then return false. Note that OpenCV only\n 2069  /// supports up to 4 channels, so >4 channel images will be truncated in the\n 2070  /// conversion.\n 2071: OIIO_API bool to_OpenCV (cv::Mat& dst, const ImageBuf& src,\n 2072                           ROI roi={}, int nthreads=0);\n 2073  \n ....\n 2075  /// Capture a still image from a designated camera.  If able to do so,\n 2076  /// store the image in dst and return true.  If there is no such device,\n 2077: /// or support for camera capture is not available (such as if OpenCV\n 2078  /// support was not enabled at compile time), return false and do not\n 2079  /// alter dst.\n ....\n 2093  \n 2094  #if defined(__OPENCV_CORE_TYPES_H__) || defined(OPENCV_CORE_TYPES_H)\n 2095: // These declarations are only visible if the OpenCV headers have already\n 2096  // been encountered.\n 2097  \n 2098  #ifndef DOXYGEN_SHOULD_SKIP_THIS\n 2099: // DEPRECATED(2.0). The OpenCV 1.x era IplImage-based functions should be\n 2100: // avoided, giving preference to from_OpenCV.\n 2101  ImageBuf OIIO_API from_IplImage (const IplImage *ipl,\n 2102                                   TypeDesc convert=TypeUnknown);\n ....\n 2108  }\n 2109  \n 2110: // DEPRECATED(2.0). The OpenCV 1.x era IplImage-based functions should be\n 2111: // avoided, giving preference to from_OpenCV.\n 2112  OIIO_API IplImage* to_IplImage (const ImageBuf &src);\n 2113  #endif  // DOXYGEN_SHOULD_SKIP_THIS\n\n/mnt/misc_hdd/dev/Lava/third_party/external/openimageio/src/OpenImageIO/src/libOpenImageIO/CMakeLists.txt:\n  124                                  ${CMAKE_INSTALL_FULL_INCLUDEDIR}\n  125                                  ${IMATH_INCLUDES} ${OPENEXR_INCLUDES}\n  126:                                 ${OpenCV_INCLUDES}\n  127                              PRIVATE\n  128                                  ${ROBINMAP_INCLUDES}\n  ...\n  154              # For OpenEXR <= 2.3:\n  155              ${OPENEXR_LIBRARIES}\n  156:             ${OpenCV_LIBRARIES}\n  157              ${SANITIZE_LIBRARIES}\n  158              ${format_plugin_libs} # Add all the target link libraries from the plugins\n  ...\n  243  \n  244      add_executable (imagebufalgo_test imagebufalgo_test.cpp)\n  245:     target_link_libraries (imagebufalgo_test PRIVATE OpenImageIO ${OpenCV_LIBRARIES})\n  246      set_target_properties (imagebufalgo_test PROPERTIES FOLDER \"Unit Tests\")\n  247      add_test (unit_imagebufalgo ${CMAKE_RUNTIME_OUTPUT_DIRECTORY}/imagebufalgo_test)\n\n/mnt/misc_hdd/dev/Lava/third_party/external/openimageio/src/OpenImageIO/src/libOpenImageIO/imagebufalgo_opencv.cpp:\n    5  \n    6  /// \\file\n    7: /// Implementation of ImageBufAlgo algorithms related to OpenCV.\n    8: /// These are nonfunctional if OpenCV is not found at build time.\n    9  \n   10  #include <OpenImageIO/platform.h>\n   ..\n   79      TypeDesc dstformat = (convert != TypeDesc::UNKNOWN) ? convert : srcformat;\n   80      ImageSpec spec(ipl->width, ipl->height, ipl->nChannels, dstformat);\n   81:     // N.B. The OpenCV headers say that ipl->alphaChannel,\n   82:     // ipl->colorModel, and ipl->channelSeq are ignored by OpenCV.\n   83  \n   84      if (ipl->dataOrder != IPL_DATA_ORDER_PIXEL) {\n   85:         // We don't handle separate color channels, and OpenCV doesn't either\n   86          dst.errorf(\"Unsupported IplImage data order %d\", (int)ipl->dataOrder);\n   87          return dst;\n   ..\n   98                    dstformat, spec.pixel_bytes(), spec.scanline_bytes(), 0);\n   99      // FIXME - honor dataOrder.  I'm not sure if it is ever used by\n  100:     // OpenCV.  Fix when it becomes a problem.\n  101  \n  102:     // OpenCV uses BGR ordering\n  103      // FIXME: what do they do with alpha?\n  104      if (spec.nchannels >= 3) {\n  ...\n  119  #else\n  120      dst.errorf(\n  121:         \"fromIplImage not supported -- no OpenCV support at compile time\");\n  122  #endif\n  123  \n  ...\n  158      } else if (spec.format == TypeDesc(TypeDesc::HALF)) {\n  159          dstFormat = IPL_DEPTH_32F;\n  160:         // OpenCV does not support half types. Switch to float instead.\n  161          dstSpecFormat = TypeDesc(TypeDesc::FLOAT);\n  162      } else if (spec.format == TypeDesc(TypeDesc::FLOAT)) {\n  ...\n  194      }\n  195  \n  196:     // OpenCV uses BGR ordering\n  197      if (spec.nchannels == 3) {\n  198          cvCvtColor(ipl, ipl, CV_RGB2BGR);\n  ...\n  229  \n  230  ImageBuf\n  231: ImageBufAlgo::from_OpenCV(const cv::Mat& mat, TypeDesc convert, ROI roi,\n  232                            int nthreads)\n  233  {\n  234:     pvt::LoggedTimer logtime(\"IBA::from_OpenCV\");\n  235      ImageBuf dst;\n  236  #ifdef USE_OPENCV\n  ...\n  244      case CV_64F: srcformat = TypeDesc::DOUBLE; break;\n  245      default:\n  246:         dst.errorf(\"Unsupported OpenCV data type, depth=%d\", mat.depth());\n  247          return dst;\n  248      }\n  ...\n  262                             nthreads);\n  263  \n  264:     // OpenCV uses BGR ordering\n  265      if (spec.nchannels >= 3) {\n  266          OIIO_MAYBE_UNUSED bool ok = true;\n  267:         OIIO_DISPATCH_TYPES(ok, \"from_OpenCV R/B swap\", RBswap, dstformat, dst,\n  268                              roi, nthreads);\n  269      }\n  ...\n  271  #else\n  272      dst.errorf(\n  273:         \"from_OpenCV() not supported -- no OpenCV support at compile time\");\n  274  #endif\n  275  \n  ...\n  280  \n  281  bool\n  282: ImageBufAlgo::to_OpenCV(cv::Mat& dst, const ImageBuf& src, ROI roi,\n  283                          int nthreads)\n  284  {\n  285:     pvt::LoggedTimer logtime(\"IBA::to_OpenCV\");\n  286  #ifdef USE_OPENCV\n  287      if (!roi.defined())\n  ...\n  336      }\n  337  \n  338:     // OpenCV uses BGR ordering\n  339      if (chans == 3) {\n  340          cv::cvtColor(mat, mat, cv::COLOR_RGB2BGR);\n  ...\n  396          auto cvcam = cameras[cameranum];\n  397          if (!cvcam) {\n  398:             dst.errorf(\"Could not create a capture camera (OpenCV error)\");\n  399              return dst;  // failed somehow\n  400          }\n  401          (*cvcam) >> frame;\n  402          if (frame.empty()) {\n  403:             dst.errorf(\"Could not cvQueryFrame (OpenCV error)\");\n  404              return dst;  // failed somehow\n  405          }\n  ...\n  407  \n  408      logtime.stop();\n  409:     dst = from_OpenCV(frame, convert);\n  410      logtime.start();\n  411      if (!dst.has_error()) {\n  ...\n  423  #else\n  424      dst.errorf(\n  425:         \"capture_image not supported -- no OpenCV support at compile time\");\n  426  #endif\n  427      return dst;\n\n/mnt/misc_hdd/dev/Lava/third_party/external/openimageio/src/OpenImageIO/src/libOpenImageIO/imagebufalgo_test.cpp:\n  943  {\n  944  #if USE_OPENCV\n  945:     std::cout << \"Testing OpenCV round trip\\n\";\n  946:     // Make a gradient RGB image, convert to OpenCV cv::Mat, then convert\n  947      // that back to ImageBuf, make sure the round trip has the same pixels\n  948      // as the original image.\n  ...\n  952                               ROI(0, 64, 0, 64, 0, 1, 0, 3));\n  953      cv::Mat mat;\n  954:     ImageBufAlgo::to_OpenCV(mat, src);\n  955      OIIO_CHECK_ASSERT(!mat.empty());\n  956:     ImageBuf dst = ImageBufAlgo::from_OpenCV(mat);\n  957      OIIO_CHECK_ASSERT(!dst.has_error());\n  958      auto comp = ImageBufAlgo::compare(src, dst, 0.0f, 0.0f);\n\n119 matches across 13 files\n\n\nSearching 1308 files for \"squish\" (case sensitive)\n\n/mnt/misc_hdd/dev/Lava/third_party/external/openimageio/src/OpenImageIO/CHANGES.md:\n  855    to auto-download if pybind11 is found on the system already but is not an\n  856    adequately new version. #2453\n  857: * If libsquish is found on the system at build time, use it, rather than\n  858    the \"embedded\" copy. This can improve build times of OIIO, and also helps\n  859    us comply with Debian packaging rules that forbid using embedded versions\n\n/mnt/misc_hdd/dev/Lava/third_party/external/openimageio/src/OpenImageIO/conanfile.txt:\n   25  # ptex\n   26  # qt5\n   27: # libsquish\n   28  \n   29  \n\n/mnt/misc_hdd/dev/Lava/third_party/external/openimageio/src/OpenImageIO/INSTALL.md:\n   56       * Avoid libheif 1.10 on Mac, it is very broken. Libheif 1.11 is fine.\n   57   * If you want support for DDS files:\n   58:      * libsquish >= 1.13 (tested through 1.15)\n   59       * But... if not found on the system, an embedded version will be used.\n   60   * If you want support for DICOM medical image files:\n\n/mnt/misc_hdd/dev/Lava/third_party/external/openimageio/src/OpenImageIO/THIRD-PARTY.md:\n  105  * Squish\n  106    Copyright 2006 Simon Brown si@sjbrown.co.uk\n  107:   http://sjbrown.co.uk/?code=squish\n  108  \n  109  * PugiXML http://pugixml.org/ https://github.com/zeux/pugixml\n\n/mnt/misc_hdd/dev/Lava/third_party/external/openimageio/src/OpenImageIO/ext/fmt/ChangeLog.rst:\n  202         log(__FILE__, __LINE__, FMT_STRING(format), __VA_ARGS__)\n  203  \n  204:      MY_LOG(\"invalid squishiness: {}\", 42);\n  205  \n  206  * Replaced ``snprintf`` fallback with a faster internal IEEE 754 ``float`` and\n\n/mnt/misc_hdd/dev/Lava/third_party/external/openimageio/src/OpenImageIO/ext/fmt/doc/api.rst:\n   93        log(__FILE__, __LINE__, FMT_STRING(format), __VA_ARGS__)\n   94  \n   95:     MY_LOG(\"invalid squishiness: {}\", 42);\n   96  \n   97  Note that ``vlog`` is not parameterized on argument types which improves compile\n\n/mnt/misc_hdd/dev/Lava/third_party/external/openimageio/src/OpenImageIO/src/build-scripts/gh-installdeps.bash:\n   34          libtiff-dev libgif-dev libpng-dev libraw-dev libwebp-dev \\\n   35          libavcodec-dev libavformat-dev libswscale-dev libavutil-dev \\\n   36:         dcmtk libsquish-dev libopenvdb-dev \\\n   37          libfreetype6-dev \\\n   38          locales wget \\\n\n/mnt/misc_hdd/dev/Lava/third_party/external/openimageio/src/OpenImageIO/src/build-scripts/gh-win-installdeps.bash:\n   67  # vcpkg install libraw:x64-windows\n   68  # vcpkg install openjpeg:x64-windows\n   69: # vcpkg install libsquish:x64-windows\n   70  # # vcpkg install ffmpeg:x64-windows   # takes FOREVER!\n   71  # # vcpkg install webp:x64-windows  # No such vcpkg package?a\n\n/mnt/misc_hdd/dev/Lava/third_party/external/openimageio/src/OpenImageIO/src/build-scripts/install_homebrew_deps.bash:\n   33  brew install --display-times -q libpng giflib webp jpeg-turbo openjpeg\n   34  brew install --display-times -q freetype libraw dcmtk pybind11 numpy || true\n   35: brew install --display-times -q ffmpeg libheif libsquish ptex || true\n   36  brew install --display-times -q tbb || true\n   37  # No OpenVDB until it's upgraded to use Imath 3\n\n/mnt/misc_hdd/dev/Lava/third_party/external/openimageio/src/OpenImageIO/src/cmake/compiler.cmake:\n  446                                 \"src/dpx.imageio/libdpx/*\"\n  447                                 \"src/cineon.imageio/libcineon/*\"\n  448:                                \"src/dds.imageio/squish/*\"\n  449                                 \"src/gif.imageio/gif.h\"\n  450                                 \"src/hdr.imageio/rgbe.cpp\"\n\n/mnt/misc_hdd/dev/Lava/third_party/external/openimageio/src/OpenImageIO/src/cmake/externalpackages.cmake:\n  300  \n  301  ###########################################################################\n  302: # libsquish\n  303  \n  304  option (USE_EMBEDDED_LIBSQUISH\n  305:         \"Force use of embedded Libsquish, even if external is found\" OFF)\n  306  if (NOT USE_EMBEDDED_LIBSQUISH)\n  307:     checked_find_package (Libsquish)\n  308  endif ()\n  309  \n\n/mnt/misc_hdd/dev/Lava/third_party/external/openimageio/src/OpenImageIO/src/cmake/modules/FindLibsquish.cmake:\n    1: # Module to find Libsquish\n    2  #\n    3  # This module will first look into the directories defined by the variables:\n    4: #   - Libsquish_ROOT, LIBSQUISH_INCLUDE_PATH, LIBSQUISH_LIBRARY_PATH\n    5  #\n    6  # This module defines the following variables:\n    7  #\n    8: # Libsquish_FOUND            True if Libsquish was found.\n    9: # LIBSQUISH_INCLUDES         Where to find Libsquish headers\n   10: # LIBSQUISH_LIBRARIES        List of libraries to link against when using Libsquish\n   11: # LIBSQUISH_VERSION          Version of Libsquish (e.g., 3.6.2)\n   12  \n   13  include (FindPackageHandleStandardArgs)\n   14  \n   15: find_path (LIBSQUISH_INCLUDE_DIR squish.h\n   16             HINTS\n   17                 ${LIBSQUISH_INCLUDE_PATH}\n   18                 ENV LIBSQUISH_INCLUDE_PATH\n   19:            DOC \"The directory where Libsquish headers reside\")\n   20  \n   21: find_library (LIBSQUISH_LIBRARY squish\n   22                HINTS\n   23                    ${LIBSQUISH_LIBRARY_PATH}\n   24                    ENV LIBSQUISH_LIBRARY_PATH\n   25:               DOC \"The Libsquish libraries\")\n   26  \n   27: find_package_handle_standard_args (Libsquish\n   28      REQUIRED_VARS\n   29          LIBSQUISH_INCLUDE_DIR\n   ..\n   31      )\n   32  \n   33: if (Libsquish_FOUND)\n   34      set (LIBSQUISH_INCLUDES ${LIBSQUISH_INCLUDE_DIR})\n   35      set (LIBSQUISH_LIBRARIES ${LIBSQUISH_LIBRARY})\n   36  \n   37:     if (NOT TARGET Libsquish::Libsquish)\n   38:         add_library(Libsquish::Libsquish UNKNOWN IMPORTED)\n   39:         set_target_properties(Libsquish::Libsquish PROPERTIES\n   40              INTERFACE_INCLUDE_DIRECTORIES \"${LIBSQUISH_INCLUDES}\")\n   41  \n   42:         set_property(TARGET Libsquish::Libsquish APPEND PROPERTY\n   43              IMPORTED_LOCATION \"${LIBSQUISH_LIBRARIES}\")\n   44      endif ()\n\n/mnt/misc_hdd/dev/Lava/third_party/external/openimageio/src/OpenImageIO/src/dds.imageio/CMakeLists.txt:\n    3  # https://github.com/OpenImageIO/oiio/blob/master/LICENSE.md\n    4  \n    5: if (Libsquish_FOUND)\n    6:     # External libsquish was found -- use it\n    7      add_oiio_plugin (ddsinput.cpp\n    8:                      LINK_LIBRARIES Libsquish::Libsquish\n    9                       )\n   10  else ()\n   11:     # No external libsquish was found -- use the embedded version.\n   12:     add_oiio_plugin (ddsinput.cpp squish/alpha.cpp squish/clusterfit.cpp\n   13:                  squish/colourblock.cpp squish/colourfit.cpp squish/colourset.cpp\n   14:                  squish/maths.cpp squish/rangefit.cpp squish/singlecolourfit.cpp\n   15:                  squish/squish.cpp\n   16:         INCLUDE_DIRS \"${CMAKE_CURRENT_SOURCE_DIR}/squish\")\n   17  endif ()\n   18  \n\n/mnt/misc_hdd/dev/Lava/third_party/external/openimageio/src/OpenImageIO/src/dds.imageio/ddsinput.cpp:\n   14  \n   15  #include \"dds_pvt.h\"\n   16: #include \"squish.h\"\n   17  \n   18  OIIO_PLUGIN_NAMESPACE_BEGIN\n   ..\n  253      // determine the number of channels we have\n  254      if (m_dds.fmt.flags & DDS_PF_FOURCC) {\n  255:         // squish decompresses everything to RGBA anyway\n  256          /*if (m_dds.fmt.fourCC == DDS_4CC_DXT1)\n  257              m_nchans = 3; // no alpha in DXT1\n  ...\n  351                      // only check for DXT1 - all other formats have same block\n  352                      // size\n  353:                     len = squish::GetStorageRequirements(w, h,\n  354                                                           m_dds.fmt.fourCC\n  355                                                                   == DDS_4CC_DXT1\n  356:                                                              ? squish::kDxt1\n  357:                                                              : squish::kDxt5);\n  358                  else\n  359                      len = w * h * d * m_Bpp;\n  ...\n  365              if (m_dds.fmt.flags & DDS_PF_FOURCC)\n  366                  // only check for DXT1 - all other formats have same block size\n  367:                 len = squish::GetStorageRequirements(w, h,\n  368                                                       m_dds.fmt.fourCC\n  369                                                               == DDS_4CC_DXT1\n  370:                                                          ? squish::kDxt1\n  371:                                                          : squish::kDxt5);\n  372              else\n  373                  len = w * h * d * m_Bpp;\n  ...\n  514          int flags = 0;\n  515          switch (m_dds.fmt.fourCC) {\n  516:         case DDS_4CC_DXT1: flags = squish::kDxt1; break;\n  517          // DXT2 and 3 are the same, only 2 has pre-multiplied alpha\n  518          case DDS_4CC_DXT2:\n  519:         case DDS_4CC_DXT3: flags = squish::kDxt3; break;\n  520          // DXT4 and 5 are the same, only 4 has pre-multiplied alpha\n  521          case DDS_4CC_DXT4:\n  522:         case DDS_4CC_DXT5: flags = squish::kDxt5; break;\n  523          }\n  524          // create source buffer\n  525:         std::vector<squish::u8> tmp(\n  526:             squish::GetStorageRequirements(w, h, flags));\n  527          // load image into buffer\n  528          if (!fread(&tmp[0], tmp.size(), 1))\n  529              return false;\n  530          // decompress image\n  531:         squish::DecompressImage(dst, w, h, &tmp[0], flags);\n  532          tmp.clear();\n  533          // correct pre-multiplied alpha, if necessary\n\n/mnt/misc_hdd/dev/Lava/third_party/external/openimageio/src/OpenImageIO/src/dds.imageio/squish/alpha.cpp:\n   28  #include <algorithm>\n   29  \n   30: namespace squish {\n   31  \n   32  static int FloatToInt( float a, int limit )\n   ..\n  347  }\n  348  \n  349: } // namespace squish\n  350  \n\n/mnt/misc_hdd/dev/Lava/third_party/external/openimageio/src/OpenImageIO/src/dds.imageio/squish/alpha.h:\n   27  #define SQUISH_ALPHA_H\n   28  \n   29: #include \"squish.h\"\n   30  \n   31: namespace squish {\n   32  \n   33  void CompressAlphaDxt3( u8 const* rgba, int mask, void* block );\n   ..\n   37  void DecompressAlphaDxt5( u8* rgba, void const* block );\n   38  \n   39: } // namespace squish\n   40  \n   41  #endif // ndef SQUISH_ALPHA_H\n\n/mnt/misc_hdd/dev/Lava/third_party/external/openimageio/src/OpenImageIO/src/dds.imageio/squish/ChangeLog:\n   12  1.8\n   13  * Switched from using floor to trunc for much better SSE performance (again)\n   14: * Xcode build now expects libpng in /usr/local for extra/squishpng\n   15  \n   16  1.7\n   ..\n   37  1.2\n   38  * Added provably optimal single colour compressor\n   39: * Added extra/squishgen.cpp that generates single colour lookup tables\n   40  \n   41  1.1\n   ..\n   45  * Added CompressImage function\n   46  * Added DecompressImage function\n   47: * Moved squishtool.cpp to extra/squishpng.cpp\n   48: * Added extra/squishtest.cpp\n   49  \n   50  1.0\n\n/mnt/misc_hdd/dev/Lava/third_party/external/openimageio/src/OpenImageIO/src/dds.imageio/squish/clusterfit.cpp:\n   30  #include <cfloat>\n   31  \n   32: namespace squish {\n   33  \n   34  ClusterFit::ClusterFit( ColourSet const* colours, int flags, float* metric ) \n   ..\n  390  }\n  391  \n  392: } // namespace squish\n  393  \n\n/mnt/misc_hdd/dev/Lava/third_party/external/openimageio/src/OpenImageIO/src/dds.imageio/squish/clusterfit.h:\n   28  #define SQUISH_CLUSTERFIT_H\n   29  \n   30: #include \"squish.h\"\n   31  #include \"maths.h\"\n   32  #include \"simd.h\"\n   33  #include \"colourfit.h\"\n   34  \n   35: namespace squish {\n   36  \n   37  class ClusterFit : public ColourFit\n   ..\n   57  };\n   58  \n   59: } // namespace squish\n   60  \n   61  #endif // ndef SQUISH_CLUSTERFIT_H\n\n/mnt/misc_hdd/dev/Lava/third_party/external/openimageio/src/OpenImageIO/src/dds.imageio/squish/colourblock.cpp:\n   26  #include \"colourblock.h\"\n   27  \n   28: namespace squish {\n   29  \n   30  static int FloatToInt( float a, int limit )\n   ..\n  212  }\n  213  \n  214: } // namespace squish\n  215  \n\n/mnt/misc_hdd/dev/Lava/third_party/external/openimageio/src/OpenImageIO/src/dds.imageio/squish/colourblock.h:\n   27  #define SQUISH_COLOURBLOCK_H\n   28  \n   29: #include \"squish.h\"\n   30  #include \"maths.h\"\n   31  \n   32: namespace squish {\n   33  \n   34  void WriteColourBlock3( Vec3::Arg start, Vec3::Arg end, u8 const* indices, void* block );\n   ..\n   37  void DecompressColour( u8* rgba, void const* block, bool isDxt1 );\n   38  \n   39: } // namespace squish\n   40  \n   41  #endif // ndef SQUISH_COLOURBLOCK_H\n\n/mnt/misc_hdd/dev/Lava/third_party/external/openimageio/src/OpenImageIO/src/dds.imageio/squish/colourfit.cpp:\n   27  #include \"colourset.h\"\n   28  \n   29: namespace squish {\n   30  \n   31  ColourFit::ColourFit( ColourSet const* colours, int flags ) \n   ..\n   52  }\n   53  \n   54: } // namespace squish\n   55  \n\n/mnt/misc_hdd/dev/Lava/third_party/external/openimageio/src/OpenImageIO/src/dds.imageio/squish/colourfit.h:\n   27  #define SQUISH_COLOURFIT_H\n   28  \n   29: #include \"squish.h\"\n   30  #include <climits>\n   31  #include \"maths.h\"\n   32  \n   33: namespace squish {\n   34  \n   35  class ColourSet;\n   ..\n   51  };\n   52  \n   53: } // namespace squish\n   54  \n   55  #endif // ndef SQUISH_COLOURFIT_H\n\n/mnt/misc_hdd/dev/Lava/third_party/external/openimageio/src/OpenImageIO/src/dds.imageio/squish/colourset.cpp:\n   26  #include \"colourset.h\"\n   27  \n   28: namespace squish {\n   29  \n   30  ColourSet::ColourSet( u8 const* rgba, int mask, int flags )\n   ..\n  119  }\n  120  \n  121: } // namespace squish\n  122  \n\n/mnt/misc_hdd/dev/Lava/third_party/external/openimageio/src/OpenImageIO/src/dds.imageio/squish/colourset.h:\n   27  #define SQUISH_COLOURSET_H\n   28  \n   29: #include \"squish.h\"\n   30  #include \"maths.h\"\n   31  \n   32: namespace squish {\n   33  \n   34  /*! @brief Represents a set of block colours\n   ..\n   54  };\n   55  \n   56: } // namespace squish\n   57  \n   58  #endif // ndef SQUISH_COLOURSET_H\n\n/mnt/misc_hdd/dev/Lava/third_party/external/openimageio/src/OpenImageIO/src/dds.imageio/squish/config.h:\n   27  #define SQUISH_CONFIG_H\n   28  \n   29: // Set to 1 when building squish to use Altivec instructions.\n   30  #ifndef SQUISH_USE_ALTIVEC\n   31  #define SQUISH_USE_ALTIVEC 0\n   32  #endif\n   33  \n   34: // Set to 1 or 2 when building squish to use SSE or SSE2 instructions.\n   35  #ifndef SQUISH_USE_SSE\n   36  #define SQUISH_USE_SSE 0\n\n/mnt/misc_hdd/dev/Lava/third_party/external/openimageio/src/OpenImageIO/src/dds.imageio/squish/maths.cpp:\n   34  #include <cfloat>\n   35  \n   36: namespace squish {\n   37  \n   38  Sym3x3 ComputeWeightedCovariance( int n, Vec3 const* points, float const* weights )\n   ..\n  257  #endif\n  258  \n  259: } // namespace squish\n  260  \n\n/mnt/misc_hdd/dev/Lava/third_party/external/openimageio/src/OpenImageIO/src/dds.imageio/squish/maths.h:\n   31  #include \"config.h\"\n   32  \n   33: namespace squish {\n   34  \n   35  class Vec3\n   ..\n  229  Vec3 ComputePrincipleComponent( Sym3x3 const& matrix );\n  230  \n  231: } // namespace squish\n  232  \n  233  #endif // ndef SQUISH_MATHS_H\n\n/mnt/misc_hdd/dev/Lava/third_party/external/openimageio/src/OpenImageIO/src/dds.imageio/squish/rangefit.cpp:\n   29  #include <cfloat>\n   30  \n   31: namespace squish {\n   32  \n   33  RangeFit::RangeFit( ColourSet const* colours, int flags, float* metric ) \n   ..\n  199  }\n  200  \n  201: } // namespace squish\n  202  \n\n/mnt/misc_hdd/dev/Lava/third_party/external/openimageio/src/OpenImageIO/src/dds.imageio/squish/rangefit.h:\n   27  #define SQUISH_RANGEFIT_H\n   28  \n   29: #include \"squish.h\"\n   30  #include \"colourfit.h\"\n   31  #include \"maths.h\"\n   32  \n   33: namespace squish {\n   34  \n   35  class ColourSet;\n   ..\n   50  };\n   51  \n   52: } // squish\n   53  \n   54  #endif // ndef SQUISH_RANGEFIT_H\n\n/mnt/misc_hdd/dev/Lava/third_party/external/openimageio/src/OpenImageIO/src/dds.imageio/squish/README:\n    2  -------\n    3  \n    4: The squish library is distributed under the terms and conditions of the MIT\n    5  license. This license is specified at the top of each source file and must be\n    6  preserved in its entirety.\n    .\n   31  Feedback can be sent to Simon Brown (the developer) at si@sjbrown.co.uk\n   32  \n   33: New releases are announced on the squish library homepage at\n   34: http://sjbrown.co.uk/?code=squish\n   35  \n   36  \n\n/mnt/misc_hdd/dev/Lava/third_party/external/openimageio/src/OpenImageIO/src/dds.imageio/squish/simd_float.h:\n   29  #include <algorithm>\n   30  \n   31: namespace squish {\n   32  \n   33  #define VEC4_CONST( X ) Vec4( X )\n   ..\n  178  };\n  179  \n  180: } // namespace squish\n  181  \n  182  #endif // ndef SQUISH_SIMD_FLOAT_H\n\n/mnt/misc_hdd/dev/Lava/third_party/external/openimageio/src/OpenImageIO/src/dds.imageio/squish/simd_sse.h:\n   38  \t( ( x ) | ( ( y ) << 2 ) | ( ( z ) << 4 ) | ( ( w ) << 6 ) )\n   39  \n   40: namespace squish {\n   41  \n   42  #define VEC4_CONST( X ) Vec4( X )\n   ..\n  176  };\n  177  \n  178: } // namespace squish\n  179  \n  180  #endif // ndef SQUISH_SIMD_SSE_H\n\n/mnt/misc_hdd/dev/Lava/third_party/external/openimageio/src/OpenImageIO/src/dds.imageio/squish/simd_ve.h:\n   30  #undef bool\n   31  \n   32: namespace squish {\n   33  \n   34  #define VEC4_CONST( X ) Vec4( ( vector float ){ X } )\n   ..\n  162  };\n  163  \n  164: } // namespace squish\n  165  \n  166  #endif // ndef SQUISH_SIMD_VE_H\n\n/mnt/misc_hdd/dev/Lava/third_party/external/openimageio/src/OpenImageIO/src/dds.imageio/squish/singlecolourfit.cpp:\n   28  #include \"colourblock.h\"\n   29  \n   30: namespace squish {\n   31  \n   32  struct SourceBlock\n   ..\n  170  }\n  171  \n  172: } // namespace squish\n  173  \n\n/mnt/misc_hdd/dev/Lava/third_party/external/openimageio/src/OpenImageIO/src/dds.imageio/squish/singlecolourfit.h:\n   27  #define SQUISH_SINGLECOLOURFIT_H\n   28  \n   29: #include \"squish.h\"\n   30  #include \"colourfit.h\"\n   31  \n   32: namespace squish {\n   33  \n   34  class ColourSet;\n   ..\n   54  };\n   55  \n   56: } // namespace squish\n   57  \n   58  #endif // ndef SQUISH_SINGLECOLOURFIT_H\n\n/mnt/misc_hdd/dev/Lava/third_party/external/openimageio/src/OpenImageIO/src/dds.imageio/squish/squish.cpp:\n   24     -------------------------------------------------------------------------- */\n   25     \n   26: #include \"squish.h\"\n   27  #include \"colourset.h\"\n   28  #include \"maths.h\"\n   ..\n   33  #include \"singlecolourfit.h\"\n   34  \n   35: namespace squish {\n   36  \n   37  static int FixFlags( int flags )\n   ..\n  228  }\n  229  \n  230: } // namespace squish\n  231  \n\n/mnt/misc_hdd/dev/Lava/third_party/external/openimageio/src/OpenImageIO/src/dds.imageio/squish/squish.h:\n   27  #define SQUISH_H\n   28  \n   29: //! All squish API functions live in this namespace.\n   30: namespace squish {\n   31  \n   32  // -----------------------------------------------------------------------------\n   ..\n  144  \t\n  145  \tThis method is an inline that calls CompressMasked with a mask of 0xffff, \n  146: \tprovided for compatibility with older versions of squish.\n  147  */\n  148  inline void Compress( u8 const* rgba, void* block, int flags, float* metric = 0 )\n  ...\n  226  \tcontiguous array of 3 floats.\n  227  \t\n  228: \tInternally this function calls squish::CompressMasked for each block, which \n  229  \tallows for pixels outside the image to take arbitrary values. The function \n  230: \tsquish::GetStorageRequirements can be called to compute the amount of memory\n  231  \tto allocate for the compressed output.\n  232  */\n  ...\n  252  \tare ignored.\n  253  \n  254: \tInternally this function calls squish::Decompress for each block.\n  255  */\n  256  void DecompressImage( u8* rgba, int width, int height, void const* blocks, int flags );\n  ...\n  258  // -----------------------------------------------------------------------------\n  259  \n  260: } // namespace squish\n  261  \n  262  #endif // ndef SQUISH_H\n\n/mnt/misc_hdd/dev/Lava/third_party/external/openimageio/src/OpenImageIO/src/doc/oiiointro.rst:\n  225  \n  226  * The SHA-1 implemenation we use is public domain by Dominik Reichl  http://www.dominik-reichl.de/\n  227: * Squish © 2006 Simon Brown, MIT license. http://sjbrown.co.uk/?code=squish\n  228  * PugiXML © 2006-2009 by Arseny Kapoulkine (based on work © 2003 Kristen Wegner), MIT license. http://pugixml.org/\n  229  * DPX reader/writer © 2009 Patrick A. Palmer, BSD 3-clause license. https://github.com/patrickpalmer/dpx}\n\n/mnt/misc_hdd/dev/Lava/third_party/external/openimageio/src/OpenImageIO/src/doc/oiiointro.tex:\n  228  Dominik Reichl \\\\ \\url{http://www.dominik-reichl.de/}\n  229  \\item Squish \\copyright\\ 2006 Simon Brown, MIT license.\n  230: \\url{http://sjbrown.co.uk/?code=squish}\n  231  \\item PugiXML \\copyright\\ 2006-2009 by Arseny Kapoulkine (based on work\n  232  \\copyright\\ 2003 Kristen Wegner), MIT license. \\url{http://pugixml.org/}\n\n131 matches across 40 files\n\n\nSearching 1308 files for \"USE_DDS\" (case sensitive)\n\n0 matches\n\nSearching 1308 files for \"dds.imageio\" (case sensitive)\n\n/mnt/misc_hdd/dev/Lava/third_party/external/openimageio/src/OpenImageIO/src/cmake/compiler.cmake:\n  446                                 \"src/dpx.imageio/libdpx/*\"\n  447                                 \"src/cineon.imageio/libcineon/*\"\n  448:                                \"src/dds.imageio/squish/*\"\n  449                                 \"src/gif.imageio/gif.h\"\n  450                                 \"src/hdr.imageio/rgbe.cpp\"\n\n1 match in 1 file\n",
			"settings":
			{
				"buffer_size": 42080,
				"line_ending": "Unix",
				"name": "Find Results",
				"scratch": true
			}
		},
		{
			"contents": "# Copyright 2008-present Contributors to the OpenImageIO project.\n# SPDX-License-Identifier: BSD-3-Clause\n# https://github.com/OpenImageIO/oiio/blob/master/LICENSE.md\n\n###########################################################################\n#\n# This file contains compiler-related detection, options, and actions.\n#\n# Each option declaration is kept close to the related logic for that\n# option.\n#\n###########################################################################\n\n\n###########################################################################\n# Print some basic status about the system and compiler\n#\nif (VERBOSE)\n    message (STATUS \"CMAKE_SYSTEM_NAME      = ${CMAKE_SYSTEM_NAME}\")\n    message (STATUS \"CMAKE_SYSTEM_VERSION   = ${CMAKE_SYSTEM_VERSION}\")\n    message (STATUS \"CMAKE_SYSTEM_PROCESSOR = ${CMAKE_SYSTEM_PROCESSOR}\")\nendif ()\nmessage (STATUS \"CMAKE_CXX_COMPILER     = ${CMAKE_CXX_COMPILER}\")\nmessage (STATUS \"CMAKE_CXX_COMPILER_ID  = ${CMAKE_CXX_COMPILER_ID}\")\n\n\n###########################################################################\n# C++ language standard\n#\nset (CMAKE_CXX_STANDARD 11 CACHE STRING\n     \"C++ standard to prefer (11, 14, 17, 20, etc.)\")\nset (CMAKE_CXX_STANDARD_REQUIRED ON)\nset (CMAKE_CXX_EXTENSIONS OFF)\nmessage (STATUS \"Building for C++${CMAKE_CXX_STANDARD}\")\n\n\n###########################################################################\n# Figure out which compiler we're using\n#\n\nif (CMAKE_COMPILER_IS_GNUCC)\n    execute_process (COMMAND ${CMAKE_CXX_COMPILER} -dumpversion\n                     OUTPUT_VARIABLE GCC_VERSION\n                     OUTPUT_STRIP_TRAILING_WHITESPACE)\n    if (VERBOSE)\n        message (STATUS \"Using gcc ${GCC_VERSION} as the compiler\")\n    endif ()\nelse ()\n    set (GCC_VERSION 0)\nendif ()\n\nif (CMAKE_CXX_COMPILER_ID MATCHES \"Clang\" OR CMAKE_CXX_COMPILER MATCHES \"[Cc]lang\")\n    # If using any flavor of clang, set CMAKE_COMPILER_IS_CLANG. If it's\n    # Apple's variety, set CMAKE_COMPILER_IS_APPLECLANG and\n    # APPLECLANG_VERSION_STRING, otherwise for generic clang set\n    # CLANG_VERSION_STRING.\n    set (CMAKE_COMPILER_IS_CLANG 1)\n    EXECUTE_PROCESS( COMMAND ${CMAKE_CXX_COMPILER} --version OUTPUT_VARIABLE clang_full_version_string )\n    if (clang_full_version_string MATCHES \"Apple\")\n        set (CMAKE_CXX_COMPILER_ID \"AppleClang\")\n        set (CMAKE_COMPILER_IS_APPLECLANG 1)\n        string (REGEX REPLACE \".* version ([0-9]+\\\\.[0-9]+).*\" \"\\\\1\" APPLECLANG_VERSION_STRING ${clang_full_version_string})\n        if (VERBOSE)\n            message (STATUS \"The compiler is Clang: ${CMAKE_CXX_COMPILER_ID} version ${APPLECLANG_VERSION_STRING}\")\n        endif ()\n    else ()\n        string (REGEX REPLACE \".* version ([0-9]+\\\\.[0-9]+).*\" \"\\\\1\" CLANG_VERSION_STRING ${clang_full_version_string})\n        if (VERBOSE)\n            message (STATUS \"The compiler is Clang: ${CMAKE_CXX_COMPILER_ID} version ${CLANG_VERSION_STRING}\")\n        endif ()\n    endif ()\nelseif (CMAKE_CXX_COMPILER_ID MATCHES \"Intel\")\n    set (CMAKE_COMPILER_IS_INTEL 1)\n    if (VERBOSE)\n        message (STATUS \"Using Intel as the compiler\")\n    endif ()\nendif ()\n\n\n###########################################################################\n# Turn on more detailed warnings and optionally consider warnings as errors\n#\nif (${PROJECT_NAME}_SUPPORTED_RELEASE)\n    option (STOP_ON_WARNING \"Stop building if there are any compiler warnings\" OFF)\nelse ()\n    option (STOP_ON_WARNING \"Stop building if there are any compiler warnings\" ON)\nendif()\noption (EXTRA_WARNINGS \"Enable lots of extra pedantic warnings\" OFF)\nif (NOT MSVC)\n    add_compile_options (\"-Wall\")\n    if (EXTRA_WARNINGS)\n        add_compile_options (\"-Wextra\")\n    endif ()\n    if (STOP_ON_WARNING OR DEFINED ENV{CI})\n        add_compile_options (\"-Werror\")\n        # N.B. Force CI builds to use -Werror, even if STOP_ON_WARNING has\n        # been switched off by default, which we may do in release\n        # branches.\n    endif ()\nendif ()\n\n\n###########################################################################\n# Control symbol visibility\n#\n# We try hard to make default symbol visibility be \"hidden\", except for\n# symbols that are part of the public API, which should be marked in the\n# source code with a special decorator, OIIO_API.\n#\n# Additionally, there is a hidesymbols.map file that on some platforms may\n# give more fine-grained control for hiding symbols, because sometimes\n# dependent libraries may not be well behaved and need extra hiding.\n#\nset (CXX_VISIBILITY_PRESET \"hidden\" CACHE STRING \"Symbol visibility (hidden or default\")\noption (VISIBILITY_INLINES_HIDDEN \"Hide symbol visibility of inline functions\" ON)\nset (VISIBILITY_MAP_FILE \"${PROJECT_SOURCE_DIR}/src/build-scripts/hidesymbols.map\" CACHE FILEPATH \"Visibility map file\")\nset (C_VISIBILITY_PRESET ${CXX_VISIBILITY_PRESET})\nif (${CXX_VISIBILITY_PRESET} STREQUAL \"hidden\" AND\n    (CMAKE_COMPILER_IS_GNUCC OR CMAKE_COMPILER_IS_CLANG) AND\n    (CMAKE_SYSTEM_NAME MATCHES \"Linux|kFreeBSD\" OR CMAKE_SYSTEM_NAME STREQUAL \"GNU\"))\n    # Linux/FreeBSD/Hurd: also hide all the symbols of dependent libraries\n    # to prevent clashes if an app using this project is linked against\n    # other versions of our dependencies.\n    set (VISIBILITY_MAP_COMMAND \"-Wl,--version-script=${VISIBILITY_MAP_FILE}\")\nendif ()\n\n\n###########################################################################\n# Compiler-specific and platform-specific options.\n#\n# Here is where we add a whole bunch of options for specific compilers or\n# platforms. Usually this is to suppress false-positive compiler warnings.\n#\nif (CMAKE_COMPILER_IS_CLANG OR CMAKE_COMPILER_IS_APPLECLANG)\n    # Clang-specific options\n    add_compile_options (\"-Wno-unused-function\")\n    add_compile_options (\"-Wno-overloaded-virtual\")\n    add_compile_options (\"-Wno-unneeded-internal-declaration\")\n    add_compile_options (\"-Wno-unused-private-field\")\n    add_compile_options (\"-Wno-tautological-compare\")\n    # disable warning about unused command line arguments\n    add_compile_options (\"-Qunused-arguments\")\n    # Don't warn if we ask it not to warn about warnings it doesn't know\n    add_compile_options (\"-Wunknown-warning-option\")\n    if (CLANG_VERSION_STRING VERSION_GREATER_EQUAL 3.6 OR\n        APPLECLANG_VERSION_STRING VERSION_GREATER 6.1)\n        add_compile_options (\"-Wno-unused-local-typedefs\")\n    endif ()\n    if (CLANG_VERSION_STRING VERSION_GREATER_EQUAL 3.9)\n        # Don't warn about using unknown preprocessor symbols in `#if`\n        add_compile_options (\"-Wno-expansion-to-defined\")\n    endif ()\nendif ()\n\nif (CMAKE_COMPILER_IS_GNUCC AND NOT (CMAKE_COMPILER_IS_CLANG OR CMAKE_COMPILER_IS_APPLECLANG))\n    # gcc specific options\n    add_compile_options (\"-Wno-unused-local-typedefs\")\n    add_compile_options (\"-Wno-unused-result\")\n    if (NOT ${GCC_VERSION} VERSION_LESS 7.0)\n        add_compile_options (\"-Wno-aligned-new\")\n        add_compile_options (\"-Wno-noexcept-type\")\n    endif ()\nendif ()\n\nif (CMAKE_COMPILER_IS_GNUCC OR CMAKE_COMPILER_IS_CLANG)\n    # Options common to gcc and clang\n\n    # Ensure this macro is set for stdint.h\n    add_definitions (\"-D__STDC_LIMIT_MACROS\")\n    add_definitions (\"-D__STDC_CONSTANT_MACROS\")\n    # this allows native instructions to be used for sqrtf instead of a function call\n    add_compile_options (\"-fno-math-errno\")\nendif ()\n\nif (MSVC)\n    # Microsoft specific options\n    add_compile_options (/W1)\n    add_definitions (-D_CRT_SECURE_NO_DEPRECATE)\n    add_definitions (-D_CRT_SECURE_NO_WARNINGS)\n    add_definitions (-D_CRT_NONSTDC_NO_WARNINGS)\n    add_definitions (-D_SCL_SECURE_NO_WARNINGS)\n    add_definitions (-DJAS_WIN_MSVC_BUILD)\nendif (MSVC)\n\nif (${CMAKE_SYSTEM_NAME} STREQUAL \"FreeBSD\"\n    AND ${CMAKE_SYSTEM_PROCESSOR} STREQUAL \"i386\")\n    # For FreeBSD, minimum arch of i586 is needed for atomic cpu instructions\n    add_compile_options (-march=i586)\nendif ()\n\n\n###########################################################################\n# Use ccache if found\n#\n# This can really speed up compilation by caching object files that have\n# been compiled previously with identical arguments and inputs. Putting this\n# logic here makes it work even if the user is unaware of ccache. If it's\n# not found on the system, it will simply be silently not used.\noption (USE_CCACHE \"Use ccache if found\" ON)\nfind_program (CCACHE_FOUND ccache)\nif (CCACHE_FOUND AND USE_CCACHE)\n    if (CMAKE_COMPILER_IS_CLANG AND USE_QT AND (NOT DEFINED ENV{CCACHE_CPP2}))\n        message (STATUS \"Ignoring ccache because clang + Qt + env CCACHE_CPP2 is not set\")\n    else ()\n        set_property (GLOBAL PROPERTY RULE_LAUNCH_COMPILE ccache)\n        set_property (GLOBAL PROPERTY RULE_LAUNCH_LINK ccache)\n    endif ()\nendif ()\n\n\n###########################################################################\n# Option to force use of libc++ (the LLVM project's alternate C++ standard\n# library). Currently this only has an effect if using clang as the\n# compiler. Maybe it would also work for g++? Investigate.\noption (USE_LIBCPLUSPLUS \"Compile with clang libc++\" OFF)\nif (USE_LIBCPLUSPLUS AND CMAKE_COMPILER_IS_CLANG)\n    message (STATUS \"Using libc++\")\n    set (CMAKE_CXX_FLAGS \"${CMAKE_CXX_FLAGS} -stdlib=libc++\")\nendif ()\n\n\n###########################################################################\n# For gcc >= 5, allow an option to force which version of the C++ ABI to\n# use (mostly this affects the implementation of std::string).\n#\n# FIXME: In theory, this should also be needed for clang, if compiling with\n# the gcc libstdc++ toolchain. In practice, I could not get things to build\n# with clang properly when using this option, and I haven't yet seen a case\n# where it's needed. We can return to this and fix for clang if it becomes a\n# legit problem later.\n#\nset (GLIBCXX_USE_CXX11_ABI \"\" CACHE STRING \"For gcc, use the new C++11 library ABI (0|1)\")\nif (CMAKE_COMPILER_IS_GNUCC AND ${GCC_VERSION} VERSION_GREATER_EQUAL 5.0)\n    if (NOT ${GLIBCXX_USE_CXX11_ABI} STREQUAL \"\")\n        add_definitions (\"-D_GLIBCXX_USE_CXX11_ABI=${GLIBCXX_USE_CXX11_ABI}\")\n    endif ()\nendif ()\n\n\n###########################################################################\n# SIMD and machine architecture options.\n#\n# The USE_SIMD option may be set to a comma-separated list of machine /\n# instruction set options, such as \"avx3,f16c\". The list will be parsed and\n# the proper compiler directives added to generate code for those ISA\n# capabilities.\n#\nset (USE_SIMD \"\" CACHE STRING \"Use SIMD directives (0, sse2, sse3, ssse3, sse4.1, sse4.2, avx, avx2, avx512f, f16c, aes)\")\nset (SIMD_COMPILE_FLAGS \"\")\nif (NOT USE_SIMD STREQUAL \"\")\n    message (STATUS \"Compiling with SIMD level ${USE_SIMD}\")\n    if (USE_SIMD STREQUAL \"0\")\n        set (SIMD_COMPILE_FLAGS ${SIMD_COMPILE_FLAGS} \"-DOIIO_NO_SSE=1\")\n    else ()\n        string (REPLACE \",\" \";\" SIMD_FEATURE_LIST ${USE_SIMD})\n        foreach (feature ${SIMD_FEATURE_LIST})\n            if (VERBOSE)\n                message (STATUS \"SIMD feature: ${feature}\")\n            endif ()\n            if (MSVC OR CMAKE_COMPILER_IS_INTEL)\n                set (SIMD_COMPILE_FLAGS ${SIMD_COMPILE_FLAGS} \"/arch:${feature}\")\n            else ()\n                set (SIMD_COMPILE_FLAGS ${SIMD_COMPILE_FLAGS} \"-m${feature}\")\n            endif ()\n            if (feature STREQUAL \"fma\" AND (CMAKE_COMPILER_IS_GNUCC OR CMAKE_COMPILER_IS_CLANG))\n                # If fma is requested, for numerical accuracy sake, turn it\n                # off by default except when we explicitly use madd. At some\n                # future time, we should look at this again carefully and\n                # see if we want to use it more widely by ffp-contract=fast.\n                add_compile_options (\"-ffp-contract=off\")\n            endif ()\n        endforeach()\n    endif ()\n    add_compile_options (${SIMD_COMPILE_FLAGS})\nendif ()\n\n\n###########################################################################\n# Preparation to test for compiler/language features\nif (NOT VERBOSE)\n    set (CMAKE_REQUIRED_QUIET 1)\nendif ()\ninclude (CMakePushCheckState)\ninclude (CheckCXXSourceRuns)\ninclude (CheckLibraryExists)\n\n###########################################################################\n# Find out if it's safe for us to use std::regex or if we need boost.regex.\n# This is primarily about gcc 4.8 having a broken regex implementation.\n# This will be obsolete once our minimum supported gcc is >= 4.9.\n#\ncmake_push_check_state ()\ncheck_cxx_source_runs(\"\n      #include <regex>\n      int main() {\n          std::string r = std::regex_replace(std::string(\\\"abc\\\"), std::regex(\\\"b\\\"), \\\" \\\");\n          return r == \\\"a c\\\" ? 0 : -1;\n      }\"\n      USE_STD_REGEX)\ncmake_pop_check_state ()\nif (USE_STD_REGEX)\n    add_definitions (-DUSE_STD_REGEX)\nelse ()\n    add_definitions (-DUSE_BOOST_REGEX)\nendif ()\n\n###########################################################################\n# Check if we need libatomic on this platform.  We shouldn't on mainstream\n# x86/x86_64, but might on some other platforms.\n#\nif (NOT MSVC AND NOT APPLE)\n    cmake_push_check_state ()\n    check_cxx_source_runs(\n       \"#include <atomic>\n        #include <cstdint>\n        std::atomic<uint64_t> x {0};\n        int main() {\n            uint64_t i = x.load(std::memory_order_relaxed);\n            return 0;\n        }\"\n        COMPILER_SUPPORTS_ATOMIC_WITHOUT_LIBATOMIC)\n    cmake_pop_check_state ()\n    if (NOT COMPILER_SUPPORTS_ATOMIC_WITHOUT_LIBATOMIC)\n        check_library_exists (atomic __atomic_load_8 \"\" LIBATOMIC_WORKS)\n        if (LIBATOMIC_WORKS)\n            list (APPEND GCC_ATOMIC_LIBRARIES \"-latomic\")\n            message (STATUS \"Compiler needs libatomic, added\")\n        else ()\n            message (FATAL_ERROR \"Compiler needs libatomic, but not found\")\n        endif ()\n    else ()\n        if (VERBOSE)\n            message (STATUS \"Compiler supports std::atomic, no libatomic necessary\")\n        endif ()\n    endif ()\nendif ()\n\n\n###########################################################################\n# Code coverage options\n#\noption (CODECOV \"Build code coverage tests\" OFF)\nif (CODECOV AND (CMAKE_COMPILER_IS_GNUCC OR CMAKE_COMPILER_IS_CLANG))\n    message (STATUS \"Compiling for code coverage analysis\")\n    add_compile_options (\"-ftest-coverage -fprofile-arcs -O0\")\n    add_definitions (\"-D${PROJ_NAME}_CODE_COVERAGE=1\")\n    set (CMAKE_EXE_LINKER_FLAGS \"${CMAKE_EXE_LINKER_FLAGS} -ftest-coverage -fprofile-arcs\")\n    set (CMAKE_MODULE_LINKER_FLAGS \"${CMAKE_MODULE_LINKER_FLAGS} -ftest-coverage -fprofile-arcs\")\n    set (CMAKE_SHARED_LINKER_FLAGS \"${CMAKE_SHARED_LINKER_FLAGS} -ftest-coverage -fprofile-arcs\")\nendif ()\n\n\n###########################################################################\n# Sanitizer options\n#\nset (SANITIZE \"\" CACHE STRING \"Build code using sanitizer (address, thread)\")\nif (SANITIZE AND (CMAKE_COMPILER_IS_GNUCC OR CMAKE_COMPILER_IS_CLANG))\n    message (STATUS \"Compiling for sanitizer=${SANITIZE}\")\n    string (REPLACE \",\" \";\" SANITIZE_FEATURE_LIST ${SANITIZE})\n    foreach (feature ${SANITIZE_FEATURE_LIST})\n        message (STATUS \"  sanitize feature: ${feature}\")\n        add_compile_options (-fsanitize=${feature})\n        set (CMAKE_EXE_LINKER_FLAGS \"${CMAKE_EXE_LINKER_FLAGS} -fsanitize=${feature}\")\n        set (CMAKE_MODULE_LINKER_FLAGS \"${CMAKE_MODULE_LINKER_FLAGS} -fsanitize=${feature}\")\n        set (CMAKE_SHARED_LINKER_FLAGS \"${CMAKE_SHARED_LINKER_FLAGS} -fsanitize=${feature}\")\n    endforeach()\n    add_compile_options (-g -fno-omit-frame-pointer)\n    if (${CMAKE_SYSTEM_NAME} STREQUAL \"Linux\")\n        set (SANITIZE_ON_LINUX 1)\n    endif ()\n    if (CMAKE_COMPILER_IS_GNUCC AND ${CMAKE_SYSTEM_NAME} STREQUAL \"Linux\")\n        add_compile_options (\"-fuse-ld=gold\")\n        set (CMAKE_EXE_LINKER_FLAGS \"${CMAKE_EXE_LINKER_FLAGS} -fuse-ld=gold\")\n        set (CMAKE_MODULE_LINKER_FLAGS \"${CMAKE_MODULE_LINKER_FLAGS} -fuse-ld=gold\")\n        set (CMAKE_SHARED_LINKER_FLAGS \"${CMAKE_SHARED_LINKER_FLAGS} -fuse-ld=gold\")\n        set (SANITIZE_LIBRARIES \"asan;pthread\")\n        # set (SANITIZE_LIBRARIES \"asan\" \"ubsan\")\n    endif()\n    if (CMAKE_COMPILER_IS_GNUCC)\n        # turn on glibcxx extra annotations to find vector writes past end\n        add_definitions (\"-D_GLIBCXX_SANITIZE_VECTOR=1\")\n    endif ()\n    add_definitions (\"-D${PROJECT_NAME}_SANITIZE=1\")\nendif ()\n\n\n###########################################################################\n# clang-tidy options\n#\n# clang-tidy is a static analyzer that is part of the LLVM tools. It has a\n# variety of the usual bug and security tests, linting, and also tests for\n# things like finding (and correcting!) use of older language constructs.\n#\n# If clang-tidy is found and enabled, a \"clang-tidy\" build target will be\n# enabled. The set of tests can be customized both here and through\n# the .clang-tidy file that is part of this project.\n#\noption (CLANG_TIDY \"Enable clang-tidy\" OFF)\nset (CLANG_TIDY_CHECKS \"-*\" CACHE STRING \"clang-tidy checks to perform (none='-*')\")\nset (CLANG_TIDY_ARGS \"\" CACHE STRING \"clang-tidy args\")\noption (CLANG_TIDY_FIX \"Have clang-tidy fix source\" OFF)\nif (CLANG_TIDY)\n    find_program(CLANG_TIDY_EXE NAMES \"clang-tidy\"\n                 DOC \"Path to clang-tidy executable\")\n    message (STATUS \"CLANG_TIDY_EXE ${CLANG_TIDY_EXE}\")\n    if (CLANG_TIDY_EXE AND NOT ${CMAKE_VERSION} VERSION_LESS 3.6)\n        set (CMAKE_CXX_CLANG_TIDY\n             \"${CLANG_TIDY_EXE}\"\n             )\n        if (CLANG_TIDY_ARGS)\n            list (APPEND CMAKE_CXX_CLANG_TIDY ${CLANG_TIDY_ARGS})\n        endif ()\n        if (CLANG_TIDY_CHECKS)\n            list (APPEND CMAKE_CXX_CLANG_TIDY -checks=\"${CLANG_TIDY_CHECKS}\")\n        endif ()\n        execute_process (COMMAND ${CMAKE_CXX_CLANG_TIDY} -list-checks\n                         OUTPUT_VARIABLE tidy_checks\n                         OUTPUT_STRIP_TRAILING_WHITESPACE)\n        if (CLANG_TIDY_FIX)\n            list (APPEND CMAKE_CXX_CLANG_TIDY \"-fix\")\n        endif ()\n        message (STATUS \"clang-tidy command line is: ${CMAKE_CXX_CLANG_TIDY}\")\n        message (STATUS \"${tidy_checks}\")\n    else ()\n        message (STATUS \"Cannot run clang-tidy as requested\")\n    endif ()\n    # Hint: run with CLANG_TIDY_ARGS=-list-checks to list all the checks\nendif ()\n\n\n###########################################################################\n# clang-format options\n#\n# clang-format is a source code reformatter that is part of the LLVM tools.\n# It can be used to check adherence to project code formatting rules and\n# correct any deviations. If clang-format is found on the system, a\n# \"clang-format\" build target will trigger a reformatting.\n#\n# Note: skip all of this checking, setup, and cmake-format target if this\n# is being built as a subproject.\nif (NOT ${PROJECT_NAME}_IS_SUBPROJECT)\n    set (CLANG_FORMAT_EXE_HINT \"\" CACHE PATH \"clang-format executable's directory (will search if not specified\")\n    set (CLANG_FORMAT_INCLUDES \"src/*.h\" \"src/*.cpp\"\n        CACHE STRING \"Glob patterns to include for clang-format\")\n    set (CLANG_FORMAT_EXCLUDES \"*pugixml*\" \"*SHA1*\" \"*/farmhash.cpp\"\n                               \"src/dpx.imageio/libdpx/*\"\n                               \"src/cineon.imageio/libcineon/*\"\n                               \"src/dds.imageio/squish/*\"\n                               \"src/gif.imageio/gif.h\"\n                               \"src/hdr.imageio/rgbe.cpp\"\n                               \"src/libutil/stb_sprintf.h\"\n         CACHE STRING \"Glob patterns to exclude for clang-format\")\n    find_program (CLANG_FORMAT_EXE\n                  NAMES clang-format bin/clang-format\n                  HINTS ${CLANG_FORMAT_EXE_HINT} ENV CLANG_FORMAT_EXE_HINT\n                        ENV LLVM_DIRECTORY\n                  NO_DEFAULT_PATH\n                  DOC \"Path to clang-format executable\")\n    find_program (CLANG_FORMAT_EXE NAMES clang-format bin/clang-format)\n    if (CLANG_FORMAT_EXE)\n        message (STATUS \"clang-format found: ${CLANG_FORMAT_EXE}\")\n        # Start with the list of files to include when formatting...\n        file (GLOB_RECURSE FILES_TO_FORMAT ${CLANG_FORMAT_INCLUDES})\n        # ... then process any list of excludes we are given\n        foreach (_pat ${CLANG_FORMAT_EXCLUDES})\n            file (GLOB_RECURSE _excl ${_pat})\n            list (REMOVE_ITEM FILES_TO_FORMAT ${_excl})\n        endforeach ()\n        #message (STATUS \"clang-format file list: ${FILES_TO_FORMAT}\")\n        file (COPY ${CMAKE_CURRENT_SOURCE_DIR}/.clang-format\n              DESTINATION ${CMAKE_CURRENT_BINARY_DIR})\n        add_custom_target (clang-format\n            COMMAND \"${CLANG_FORMAT_EXE}\" -i -style=file ${FILES_TO_FORMAT} )\n    else ()\n        message (STATUS \"clang-format not found.\")\n    endif ()\nendif ()\n\n###########################################################################\n# Another way to sneak in custom compiler and DSO linking flags.\n#\nset (EXTRA_CPP_ARGS \"\" CACHE STRING \"Extra C++ command line definitions\")\nif (EXTRA_CPP_ARGS)\n    message (STATUS \"Extra C++ args: ${EXTRA_CPP_ARGS}\")\n    add_compile_options (\"${EXTRA_CPP_ARGS}\")\nendif()\nset (EXTRA_DSO_LINK_ARGS \"\" CACHE STRING \"Extra command line definitions when building DSOs\")\n\n\n###########################################################################\n# Set the versioning for shared libraries.\n#\nif (${PROJECT_NAME}_SUPPORTED_RELEASE)\n    # Supported releases guarantee ABI back-compatibility within the release\n    # family, so SO versioning is major.minor.\n    set (SOVERSION ${PROJECT_VERSION_MAJOR}.${PROJECT_VERSION_MINOR}\n         CACHE STRING \"Set the SO version for dynamic libraries\")\nelse ()\n    # Development master makes no ABI stability guarantee, so we make the\n    # SO naming capture down to the major.minor.patch level.\n    set (SOVERSION ${PROJECT_VERSION_MAJOR}.${PROJECT_VERSION_MINOR}.${PROJECT_VERSION_PATCH}\n         CACHE STRING \"Set the SO version for dynamic libraries\")\nendif ()\nif (VERBOSE)\n    message(STATUS \"Setting SOVERSION to: ${SOVERSION}\")\nendif ()\n\n\n###########################################################################\n# BUILD_SHARED_LIBS, if turned off, will disable building of .so/.dll\n# dynamic libraries and instead only build static libraries.\n#\noption (BUILD_SHARED_LIBS \"Build shared libraries (set to OFF to build static libs)\" ON)\nif (NOT BUILD_SHARED_LIBS)\n    add_definitions (-D${PROJ_NAME}_STATIC_DEFINE=1)\nendif ()\n\n\n###########################################################################\n# LINKSTATIC, if enabled, will cause us to favor linking static versions\n# of library dependencies, if they are available.\n#\noption (LINKSTATIC  \"Link with static external libraries when possible\" OFF)\nif (LINKSTATIC)\n    #set (_orig_link_suffixes ${CMAKE_FIND_LIBRARY_SUFFIXES})\n    message (STATUS \"Statically linking external libraries when possible\")\n    if (WIN32)\n        set (CMAKE_FIND_LIBRARY_SUFFIXES .lib .a ${CMAKE_FIND_LIBRARY_SUFFIXES})\n    else ()\n        set (CMAKE_FIND_LIBRARY_SUFFIXES .a ${CMAKE_FIND_LIBRARY_SUFFIXES})\n    endif ()\nendif ()\n\n\n###########################################################################\n# Any extra logic to be run only for CI builds goes here.\n#\nif (DEFINED ENV{CI} OR DEFINED ENV{GITHUB_ACTIONS})\n    add_definitions (\"-D${PROJ_NAME}_CI=1\" \"-DBUILD_CI=1\")\n    if (APPLE)\n        # Keep Mono framework from being incorrectly searched for include\n        # files on GitHub Actions CI.\n        set(CMAKE_FIND_FRAMEWORK LAST)\n    endif ()\nendif ()\n\n\n###########################################################################\n# Rpath handling at the install step\n#\nset (MACOSX_RPATH ON)\nif (CMAKE_SKIP_RPATH)\n    # We need to disallow the user from truly setting CMAKE_SKIP_RPATH, since\n    # we want to run the generated executables from the build tree in order to\n    # generate the manual page documentation.  However, we make sure the\n    # install rpath is unset so that the install tree is still free of rpaths\n    # for linux packaging purposes.\n    set (CMAKE_SKIP_RPATH FALSE)\n    unset (CMAKE_INSTALL_RPATH)\nelse ()\n    if (NOT CMAKE_INSTALL_RPATH)\n        set (CMAKE_INSTALL_RPATH \"${CMAKE_INSTALL_FULL_LIBDIR}\")\n    endif ()\n    # add the automatically determined parts of the RPATH that\n    # point to directories outside the build tree to the install RPATH\n    set (CMAKE_INSTALL_RPATH_USE_LINK_PATH TRUE)\n    if (VERBOSE)\n        message (STATUS \"CMAKE_INSTALL_RPATH = ${CMAKE_INSTALL_RPATH}\")\n    endif ()\nendif ()\n\n\n\n###########################################################################\n# Macro to install targets to the appropriate locations.  Use this instead\n# of the install(TARGETS ...) signature. Note that it adds it to the\n# export targets list for when we generate config files.\n#\n# Usage:\n#\n#    install_targets (target1 [target2 ...])\n#\nmacro (install_targets)\n    install (TARGETS ${ARGN}\n             EXPORT ${PROJ_NAME}_EXPORTED_TARGETS\n             RUNTIME DESTINATION \"${CMAKE_INSTALL_BINDIR}\" COMPONENT user\n             LIBRARY DESTINATION \"${CMAKE_INSTALL_LIBDIR}\" COMPONENT user\n             ARCHIVE DESTINATION \"${CMAKE_INSTALL_LIBDIR}\" COMPONENT developer)\nendmacro()\n",
			"file": "third_party/external/openimageio/src/OpenImageIO/src/cmake/compiler.cmake",
			"file_size": 25040,
			"file_write_time": 133343208433094533,
			"settings":
			{
				"buffer_size": 25040,
				"line_ending": "Unix"
			}
		},
		{
			"contents": "# Module to find Libsquish\n#\n# This module will first look into the directories defined by the variables:\n#   - Libsquish_ROOT, LIBSQUISH_INCLUDE_PATH, LIBSQUISH_LIBRARY_PATH\n#\n# This module defines the following variables:\n#\n# Libsquish_FOUND            True if Libsquish was found.\n# LIBSQUISH_INCLUDES         Where to find Libsquish headers\n# LIBSQUISH_LIBRARIES        List of libraries to link against when using Libsquish\n# LIBSQUISH_VERSION          Version of Libsquish (e.g., 3.6.2)\n\ninclude (FindPackageHandleStandardArgs)\n\nfind_path (LIBSQUISH_INCLUDE_DIR squish.h\n           HINTS\n               ${LIBSQUISH_INCLUDE_PATH}\n               ENV LIBSQUISH_INCLUDE_PATH\n           DOC \"The directory where Libsquish headers reside\")\n\nfind_library (LIBSQUISH_LIBRARY squish\n              HINTS\n                  ${LIBSQUISH_LIBRARY_PATH}\n                  ENV LIBSQUISH_LIBRARY_PATH\n              DOC \"The Libsquish libraries\")\n\nfind_package_handle_standard_args (Libsquish\n    REQUIRED_VARS\n        LIBSQUISH_INCLUDE_DIR\n        LIBSQUISH_LIBRARY\n    )\n\nif (Libsquish_FOUND)\n    set (LIBSQUISH_INCLUDES ${LIBSQUISH_INCLUDE_DIR})\n    set (LIBSQUISH_LIBRARIES ${LIBSQUISH_LIBRARY})\n\n    if (NOT TARGET Libsquish::Libsquish)\n        add_library(Libsquish::Libsquish UNKNOWN IMPORTED)\n        set_target_properties(Libsquish::Libsquish PROPERTIES\n            INTERFACE_INCLUDE_DIRECTORIES \"${LIBSQUISH_INCLUDES}\")\n\n        set_property(TARGET Libsquish::Libsquish APPEND PROPERTY\n            IMPORTED_LOCATION \"${LIBSQUISH_LIBRARIES}\")\n    endif ()\nendif ()\n\nmark_as_advanced (\n    LIBSQUISH_INCLUDE_DIR\n    LIBSQUISH_LIBRARY\n    )\n",
			"file": "third_party/external/openimageio/src/OpenImageIO/src/cmake/modules/FindLibsquish.cmake",
			"file_size": 1635,
			"file_write_time": 133343208433134533,
			"settings":
			{
				"buffer_size": 1635,
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					1,
					1,
					"revert",
					null,
					"BAAAAAAAAAAAAAAAAAAAAAAAAABjBgAAIyBNb2R1bGUgdG8gZmluZCBMaWJzcXVpc2gKIwojIFRoaXMgbW9kdWxlIHdpbGwgZmlyc3QgbG9vayBpbnRvIHRoZSBkaXJlY3RvcmllcyBkZWZpbmVkIGJ5IHRoZSB2YXJpYWJsZXM6CiMgICAtIExpYnNxdWlzaF9ST09ULCBMSUJTUVVJU0hfSU5DTFVERV9QQVRILCBMSUJTUVVJU0hfTElCUkFSWV9QQVRICiMKIyBUaGlzIG1vZHVsZSBkZWZpbmVzIHRoZSBmb2xsb3dpbmcgdmFyaWFibGVzOgojCiMgTGlic3F1aXNoX0ZPVU5EICAgICAgICAgICAgVHJ1ZSBpZiBMaWJzcXVpc2ggd2FzIGZvdW5kLgojIExJQlNRVUlTSF9JTkNMVURFUyAgICAgICAgIFdoZXJlIHRvIGZpbmQgTGlic3F1aXNoIGhlYWRlcnMKIyBMSUJTUVVJU0hfTElCUkFSSUVTICAgICAgICBMaXN0IG9mIGxpYnJhcmllcyB0byBsaW5rIGFnYWluc3Qgd2hlbiB1c2luZyBMaWJzcXVpc2gKIyBMSUJTUVVJU0hfVkVSU0lPTiAgICAgICAgICBWZXJzaW9uIG9mIExpYnNxdWlzaCAoZS5nLiwgMy42LjIpCgppbmNsdWRlIChGaW5kUGFja2FnZUhhbmRsZVN0YW5kYXJkQXJncykKCmZpbmRfcGF0aCAoTElCU1FVSVNIX0lOQ0xVREVfRElSIHNxdWlzaC5oCiAgICAgICAgICAgSElOVFMKICAgICAgICAgICAgICAgJHtMSUJTUVVJU0hfSU5DTFVERV9QQVRIfQogICAgICAgICAgICAgICBFTlYgTElCU1FVSVNIX0lOQ0xVREVfUEFUSAogICAgICAgICAgIERPQyAiVGhlIGRpcmVjdG9yeSB3aGVyZSBMaWJzcXVpc2ggaGVhZGVycyByZXNpZGUiKQoKZmluZF9saWJyYXJ5IChMSUJTUVVJU0hfTElCUkFSWSBzcXVpc2gKICAgICAgICAgICAgICBISU5UUwogICAgICAgICAgICAgICAgICAke0xJQlNRVUlTSF9MSUJSQVJZX1BBVEh9CiAgICAgICAgICAgICAgICAgIEVOViBMSUJTUVVJU0hfTElCUkFSWV9QQVRICiAgICAgICAgICAgICAgRE9DICJUaGUgTGlic3F1aXNoIGxpYnJhcmllcyIpCgpmaW5kX3BhY2thZ2VfaGFuZGxlX3N0YW5kYXJkX2FyZ3MgKExpYnNxdWlzaAogICAgUkVRVUlSRURfVkFSUwogICAgICAgIExJQlNRVUlTSF9JTkNMVURFX0RJUgogICAgICAgIExJQlNRVUlTSF9MSUJSQVJZCiAgICApCgppZiAoTGlic3F1aXNoX0ZPVU5EKQogICAgc2V0IChMSUJTUVVJU0hfSU5DTFVERVMgJHtMSUJTUVVJU0hfSU5DTFVERV9ESVJ9KQogICAgc2V0IChMSUJTUVVJU0hfTElCUkFSSUVTICR7TElCU1FVSVNIX0xJQlJBUll9KQoKICAgIGlmIChOT1QgVEFSR0VUIExpYnNxdWlzaDo6TGlic3F1aXNoKQogICAgICAgIGFkZF9saWJyYXJ5KExpYnNxdWlzaDo6TGlic3F1aXNoIFVOS05PV04gSU1QT1JURUQpCiAgICAgICAgc2V0X3RhcmdldF9wcm9wZXJ0aWVzKExpYnNxdWlzaDo6TGlic3F1aXNoIFBST1BFUlRJRVMKICAgICAgICAgICAgSU5URVJGQUNFX0lOQ0xVREVfRElSRUNUT1JJRVMgIiR7TElCU1FVSVNIX0lOQ0xVREVTfSIpCgogICAgICAgIHNldF9wcm9wZXJ0eShUQVJHRVQgTGlic3F1aXNoOjpMaWJzcXVpc2ggQVBQRU5EIFBST1BFUlRZCiAgICAgICAgICAgIElNUE9SVEVEX0xPQ0FUSU9OICIke0xJQlNRVUlTSF9MSUJSQVJJRVN9IikKICAgIGVuZGlmICgpCmVuZGlmICgpCgptYXJrX2FzX2FkdmFuY2VkICgKICAgIExJQlNRVUlTSF9JTkNMVURFX0RJUgogICAgTElCU1FVSVNIX0xJQlJBUlkKICAgICkKAAAAAAAAAABjBgAAAAAAAAAAAAAAAAAAAAAAAGMGAAAAAAAAAAAAAAAAAAAAAAAAYwYAAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAK4AAAAAAAAAcAAAAAAAAAAAAAAAAADwvw"
				]
			]
		},
		{
			"contents": "include(ExternalProject)\n\nExternalProject_Add( ThirdParty_zlib\n  PREFIX zlib\n  SOURCE_DIR \"${CMAKE_CURRENT_SOURCE_DIR}/zlib\"\n  CMAKE_CACHE_ARGS\n    -DCMAKE_INSTALL_PREFIX:PATH=${CMAKE_CURRENT_BINARY_DIR}/zlib\n)\n\n#######################\n# PyBind11\n#######################\n\nExternalProject_Add ( ThirdParty_pybind11\n  PREFIX pybind11\n  DOWNLOAD_COMMAND \"\" # Disable download step\n  SOURCE_DIR \"${CMAKE_CURRENT_SOURCE_DIR}/pybind11\" # Source dir for configuration\n  #INSTALL_DIR ${IMATH_BUILD_PATH}\n  CMAKE_CACHE_ARGS\n    -DPYBIND11_INSTALL:BOOL=ON\n    -DPYBIND11_MASTER_PROJECT:BOOL=ON\n    -DBUILD_TESTING:BOOL=OFF \n    -DCMAKE_INSTALL_PREFIX:PATH=${CMAKE_CURRENT_BINARY_DIR}/pybind11\n)\n\n#######################\n# Imath\n#######################\n\nExternalProject_Add ( ThirdParty_Imath\n    PREFIX Imath\n    DOWNLOAD_COMMAND \"\" # Disable download step\n    SOURCE_DIR \"${CMAKE_CURRENT_SOURCE_DIR}/Imath\" # Source dir for configuration\n    #INSTALL_DIR ${IMATH_BUILD_PATH}\n    CMAKE_CACHE_ARGS \n      -DCMAKE_INSTALL_PREFIX:PATH=${CMAKE_CURRENT_BINARY_DIR}/imath\n)\n\n#######################\n# OpenEXR\n#######################\n\nExternalProject_Add ( ThirdParty_OpenEXR\n    PREFIX OpenEXR\n    DOWNLOAD_COMMAND \"\" # Disable download step\n    SOURCE_DIR \"${CMAKE_CURRENT_SOURCE_DIR}/OpenEXR\" # Source dir for configuration\n    #INSTALL_DIR ${IMATH_BUILD_PATH}\n    CMAKE_CACHE_ARGS \n      -DOPENEXR_IS_SUBPROJECT:BOOL=ON\n      -DCMAKE_INSTALL_PREFIX:PATH=${CMAKE_CURRENT_BINARY_DIR}/openexr\n)\n\n#######################\n# OpenImageIO\n#######################\n\nExternalProject_Add ( ThirdParty_OpenImageIO\n    PREFIX OpenImageIO\n    DOWNLOAD_COMMAND \"\" # Disable download step\n    SOURCE_DIR \"${CMAKE_CURRENT_SOURCE_DIR}/OpenImageIO\" # Source dir for configuration\n    #INSTALL_DIR ${IMATH_BUILD_PATH}\n    CMAKE_CACHE_ARGS \n      -Dpybind11_ROOT:PATH=${CMAKE_CURRENT_BINARY_DIR}/pybind11\n      -DCMAKE_INSTALL_PREFIX:PATH=${CMAKE_CURRENT_BINARY_DIR}/openimageio\n)\n\n#######################\n# FreeImage\n#######################\n\nadd_custom_target(\n  ThirdParty_FreeImage\n  COMMAND make\n  WORKING_DIRECTORY \"${CMAKE_CURRENT_SOURCE_DIR}/FreeImage\"\n)\n\nset( FREEIMAGE_INCLUDE_DIRS \"${CMAKE_CURRENT_BINARY_DIR}/FreeImage/Dist\" PARENT_SCOPE )\nset( FREEIMAGE_LIBRARIES \"${CMAKE_CURRENT_BINARY_DIR}/FreeImage/Dist/libfreeimage-3.18.0.so\" PARENT_SCOPE )\n\n# Deps\n\nadd_dependencies( ThirdParty_OpenEXR ThirdParty_Imath )\nadd_dependencies( ThirdParty_OpenImageIO ThirdParty_pybind11 )\nadd_dependencies( ThirdParty_OpenImageIO ThirdParty_OpenEXR )",
			"file": "third_party/CMakeLists.txt",
			"file_size": 2513,
			"file_write_time": 133352798597307383,
			"settings":
			{
				"buffer_size": 2513,
				"encoding": "UTF-8",
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					3,
					1,
					"insert",
					{
						"characters": "\nCMAEK"
					},
					"BwAAAIFSAAAAAAAAglIAAAAAAAAAAAAAglIAAAAAAACGUgAAAAAAAAAAAACGUgAAAAAAAIdSAAAAAAAAAAAAAIdSAAAAAAAAiFIAAAAAAAAAAAAAiFIAAAAAAACJUgAAAAAAAAAAAACJUgAAAAAAAIpSAAAAAAAAAAAAAIpSAAAAAAAAi1IAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACBUgAAAAAAAIFSAAAAAAAAAAAAAAAA8L8"
				],
				[
					4,
					2,
					"left_delete",
					null,
					"AgAAAIpSAAAAAAAAilIAAAAAAAABAAAAS4lSAAAAAAAAiVIAAAAAAAABAAAARQ",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACLUgAAAAAAAItSAAAAAAAAAAAAAAAA8L8"
				],
				[
					5,
					1,
					"insert",
					{
						"characters": "KE_ATR"
					},
					"BgAAAIlSAAAAAAAAilIAAAAAAAAAAAAAilIAAAAAAACLUgAAAAAAAAAAAACLUgAAAAAAAIxSAAAAAAAAAAAAAIxSAAAAAAAAjVIAAAAAAAAAAAAAjVIAAAAAAACOUgAAAAAAAAAAAACOUgAAAAAAAI9SAAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACJUgAAAAAAAIlSAAAAAAAAAAAAAAAA8L8"
				],
				[
					6,
					2,
					"left_delete",
					null,
					"AgAAAI5SAAAAAAAAjlIAAAAAAAABAAAAUo1SAAAAAAAAjVIAAAAAAAABAAAAVA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACPUgAAAAAAAI9SAAAAAAAAAAAAAAAA8L8"
				],
				[
					7,
					1,
					"insert",
					{
						"characters": "RGS"
					},
					"AwAAAI1SAAAAAAAAjlIAAAAAAAAAAAAAjlIAAAAAAACPUgAAAAAAAAAAAACPUgAAAAAAAJBSAAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACNUgAAAAAAAI1SAAAAAAAAAAAAAAAA8L8"
				],
				[
					8,
					1,
					"insert",
					{
						"characters": " -D"
					},
					"AwAAAJBSAAAAAAAAkVIAAAAAAAAAAAAAkVIAAAAAAACSUgAAAAAAAAAAAACSUgAAAAAAAJNSAAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACQUgAAAAAAAJBSAAAAAAAAAAAAAAAA8L8"
				],
				[
					9,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAAJNSAAAAAAAAlFIAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACTUgAAAAAAAJNSAAAAAAAAAAAAAAAA8L8"
				],
				[
					10,
					1,
					"paste",
					null,
					"AQAAAJRSAAAAAAAAoFIAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACUUgAAAAAAAJRSAAAAAAAAAAAAAAAA8L8"
				],
				[
					12,
					2,
					"right_delete",
					null,
					"AgAAAJRSAAAAAAAAlFIAAAAAAAABAAAALZRSAAAAAAAAlFIAAAAAAAABAAAARA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACUUgAAAAAAAJRSAAAAAAAAAAAAAAAA8L8"
				],
				[
					15,
					1,
					"insert",
					{
						"characters": ":BOOL-="
					},
					"BwAAAJ5SAAAAAAAAn1IAAAAAAAAAAAAAn1IAAAAAAACgUgAAAAAAAAAAAACgUgAAAAAAAKFSAAAAAAAAAAAAAKFSAAAAAAAAolIAAAAAAAAAAAAAolIAAAAAAACjUgAAAAAAAAAAAACjUgAAAAAAAKRSAAAAAAAAAAAAAKRSAAAAAAAApVIAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACeUgAAAAAAAJ5SAAAAAAAAAAAAAAAA8L8"
				],
				[
					16,
					2,
					"left_delete",
					null,
					"AgAAAKRSAAAAAAAApFIAAAAAAAABAAAAPaNSAAAAAAAAo1IAAAAAAAABAAAALQ",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAClUgAAAAAAAKVSAAAAAAAAAAAAAAAA8L8"
				],
				[
					17,
					1,
					"insert",
					{
						"characters": "=OFF"
					},
					"BAAAAKNSAAAAAAAApFIAAAAAAAAAAAAApFIAAAAAAAClUgAAAAAAAAAAAAClUgAAAAAAAKZSAAAAAAAAAAAAAKZSAAAAAAAAp1IAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACjUgAAAAAAAKNSAAAAAAAAAAAAAAAA8L8"
				],
				[
					3,
					1,
					"insert",
					{
						"characters": "\n\n"
					},
					"BQAAAHBRAAAAAAAAcVEAAAAAAAAAAAAAcVEAAAAAAAB1UQAAAAAAAAAAAAB1UQAAAAAAAHZRAAAAAAAAAAAAAHZRAAAAAAAAelEAAAAAAAAAAAAAcVEAAAAAAABxUQAAAAAAAAQAAAAgICAg",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAcFEAAAAAAABwUQAAAAAAAAAAAAAAAPC/"
				],
				[
					5,
					1,
					"paste",
					null,
					"AQAAAHJRAAAAAAAAd1EAAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAdlEAAAAAAAB2UQAAAAAAAAAAAAAAAPC/"
				],
				[
					6,
					1,
					"paste",
					null,
					"AQAAAHtRAAAAAAAAuVEAAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAe1EAAAAAAAB7UQAAAAAAAAAAAAAAAPC/"
				],
				[
					12,
					1,
					"paste",
					null,
					"AQAAAHtRAAAAAAAAiVEAAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAe1EAAAAAAAB7UQAAAAAAAAAAAAAAAPC/"
				],
				[
					15,
					1,
					"left_delete",
					null,
					"AQAAAJdRAAAAAAAAl1EAAAAAAAACAAAALCA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAl1EAAAAAAACZUQAAAAAAAAAAAAAAAPC/"
				],
				[
					16,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AgAAAJdRAAAAAAAAmFEAAAAAAAAAAAAAmFEAAAAAAACcUQAAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAl1EAAAAAAACXUQAAAAAAAAAAAAAAAPC/"
				],
				[
					17,
					1,
					"paste",
					null,
					"AQAAAJxRAAAAAAAAqlEAAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAnFEAAAAAAACcUQAAAAAAAAAAAAAAAPC/"
				],
				[
					20,
					2,
					"left_delete",
					null,
					"AgAAAMFRAAAAAAAAwVEAAAAAAAABAAAAIMBRAAAAAAAAwFEAAAAAAAABAAAALA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAwlEAAAAAAADCUQAAAAAAAAAAAAAAAPC/"
				],
				[
					21,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AgAAAMBRAAAAAAAAwVEAAAAAAAAAAAAAwVEAAAAAAADFUQAAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAwFEAAAAAAADAUQAAAAAAAAAAAAAAAPC/"
				],
				[
					22,
					1,
					"paste",
					null,
					"AQAAAMVRAAAAAAAA01EAAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAxVEAAAAAAADFUQAAAAAAAAAAAAAAAPC/"
				],
				[
					25,
					1,
					"insert",
					{
						"characters": "ЖЗ"
					},
					"AgAAAJdRAAAAAAAAmFEAAAAAAAAAAAAAmFEAAAAAAACZUQAAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAl1EAAAAAAACXUQAAAAAAAAAAAAAAAPC/"
				],
				[
					26,
					2,
					"left_delete",
					null,
					"AgAAAJhRAAAAAAAAmFEAAAAAAAACAAAA0JeXUQAAAAAAAJdRAAAAAAAAAgAAANCW",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAmVEAAAAAAACZUQAAAAAAAAAAAAAAAPC/"
				],
				[
					27,
					1,
					"insert",
					{
						"characters": ":PATH="
					},
					"BgAAAJdRAAAAAAAAmFEAAAAAAAAAAAAAmFEAAAAAAACZUQAAAAAAAAAAAACZUQAAAAAAAJpRAAAAAAAAAAAAAJpRAAAAAAAAm1EAAAAAAAAAAAAAm1EAAAAAAACcUQAAAAAAAAAAAACcUQAAAAAAAJ1RAAAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAl1EAAAAAAACXUQAAAAAAAAAAAAAAAPC/"
				],
				[
					28,
					1,
					"insert_snippet",
					{
						"contents": "'$0'"
					},
					"AQAAAJ1RAAAAAAAAn1EAAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAnVEAAAAAAACdUQAAAAAAAAAAAAAAAPC/"
				],
				[
					29,
					1,
					"insert",
					{
						"characters": "disable"
					},
					"BwAAAJ5RAAAAAAAAn1EAAAAAAAAAAAAAn1EAAAAAAACgUQAAAAAAAAAAAACgUQAAAAAAAKFRAAAAAAAAAAAAAKFRAAAAAAAAolEAAAAAAAAAAAAAolEAAAAAAACjUQAAAAAAAAAAAACjUQAAAAAAAKRRAAAAAAAAAAAAAKRRAAAAAAAApVEAAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAnlEAAAAAAACeUQAAAAAAAAAAAAAAAPC/"
				],
				[
					30,
					7,
					"left_delete",
					null,
					"BwAAAKRRAAAAAAAApFEAAAAAAAABAAAAZaNRAAAAAAAAo1EAAAAAAAABAAAAbKJRAAAAAAAAolEAAAAAAAABAAAAYqFRAAAAAAAAoVEAAAAAAAABAAAAYaBRAAAAAAAAoFEAAAAAAAABAAAAc59RAAAAAAAAn1EAAAAAAAABAAAAaZ5RAAAAAAAAnlEAAAAAAAABAAAAZA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAApVEAAAAAAAClUQAAAAAAAAAAAAAAAPC/"
				],
				[
					31,
					1,
					"insert",
					{
						"characters": "/goto/e"
					},
					"BwAAAJ5RAAAAAAAAn1EAAAAAAAAAAAAAn1EAAAAAAACgUQAAAAAAAAAAAACgUQAAAAAAAKFRAAAAAAAAAAAAAKFRAAAAAAAAolEAAAAAAAAAAAAAolEAAAAAAACjUQAAAAAAAAAAAACjUQAAAAAAAKRRAAAAAAAAAAAAAKRRAAAAAAAApVEAAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAnlEAAAAAAACeUQAAAAAAAAAAAAAAAPC/"
				],
				[
					32,
					1,
					"insert",
					{
						"characters": "h"
					},
					"AQAAAKVRAAAAAAAAplEAAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAApVEAAAAAAAClUQAAAAAAAAAAAAAAAPC/"
				],
				[
					33,
					2,
					"left_delete",
					null,
					"AgAAAKVRAAAAAAAApVEAAAAAAAABAAAAaKRRAAAAAAAApFEAAAAAAAABAAAAZQ",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAplEAAAAAAACmUQAAAAAAAAAAAAAAAPC/"
				],
				[
					34,
					1,
					"insert",
					{
						"characters": "hell"
					},
					"BAAAAKRRAAAAAAAApVEAAAAAAAAAAAAApVEAAAAAAACmUQAAAAAAAAAAAACmUQAAAAAAAKdRAAAAAAAAAAAAAKdRAAAAAAAAqFEAAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAApFEAAAAAAACkUQAAAAAAAAAAAAAAAPC/"
				],
				[
					40,
					1,
					"paste",
					null,
					"AQAAANJRAAAAAAAA5FEAAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAA0lEAAAAAAADSUQAAAAAAAAAAAAAAAPC/"
				],
				[
					45,
					1,
					"paste",
					null,
					"AQAAAA1SAAAAAAAAH1IAAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAADVIAAAAAAAANUgAAAAAAAAAAAAAAAPC/"
				],
				[
					52,
					1,
					"insert",
					{
						"characters": "\n\n"
					},
					"AgAAAG9NAAAAAAAAcE0AAAAAAAAAAAAAcE0AAAAAAABxTQAAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAb00AAAAAAABvTQAAAAAAAAAAAAAAAPC/"
				],
				[
					54,
					1,
					"reindent",
					null,
					"AQAAAHBNAAAAAAAAck0AAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAcE0AAAAAAABwTQAAAAAAAAAAAAAAAAAA"
				],
				[
					55,
					1,
					"insert",
					{
						"characters": "unset"
					},
					"BQAAAHJNAAAAAAAAc00AAAAAAAAAAAAAc00AAAAAAAB0TQAAAAAAAAAAAAB0TQAAAAAAAHVNAAAAAAAAAAAAAHVNAAAAAAAAdk0AAAAAAAAAAAAAdk0AAAAAAAB3TQAAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAck0AAAAAAAByTQAAAAAAAAAAAAAAAPC/"
				],
				[
					56,
					1,
					"insert_snippet",
					{
						"contents": "($0)"
					},
					"AQAAAHdNAAAAAAAAeU0AAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAd00AAAAAAAB3TQAAAAAAAAAAAAAAAPC/"
				],
				[
					57,
					1,
					"paste",
					null,
					"AQAAAHhNAAAAAAAAjk0AAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAeE0AAAAAAAB4TQAAAAAAAAAAAAAAAPC/"
				],
				[
					62,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AgAAAI9NAAAAAAAAkE0AAAAAAAAAAAAAkE0AAAAAAACSTQAAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAj00AAAAAAACPTQAAAAAAAAAAAAAAAPC/"
				],
				[
					63,
					1,
					"paste",
					null,
					"AQAAAJJNAAAAAAAAr00AAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAkk0AAAAAAACSTQAAAAAAAAAAAAAAAPC/"
				],
				[
					71,
					1,
					"paste",
					null,
					"AgAAAJhNAAAAAAAArk0AAAAAAAAAAAAArk0AAAAAAACuTQAAAAAAABYAAABMSUJTUVVJU0hfSU5DTFVERV9QQVRI",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAmE0AAAAAAACuTQAAAAAAAAAAAAAAAPC/"
				],
				[
					74,
					1,
					"insert",
					{
						"characters": "#"
					},
					"AQAAALdRAAAAAAAAuFEAAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAt1EAAAAAAAC3UQAAAAAAAAAAAAAAAPC/"
				],
				[
					75,
					1,
					"insert",
					{
						"characters": " D"
					},
					"AgAAALhRAAAAAAAAuVEAAAAAAAAAAAAAuVEAAAAAAAC6UQAAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAuFEAAAAAAAC4UQAAAAAAAAAAAAAAAPC/"
				],
				[
					76,
					1,
					"insert",
					{
						"characters": "onb"
					},
					"AwAAALpRAAAAAAAAu1EAAAAAAAAAAAAAu1EAAAAAAAC8UQAAAAAAAAAAAAC8UQAAAAAAAL1RAAAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAulEAAAAAAAC6UQAAAAAAAAAAAAAAAPC/"
				],
				[
					77,
					1,
					"left_delete",
					null,
					"AQAAALxRAAAAAAAAvFEAAAAAAAABAAAAYg",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAvVEAAAAAAAC9UQAAAAAAAAAAAAAAAPC/"
				],
				[
					78,
					1,
					"insert",
					{
						"characters": "'t"
					},
					"AgAAALxRAAAAAAAAvVEAAAAAAAAAAAAAvVEAAAAAAAC+UQAAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAvFEAAAAAAAC8UQAAAAAAAAAAAAAAAPC/"
				],
				[
					79,
					1,
					"insert",
					{
						"characters": " user"
					},
					"BQAAAL5RAAAAAAAAv1EAAAAAAAAAAAAAv1EAAAAAAADAUQAAAAAAAAAAAADAUQAAAAAAAMFRAAAAAAAAAAAAAMFRAAAAAAAAwlEAAAAAAAAAAAAAwlEAAAAAAADDUQAAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAvlEAAAAAAAC+UQAAAAAAAAAAAAAAAPC/"
				],
				[
					80,
					1,
					"insert",
					{
						"characters": " system"
					},
					"BwAAAMNRAAAAAAAAxFEAAAAAAAAAAAAAxFEAAAAAAADFUQAAAAAAAAAAAADFUQAAAAAAAMZRAAAAAAAAAAAAAMZRAAAAAAAAx1EAAAAAAAAAAAAAx1EAAAAAAADIUQAAAAAAAAAAAADIUQAAAAAAAMlRAAAAAAAAAAAAAMlRAAAAAAAAylEAAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAw1EAAAAAAADDUQAAAAAAAAAAAAAAAPC/"
				],
				[
					81,
					1,
					"insert",
					{
						"characters": " libs"
					},
					"BQAAAMpRAAAAAAAAy1EAAAAAAAAAAAAAy1EAAAAAAADMUQAAAAAAAAAAAADMUQAAAAAAAM1RAAAAAAAAAAAAAM1RAAAAAAAAzlEAAAAAAAAAAAAAzlEAAAAAAADPUQAAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAylEAAAAAAADKUQAAAAAAAAAAAAAAAPC/"
				],
				[
					82,
					1,
					"insert",
					{
						"characters": "quish"
					},
					"BQAAAM9RAAAAAAAA0FEAAAAAAAAAAAAA0FEAAAAAAADRUQAAAAAAAAAAAADRUQAAAAAAANJRAAAAAAAAAAAAANJRAAAAAAAA01EAAAAAAAAAAAAA01EAAAAAAADUUQAAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAz1EAAAAAAADPUQAAAAAAAAAAAAAAAPC/"
				],
				[
					83,
					1,
					"insert",
					{
						"characters": "/"
					},
					"AQAAANRRAAAAAAAA1VEAAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAA1FEAAAAAAADUUQAAAAAAAAAAAAAAAPC/"
				],
				[
					84,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAANVRAAAAAAAA1lEAAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAA1VEAAAAAAADVUQAAAAAAAAAAAAAAAPC/"
				],
				[
					85,
					1,
					"left_delete",
					null,
					"AQAAANVRAAAAAAAA1VEAAAAAAAABAAAAIA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAA1lEAAAAAAADWUQAAAAAAAAAAAAAAAPC/"
				],
				[
					86,
					1,
					"insert",
					{
						"characters": "use"
					},
					"AwAAANVRAAAAAAAA1lEAAAAAAAAAAAAA1lEAAAAAAADXUQAAAAAAAAAAAADXUQAAAAAAANhRAAAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAA1VEAAAAAAADVUQAAAAAAAAAAAAAAAPC/"
				],
				[
					87,
					1,
					"insert",
					{
						"characters": " embedded"
					},
					"CQAAANhRAAAAAAAA2VEAAAAAAAAAAAAA2VEAAAAAAADaUQAAAAAAAAAAAADaUQAAAAAAANtRAAAAAAAAAAAAANtRAAAAAAAA3FEAAAAAAAAAAAAA3FEAAAAAAADdUQAAAAAAAAAAAADdUQAAAAAAAN5RAAAAAAAAAAAAAN5RAAAAAAAA31EAAAAAAAAAAAAA31EAAAAAAADgUQAAAAAAAAAAAADgUQAAAAAAAOFRAAAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAA2FEAAAAAAADYUQAAAAAAAAAAAAAAAPC/"
				],
				[
					93,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AQAAAG9NAAAAAAAAcE0AAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAb00AAAAAAABvTQAAAAAAAAAAAAAAAPC/"
				],
				[
					94,
					1,
					"reindent",
					null,
					"AQAAAHBNAAAAAAAAck0AAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAcE0AAAAAAABwTQAAAAAAAAAAAAAAAPC/"
				],
				[
					95,
					1,
					"paste",
					null,
					"AQAAAHJNAAAAAAAAnE0AAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAck0AAAAAAAByTQAAAAAAAAAAAAAAAPC/"
				],
				[
					98,
					3,
					"left_delete",
					null,
					"AwAAAOBRAAAAAAAA4FEAAAAAAADXAAAAICAgICMgRG9uJ3QgdXNlciBzeXN0ZW0gbGlic3F1aXNoL3VzZSBlbWJlZGRlZAogICAgQ01BS0VfQVJHUyAtRCBMaWJzcXVpc2hfUk9PVDpQQVRIPScvZ290by9oZWxsJwogICAgQ01BS0VfQVJHUyAtRCBMSUJTUVVJU0hfSU5DTFVERV9QQVRIOlBBVEg9Jy9nb3RvL2hlbGwnCiAgICBDTUFLRV9BUkdTIC1EIExJQlNRVUlTSF9MSUJSQVJZX1BBVEg6UEFUSD0nL2dvdG8vaGVsbCffUQAAAAAAAN9RAAAAAAAAAQAAAAreUQAAAAAAAN5RAAAAAAAAAQAAAAo",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAt1IAAAAAAADgUQAAAAAAAAAAAAAAAPC/"
				],
				[
					101,
					3,
					"left_delete",
					null,
					"AwAAAHBNAAAAAAAAcE0AAAAAAABsAAAAICAjIERvbid0IHVzZXIgc3lzdGVtIGxpYnNxdWlzaC91c2UgZW1iZWRkZWQKICB1bnNldChMSUJTUVVJU0hfSU5DTFVERV9QQVRIKQogIHVuc2V0KExJQlNRVUlTSF9MSUJSQVJZX1BBVEgpb00AAAAAAABvTQAAAAAAAAEAAAAKbk0AAAAAAABuTQAAAAAAAAEAAAAK",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAA3E0AAAAAAABwTQAAAAAAAAAAAAAAAPC/"
				],
				[
					7,
					1,
					"paste",
					null,
					"AQAAAOwbAAAAAAAA+RsAAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAOwbAAAAAAAA7BsAAAAAAAAAAAAAAADwvw"
				],
				[
					8,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAAPkbAAAAAAAA+hsAAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAPkbAAAAAAAA+RsAAAAAAAAAAAAAAADwvw"
				],
				[
					1,
					1,
					"revert",
					null,
					"AwAAAAAAAAAAAAAAAAAAAAAAAADElgAAY21ha2VfbWluaW11bV9yZXF1aXJlZChWRVJTSU9OIDMuMjApCgpwcm9qZWN0KCJUaGlyZFBhcnR5X0V4dGVybmFsIikKCmluY2x1ZGUoRXh0ZXJuYWxQcm9qZWN0KQppbmNsdWRlKFByb2Nlc3NvckNvdW50KQoKbWVzc2FnZSgiUnVubmluZyB0aGlyZCBwYXJ0eSBkZXBlbmRlbmNpZXMgYnVpbGQuLi4iKQoKI3dlIG5lZWQgZ2l0IGV4ZWN1dGFibGUKZmluZF9wYWNrYWdlKEdpdCBSRVFVSVJFRCkKCnNldCggQ01BS0VfTU9EVUxFX1BBVEggCiAgJHtQUk9KRUNUX1NPVVJDRV9ESVJ9Ly4uL2NtYWtlL21vZHVsZXMKKQoKaW5jbHVkZSgke1BST0pFQ1RfU09VUkNFX0RJUn0vZXh0ZXJuYWxfdmVyc2lvbnMuY21ha2UpCgpzZXQoRVhUUkFfQ01BS0VfQVJHUykKCnNldChFWFRFUk5BTFNfQklOQVJZX0RJUiAke1BST0pFQ1RfU09VUkNFX0RJUn0vLi4vYnVpbGQvJHtERVBTX0JVSUxEX1RZUEV9L2V4dGVybmFsKQpzZXQoRVhURVJOQUxTX1NUQU1QX0RJUiAke1BST0pFQ1RfU09VUkNFX0RJUn0vLi4vYnVpbGQvJHtERVBTX0JVSUxEX1RZUEV9L2V4dGVybmFsL3N0YW1wKQpzZXQoRVhURVJOQUxTX1RNUF9ESVIgJHtQUk9KRUNUX1NPVVJDRV9ESVJ9Ly4uL2J1aWxkLyR7REVQU19CVUlMRF9UWVBFfS9leHRlcm5hbC90bXApCgpzZXQoRVhURVJOQUxTX1NPVVJDRV9ESVIgJHtDTUFLRV9DVVJSRU5UX1NPVVJDRV9ESVJ9L2V4dGVybmFsKQoKZmluZF9wcm9ncmFtKE1BS0VfRVhFQ1VUQUJMRQogIE5BTUVTIGdtYWtlIG1pbmd3MzItbWFrZSBtYWtlCiAgTkFNRVNfUEVSX0RJUgogIERPQyAiR05VIE1ha2UiCikKCmZpbmRfcHJvZ3JhbShDSE1PRF9FWEVDVVRBQkxFCiAgTkFNRVMgY2htb2QKICBOQU1FU19QRVJfRElSCikKCmZpbmRfcGFja2FnZShHaXQpCmlmKEdpdF9GT1VORCkKICBtZXNzYWdlKCJHaXQgZm91bmQ6ICR7R0lUX0VYRUNVVEFCTEV9IikKZW5kaWYoKQoKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKIyBaTElCCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCgppZiggTk9UIEVYVEVSTkFMX1pMSUJfVkVSU0lPTiApCiAgc2V0KEVYVEVSTkFMX1pMSUJfVkVSU0lPTiAxLjIuMTEpCmVuZGlmKCkKCnVuc2V0KFpMSUJfRk9VTkQpCnVuc2V0KFpMSUJfTElCUkFSWSkKdW5zZXQoWkxJQl9JTkNMVURFX0RJUikKCmlmKE5PVCBMQVZBXzNSRF9MSUJfTElOS19XSVRIX1NUQVRJQykKICBzZXQoWkxJQl9VU0VfU1RBVElDX0xJQlMgT0ZGKQplbmRpZigpCgpzZXQoWkxJQl9ST09UICR7RVhURVJOQUxTX0lOU1RBTExfRElSfSkKZmluZF9wYWNrYWdlKCBaTElCICR7RVhURVJOQUxfWkxJQl9WRVJTSU9OfSBFWEFDVCkKCmlmKCBaTElCX0ZPVU5EICkKCiAgbWVzc2FnZSgiWkxJQiB2ZXJzaW9uICR7WkxJQl9WRVJTSU9OX1NUUklOR30gZm91bmQgLi4uIikKICBhZGRfY3VzdG9tX3RhcmdldCggemxpYiBDT01NQU5EIGVjaG8gIlpMSUIgYnVpbGQgZXhpc3RzLCBza2lwcGluZyByZWJ1aWxkIC4uLiIpCgplbHNlKCkKCiAgbWVzc2FnZSgiWkxJQiB2ZXJzaW9uICR7WkxJQl9WRVJTSU9OX1NUUklOR30gbm90IGZvdW5kISBSdW5uaW5nIGV4dGVybmFsIGJ1aWxkIC4uLiIpCiAgc2V0KFpMSUJfUFJFRklYIHpsaWIpCgogIGlmKExBVkFfM1JEX0xJQl9MSU5LX1dJVEhfU1RBVElDKQogICAgc2V0KFpMSUJfVVNFX1NUQVRJQ19MSUJTIE9OKQogICAgc2V0KFpMSUJfQlVJTERfU0hBUkVEIE9GRikKICBlbHNlKCkKICAgIHNldChaTElCX1VTRV9TVEFUSUNfTElCUyBPRkYpCiAgICBzZXQoWkxJQl9CVUlMRF9TSEFSRUQgT04pCiAgZW5kaWYoKQoKICBFeHRlcm5hbFByb2plY3RfQWRkKCB6bGliCiAgICBQUkVGSVggJHtFWFRFUk5BTFNfU09VUkNFX0RJUn0vJHtaTElCX1BSRUZJWH0KICAgIEdJVF9SRVBPU0lUT1JZIGh0dHBzOi8vZ2l0aHViLmNvbS9tYWRsZXIvemxpYi5naXQKICAgIEdJVF9UQUcgdiR7RVhURVJOQUxfWkxJQl9WRVJTSU9OfQogICAgVVBEQVRFX0RJU0NPTk5FQ1RFRCB0cnVlCiAgICAKICAgIENNQUtFX0FSR1MgLUQgQ01BS0VfSU5TVEFMTF9QUkVGSVg6UEFUSD0ke0VYVEVSTkFMU19JTlNUQUxMX0RJUn0KICAgIENNQUtFX0FSR1MgLUQgU0tJUF9JTlNUQUxMX0xJQlJBUklFUzpCT09MPU9GRgogICAgQ01BS0VfQVJHUyAtRCBDTUFLRV9DWFhfRkxBR1M9LURfR0xJQkNYWF9VU0VfQ1hYMTFfQUJJPTAKICAgIENNQUtFX0FSR1MgLUQgQ01BS0VfQlVJTERfVFlQRT0ke0RFUFNfQlVJTERfVFlQRX0KICAgIENNQUtFX0FSR1MgPFNPVVJDRV9ESVI+CgogICAgQlVJTERfQ09NTUFORCAke01BS0VfRVhFQ1VUQUJMRX0KCiAgICBUTVBfRElSICR7RVhURVJOQUxTX1RNUF9ESVJ9LyR7WkxJQl9QUkVGSVh9CiAgICBTVEFNUF9ESVIgJHtFWFRFUk5BTFNfU1RBTVBfRElSfS8ke1pMSUJfUFJFRklYfQogICAgQklOQVJZX0RJUiAke0VYVEVSTkFMU19CSU5BUllfRElSfS8ke1pMSUJfUFJFRklYfQogICkKZW5kaWYoKQoKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKIyBUQkIKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKCmlmKCBOT1QgRVhURVJOQUxfVEJCX1ZFUlNJT04gKQogIHNldChFWFRFUk5BTF9UQkJfVkVSU0lPTiAyMDIwLjIpCmVuZGlmKCkKCnNldChUQkJfUk9PVCAke0VYVEVSTkFMU19JTlNUQUxMX0RJUn0pCmZpbmRfcGFja2FnZSggVEJCICR7RVhURVJOQUxfVEJCX1ZFUlNJT059IEVYQUNUKQoKaWYoIFRCQl9GT1VORCApCgogIG1lc3NhZ2UoIlRCQiB2ZXJzaW9uICR7VGJiX1ZFUlNJT059IGZvdW5kIC4uLiIpCiAgYWRkX2N1c3RvbV90YXJnZXQoIFRiYiBDT01NQU5EIGVjaG8gIlRCQiBidWlsZCBleGlzdHMsIHNraXBwaW5nIHJlYnVpbGQgLi4uIikKZWxzZSgpCgogIG1lc3NhZ2UoIlRCQiBub3QgZm91bmQhIFJ1bm5pbmcgZXh0ZXJuYWwgYnVpbGQgLi4uIikKICBzZXQoVEJCX1BSRUZJWCB0YmIpCgogIEV4dGVybmFsUHJvamVjdF9BZGQoIFRiYgogICAgUFJFRklYICR7RVhURVJOQUxTX1NPVVJDRV9ESVJ9LyR7VEJCX1BSRUZJWH0KICAgIEdJVF9SRVBPU0lUT1JZIGh0dHBzOi8vZ2l0aHViLmNvbS9vbmVhcGktc3JjL29uZVRCQi5naXQKICAgIEdJVF9UQUcgdiR7RVhURVJOQUxfVEJCX1ZFUlNJT059CiAgICBVUERBVEVfRElTQ09OTkVDVEVEIHRydWUKICAgIEJVSUxEX0lOX1NPVVJDRSAxCiAgICAKICAgIENPTkZJR1VSRV9DT01NQU5EICIiCiAgICAKICAgIEJVSUxEX0NPTU1BTkQgJHtNQUtFX0VYRUNVVEFCTEV9IHRiYl9idWlsZF9kaXI9JHtFWFRFUk5BTFNfQklOQVJZX0RJUn0vdGJiL2J1aWxkIHRiYl9idWlsZF9wcmVmaXg9JHtUQkJfUFJFRklYfQoKICAgIElOU1RBTExfRElSICR7RVhURVJOQUxTX0lOU1RBTExfRElSfQogICAgCiAgICBJTlNUQUxMX0NPTU1BTkQgJHtDTUFLRV9DT01NQU5EfQogICAgICAtRCBUQkJfTElCU19ESVI9JHtFWFRFUk5BTFNfQklOQVJZX0RJUn0vdGJiL2J1aWxkLyR7VEJCX1BSRUZJWH1fcmVsZWFzZQogICAgICAtRCBUQkJfSU5DTF9ESVI9PFNPVVJDRV9ESVI+L2luY2x1ZGUvdGJiCiAgICAgIC1EIERFU1RfRElSPSR7RVhURVJOQUxTX0lOU1RBTExfRElSfQogICAgICAtUCAke0NNQUtFX0NVUlJFTlRfU09VUkNFX0RJUn0vdGJiX2luc3RhbGxfZmlsZXMuY21ha2UKCiAgICBUTVBfRElSICR7RVhURVJOQUxTX1RNUF9ESVJ9L3RiYgogICAgU1RBTVBfRElSICR7RVhURVJOQUxTX1NUQU1QX0RJUn0vdGJiCiAgKQoKZW5kaWYoKQoKCgojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwojIEJsb3NjMgojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwoKaWYoIE5PVCBFWFRFUk5BTF9CTE9TQ19WRVJTSU9OKQogIHNldChFWFRFUk5BTF9CTE9TQ19WRVJTSU9OIDEuMjEuMCkKZW5kaWYoKQoKc2V0KEJsb3NjX1JPT1QgJHtFWFRFUk5BTFNfSU5TVEFMTF9ESVJ9KQpzZXQoQkxPU0NfVVNFX1NUQVRJQ19MSUJTIE9OKQpmaW5kX3BhY2thZ2UoQmxvc2MgJHtFWFRFUk5BTF9CTE9TQ19WRVJTSU9OfSBFWEFDVCkKCmlmKCBCbG9zY19GT1VORCApCgogIG1lc3NhZ2UoIkJsb3NjIHZlcnNpb24gJHtFWFRFUk5BTF9CTE9TQ19WRVJTSU9OfSBmb3VuZCAuLi4iKQogIGFkZF9jdXN0b21fdGFyZ2V0KCBCbG9zYyBDT01NQU5EIGVjaG8gIkJsb3NjIGJ1aWxkIGV4aXN0cywgc2tpcHBpbmcgcmVidWlsZCAuLi4iKQoKZWxzZSgpCgogIG1lc3NhZ2UoIkJsb3NjIHZlcnNpb24gJHtFWFRFUk5BTF9CTE9TQ19WRVJTSU9OfSBub3QgZm91bmQhIFJ1bm5pbmcgZXh0ZXJuYWwgYnVpbGQgLi4uIikKICBzZXQoQkxPU0NfUFJFRklYIGJsb3NjKQoKICAjIEFsd2F5cyBidWlsZCBCbG9zYyBhcyBhIHN0YXRpYyBsaWIKICBzZXQoQkxPU0NfQlVJTERfU1RBVElDIE9OKQogIHNldChCTE9TQ19CVUlMRF9TSEFSRUQgT0ZGKQoKIyAgaWYoTEFWQV8zUkRfTElCX0xJTktfV0lUSF9TVEFUSUMpCiMgICAgc2V0KEJMT1NDX0JVSUxEX1NUQVRJQyBPTikKIyAgICBzZXQoQkxPU0NfQlVJTERfU0hBUkVEIE9GRikKIyAgZWxzZSgpCiMgICAgc2V0KEJMT1NDX0JVSUxEX1NUQVRJQyBPRkYpCiMgICAgc2V0KEJMT1NDX0JVSUxEX1NIQVJFRCBPTikKIyAgZW5kaWYoKQoKICBFeHRlcm5hbFByb2plY3RfQWRkKCBCbG9zYwogICAgUFJFRklYICR7RVhURVJOQUxTX1NPVVJDRV9ESVJ9LyR7QkxPU0NfUFJFRklYfQogICAgR0lUX1JFUE9TSVRPUlkgaHR0cHM6Ly9naXRodWIuY29tL0Jsb3NjL2MtYmxvc2MuZ2l0CiAgICBHSVRfVEFHIHYke0VYVEVSTkFMX0JMT1NDX1ZFUlNJT059CiAgICBVUERBVEVfRElTQ09OTkVDVEVEIHRydWUKICAgIAogICAgQ01BS0VfQVJHUyAtRCBDTUFLRV9JTlNUQUxMX1BSRUZJWDpQQVRIPSR7RVhURVJOQUxTX0lOU1RBTExfRElSfQogICAgQ01BS0VfQVJHUyAtRCBCVUlMRF9TVEFUSUM6Qk9PTD0ke0JMT1NDX0JVSUxEX1NUQVRJQ30KICAgIENNQUtFX0FSR1MgLUQgQlVJTERfU0hBUkVEOkJPT0w9JHtCTE9TQ19CVUlMRF9TSEFSRUR9CiAgICBDTUFLRV9BUkdTIC1EIEJVSUxEX1RFU1RTOkJPT0w9T0ZGCiAgICBDTUFLRV9BUkdTIC1EIEJVSUxEX0ZVWlpFUlM6Qk9PTD1PRkYKICAgIENNQUtFX0FSR1MgLUQgQlVJTERfQkVOQ0hNQVJLUzpCT09MPU9GRgogICAgQ01BS0VfQVJHUyAtRCBDTUFLRV9CVUlMRF9UWVBFPSR7REVQU19CVUlMRF9UWVBFfQogICAgQ01BS0VfQVJHUyAtRCBDTUFLRV9DWFhfRkxBR1M6U1RSSU5HPSItZlBJQyIKICAgIENNQUtFX0FSR1MgLUQgQ01BS0VfQ19GTEFHUzpTVFJJTkc9Ii1mUElDIgogICAgQ01BS0VfQVJHUyA8U09VUkNFX0RJUj4KCiAgICBCVUlMRF9DT01NQU5EICR7TUFLRV9FWEVDVVRBQkxFfQoKICAgIFRNUF9ESVIgJHtFWFRFUk5BTFNfVE1QX0RJUn0vYmxvc2MKICAgIFNUQU1QX0RJUiAke0VYVEVSTkFMU19TVEFNUF9ESVJ9L2Jsb3NjCiAgICBCSU5BUllfRElSICR7RVhURVJOQUxTX0JJTkFSWV9ESVJ9L2Jsb3NjCiAgKQoKZW5kaWYoKQoKCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCiMgQm9vc3QKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKCnNldChCb29zdF9VU0VfTVVMVElUSFJFQURFRCBPTikKCmlmKExBVkFfM1JEX0xJQl9MSU5LX1dJVEhfU1RBVElDKQpzZXQoQm9vc3RfVVNFX1NUQVRJQ19MSUJTIE9OKQpzZXQoQm9vc3RfVVNFX1NUQVRJQ19SVU5USU1FIE9OKQplbmRpZigpCgppZiggTk9UIEVYVEVSTkFMX0JPT1NUX1ZFUlNJT04gKQogIHNldChFWFRFUk5BTF9CT09TVF9WRVJTSU9OIDEuNzUuMCkKZW5kaWYoKQoKc2V0KEJPT1NUX1JPT1QgJHtFWFRFUk5BTFNfSU5TVEFMTF9ESVJ9KQpmaW5kX3BhY2thZ2UoQm9vc3QgJHtFWFRFUk5BTF9CT09TVF9WRVJTSU9OfSBFWEFDVCBDT01QT05FTlRTIGpzb24gZmlsZXN5c3RlbSBzeXN0ZW0gZGF0ZV90aW1lIGlvc3RyZWFtcyBwcm9ncmFtX29wdGlvbnMpCgppZihCb29zdF9GT1VORCkKCiAgbWVzc2FnZSgiQm9vc3QgdmVyc2lvbiAke0Jvb3N0X1ZFUlNJT059IGZvdW5kIC4uLiIpCiAgYWRkX2N1c3RvbV90YXJnZXQoIEJvb3N0IENPTU1BTkQgZWNobyAiQm9vc3QgJHtFWFRFUk5BTF9CT09TVF9WRVJTSU9OfSBidWlsZCBleGlzdHMsIHNraXBwaW5nIHJlYnVpbGQgLi4uIikKCmVsc2UoKQogIAogIG1lc3NhZ2UoIkJvb3N0IHZlcnNpb24gJHtFWFRFUk5BTF9CT09TVF9WRVJTSU9OfSBub3QgZm91bmQhIFJ1bm5pbmcgZXh0ZXJuYWwgYnVpbGQgLi4uIikKICBzZXQoQk9PU1RfUFJFRklYIGJvb3N0KQoKICBpZihMQVZBXzNSRF9MSUJfTElOS19XSVRIX1NUQVRJQykKICAgIHNldChCT09TVF9MSU5LX1NUWUxFIHN0YXRpYykKICAgIHNldChCT09TVF9DWFhfRkxBR1MgImN4eGZsYWdzPS1mUElDIikKICAgIHNldChCT09TVF9DX0ZMQUdTICJjZmxhZ3M9LWZQSUMiKQogIGVsc2UoKQogICAgc2V0KEJPT1NUX0xJTktfU1RZTEUgc2hhcmVkKQogICAgc2V0KEJPT1NUX0NYWF9GTEFHUyAiIikKICAgIHNldChCT09TVF9DX0ZMQUdTICIiKQogIGVuZGlmKCkKCiAgaWYoREVQU19CVUlMRF9UWVBFIFNUUkVRVUFMICJEZWJ1ZyIpCiAgICBzZXQoQk9PU1RfQlVJTERfVFlQRSAiZGVidWciKQogIGVsc2UoKQogICAgc2V0KEJPT1NUX0JVSUxEX1RZUEUgInJlbGVhc2UiKQogIGVuZGlmKCkKCiAgRXh0ZXJuYWxQcm9qZWN0X0FkZCAoIEJvb3N0CiAgICBQUkVGSVggJHtFWFRFUk5BTFNfU09VUkNFX0RJUn0vJHtCT09TVF9QUkVGSVh9CiAgICBHSVRfUkVQT1NJVE9SWSBodHRwczovL2dpdGh1Yi5jb20vYm9vc3RvcmcvYm9vc3QuZ2l0CiAgICBHSVRfVEFHIGJvb3N0LSR7RVhURVJOQUxfQk9PU1RfVkVSU0lPTn0KICAgIFVQREFURV9ESVNDT05ORUNURUQgdHJ1ZQogICAgQ09ORklHVVJFX0NPTU1BTkQgLi9ib290c3RyYXAuc2gKICAgICAgLS13aXRoLWxpYnJhcmllcz1maWxlc3lzdGVtCiAgICAgIC0td2l0aC1saWJyYXJpZXM9c3lzdGVtCiAgICAgIC0td2l0aC1saWJyYXJpZXM9ZGF0ZV90aW1lCiAgICAgIC0td2l0aC1saWJyYXJpZXM9aW9zdHJlYW1zCiAgICAgIC0td2l0aC1saWJyYXJpZXM9cHJvZ3JhbV9vcHRpb25zCiAgICAgIC0td2l0aC1saWJyYXJpZXM9cmVnZXgKICAgICAgLS13aXRoLWxpYnJhcmllcz1sb2cgCiAgICAgIC0td2l0aC1saWJyYXJpZXM9dGhyZWFkCiAgICAgIC0td2l0aC1saWJyYXJpZXM9anNvbgogICAgICAtLXByZWZpeD08SU5TVEFMTF9ESVI+CiAgICBCVUlMRF9DT01NQU5EIC4vYjIgZGVmaW5lPV9HTElCQ1hYX1VTRV9DWFgxMV9BQkk9MCAtLWRpc2FibGUtaWN1IC0tYnVpbGQtZGlyPSR7RVhURVJOQUxTX0JJTkFSWV9ESVJ9L2Jvb3N0IGluc3RhbGwgbGluaz0ke0JPT1NUX0xJTktfU1RZTEV9IHZhcmlhbnQ9JHtCT09TVF9CVUlMRF9UWVBFfSB0aHJlYWRpbmc9bXVsdGkgcnVudGltZS1saW5rPSR7Qk9PU1RfTElOS19TVFlMRX0gJHtCT09TVF9DWFhfRkxBR1N9ICR7Qk9PU1RfQ19GTEFHU30KICAgIEJVSUxEX0lOX1NPVVJDRSAxCiAgICBJTlNUQUxMX0NPTU1BTkQgIiIKICAgIElOU1RBTExfRElSICR7RVhURVJOQUxTX0lOU1RBTExfRElSfQogICAgVE1QX0RJUiAke0VYVEVSTkFMU19UTVBfRElSfS9ib29zdAogICAgU1RBTVBfRElSICR7RVhURVJOQUxTX1NUQU1QX0RJUn0vYm9vc3QKICApCmVuZGlmKCkKCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCiMgUHliaW5kMTEKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKCmlmKCBOT1QgRVhURVJOQUxfUFlCSU5EX1ZFUlNJT04gKQogIHNldChFWFRFUk5BTF9QWUJJTkRfVkVSU0lPTiAyLjUuMCkKZW5kaWYoKQoKc2V0KHB5YmluZDExX1JPT1QgJHtFWFRFUk5BTFNfSU5TVEFMTF9ESVJ9KQpmaW5kX3BhY2thZ2UocHliaW5kMTEgJHtFWFRFUk5BTF9QWUJJTkRfVkVSU0lPTn0gRVhBQ1QpCgppZiggcHliaW5kMTFfRk9VTkQgKQoKICBtZXNzYWdlKCJweWJpbmQxMSB2ZXJzaW9uICR7cHliaW5kMTFfVkVSU0lPTn0gZm91bmQgLi4uIikKICBhZGRfY3VzdG9tX3RhcmdldCggUHlCaW5kIENPTU1BTkQgZWNobyAiUHlCaW5kMTEgYnVpbGQgZXhpc3RzLCBza2lwcGluZyByZWJ1aWxkIC4uLiIpCgplbHNlKCkKCiAgbWVzc2FnZSgicHliaW5kMTEgdmVyc2lvbiAke0VYVEVSTkFMX1BZQklORF9WRVJTSU9OfSBub3QgZm91bmQhIFJ1bm5pbmcgZXh0ZXJuYWwgYnVpbGQgLi4uIikKICBzZXQoUFlCSU5EX1BSRUZJWCBweWJpbmQxMSkKCiAgRXh0ZXJuYWxQcm9qZWN0X0FkZCAoIFB5QmluZAogICAgUFJFRklYICR7RVhURVJOQUxTX1NPVVJDRV9ESVJ9LyR7UFlCSU5EX1BSRUZJWH0KICAgIEdJVF9SRVBPU0lUT1JZIGh0dHBzOi8vZ2l0aHViLmNvbS9weWJpbmQvcHliaW5kMTEuZ2l0CiAgICBHSVRfVEFHIHYke0VYVEVSTkFMX1BZQklORF9WRVJTSU9OfQogICAgVVBEQVRFX0RJU0NPTk5FQ1RFRCB0cnVlCgogICAgQ01BS0VfQVJHUyAtRCBDTUFLRV9JTlNUQUxMX1BSRUZJWDpQQVRIPSR7RVhURVJOQUxTX0lOU1RBTExfRElSfQogICAgQ01BS0VfQVJHUyAtRCBQWUJJTkQxMV9URVNUOkJPT0w9T0ZGCiAgICBDTUFLRV9BUkdTIC1EIE9JSU9fQlVJTERfVE9PTFM6Qk9PTD1PRkYKICAgIENNQUtFX0FSR1MgLUQgQlVJTERfRE9DUzpCT09MPU9GRgogICAgQ01BS0VfQVJHUyAtRCBDTUFLRV9CVUlMRF9UWVBFPSR7REVQU19CVUlMRF9UWVBFfQogICAgQ01BS0VfQVJHUyA8U09VUkNFX0RJUj4KCiAgICBCVUlMRF9DT01NQU5EICR7TUFLRV9FWEVDVVRBQkxFfQoKICAgIFRNUF9ESVIgJHtFWFRFUk5BTFNfVE1QX0RJUn0vcHliaW5kCiAgICBTVEFNUF9ESVIgJHtFWFRFUk5BTFNfU1RBTVBfRElSfS9weWJpbmQKICAgIEJJTkFSWV9ESVIgJHtFWFRFUk5BTFNfQklOQVJZX0RJUn0vcHliaW5kCiAgKQoKZW5kaWYoKQoKCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCiMgT3BlbkVYUgojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwoKaWYoIE5PVCBFWFRFUk5BTF9PUEVORVhSX1ZFUlNJT04gKQogIHNldChFWFRFUk5BTF9PUEVORVhSX1ZFUlNJT04gMi41LjgpCmVuZGlmKCkKCmlmKExBVkFfM1JEX0xJQl9MSU5LX1dJVEhfU1RBVElDKQpzZXQoT1BFTkVYUl9VU0VfU1RBVElDX0xJQlMgT04pCmVuZGlmKCkKCnNldChPcGVuRVhSX1JPT1QgJHtFWFRFUk5BTFNfSU5TVEFMTF9ESVJ9KQpmaW5kX3BhY2thZ2UoT3BlbkVYUiAke0VYVEVSTkFMX09QRU5FWFJfVkVSU0lPTn0gRVhBQ1QpCgppZiggT3BlbkVYUl9GT1VORCApCgogIG1lc3NhZ2UoIk9wZW5FWFIgdmVyc2lvbiAke09wZW5FWFJfVkVSU0lPTn0gZm91bmQgLi4uIikKICBhZGRfY3VzdG9tX3RhcmdldCggT3BlbkVYUiBDT01NQU5EIGVjaG8gIk9wZW5FWFIgYnVpbGQgZXhpc3RzLCBza2lwcGluZyByZWJ1aWxkIC4uLiIpCgplbHNlKCkKCiAgbWVzc2FnZSgiT3BlbkVYUiBub3QgZm91bmQhIFJ1bm5pbmcgZXh0ZXJuYWwgYnVpbGQgLi4uIikKICBzZXQoT1BFTkVYUl9QUkVGSVggb3BlbmV4cikKCiAgaWYoTEFWQV8zUkRfTElCX0xJTktfV0lUSF9TVEFUSUMpCiAgICBzZXQoT1BFTkVYUl9CVUlMRF9TSEFSRUQgT0ZGKQogIGVsc2UoKQogICAgc2V0KE9QRU5FWFJfQlVJTERfU0hBUkVEIE9OKQogIGVuZGlmKCkKCiAgRXh0ZXJuYWxQcm9qZWN0X0FkZCggT3BlbkVYUgogICAgUFJFRklYICR7RVhURVJOQUxTX1NPVVJDRV9ESVJ9LyR7T1BFTkVYUl9QUkVGSVh9CiAgICBHSVRfUkVQT1NJVE9SWSBodHRwczovL2dpdGh1Yi5jb20vQWNhZGVteVNvZnR3YXJlRm91bmRhdGlvbi9vcGVuZXhyLmdpdAogICAgR0lUX1RBRyB2JHtFWFRFUk5BTF9PUEVORVhSX1ZFUlNJT059CiAgICBVUERBVEVfRElTQ09OTkVDVEVEIHRydWUKICAgIAogICAgQ01BS0VfQVJHUyAtRCBDTUFLRV9JTlNUQUxMX1BSRUZJWDpQQVRIPSR7RVhURVJOQUxTX0lOU1RBTExfRElSfQogICAgQ01BS0VfQVJHUyAtRCBCVUlMRF9URVNUSU5HOkJPT0w9T0ZGCiAgICBDTUFLRV9BUkdTIC1EIE9QRU5FWFJfQlVJTERfVVRJTFM6Qk9PTD1PRkYKICAgIENNQUtFX0FSR1MgLUQgQlVJTERfU0hBUkVEX0xJQlM6Qk9PTD0ke09QRU5FWFJfQlVJTERfU0hBUkVEfQogICAgQ01BS0VfQVJHUyAtRCBQWUlMTUJBU0VfRU5BQkxFOkJPT0w9T0ZGCiAgICBDTUFLRV9BUkdTIC1EIENNQUtFX0NYWF9GTEFHUz0tRF9HTElCQ1hYX1VTRV9DWFgxMV9BQkk9MAogICAgQ01BS0VfQVJHUyAtRCBDTUFLRV9CVUlMRF9UWVBFPSR7REVQU19CVUlMRF9UWVBFfQogICAgQ01BS0VfQVJHUyA8U09VUkNFX0RJUj4KCiAgICBCVUlMRF9DT01NQU5EICR7TUFLRV9FWEVDVVRBQkxFfQoKICAgIFRNUF9ESVIgJHtFWFRFUk5BTFNfVE1QX0RJUn0vb3BlbmV4cgogICAgU1RBTVBfRElSICR7RVhURVJOQUxTX1NUQU1QX0RJUn0vb3BlbmV4cgogICAgQklOQVJZX0RJUiAke0VYVEVSTkFMU19CSU5BUllfRElSfS9vcGVuZXhyCiAgKQogIEV4dGVybmFsUHJvamVjdF9BZGRfU3RlcERlcGVuZGVuY2llcyhPcGVuRVhSIGNvbmZpZ3VyZSB6bGliIFRiYiBPcGVuVkRCIEJsb3NjKQoKZW5kaWYoKQoKCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCiMgQXNzaW1wCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCgppZiggTk9UIEVYVEVSTkFMX0FTU0lNUF9WRVJTSU9OICkKICBzZXQoRVhURVJOQUxfQVNTSU1QX1ZFUlNJT04gNS4wLjApCmVuZGlmKCkKCnNldChhc3NpbXBfUk9PVCAke0VYVEVSTkFMU19JTlNUQUxMX0RJUn0pCmZpbmRfcGFja2FnZShhc3NpbXAgJHtFWFRFUk5BTF9BU1NJTVBfVkVSU0lPTn0gRVhBQ1QpCgppZihhc3NpbXBfRk9VTkQpCiAgbWVzc2FnZSgiQXNzaW1wIHZlcnNpb24gJHthc3NpbXBfVkVSU0lPTn0gZm91bmQgLi4uIikKICBhZGRfY3VzdG9tX3RhcmdldCggQXNzaW1wIENPTU1BTkQgZWNobyAiQXNzaW1wIGJ1aWxkIGV4aXN0cywgc2tpcHBpbmcgcmVidWlsZCAuLi4iKQplbHNlKCkKCiAgbWVzc2FnZSgiQXNzaW1wIHZlcnNpb24gJHtFWFRFUk5BTF9BU1NJTVBfVkVSU0lPTn0gbm90IGZvdW5kISBSdW5uaW5nIGV4dGVybmFsIGJ1aWxkIC4uLiIpCiAgc2V0KEFTU0lNUF9QUkVGSVggYXNzaW1wKQoKICBpZihMQVZBXzNSRF9MSUJfTElOS19XSVRIX1NUQVRJQykKICAgIHNldChBU1NJTVBfQlVJTERfU0hBUkVEIE9GRikKICBlbHNlKCkKICAgIHNldChBU1NJTVBfQlVJTERfU0hBUkVEIE9OKQogIGVuZGlmKCkKCiAgRXh0ZXJuYWxQcm9qZWN0X0FkZCAoIEFzc2ltcAogICAgUFJFRklYICR7RVhURVJOQUxTX1NPVVJDRV9ESVJ9LyR7QVNTSU1QX1BSRUZJWH0KICAgIEdJVF9SRVBPU0lUT1JZIGh0dHBzOi8vZ2l0aHViLmNvbS9hc3NpbXAvYXNzaW1wLmdpdAogICAgR0lUX1RBRyB2JHtFWFRFUk5BTF9BU1NJTVBfVkVSU0lPTn0KICAgIFVQREFURV9ESVNDT05ORUNURUQgdHJ1ZQogICAgCiAgICBDTUFLRV9BUkdTIC1EIEJVSUxEX1NIQVJFRF9MSUJTOkJPT0w9JHtBU1NJTVBfQlVJTERfU0hBUkVEfQogICAgQ01BS0VfQVJHUyAtRCBBU1NJTVBfQlVJTERfQVNTSU1QX1RPT0xTOkJPT0w9T0ZGCiAgICBDTUFLRV9BUkdTIC1EIEFTU0lNUF9CVUlMRF9URVNUUzpCT09MPU9GRgogICAgQ01BS0VfQVJHUyAtRCBBU1NJTVBfSU5TVEFMTDpCT09MPU9OCiAgICBDTUFLRV9BUkdTIC1EIEFTU0lNUF9CVUlMRF9PQkpfSU1QT1JURVI6Qk9PTD1UUlVFCiAgICBDTUFLRV9BUkdTIC1EIEFTU0lNUF9CVUlMRF9BTExfSU1QT1JURVJTX0JZX0RFRkFVTFQ6Qk9PTD1PRkYKICAgIENNQUtFX0FSR1MgLUQgQVNTSU1QX0JVSUxEX0FMTF9FWFBPUlRFUlNfQllfREVGQVVMVDpCT09MPU9GRgogICAgQ01BS0VfQVJHUyAtRCBBU1NJTVBfSU5TVEFMTF9QREI6Qk9PTD1PRkYKICAgIENNQUtFX0FSR1MgLUQgQ01BS0VfQlVJTERfVFlQRT0ke0RFUFNfQlVJTERfVFlQRX0KICAgIENNQUtFX0FSR1MgLUQgQ01BS0VfSU5TVEFMTF9QUkVGSVg6UEFUSD0ke0VYVEVSTkFMU19JTlNUQUxMX0RJUn0KICAgIENNQUtFX0FSR1MgPFNPVVJDRV9ESVI+CgogICAgQlVJTERfQ09NTUFORCAke01BS0VfRVhFQ1VUQUJMRX0KCiAgICBUTVBfRElSICR7RVhURVJOQUxTX1RNUF9ESVJ9L2Fzc2ltcAogICAgU1RBTVBfRElSICR7RVhURVJOQUxTX1NUQU1QX0RJUn0vYXNzaW1wCiAgICBCSU5BUllfRElSICR7RVhURVJOQUxTX0JJTkFSWV9ESVJ9L2Fzc2ltcAogICkKICBFeHRlcm5hbFByb2plY3RfQWRkX1N0ZXBEZXBlbmRlbmNpZXMoQXNzaW1wIGNvbmZpZ3VyZSB6bGliIFRiYiBPcGVuVkRCIEJsb3NjKQoKZW5kaWYoKQoKCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCiMgT3BlblZEQgojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwoKaWYoIE5PVCBFWFRFUk5BTF9PUEVOVkRCX1ZFUlNJT04pCiAgc2V0KEVYVEVSTkFMX09QRU5WREJfVkVSU0lPTiA5LjAuMCkKZW5kaWYoKQoKaWYoTEFWQV8zUkRfTElCX0xJTktfV0lUSF9TVEFUSUMpCnNldChPUEVOVkRCX1VTRV9TVEFUSUNfTElCUyBPTikKZW5kaWYoKQoKc2V0KE9wZW5WREJfUk9PVCAke0VYVEVSTkFMU19JTlNUQUxMX0RJUn0pCmZpbmRfcGFja2FnZShPcGVuVkRCICR7RVhURVJOQUxfT1BFTlZEQl9WRVJTSU9OfSBFWEFDVCkKCmlmKCBPcGVuVkRCX0ZPVU5EICkKCiAgbWVzc2FnZSgiT3BlblZEQiB2ZXJzaW9uICR7T3BlblZEQl9WRVJTSU9OfSBmb3VuZCAuLi4iKQogIGFkZF9jdXN0b21fdGFyZ2V0KCBPcGVuVkRCIENPTU1BTkQgZWNobyAiT3BlblZEQiBidWlsZCBleGlzdHMsIHNraXBwaW5nIHJlYnVpbGQgLi4uIikKCmVsc2UoKQoKICBtZXNzYWdlKCJPcGVuVkRCIHZlcnNpb24gJHtFWFRFUk5BTF9PUEVOVkRCX1ZFUlNJT059IG5vdCBmb3VuZCEgUnVubmluZyBleHRlcm5hbCBidWlsZCAuLi4iKQogIHNldChPUEVOVkRCX1BSRUZJWCBvcGVudmRiKQoKICBpZihMQVZBXzNSRF9MSUJfTElOS19XSVRIX1NUQVRJQykKICAgIHNldChPUEVOVkRCX1VTRV9CT09TVF9TVEFUSUNfUlVOVElNRSBPTikKICAgIHNldChPUEVOVkRCX0JVSUxEX0NPUkVfU0hBUkVEIE9GRikKICAgIHNldChPUEVOVkRCX0NYWF9GTEFHUyAiLWZQSUMiKQogICAgc2V0KE9QRU5WREJfQ19GTEFHUyAiLWZQSUMiKQogIGVsc2UoKQogICAgc2V0KE9QRU5WREJfVVNFX0JPT1NUX1NUQVRJQ19SVU5USU1FIE9GRikKICAgIHNldChPUEVOVkRCX0JVSUxEX0NPUkVfU0hBUkVEIE9OKQogICAgc2V0KE9QRU5WREJfQ1hYX0ZMQUdTICItRF9HTElCQ1hYX1VTRV9DWFgxMV9BQkk9MCIpCiAgZW5kaWYoKQoKICBFeHRlcm5hbFByb2plY3RfQWRkICggT3BlblZEQgogICAgUFJFRklYICR7RVhURVJOQUxTX1NPVVJDRV9ESVJ9LyR7T1BFTlZEQl9QUkVGSVh9CiAgICBHSVRfUkVQT1NJVE9SWSBodHRwczovL2dpdGh1Yi5jb20vQWNhZGVteVNvZnR3YXJlRm91bmRhdGlvbi9vcGVudmRiLmdpdAogICAgR0lUX1RBRyB2JHtFWFRFUk5BTF9PUEVOVkRCX1ZFUlNJT059CiAgICAKICAgIENNQUtFX0FSR1MgLUQgVVNFX05BTk9WREI6Qk9PTD1PTgogICAgQ01BS0VfQVJHUyAtRCBVU0VfQkxPU0M6Qk9PTD1PRkYKICAgIENNQUtFX0FSR1MgLUQgVVNFX1RCQjpCT09MPU9GRgogICAgQ01BS0VfQVJHUyAtRCBVU0VfRVhQTElDSVRfSU5TVEFOVElBVElPTjpCT09MPU9GRgoKICAgIENNQUtFX0FSR1MgLUQgT1BFTlZEQl9CVUlMRF9BWDpCT09MPU9GRgogICAgQ01BS0VfQVJHUyAtRCBPUEVOVkRCX0JVSUxEX0NPUkU6Qk9PTD1PTgogICAgQ01BS0VfQVJHUyAtRCBPUEVOVkRCX0JVSUxEX05BTk9WREI6Qk9PTD1PTgogICAgCiAgICBDTUFLRV9BUkdTIC1EIERJU0FCTEVfQ01BS0VfU0VBUkNIX1BBVEhTOkJPT0w9T04KICAgIENNQUtFX0FSR1MgLUQgQm9vc3RfVVNFX1NUQVRJQ19SVU5USU1FOkJPT0w9JHtPUEVOVkRCX1VTRV9CT09TVF9TVEFUSUNfUlVOVElNRX0KICAgIENNQUtFX0FSR1MgLUQgT1BFTlZEQl9CVUlMRF9CSU5BUklFUzpCT09MPU9GRgogICAgQ01BS0VfQVJHUyAtRCBPUEVOVkRCX0VOQUJMRV9VTklOU1RBTEw6Qk9PTD1PRkYKICAgIENNQUtFX0FSR1MgLUQgT1BFTlZEQl9DT1JFX1NIQVJFRDpCT09MPSR7T1BFTlZEQl9CVUlMRF9DT1JFX1NIQVJFRH0gCiAgICAKICAgIENNQUtFX0FSR1MgLUQgQmxvc2NfUk9PVDpQQVRIPSR7RVhURVJOQUxTX0lOU1RBTExfRElSfQogICAgQ01BS0VfQVJHUyAtRCBCbG9zY19MSUJSQVJZOlBBVEg9JHtFWFRFUk5BTFNfSU5TVEFMTF9ESVJ9CiAgICBDTUFLRV9BUkdTIC1EIEJsb3NjX0lOQ0xVREVfRElSOlBBVEg9JHtFWFRFUk5BTFNfSU5TVEFMTF9ESVJ9L2luY2x1ZGUvIAoKICAgIENNQUtFX0FSR1MgLUQgVGJiX1JPT1Q6UEFUSD0ke0VYVEVSTkFMU19JTlNUQUxMX0RJUn0KICAgIENNQUtFX0FSR1MgLUQgVEJCX1JPT1Q6UEFUSD0ke0VYVEVSTkFMU19JTlNUQUxMX0RJUn0KICAgIENNQUtFX0FSR1MgLUQgVEJCX0lOQ0xVREVESVI6UEFUSD0ke0VYVEVSTkFMU19JTlNUQUxMX0RJUn0vaW5jbHVkZS8KICAgIENNQUtFX0FSR1MgLUQgVEJCX0xJQlJBUllESVI6UEFUSD0ke0VYVEVSTkFMU19JTlNUQUxMX0RJUn0vbGliLwogICAgCiAgICBDTUFLRV9BUkdTIC1EIENNQUtFX0NYWF9GTEFHUz0ke09QRU5WREJfQ1hYX0ZMQUdTfQogICAgQ01BS0VfQVJHUyAtRCBDTUFLRV9DX0ZMQUdTPSR7T1BFTlZEQl9DX0ZMQUdTfQogICAgQ01BS0VfQVJHUyAtRCBDTUFLRV9CVUlMRF9UWVBFPSR7REVQU19CVUlMRF9UWVBFfQogICAgQ01BS0VfQVJHUyAtRCBDTUFLRV9JTlNUQUxMX1BSRUZJWDpQQVRIPSR7RVhURVJOQUxTX0lOU1RBTExfRElSfQogICAgQ01BS0VfQVJHUyA8U09VUkNFX0RJUj4KCiAgICBCVUlMRF9DT01NQU5EICR7TUFLRV9FWEVDVVRBQkxFfQoKICAgIFRNUF9ESVIgJHtFWFRFUk5BTFNfVE1QX0RJUn0vb3BlbnZkYgogICAgU1RBTVBfRElSICR7RVhURVJOQUxTX1NUQU1QX0RJUn0vb3BlbnZkYgogICAgQklOQVJZX0RJUiAke0VYVEVSTkFMU19CSU5BUllfRElSfS9vcGVudmRiCiAgKQogIEV4dGVybmFsUHJvamVjdF9HZXRfcHJvcGVydHkoT3BlblZEQiBTT1VSQ0VfRElSKQogIEV4dGVybmFsUHJvamVjdF9BZGRfU3RlcERlcGVuZGVuY2llcyhPcGVuVkRCIGNvbmZpZ3VyZSB6bGliIFRiYiBCb29zdCBCbG9zYykKCmVuZGlmKCkKCgojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwojIFBORwojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwoKaWYoIE5PVCBFWFRFUk5BTF9QTkdfVkVSU0lPTiApCiAgc2V0KEVYVEVSTkFMX1BOR19WRVJTSU9OIDEuNi4zNykKZW5kaWYoKQoKc2V0KFBOR19ST09UICR7RVhURVJOQUxTX0lOU1RBTExfRElSfSkKZmluZF9wYWNrYWdlKFBORyAke0VYVEVSTkFMX1BOR19WRVJTSU9OfSBFWEFDVCkKCmlmKFBOR19GT1VORCkKCiAgbWVzc2FnZSgiUE5HIGZvdW5kIC4uLiIpCiAgYWRkX2N1c3RvbV90YXJnZXQoIHBuZyBDT01NQU5EIGVjaG8gIlBORyBidWlsZCBleGlzdHMsIHNraXBwaW5nIHJlYnVpbGQgLi4uIikKCmVsc2UoKQoKICBtZXNzYWdlKCJQTkcgbm90IGZvdW5kISBSdW5uaW5nIGV4dGVybmFsIGJ1aWxkIC4uLiIpCiAgc2V0KFBOR19QUkVGSVggcG5nKQoKICBpZihMQVZBXzNSRF9MSUJfTElOS19XSVRIX1NUQVRJQykKICAgIHNldChQTkdfQlVJTERfU1RBVElDX0xJQiBPTikKICAgIHNldChQTkdfQlVJTERfU0hBUkVEX0xJQiBPRkYpCiAgZWxzZSgpCiAgICBzZXQoUE5HX0JVSUxEX1NUQVRJQ19MSUIgT0ZGKQogICAgc2V0KFBOR19CVUlMRF9TSEFSRURfTElCIE9OKQogIGVuZGlmKCkKCiAgc2V0KFpMSUJfUk9PVCAke0VYVEVSTkFMU19JTlNUQUxMX0RJUn0pCiAgZmluZF9wYWNrYWdlKFpMSUIgJHtFWFRFUk5BTF9aTElCX1ZFUlNJT059IEVYQUNUIFJFUVVJUkVEKQogIG1lc3NhZ2UoIlpMSUJfTElCUkFSWSAiICR7WkxJQl9MSUJSQVJZfSkKICAKICBFeHRlcm5hbFByb2plY3RfQWRkICggcG5nCiAgICBTT1VSQ0VfRElSICR7Q01BS0VfQ1VSUkVOVF9TT1VSQ0VfRElSfS9saWJwbmctJHtFWFRFUk5BTF9QTkdfVkVSU0lPTn0KICAgIFVQREFURV9ESVNDT05ORUNURUQgdHJ1ZQoKICAgIENNQUtFX0FSR1MgLUQgUE5HX0JVSUxEX1pMSUI6Qk9PTD1PRkYKICAgIENNQUtFX0FSR1MgLUQgQ01BS0VfQlVJTERfVFlQRT0ke0RFUFNfQlVJTERfVFlQRX0KICAgIENNQUtFX0FSR1MgLUQgUE5HX1RFU1RTOkJPT0w9T0ZGCiAgICBDTUFLRV9BUkdTIC1EIFBOR19TVEFUSUM6Qk9PTD0ke1BOR19CVUlMRF9TVEFUSUNfTElCfQogICAgQ01BS0VfQVJHUyAtRCBQTkdfU0hBUkVEOkJPT0w9JHtQTkdfQlVJTERfU0hBUkVEX0xJQn0KICAgIENNQUtFX0FSR1MgLUQgQ01BS0VfSU5TVEFMTF9QUkVGSVg6UEFUSD0ke0VYVEVSTkFMU19JTlNUQUxMX0RJUn0KICAgIENNQUtFX0FSR1MgPFNPVVJDRV9ESVI+CgogICAgQlVJTERfQ09NTUFORCAke01BS0VfRVhFQ1VUQUJMRX0KCiAgICBUTVBfRElSICR7RVhURVJOQUxTX1RNUF9ESVJ9LyR7UE5HX1BSRUZJWH0KICAgIFNUQU1QX0RJUiAke0VYVEVSTkFMU19TVEFNUF9ESVJ9LyR7UE5HX1BSRUZJWH0KICAgIEJJTkFSWV9ESVIgJHtFWFRFUk5BTFNfQklOQVJZX0RJUn0vJHtQTkdfUFJFRklYfQogICkKICBFeHRlcm5hbFByb2plY3RfQWRkX1N0ZXBEZXBlbmRlbmNpZXMocG5nIGNvbmZpZ3VyZSB6bGliKQplbmRpZigpCgojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwojIE9wZW5Db2xvcklPCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCgppZiggTk9UIEVYVEVSTkFMX09DSU9fVkVSU0lPTiApCiAgc2V0KEVYVEVSTkFMX09DSU9fVkVSU0lPTiAyLjAuNCkKZW5kaWYoKQoKc2V0KE9wZW5Db2xvcklPX1JPT1QgJHtFWFRFUk5BTFNfSU5TVEFMTF9ESVJ9KQpmaW5kX3BhY2thZ2UoT3BlbkNvbG9ySU8gJHtFWFRFUk5BTF9PQ0lPX1ZFUlNJT059IEVYQUNUKQoKdW5zZXQoT3BlbkNvbG9ySU9fRk9VTkQpCgppZihPcGVuQ29sb3JJT19GT1VORCkKCiAgbWVzc2FnZSgiT3BlbkNvbG9ySU8gdmVyc2lvbiAke09wZW5Db2xvcklPX1ZFUlNJT059IGZvdW5kIC4uLiIpCiAgYWRkX2N1c3RvbV90YXJnZXQoIE9wZW5Db2xvcklPIENPTU1BTkQgZWNobyAiT3BlbkNvbG9ySU8gYnVpbGQgZXhpc3RzLCBza2lwcGluZyByZWJ1aWxkIC4uLiIpCgplbHNlaWYoTk9UIFVTRV9PcGVuQ29sb3JJTykKICBhZGRfY3VzdG9tX3RhcmdldCggT3BlbkNvbG9ySU8gQ09NTUFORCBlY2hvICJPcGVuQ29sb3JJTyBkaXNhYmxlZCwgc2tpcHBpbmcgYnVpbGQgLi4uIikKZWxzZSgpCgogIG1lc3NhZ2UoIk9wZW5Db2xvcklPIG5vdCBmb3VuZCEgUnVubmluZyBleHRlcm5hbCBidWlsZCAuLi4iKQogIHNldChPQ0lPX1BSRUZJWCBvcGVuY29sb3JpbykKCiAgaWYoTEFWQV8zUkRfTElCX0xJTktfV0lUSF9TVEFUSUMpCiAgICBzZXQoT1BFTkNPTE9SSU9fQlVJTERfU0hBUkVEX0xJQlMgT0ZGKQogIGVsc2UoKQogICAgc2V0KE9QRU5DT0xPUklPX0JVSUxEX1NIQVJFRF9MSUJTIE9OKQogIGVuZGlmKCkKCiAgaWYoJHtERVBTX0JVSUxEX1RZUEV9IFNUUkVRVUFMICJyZWxlYXNlIikKICAgIHNldChPUEVOQ09MT1JJT19CVUlMRF9UWVBFICJSZWxlYXNlIikKICBlbHNlKCkKICAgIHNldChPUEVOQ09MT1JJT19CVUlMRF9UWVBFICJEZWJ1ZyIpCiAgZW5kaWYoKQoKICBFeHRlcm5hbFByb2plY3RfQWRkICggT3BlbkNvbG9ySU8KICAgIFBSRUZJWCAke0VYVEVSTkFMU19TT1VSQ0VfRElSfS8ke09DSU9fUFJFRklYfQogICAgR0lUX1JFUE9TSVRPUlkgaHR0cHM6Ly9naXRodWIuY29tL0FjYWRlbXlTb2Z0d2FyZUZvdW5kYXRpb24vT3BlbkNvbG9ySU8uZ2l0CiAgICBHSVRfVEFHIHYke0VYVEVSTkFMX09DSU9fVkVSU0lPTn0KICAgIFVQREFURV9ESVNDT05ORUNURUQgdHJ1ZQoKICAgIENNQUtFX0FSR1MgLUQgQlVJTERfU0hBUkVEX0xJQlM6Qk9PTD0ke09QRU5DT0xPUklPX0JVSUxEX1NIQVJFRF9MSUJTfQogICAgQ01BS0VfQVJHUyAtRCBPQ0lPX0JVSUxEX0FQUFM6Qk9PTD1PRkYKICAgIENNQUtFX0FSR1MgLUQgT0NJT19CVUlMRF9PUEVORlg6Qk9PTD1PRkYKICAgIENNQUtFX0FSR1MgLUQgT0NJT19CVUlMRF9HUFVfVEVTVFM6Qk9PTD1PRkYKICAgIENNQUtFX0FSR1MgLUQgT0NJT19VU0VfSEVBRExFU1M6Qk9PTD1PTgogICAgQ01BS0VfQVJHUyAtRCBPQ0lPX0JVSUxEX1RFU1RTOkJPT0w9T0ZGCiAgICBDTUFLRV9BUkdTIC1EIE9DSU9fQlVJTERfRE9DUzpCT09MPU9GRgogICAgQ01BS0VfQVJHUyAtRCBPQ0lPX0JVSUxEX1BZVEhPTjpCT09MPU9GRgoKICAgIENNQUtFX0FSR1MgLUQgQ01BS0VfQ1hYX0ZMQUdTPS1EX0dMSUJDWFhfVVNFX0NYWDExX0FCST0wCiAgICBDTUFLRV9BUkdTIC1EIENNQUtFX0JVSUxEX1RZUEU9JHtPUEVOQ09MT1JJT19CVUlMRF9UWVBFfQogICAgQ01BS0VfQVJHUyAtRCBDTUFLRV9JTlNUQUxMX1BSRUZJWDpQQVRIPSR7RVhURVJOQUxTX0lOU1RBTExfRElSfQogICAgQ01BS0VfQVJHUyA8U09VUkNFX0RJUj4KCiAgICBCVUlMRF9DT01NQU5EICR7TUFLRV9FWEVDVVRBQkxFfQoKICAgIFRNUF9ESVIgJHtFWFRFUk5BTFNfVE1QX0RJUn0vb2NpbwogICAgU1RBTVBfRElSICR7RVhURVJOQUxTX1NUQU1QX0RJUn0vb2NpbwogICAgQklOQVJZX0RJUiAke0VYVEVSTkFMU19CSU5BUllfRElSfS9vY2lvCiAgKQplbmRpZigpCgojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwojIE9wZW5JbWFnZUlPCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCgppZiggTk9UIEVYVEVSTkFMX09JSU9fVkVSU0lPTiApCiAgc2V0KEVYVEVSTkFMX09JSU9fVkVSU0lPTiAyLjIuMTguMCkKZW5kaWYoKQoKc2V0KE9QRU5JTUFHRUlPX1JPT1QgJHtFWFRFUk5BTFNfSU5TVEFMTF9ESVJ9KQpmaW5kX3BhY2thZ2UoT3BlbkltYWdlSU8gJHtFWFRFUk5BTF9PSUlPX1ZFUlNJT059IEVYQUNUKQoKaWYoT3BlbkltYWdlSU9fRk9VTkQpCgogIG1lc3NhZ2UoIk9wZW5JbWFnZUlPIHZlcnNpb24gJHtPcGVuSW1hZ2VJT19WRVJTSU9OfSBmb3VuZCAuLi4iKQogIGFkZF9jdXN0b21fdGFyZ2V0KCBPcGVuSW1hZ2VJTyBDT01NQU5EIGVjaG8gIk9wZW5JbWFnZUlPIGJ1aWxkIGV4aXN0cywgc2tpcHBpbmcgcmVidWlsZCAuLi4iKQoKZWxzZSgpCgogIG1lc3NhZ2UoIk9wZW5JbWFnZUlPIG5vdCBmb3VuZCEgUnVubmluZyBleHRlcm5hbCBidWlsZCAuLi4iKQogIHNldChPSUlPX1BSRUZJWCBvcGVuaW1hZ2VpbykKCiAgaWYoTEFWQV8zUkRfTElCX0xJTktfV0lUSF9TVEFUSUMpCiAgICBzZXQoT1BFTklNQUdFSU9fTElOS19TVEFUSUMgT04pCiAgICBzZXQoT1BFTklNQUdFSU9fQlVJTERfU0hBUkVEX0xJQlMgT0ZGKQogIGVsc2UoKQogICAgc2V0KE9QRU5JTUFHRUlPX0xJTktfU1RBVElDIE9GRikKICAgIHNldChPUEVOSU1BR0VJT19CVUlMRF9TSEFSRURfTElCUyBPTikKICBlbmRpZigpCgogIHNldChCT09TVF9ST09UICR7RVhURVJOQUxTX0lOU1RBTExfRElSfSkKICBmaW5kX3BhY2thZ2UoQm9vc3QgJHtFWFRFUk5BTF9CT09TVF9WRVJTSU9OfSBFWEFDVCkKCiAgaWYoTk9UIExBVkFfM1JEX0xJQl9MSU5LX1dJVEhfU1RBVElDKQogICAgc2V0KFpMSUJfVVNFX1NUQVRJQ19MSUJTIE9GRikKICBlbmRpZigpCiAgc2V0KFpMSUJfUk9PVCAke0VYVEVSTkFMU19JTlNUQUxMX0RJUn0pCiAgZmluZF9wYWNrYWdlKFpMSUIgJHtFWFRFUk5BTF9aTElCX1ZFUlNJT059IEVYQUNUKQoKICBpZihOT1QgVEFSR0VUIFpMSUI6OlpMSUIpCiAgICBtZXNzYWdlKEZBVEFMX0VSUk9SICJaTElCIGxpYnJhcnkgbWlzc2luZyAhISEgUmVxdWlyZWQgYnkgT3BlbmltYWdlSU8iKQogIGVuZGlmKCkKCiAgc2V0KFBOR19ST09UICR7RVhURVJOQUxTX0lOU1RBTExfRElSfSkKICBmaW5kX3BhY2thZ2UoUE5HICR7RVhURVJOQUxfUE5HX1ZFUlNJT059IEVYQUNUKQoKICBpZihOT1QgVEFSR0VUIFBORzo6UE5HKQogICAgbWVzc2FnZShGQVRBTF9FUlJPUiAiUE5HIGxpYnJhcnkgbWlzc2luZyAhISEgUmVxdWlyZWQgYnkgT3BlbmltYWdlSU8iKQogIGVuZGlmKCkKCiAgc2V0KE9wZW5Db2xvcklPX1JPT1QgJHtFWFRFUk5BTFNfSU5TVEFMTF9ESVJ9KQogIGZpbmRfcGFja2FnZShPcGVuQ29sb3JJTyAke0VYVEVSTkFMX09DSU9fVkVSU0lPTn0gRVhBQ1QpCgogIEV4dGVybmFsUHJvamVjdF9BZGQgKCBPcGVuSW1hZ2VJTwogICAgUFJFRklYICR7RVhURVJOQUxTX1NPVVJDRV9ESVJ9LyR7T0lJT19QUkVGSVh9CiAgICBHSVRfUkVQT1NJVE9SWSBodHRwczovL2dpdGh1Yi5jb20vT3BlbkltYWdlSU8vb2lpby5naXQKICAgIEdJVF9UQUcgdiR7RVhURVJOQUxfT0lJT19WRVJTSU9OfQogICAgVVBEQVRFX0RJU0NPTk5FQ1RFRCB0cnVlCgogICAgQ01BS0VfQVJHUyAtRCBDTUFLRV9DWFhfU1RBTkRBUkQ9MTQKICAgIENNQUtFX0FSR1MgLUQgQlVJTERfU0hBUkVEX0xJQlM6Qk9PTD0ke09QRU5JTUFHRUlPX0JVSUxEX1NIQVJFRF9MSUJTfQogICAgQ01BS0VfQVJHUyAtRCBMSU5LU1RBVElDOkJPT0w9JHtPUEVOSU1BR0VJT19MSU5LX1NUQVRJQ30KICAgIAogICAgQ01BS0VfQVJHUyAtRCBFTUJFRFBMVUdJTlM6Qk9PTD1PTgogICAgQ01BS0VfQVJHUyAtRCBPSUlPX0JVSUxEX1RFU1RTOkJPT0w9T0ZGCiAgICBDTUFLRV9BUkdTIC1EIE9JSU9fQlVJTERfVE9PTFM6Qk9PTD1PRkYKICAgIENNQUtFX0FSR1MgLUQgQlVJTERfT0lJT1VUSUxfT05MWTpCT09MPU9GRgogICAgQ01BS0VfQVJHUyAtRCBCVUlMRF9ET0NTOkJPT0w9T0ZGCgogICAgQ01BS0VfQVJHUyAtRCBaTElCX1JPT1Q6UEFUSD0ke0VYVEVSTkFMU19JTlNUQUxMX0RJUn0KICAgIENNQUtFX0FSR1MgLUQgQm9vc3RfUk9PVDpQQVRIPSR7RVhURVJOQUxTX0lOU1RBTExfRElSfQogICAgQ01BS0VfQVJHUyAtRCBUQkJfUk9PVDpQQVRIPSR7RVhURVJOQUxTX0lOU1RBTExfRElSfQogICAgQ01BS0VfQVJHUyAtRCBPcGVuRVhSX1JPT1Q6UEFUSD0ke0VYVEVSTkFMU19JTlNUQUxMX0RJUn0KICAgIENNQUtFX0FSR1MgLUQgT3BlbkNvbG9ySU9fUk9PVDpQQVRIPSR7RVhURVJOQUxTX0lOU1RBTExfRElSfQogICAgQ01BS0VfQVJHUyAtRCBQTkdfUk9PVDpQQVRIPSR7RVhURVJOQUxTX0lOU1RBTExfRElSfQogICAgQ01BS0VfQVJHUyAtRCBweWJpbmQxMV9ST09UOlBBVEg9JHtFWFRFUk5BTFNfSU5TVEFMTF9ESVJ9CiAgICAKICAgIENNQUtFX0FSR1MgLUQgVVNFX0ZGTVBFRzpCT09MPU9GRgogICAgQ01BS0VfQVJHUyAtRCBVU0VfUkFXOkJPT0w9T0ZGCiAgICBDTUFLRV9BUkdTIC1EIFVTRV9QWVRIT046Qk9PTD1PRkYKICAgIENNQUtFX0FSR1MgLUQgVVNFX0ZJRUxEM0Q6Qk9PTD1PRkYKICAgIENNQUtFX0FSR1MgLUQgVVNFX09DSU86Qk9PTD1PRkYKICAgIENNQUtFX0FSR1MgLUQgVVNFX09QRU5WREI6Qk9PTD1PRkYKICAgIENNQUtFX0FSR1MgLUQgVVNFX09QRU5DT0xPUklPOkJPT0w9T0ZGCiAgICBDTUFLRV9BUkdTIC1EIFVTRV9PUEVOQ1Y6Qk9PTD1PRkYKCiAgICBDTUFLRV9BUkdTIC1EIENNQUtFX0NYWF9GTEFHUz0tRF9HTElCQ1hYX1VTRV9DWFgxMV9BQkk9MAogICAgQ01BS0VfQVJHUyAtRCBDTUFLRV9CVUlMRF9UWVBFPSR7REVQU19CVUlMRF9UWVBFfQogICAgQ01BS0VfQVJHUyAtRCBDTUFLRV9JTlNUQUxMX1BSRUZJWDpQQVRIPSR7RVhURVJOQUxTX0lOU1RBTExfRElSfQogICAgQ01BS0VfQVJHUyA8U09VUkNFX0RJUj4KCiAgICBCVUlMRF9DT01NQU5EICR7TUFLRV9FWEVDVVRBQkxFfQoKICAgIFRNUF9ESVIgJHtFWFRFUk5BTFNfVE1QX0RJUn0vb2lpbwogICAgU1RBTVBfRElSICR7RVhURVJOQUxTX1NUQU1QX0RJUn0vb2lpbwogICAgQklOQVJZX0RJUiAke0VYVEVSTkFMU19CSU5BUllfRElSfS9vaWlvCiAgKQogIEV4dGVybmFsUHJvamVjdF9BZGRfU3RlcERlcGVuZGVuY2llcyhPcGVuSW1hZ2VJTyBjb25maWd1cmUgVGJiIEJsb3NjIFB5QmluZCBPcGVuRVhSIE9wZW5WREIgemxpYiBwbmcgdGlmZikKCmVuZGlmKCkKCgojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwojIEdMRlczCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCgppZiggTk9UIEVYVEVSTkFMX0dMRldfVkVSU0lPTiApCiAgc2V0KEVYVEVSTkFMX0dMRldfVkVSU0lPTiAzLjMuNykKZW5kaWYoKQoKc2V0KEdMRldfUk9PVCAke0VYVEVSTkFMU19JTlNUQUxMX0RJUn0pCmZpbmRfcGFja2FnZShnbGZ3ICR7RVhURVJOQUxfR0xGV19WRVJTSU9OfSBFWEFDVCkKCmlmKGdsZndfRk9VTkQpCgogIG1lc3NhZ2UoIkdsZncgdmVyc2lvbiAke2dsZndfVkVSU0lPTn0gZm91bmQgLi4uIikKICBhZGRfY3VzdG9tX3RhcmdldCggR2xmdyBDT01NQU5EIGVjaG8gIkdsZncgYnVpbGQgZXhpc3RzLCBza2lwcGluZyByZWJ1aWxkIC4uLiIpCgplbHNlKCkKCiAgbWVzc2FnZSgiR2xmdyBub3QgZm91bmQhIFJ1bm5pbmcgZXh0ZXJuYWwgYnVpbGQgLi4uIikKICBzZXQoR0xGV19QUkVGSVggZ2xmdykKCiAgaWYoTEFWQV8zUkRfTElCX0xJTktfV0lUSF9TVEFUSUMpCiAgICBzZXQoR0xGV19CVUlMRF9TSEFSRURfTElCUyBPRkYpCiAgZWxzZSgpCiAgICBzZXQoR0xGV19CVUlMRF9TSEFSRURfTElCUyBPTikKICBlbmRpZigpCgogIEV4dGVybmFsUHJvamVjdF9BZGQgKCBHbGZ3CiAgICBQUkVGSVggJHtFWFRFUk5BTFNfU09VUkNFX0RJUn0vJHtHTEZXX1BSRUZJWH0KICAgIEdJVF9SRVBPU0lUT1JZIGh0dHBzOi8vZ2l0aHViLmNvbS9nbGZ3L2dsZncuZ2l0CiAgICBHSVRfVEFHICR7RVhURVJOQUxfR0xGV19WRVJTSU9OfQogICAgVVBEQVRFX0RJU0NPTk5FQ1RFRCB0cnVlCgogICAgQ01BS0VfQVJHUyAtRCBCVUlMRF9TSEFSRURfTElCUzpCT09MPSR7R0xGV19CVUlMRF9TSEFSRURfTElCU30KICAgIENNQUtFX0FSR1MgLUQgR0xGV19CVUlMRF9FWEFNUExFUzpCT09MPU9GRgogICAgQ01BS0VfQVJHUyAtRCBHTEZXX0JVSUxEX1RFU1RTOkJPT0w9T0ZGCiAgICBDTUFLRV9BUkdTIC1EIEdMRldfQlVJTERfRE9DUzpCT09MPU9GRgogICAgQ01BS0VfQVJHUyAtRCBHTEZXX0lOU1RBTEw6Qk9PTD1PTgogICAgQ01BS0VfQVJHUyAtRCBDTUFLRV9CVUlMRF9UWVBFPSR7REVQU19CVUlMRF9UWVBFfQogICAgQ01BS0VfQVJHUyAtRCBDTUFLRV9JTlNUQUxMX1BSRUZJWDpQQVRIPSR7RVhURVJOQUxTX0lOU1RBTExfRElSfQogICAgQ01BS0VfQVJHUyA8U09VUkNFX0RJUj4KCiAgICBCVUlMRF9DT01NQU5EICR7TUFLRV9FWEVDVVRBQkxFfQoKICAgIFRNUF9ESVIgJHtFWFRFUk5BTFNfVE1QX0RJUn0vJHtHTEZXX1BSRUZJWH0KICAgIFNUQU1QX0RJUiAke0VYVEVSTkFMU19TVEFNUF9ESVJ9LyR7R0xGV19QUkVGSVh9CiAgICBCSU5BUllfRElSICR7RVhURVJOQUxTX0JJTkFSWV9ESVJ9LyR7R0xGV19QUkVGSVh9CiAgKQoKZW5kaWYoKQoKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKIyBUSUZGCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCgppZiggTk9UIEVYVEVSTkFMX1RJRkZfVkVSU0lPTiApCiAgc2V0KEVYVEVSTkFMX1RJRkZfVkVSU0lPTiA0LjAuOSkKZW5kaWYoKQoKc2V0KFRJRkZfUk9PVCAke0VYVEVSTkFMU19JTlNUQUxMX0RJUn0pCmZpbmRfcGFja2FnZShUSUZGICR7RVhURVJOQUxfVElGRl9WRVJTSU9OfSBFWEFDVCkKCmlmKFRJRkZfRk9VTkQpCiAgCiAgbWVzc2FnZSgiVElGRiB2ZXJzaW9uICR7VElGRl9WRVJTSU9OfSBmb3VuZCAuLi4iKQogIGFkZF9jdXN0b21fdGFyZ2V0KCB0aWZmIENPTU1BTkQgZWNobyAiVElGRiBidWlsZCBleGlzdHMsIHNraXBwaW5nIHJlYnVpbGQgLi4uIikKCmVsc2UoKQoKICBtZXNzYWdlKCJUSUZGIG5vdCBmb3VuZCEgUnVubmluZyBleHRlcm5hbCBidWlsZCAuLi4iKQogIHNldChUSUZGX1BSRUZJWCB0aWZmKQoKICBpZihMQVZBXzNSRF9MSUJfTElOS19XSVRIX1NUQVRJQykKICAgIHNldChUSUZGX0JVSUxEX1NIQVJFRF9MSUJTIE9GRikKICBlbHNlKCkKICAgIHNldChUSUZGX0JVSUxEX1NIQVJFRF9MSUJTIE9OKQogIGVuZGlmKCkKCiAgRXh0ZXJuYWxQcm9qZWN0X0FkZCAoIHRpZmYKICAgIFNPVVJDRV9ESVIgJHtDTUFLRV9DVVJSRU5UX1NPVVJDRV9ESVJ9L3RpZmYtJHtFWFRFUk5BTF9USUZGX1ZFUlNJT059CiAgICBVUERBVEVfRElTQ09OTkVDVEVEIHRydWUKCiAgICBDTUFLRV9BUkdTIC1EIENNQUtFX0JVSUxEX1RZUEU9JHtERVBTX0JVSUxEX1RZUEV9CiAgICBDTUFLRV9BUkdTIC1EIEJVSUxEX1NIQVJFRF9MSUJTOkJPT0w9JHtUSUZGX0JVSUxEX1NIQVJFRF9MSUJTfQogICAgQ01BS0VfQVJHUyAtRCBDTUFLRV9JTlNUQUxMX1BSRUZJWDpQQVRIPSR7RVhURVJOQUxTX0lOU1RBTExfRElSfQogICAgQ01BS0VfQVJHUyA8U09VUkNFX0RJUj4KCiAgICBCVUlMRF9DT01NQU5EICR7TUFLRV9FWEVDVVRBQkxFfQoKICAgIFRNUF9ESVIgJHtFWFRFUk5BTFNfVE1QX0RJUn0vJHtUSUZGX1BSRUZJWH0KICAgIFNUQU1QX0RJUiAke0VYVEVSTkFMU19TVEFNUF9ESVJ9LyR7VElGRl9QUkVGSVh9CiAgICBCSU5BUllfRElSICR7RVhURVJOQUxTX0JJTkFSWV9ESVJ9LyR7VElGRl9QUkVGSVh9CiAgKQoKZW5kaWYoKQoKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKIyBaTVEKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKCmlmKCBOT1QgRVhURVJOQUxfWk1RX1ZFUlNJT04pCiAgc2V0KEVYVEVSTkFMX1pNUV9WRVJTSU9OIDQuMy40KQplbmRpZigpCgpzZXQoWmVyb01RX0RJUiAke0VYVEVSTkFMU19JTlNUQUxMX0RJUn0pCmZpbmRfcGFja2FnZShaZXJvTVEgJHtFWFRFUk5BTF9aTVFfVkVSU0lPTn0gRVhBQ1QpCgppZihaZXJvTVFfRk9VTkQpCgogIG1lc3NhZ2UoIlpNUSB2ZXJzaW9uICR7WmVyb01RX1ZFUlNJT059IGZvdW5kIC4uLiIpCiAgYWRkX2N1c3RvbV90YXJnZXQoIHptcSBDT01NQU5EIGVjaG8gIlpNUSBidWlsZCBleGlzdHMsIHNraXBwaW5nIHJlYnVpbGQgLi4uIikKCmVsc2UoKQoKICBtZXNzYWdlKCJaTVEgbm90IGZvdW5kISBSdW5uaW5nIGV4dGVybmFsIGJ1aWxkIC4uLiIpCiAgc2V0KFpNUV9QUkVGSVggem1xKQoKICBpZihMQVZBXzNSRF9MSUJfTElOS19XSVRIX1NUQVRJQykKICAgIHNldChaTVFfQlVJTERfU1RBVElDX0xJQlMgT04pCiAgICBzZXQoWk1RX0JVSUxEX1NIQVJFRF9MSUJTIE9GRikKICBlbHNlKCkKICAgIHNldChaTVFfQlVJTERfU1RBVElDX0xJQlMgT0ZGKQogICAgc2V0KFpNUV9CVUlMRF9TSEFSRURfTElCUyBPTikKICBlbmRpZigpCgogIEV4dGVybmFsUHJvamVjdF9BZGQgKCB6bXEKICAgIFBSRUZJWCAke0VYVEVSTkFMU19TT1VSQ0VfRElSfS8ke1pNUV9QUkVGSVh9CiAgICBHSVRfUkVQT1NJVE9SWSBodHRwczovL2dpdGh1Yi5jb20vemVyb21xL2xpYnptcS5naXQKICAgIEdJVF9UQUcgdiR7RVhURVJOQUxfWk1RX1ZFUlNJT059CiAgICBVUERBVEVfRElTQ09OTkVDVEVEIHRydWUKCiAgICBDTUFLRV9BUkdTIC1EIENNQUtFX0JVSUxEX1RZUEU9JHtERVBTX0JVSUxEX1RZUEV9CiAgICBDTUFLRV9BUkdTIC1EIEJVSUxEX1NIQVJFRDpCT09MPSR7Wk1RX0JVSUxEX1NIQVJFRF9MSUJTfQogICAgQ01BS0VfQVJHUyAtRCBCVUlMRF9TVEFUSUM6Qk9PTD0ke1pNUV9CVUlMRF9TVEFUSUNfTElCU30KICAgIENNQUtFX0FSR1MgLUQgV0lUSF9ET0NTOkJPT0w9T0ZGCiAgICBDTUFLRV9BUkdTIC1EIEJVSUxEX1RFU1RTOkJPT0w9T0ZGCiAgICBDTUFLRV9BUkdTIC1EIENNQUtFX0lOU1RBTExfUFJFRklYOlBBVEg9JHtFWFRFUk5BTFNfSU5TVEFMTF9ESVJ9CiAgICBDTUFLRV9BUkdTIDxTT1VSQ0VfRElSPgoKICAgIEJVSUxEX0NPTU1BTkQgJHtNQUtFX0VYRUNVVEFCTEV9CgogICAgVE1QX0RJUiAke0VYVEVSTkFMU19UTVBfRElSfS8ke1pNUV9QUkVGSVh9CiAgICBTVEFNUF9ESVIgJHtFWFRFUk5BTFNfU1RBTVBfRElSfS8ke1pNUV9QUkVGSVh9CiAgICBCSU5BUllfRElSICR7RVhURVJOQUxTX0JJTkFSWV9ESVJ9LyR7Wk1RX1BSRUZJWH0KICApCgplbmRpZigpCgojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwojIENQUFpNUQojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwoKaWYoIE5PVCBFWFRFUk5BTF9DUFBaTVFfVkVSU0lPTiApCiAgc2V0KEVYVEVSTkFMX0NQUFpNUV9WRVJTSU9OIDQuOC4xKQplbmRpZigpCgpzZXQoQ3BwWk1RX1JPT1QgJHtFWFRFUk5BTFNfSU5TVEFMTF9ESVJ9KQpmaW5kX3BhY2thZ2UoQ3BwWk1RICR7RVhURVJOQUxfQ1BQWk1RX1ZFUlNJT059IEVYQUNUKQoKaWYoQ3BwWk1RX0ZPVU5EKQoKICBtZXNzYWdlKCJDcHBaTVEgdmVyc2lvbiAke0NwcFpNUV9WRVJTSU9OfSBmb3VuZCAuLi4iKQogIGFkZF9jdXN0b21fdGFyZ2V0KCBjcHB6bXEgQ09NTUFORCBlY2hvICJDcHBaTVEgYnVpbGQgZXhpc3RzLCBza2lwcGluZyByZWJ1aWxkIC4uLiIpCgplbHNlKCkKCiAgbWVzc2FnZSgiQ3BwWk1RIG5vdCBmb3VuZCEgUnVubmluZyBleHRlcm5hbCBidWlsZCAuLi4iKQogIHNldChDcHBaTVFfUFJFRklYIGNwcHptcSkKCiAgRXh0ZXJuYWxQcm9qZWN0X0FkZCAoIGNwcHptcQogICAgUFJFRklYICR7RVhURVJOQUxTX1NPVVJDRV9ESVJ9LyR7Q3BwWk1RX1BSRUZJWH0KICAgIEdJVF9SRVBPU0lUT1JZIGh0dHBzOi8vZ2l0aHViLmNvbS96ZXJvbXEvY3Bwem1xLmdpdAogICAgR0lUX1RBRyB2JHtFWFRFUk5BTF9DUFBaTVFfVkVSU0lPTn0KICAgIFVQREFURV9ESVNDT05ORUNURUQgdHJ1ZQoKICAgIENNQUtFX0FSR1MgLUQgQ1BQWk1RX0JVSUxEX1RFU1RTOkJPT0w9T0ZGCiAgICBDTUFLRV9BUkdTIC1EIENNQUtFX0JVSUxEX1RZUEU9JHtERVBTX0JVSUxEX1RZUEV9CiAgICBDTUFLRV9BUkdTIC1EIENNQUtFX0lOU1RBTExfUFJFRklYOlBBVEg9JHtFWFRFUk5BTFNfSU5TVEFMTF9ESVJ9CiAgICBDTUFLRV9BUkdTIDxTT1VSQ0VfRElSPgoKICAgIEJVSUxEX0NPTU1BTkQgJHtNQUtFX0VYRUNVVEFCTEV9CgogICAgVE1QX0RJUiAke0VYVEVSTkFMU19UTVBfRElSfS8ke0NwcFpNUV9QUkVGSVh9CiAgICBTVEFNUF9ESVIgJHtFWFRFUk5BTFNfU1RBTVBfRElSfS8ke0NwcFpNUV9QUkVGSVh9CiAgICBCSU5BUllfRElSICR7RVhURVJOQUxTX0JJTkFSWV9ESVJ9LyR7Q3BwWk1RX1BSRUZJWH0KICApCiAgRXh0ZXJuYWxQcm9qZWN0X0FkZF9TdGVwRGVwZW5kZW5jaWVzKGNwcHptcSBjb25maWd1cmUgem1xKQoKZW5kaWYoKQoKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKIyBJbnRlbCBTUE1EIENvbXBpbGVyIChJU1BDKQojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwoKaWYoIE5PVCBFWFRFUk5BTF9JU1BDX1ZFUlNJT04gKQogIHNldChFWFRFUk5BTF9JU1BDX1ZFUlNJT04gMS4xNy4wKQplbmRpZigpCgpzZXQoSVNQQ19QUkVGSVggaXNwYykKCnNldChJU1BDX1JPT1QgJHtFWFRFUk5BTFNfU09VUkNFX0RJUn0vJHtJU1BDX1BSRUZJWH0pCmZpbmRfcGFja2FnZShJU1BDICR7RVhURVJOQUxfSVNQQ19WRVJTSU9OfSBFWEFDVCkKCm1lc3NhZ2UoSVNQQyBleGVjIGlzICR7SVNQQ19FWEVDVVRBQkxFfSkKCmlmKElTUENfRVhFQ1VUQUJMRSkKCiAgbWVzc2FnZSgiSW50ZWwgU1BNRCBDb21waWxlciB2ZXJzaW9uICR7SVNQQ19WRVJTSU9OfSBmb3VuZCAuLi4iKQogIGFkZF9jdXN0b21fdGFyZ2V0KCBpc3BjIENPTU1BTkQgZWNobyAiSW50ZWwgU1BNRCBDb21waWxlciBmb3VuZCwgc2tpcHBpbmcgLi4uIikKCmVsc2UoKQogIG1lc3NhZ2UoIkludGVsIFNQTUQgQ29tcGlsZXIgbm90IGZvdW5kISBEb3dubG9hZGluZyAuLi4iKQoKICBFeHRlcm5hbFByb2plY3RfQWRkICggaXNwYwogICAgUFJFRklYICR7RVhURVJOQUxTX1NPVVJDRV9ESVJ9LyR7SVNQQ19QUkVGSVh9CiAgICBVUkwgaHR0cHM6Ly9naXRodWIuY29tL2lzcGMvaXNwYy9yZWxlYXNlcy9kb3dubG9hZC92MS4xNy4wL2lzcGMtdjEuMTcuMC1saW51eC50YXIuZ3oKICAgIENPTkZJR1VSRV9DT01NQU5EICIiCiAgICBCVUlMRF9DT01NQU5EICIiCiAgICBJTlNUQUxMX0NPTU1BTkQgIiIKICApCgplbmRpZigpCgojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwojIE9wZW5JbWFnZURlbm9pc2UKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKCmlmKCBOT1QgRVhURVJOQUxfT0lETl9WRVJTSU9OICkKICBzZXQoRVhURVJOQUxfT0lETl9WRVJTSU9OIDEuNC4zKQplbmRpZigpCgpzZXQoT0lETl9ST09UICR7RVhURVJOQUxTX0lOU1RBTExfRElSfSkKZmluZF9wYWNrYWdlKE9JRE4gJHtFWFRFUk5BTF9PSUROX1ZFUlNJT059IEVYQUNUKQoKaWYoT0lETl9GT1VORCkKCiAgbWVzc2FnZSgiT0lETiB2ZXJzaW9uICR7T0lETl9WRVJTSU9OfSBmb3VuZCAuLi4iKQogIGFkZF9jdXN0b21fdGFyZ2V0KCBPcGVuSW1hZ2VEZW5vaXNlIENPTU1BTkQgZWNobyAiT3BlbkltYWdlRGVub2lzZSBidWlsZCBleGlzdHMsIHNraXBwaW5nIHJlYnVpbGQgLi4uIikKCmVsc2UoKQoKICBtZXNzYWdlKCJPcGVuSW1hZ2VEZW5vaXNlIG5vdCBmb3VuZCEgUnVubmluZyBleHRlcm5hbCBidWlsZCAuLi4iKQogIHNldChPSUROX1BSRUZJWCBvcGVuaW1hZ2VkZW5vaXNlKQoKICBnZXRfZmlsZW5hbWVfY29tcG9uZW50KElTUENfRVhFQ1VUQUJMRV9ESVIgJHtJU1BDX0VYRUNVVEFCTEV9IERJUkVDVE9SWSkKICAKICBpZihMQVZBXzNSRF9MSUJfTElOS19XSVRIX1NUQVRJQykKICAgIHNldChPSUROX0JVSUxEX1NUQVRJQ19MSUJTIE9OKQogIGVsc2UoKQogICAgc2V0KE9JRE5fQlVJTERfU1RBVElDX0xJQlMgT0ZGKQogIGVuZGlmKCkKCiAgc2V0KElTUENfRVhFQ1VUQUJMRSAiJHtJU1BDX0VYRUNVVEFCTEVfRElSfS9pc3BjIikKCiAgRXh0ZXJuYWxQcm9qZWN0X0FkZCAoIE9wZW5JbWFnZURlbm9pc2UKICAgIFBSRUZJWCAke0VYVEVSTkFMU19TT1VSQ0VfRElSfS8ke09JRE5fUFJFRklYfQogICAgR0lUX1JFUE9TSVRPUlkgaHR0cHM6Ly9naXRodWIuY29tL09wZW5JbWFnZURlbm9pc2Uvb2lkbi5naXQKICAgIEdJVF9UQUcgdiR7RVhURVJOQUxfT0lETl9WRVJTSU9OfQogICAgVVBEQVRFX0RJU0NPTk5FQ1RFRCB0cnVlCgogICAgQ01BS0VfQVJHUyAtRCBJU1BDX0RJUl9ISU5UPSR7SVNQQ19FWEVDVVRBQkxFX0RJUn0KICAgIENNQUtFX0FSR1MgLUQgVEJCX1JPT1Q6UEFUSD0ke0VYVEVSTkFMU19JTlNUQUxMX0RJUn0KICAgIENNQUtFX0FSR1MgLUQgT1BFTklNQUdFSU9fUk9PVDpQQVRIPSR7RVhURVJOQUxTX0lOU1RBTExfRElSfQogICAgQ01BS0VfQVJHUyAtRCBDTUFLRV9CVUlMRF9UWVBFPSR7REVQU19CVUlMRF9UWVBFfQogICAgQ01BS0VfQVJHUyAtRCBPSUROX1NUQVRJQ19MSUI6Qk9PTD0ke09JRE5fQlVJTERfU1RBVElDX0xJQlN9CiAgICBDTUFLRV9BUkdTIC1EIE9JRE5fQVBJX05BTUVTUEFDRTpTVFJJTkc9b2lkbgogICAgQ01BS0VfQVJHUyAtRCBPSUROX0ZJTFRFUl9SVDpCT09MPU9OCiAgICBDTUFLRV9BUkdTIC1EIE9JRE5fRklMVEVSX1JUTElHSFRNQVA6Qk9PTD1PRkYKICAgIENNQUtFX0FSR1MgLUQgT0lETl9BUFBTOkJPT0w9T0ZGCiAgICBDTUFLRV9BUkdTIC1EIE9JRE5fQVBQU19PUEVOSU1BR0VJTzpCT09MPU9GRgogICAgQ01BS0VfQVJHUyAtRCBDTUFLRV9DWFhfU1RBTkRBUkQ9MTQKICAgIENNQUtFX0FSR1MgLUQgQ01BS0VfQ1hYX0ZMQUdTPS1EX0dMSUJDWFhfVVNFX0NYWDExX0FCST0wCiAgICBDTUFLRV9BUkdTIC1EIENNQUtFX0lOU1RBTExfUFJFRklYOlBBVEg9JHtFWFRFUk5BTFNfSU5TVEFMTF9ESVJ9CiAgICBDTUFLRV9BUkdTIDxTT1VSQ0VfRElSPgoKICAgIEJVSUxEX0NPTU1BTkQgJHtNQUtFX0VYRUNVVEFCTEV9CgogICAgVE1QX0RJUiAke0VYVEVSTkFMU19UTVBfRElSfS8ke09JRE5fUFJFRklYfQogICAgU1RBTVBfRElSICR7RVhURVJOQUxTX1NUQU1QX0RJUn0vJHtPSUROX1BSRUZJWH0KICAgIEJJTkFSWV9ESVIgJHtFWFRFUk5BTFNfQklOQVJZX0RJUn0vJHtPSUROX1BSRUZJWH0KICApCiAgRXh0ZXJuYWxQcm9qZWN0X0FkZF9TdGVwRGVwZW5kZW5jaWVzKCBPcGVuSW1hZ2VEZW5vaXNlIGNvbmZpZ3VyZSBpc3BjIE9wZW5JbWFnZUlPIFRiYiApCgplbmRpZigpCgojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwojIE5WUHJvX0NvcmUKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKCnNldChFWFRFUk5BTF9OVlByb19Db3JlX1ZFUlNJT04gbWFzdGVyKQoKc2V0KE5WUHJvX0NvcmVfUFJFRklYIE5WUHJvX0NvcmUpCgpFeHRlcm5hbFByb2plY3RfQWRkICggTlZQcm9fQ29yZQogIFBSRUZJWCAke0VYVEVSTkFMU19TT1VSQ0VfRElSfS8ke05WUHJvX0NvcmVfUFJFRklYfQogIEdJVF9SRVBPU0lUT1JZIGh0dHBzOi8vZ2l0aHViLmNvbS9udnByby1zYW1wbGVzL252cHJvX2NvcmUuZ2l0CiAgR0lUX1RBRyAke0VYVEVSTkFMX05WUHJvX0NvcmVfVkVSU0lPTn0KICBVUERBVEVfRElTQ09OTkVDVEVEIHRydWUKICAKICBDT05GSUdVUkVfQ09NTUFORCAiIgogIEJVSUxEX0NPTU1BTkQgIiIKCiAgSU5TVEFMTF9DT01NQU5EICR7Q01BS0VfQ09NTUFORH0KICAgIC1EIE5WUFJPX0lOU1RfRElSPSR7RVhURVJOQUxTX0lOU1RBTExfRElSfS9pbmNsdWRlL05WUHJvX0NvcmUvCiAgICAtRCBOVlBST19TUkNfRElSPTxTT1VSQ0VfRElSPgogICAgLVAgJHtDTUFLRV9DVVJSRU5UX1NPVVJDRV9ESVJ9L252cHJvX2luc3RhbGxfZmlsZXMuY21ha2UKCiAgVE1QX0RJUiAke0VYVEVSTkFMU19UTVBfRElSfS9udnByb19jb3JlCiAgU1RBTVBfRElSICR7RVhURVJOQUxTX1NUQU1QX0RJUn0vbnZwcm9fY29yZQopCgoKCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCiMgVnVsa2FuTWVtb3J5QWxsb2NhdG9yCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCgpzZXQoRVhURVJOQUxfVk1BX1ZFUlNJT04gbWFzdGVyKQoKc2V0KFZNQV9QUkVGSVggdnVsa2FuX21lbW9yeV9hbGxvY2F0b3IpCgpFeHRlcm5hbFByb2plY3RfQWRkICggVk1BCiAgUFJFRklYICR7RVhURVJOQUxTX1NPVVJDRV9ESVJ9LyR7Vk1BX1BSRUZJWH0KICBVUERBVEVfRElTQ09OTkVDVEVEIHRydWUKICAKICBET1dOTE9BRF9DT01NQU5EICIiCgogIENPTkZJR1VSRV9DT01NQU5EICIiCiAgQlVJTERfQ09NTUFORCAiIgogIElOU1RBTExfQ09NTUFORCAke0NNQUtFX0NPTU1BTkR9CiAgICAtRCBWTUFfSU5TVF9ESVI9JHtFWFRFUk5BTFNfSU5TVEFMTF9ESVJ9L2luY2x1ZGUvVnVsa2FuTWVtb3J5QWxsb2NhdG9yLwogICAgLUQgVk1BX1NSQ19ESVI9JHtDTUFLRV9DVVJSRU5UX1NPVVJDRV9ESVJ9L3ZtYQogICAgLVAgJHtDTUFLRV9DVVJSRU5UX1NPVVJDRV9ESVJ9L3ZtYV9pbnN0YWxsX2ZpbGVzLmNtYWtlCgogIFRNUF9ESVIgJHtFWFRFUk5BTFNfVE1QX0RJUn0vdm1hCiAgU1RBTVBfRElSICR7RVhURVJOQUxTX1NUQU1QX0RJUn0vdm1hCikKCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCiMgUlRYR0kKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKCmlmKCBOT1QgRVhURVJOQUxfUlRYR0lfVkVSU0lPTiApCiAgc2V0KEVYVEVSTkFMX1JUWEdJX1ZFUlNJT04gMS4yLjExKQplbmRpZigpCgpzZXQoUlRYR0lfUFJFRklYIFJUWEdJKQoKRXh0ZXJuYWxQcm9qZWN0X0FkZCAoIFJUWEdJCiAgUFJFRklYICR7RVhURVJOQUxTX1NPVVJDRV9ESVJ9LyR7UlRYR0lfUFJFRklYfQogIEdJVF9SRVBPU0lUT1JZIGh0dHBzOi8vZ2l0aHViLmNvbS9OVklESUFHYW1lV29ya3MvUlRYR0kuZ2l0CiAgR0lUX1RBRyB2JHtFWFRFUk5BTF9SVFhHSV9WRVJTSU9OfQogIFVQREFURV9ESVNDT05ORUNURUQgdHJ1ZQogIAogIENPTkZJR1VSRV9DT01NQU5EICIiCgogIEJVSUxEX0NPTU1BTkQgIiIKCiAgSU5TVEFMTF9DT01NQU5ECiAgICAke0NNQUtFX0NPTU1BTkR9IC1FIGNvcHlfZGlyZWN0b3J5ICAgIDxTT1VSQ0VfRElSPi9ydHhnaS1zZGsgJHtFWFRFUk5BTFNfSU5TVEFMTF9ESVJ9L3J0eGdpLXNkawoKICBUTVBfRElSICR7RVhURVJOQUxTX1RNUF9ESVJ9LyR7UlRYR0lfUFJFRklYfQogIFNUQU1QX0RJUiAke0VYVEVSTkFMU19TVEFNUF9ESVJ9LyR7UlRYR0lfUFJFRklYfQogIEJJTkFSWV9ESVIgJHtFWFRFUk5BTFNfQklOQVJZX0RJUn0vJHtSVFhHSV9QUkVGSVh9CikKCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCiMgUlRYREkKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKCmlmKCBOT1QgRVhURVJOQUxfUlRYRElfVkVSU0lPTikKICBzZXQoRVhURVJOQUxfUlRYRElfVkVSU0lPTiAxLjMuMCkKZW5kaWYoKQoKc2V0KFJUWERJX1BSRUZJWCBSVFhESSkKCkV4dGVybmFsUHJvamVjdF9BZGQgKCBSVFhESQogIFBSRUZJWCAke0VYVEVSTkFMU19TT1VSQ0VfRElSfS8ke1JUWERJX1BSRUZJWH0KICBHSVRfUkVQT1NJVE9SWSBodHRwczovL2dpdGh1Yi5jb20vTlZJRElBR2FtZVdvcmtzL1JUWERJLmdpdAogIEdJVF9UQUcgdiR7RVhURVJOQUxfUlRYRElfVkVSU0lPTn0KICBVUERBVEVfRElTQ09OTkVDVEVEIHRydWUKICAKICBDT05GSUdVUkVfQ09NTUFORCAiIgoKICBCVUlMRF9DT01NQU5EICIiCgogIElOU1RBTExfQ09NTUFORAogICAgQ09NTUFORCAke0NNQUtFX0NPTU1BTkR9IC1FIGNvcHlfZGlyZWN0b3J5ICAgIDxTT1VSQ0VfRElSPi9ydHhkaS1zZGsgJHtFWFRFUk5BTFNfSU5TVEFMTF9ESVJ9L3J0eGRpLXNkawogICAgQ09NTUFORCAke0NNQUtFX0NPTU1BTkR9IC1FIGNvcHlfZGlyZWN0b3J5ICAgIDxTT1VSQ0VfRElSPi9ydHhkaS1zZGsvaW5jbHVkZS9ydHhkaSAke0VYVEVSTkFMU19JTlNUQUxMX0RJUn0vc2hhZGVycy9ydHhkaQoKICBUTVBfRElSICR7RVhURVJOQUxTX1RNUF9ESVJ9LyR7UlRYRElfUFJFRklYfQogIFNUQU1QX0RJUiAke0VYVEVSTkFMU19TVEFNUF9ESVJ9LyR7UlRYRElfUFJFRklYfQogIEJJTkFSWV9ESVIgJHtFWFRFUk5BTFNfQklOQVJZX0RJUn0vJHtSVFhESV9QUkVGSVh9CikKCkV4dGVybmFsUHJvamVjdF9BZGRfU3RlcERlcGVuZGVuY2llcyhSVFhESSBjb25maWd1cmUgUlRYR0kpCgoKCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCiMgTFo0IFN0cmVhbQojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwoKc2V0KExaNF9TVFJFQU1fUFJFRklYIGx6NF9zdHJlYW0pCnNldChMWjRfSU5TVEFMTF9ESVIgJHtFWFRFUk5BTFNfSU5TVEFMTF9ESVJ9L2luY2x1ZGUvbHo0X3N0cmVhbSkKCmlmKEVYSVNUUyAiJHtMWjRfSU5TVEFMTF9ESVJ9L2x6NF9zdHJlYW0uaCIpCgogIG1lc3NhZ2UoIkxaNF9TdHJlYW0gZm91bmQgLi4uIikKICBhZGRfY3VzdG9tX3RhcmdldCggTFo0X1N0cmVhbSBDT01NQU5EIGVjaG8gIkxaNF9TdHJlYW0gZm91bmQsIHNraXBwaW5nIGRvd25sb2FkIC4uLiIpCgplbHNlKCkKCiAgbWVzc2FnZSgiRG93bmxvYWRpbmcgTFo0X1N0cmVhbSAuLi4iKQogIEV4dGVybmFsUHJvamVjdF9BZGQgKCBMWjRfU3RyZWFtCiAgICBQUkVGSVggJHtFWFRFUk5BTFNfU09VUkNFX0RJUn0vJHtMWjRfU1RSRUFNX1BSRUZJWH0KICAgIEdJVF9SRVBPU0lUT1JZIGh0dHBzOi8vZ2l0aHViLmNvbS9sYXVkcnVwL2x6NF9zdHJlYW0uZ2l0CiAgICBVUERBVEVfRElTQ09OTkVDVEVEIHRydWUKICAgIENPTkZJR1VSRV9DT01NQU5EICIiCiAgICBCVUlMRF9DT01NQU5EICIiCiAgICBJTlNUQUxMX0NPTU1BTkQgCiAgICAgICR7Q01BS0VfQ09NTUFORH0gLUUgY29weV9pZl9kaWZmZXJlbnQgPFNPVVJDRV9ESVI+L2luY2x1ZGUvbHo0X3N0cmVhbS5oICR7TFo0X0lOU1RBTExfRElSfS9sejRfc3RyZWFtLmgKICAKICAgIFRNUF9ESVIgJHtFWFRFUk5BTFNfVE1QX0RJUn0vbHo0X3N0cmVhbQogICAgU1RBTVBfRElSICR7RVhURVJOQUxTX1NUQU1QX0RJUn0vbHo0X3N0cmVhbQoKICApCmVuZGlmKCkKCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCiMgTlZUVAojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwoKc2V0KE5WVFRfU291cmNlICR7Q01BS0VfQ1VSUkVOVF9TT1VSQ0VfRElSfS9OdmlkaWFUZXh0dXJlVG9vbHMvbGludXgpCgppZihFWElTVFMgICR7RVhURVJOQUxTX0lOU1RBTExfRElSfS9saWIvbGlibnZ0dC5zby4zMDEwNikKCiAgbWVzc2FnZSgiTlZUVCBmb3VuZCAuLi4iKQogIGFkZF9jdXN0b21fdGFyZ2V0KCBOVlRUIENPTU1BTkQgZWNobyAiTlZUVCBmb3VuZCAuLi4iKQoKZWxzZSgpCgogIEV4dGVybmFsUHJvamVjdF9BZGQgKCBOVlRUCiAgICBQUkVGSVggJHtFWFRFUk5BTFNfU09VUkNFX0RJUn0vJHtMWjRfU1RSRUFNX1BSRUZJWH0KICAgIFVQREFURV9ESVNDT05ORUNURUQgdHJ1ZQogICAgCiAgICBET1dOTE9BRF9DT01NQU5EICIiCiAgICBDT05GSUdVUkVfQ09NTUFORCAiIgogICAgQlVJTERfQ09NTUFORCAiIgoKICAgIElOU1RBTExfQ09NTUFORCAKICAgICAgQ09NTUFORCAke0NNQUtFX0NPTU1BTkR9IC1FIGNvcHlfZGlyZWN0b3J5ICAgICR7TlZUVF9Tb3VyY2V9L2luY2x1ZGUvbnZ0dCAke0VYVEVSTkFMU19JTlNUQUxMX0RJUn0vaW5jbHVkZS9udnR0CiAgICAgIENPTU1BTkQgJHtDTUFLRV9DT01NQU5EfSAtRSBjb3B5X2lmX2RpZmZlcmVudCAke05WVFRfU291cmNlfS9saWJudnR0LnNvLjMwMTA2ICR7RVhURVJOQUxTX0lOU1RBTExfRElSfS9saWIvbGlibnZ0dC5zbwogIAogICAgVE1QX0RJUiAke0VYVEVSTkFMU19UTVBfRElSfS9udnR0CiAgICBTVEFNUF9ESVIgJHtFWFRFUk5BTFNfU1RBTVBfRElSfS9udnR0CgogICkKZW5kaWYoKQoKCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwojIEZyZWVJbWFnZSBzZWN0aW9uCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwoKaWYoIE5PVCBFWFRFUk5BTF9GUkVFSU1BR0VfVkVSU0lPTikKICBzZXQoRVhURVJOQUxfRlJFRUlNQUdFX1ZFUlNJT04gMy4xOC4wKSAKZW5kaWYoKQoKc2V0KEZyZWVJbWFnZV9ST09UICR7RVhURVJOQUxTX0lOU1RBTExfRElSfSkKZmluZF9wYWNrYWdlKEZyZWVJbWFnZSAke0VYVEVSTkFMX0ZSRUVJTUFHRV9WRVJTSU9OfSBFWEFDVCkKCmlmKCBGcmVlSW1hZ2VfRk9VTkQgKQogIGFkZF9jdXN0b21fdGFyZ2V0KCBGcmVlSW1hZ2UgQ09NTUFORCBlY2hvICJGcmVlSW1hZ2UgYnVpbGQgZXhpc3RzLCBza2lwcGluZyByZWJ1aWxkIC4uLiIpCmVsc2UoKQoKICBzZXQoVElGRl9ST09UICR7RVhURVJOQUxTX0lOU1RBTExfRElSfSkKICBmaW5kX3BhY2thZ2UoVElGRiAke0VYVEVSTkFMX1RJRkZfVkVSU0lPTn0gRVhBQ1QpCiAgCiAgRXh0ZXJuYWxQcm9qZWN0X0FkZCggRnJlZUltYWdlCiAgICBQUkVGSVggJHtDTUFLRV9DVVJSRU5UX1NPVVJDRV9ESVJ9L2ZyZWVpbWFnZQogICAgVVBEQVRFX0RJU0NPTk5FQ1RFRCBPTgogICAgTE9HX0JVSUxEIE9OCiAgICBVU0VTX1RFUk1JTkFMIE9OCiAgICBVU0VTX1RFUk1JTkFMX0NPTkZJR1VSRSBPTgogICAgRE9XTkxPQURfQ09NTUFORCAiIgoKICAgIENPTkZJR1VSRV9DT01NQU5EICIiCgogICAgQlVJTERfQ09NTUFORCAKICAgICAgQ09NTUFORCAke01BS0VfRVhFQ1VUQUJMRX0gLWYgTWFrZWZpbGUuZ251CgogICAgSU5TVEFMTF9DT01NQU5EICR7Q01BS0VfQ09NTUFORH0KICAgICAgLUQgU1RBVElDX0xJQj0ke0xBVkFfM1JEX0xJQl9MSU5LX1dJVEhfU1RBVElDfQogICAgICAtRCBTUkNfRElSPSR7Q01BS0VfQ1VSUkVOVF9TT1VSQ0VfRElSfS9mcmVlaW1hZ2UvYnVpbGQKICAgICAgLUQgREVTVF9ESVI9JHtFWFRFUk5BTFNfSU5TVEFMTF9ESVJ9CiAgICAgIC1QICR7Q01BS0VfQ1VSUkVOVF9TT1VSQ0VfRElSfS9mcmVlaW1hZ2VfaW5zdGFsbF9maWxlcy5jbWFrZQoKICAgIEJJTkFSWV9ESVIgJHtFWFRFUk5BTFNfU09VUkNFX0RJUn0vLi4vZnJlZWltYWdlCiAgICBUTVBfRElSICR7RVhURVJOQUxTX1RNUF9ESVJ9L2ZyZWVpbWFnZQogICAgU1RBTVBfRElSICR7RVhURVJOQUxTX1NUQU1QX0RJUn0vZnJlZWltYWdlCiAgKQogIEV4dGVybmFsUHJvamVjdF9BZGRfU3RlcERlcGVuZGVuY2llcyhGcmVlSW1hZ2UgY29uZmlndXJlIHRpZmYpCgplbmRpZigpCgojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKIyBTbGFuZyBzZWN0aW9uCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwoKaWYoIE5PVCBFWFRFUk5BTF9TTEFOR19WRVJTSU9OICkKICBzZXQoRVhURVJOQUxfU0xBTkdfVkVSU0lPTiAwLjI0LjgpICMgbGFzdCB0ZXN0ZWQgdmVyc2lvbiB3YXMgMC4xOC42CmVuZGlmKCkKCnNldChTbGFuZ19ST09UICR7RVhURVJOQUxTX0lOU1RBTExfRElSfSkKZmluZF9wYWNrYWdlKFNsYW5nKQoKaWYoIFNsYW5nX0ZPVU5EICkKICBtZXNzYWdlKCJTbGFuZyB2ZXJzaW9uICR7U2xhbmdfVkVSU0lPTn0gZm91bmQgLi4uIikKICBhZGRfY3VzdG9tX3RhcmdldCggU2xhbmcgQ09NTUFORCBlY2hvICJTbGFuZyBidWlsZCBleGlzdHMsIHNraXBwaW5nIHJlYnVpbGQgLi4uIikKZWxzZSgpCgpzZXQoU0xBTkdfUFJFRklYIHNsYW5nKQpzZXQoU0xBTkdfUExBVEZPUk0gbGludXgteDY0KQoKc2V0KFNMQU5HX0JVSUxEX0xJQlMgInNsYW5nIHNsYW5nLWdsc2xhbmciKQoKc2V0KFNMQU5HX1JFTEVBU0VfQklOX0RJUiAiYmluLyR7U0xBTkdfUExBVEZPUk19L3JlbGVhc2UiKQpzZXQoU0xBTkdfREVCVUdfQklOX0RJUiAiYmluLyR7U0xBTkdfUExBVEZPUk19L2RlYnVnIikKCmlmKE5PVCBERUZJTkVEIFNMQU5HX0JVSUxEX1RZUEUpCiAgc2V0KCBTTEFOR19CVUlMRF9UWVBFIENNQUtFX0JVSUxEX1RZUEUpCmVuZGlmKCkKCgppZihTTEFOR19CVUlMRF9UWVBFIFNUUkVRVUFMICJSZWxlYXNlIikKICBzZXQoU0xBTkdfQlVJTERfQ09ORklHIHJlbGVhc2VfeDY0KQogIHNldChTTEFOR19CSU5fRElSICR7U0xBTkdfUkVMRUFTRV9CSU5fRElSfSkKZWxzZWlmKFNMQU5HX0JVSUxEX1RZUEUgU1RSRVFVQUwgIlJlbFdpdGhEZWJJbmZvIikKICBzZXQoU0xBTkdfQlVJTERfQ09ORklHIHJlbGVhc2VfeDY0KQogIHNldChTTEFOR19CSU5fRElSICR7U0xBTkdfUkVMRUFTRV9CSU5fRElSfSkKZWxzZWlmKFNMQU5HX0JVSUxEX1RZUEUgU1RSRVFVQUwgIk1pblNpemVSZWwiKQogIHNldChTTEFOR19CVUlMRF9DT05GSUcgcmVsZWFzZV94NjQpCiAgc2V0KFNMQU5HX0JJTl9ESVIgJHtTTEFOR19SRUxFQVNFX0JJTl9ESVJ9KQplbHNlKCkKICBzZXQoU0xBTkdfQlVJTERfQ09ORklHIGRlYnVnX3g2NCkKICBzZXQoU0xBTkdfQklOX0RJUiAke1NMQU5HX0RFQlVHX0JJTl9ESVJ9KQplbmRpZigpCgptZXNzYWdlKCJTbGFuZyBidWlsZCBjb25maWcgIiAke1NMQU5HX0JVSUxEX0NPTkZJR30pCgpzdHJpbmcoUkVQTEFDRSAiICIgIjsiIFNMQU5HX0JVSUxEX0xJQlNfTElTVCAke1NMQU5HX0JVSUxEX0xJQlN9KQoKRXh0ZXJuYWxQcm9qZWN0X0FkZCggU2xhbmcKICBQUkVGSVggJHtFWFRFUk5BTFNfU09VUkNFX0RJUn0vJHtTTEFOR19QUkVGSVh9CiAgR0lUX1JFUE9TSVRPUlkgaHR0cHM6Ly9naXRodWIuY29tL3NoYWRlci1zbGFuZy9zbGFuZy5naXQKICBHSVRfVEFHIHYke0VYVEVSTkFMX1NMQU5HX1ZFUlNJT059CiAgVVBEQVRFX0RJU0NPTk5FQ1RFRCBPTgogIEJVSUxEX0lOX1NPVVJDRSAgIFRSVUUKICBMT0dfQlVJTEQgT04KICBVU0VTX1RFUk1JTkFMIE9OCiAgVVNFU19URVJNSU5BTF9DT05GSUdVUkUgT04KCiAgQ09ORklHVVJFX0NPTU1BTkQKICAgIENPTU1BTkQgJHtDTUFLRV9DT01NQU5EfQogICAgICAtRCBQUkVNQUtFX1VSTD1odHRwczovL2dpdGh1Yi5jb20vc2hhZGVyLXNsYW5nL3NsYW5nLWJpbmFyaWVzL2Jsb2IvbWFzdGVyL3ByZW1ha2UvcHJlbWFrZS01LjAuMC1hbHBoYTE2L2Jpbi9saW51eC02NC9wcmVtYWtlNT9yYXc9dHJ1ZQogICAgICAtRCBPVVRQVVRfRklMRT08U09VUkNFX0RJUj4vcHJlbWFrZTUKICAgICAgLVAgJHtDTUFLRV9DVVJSRU5UX1NPVVJDRV9ESVJ9L3NsYW5nX2Rvd25sb2FkX3ByZW1ha2UuY21ha2UgCiAgICBDT01NQU5EICR7Q01BS0VfQ09NTUFORH0KICAgICAgLUQgR0lUX0VYRUNVVEFCTEU9JHtHSVRfRVhFQ1VUQUJMRX0KICAgICAgLUQgSU5QVVRfRklMRT0ke0NNQUtFX0NVUlJFTlRfU09VUkNFX0RJUn0vc2xhbmctdGFnLXZlcnNpb24uaC5pbgogICAgICAtRCBPVVRQVVRfRklMRT08U09VUkNFX0RJUj4vc2xhbmctdGFnLXZlcnNpb24uaAogICAgICAtUCAke0NNQUtFX0NVUlJFTlRfU09VUkNFX0RJUn0vc2xhbmdfZ2VuZXJhdGVfdmVyc2lvbi5jbWFrZQogICAgQ09NTUFORCAuL3ByZW1ha2U1IGdtYWtlIC0tZGVwcz10cnVlIC0tYnVpbGQtZ2xzbGFuZz10cnVlIC0tZW5hYmxlLWVtYmVkLXN0ZGxpYj10cnVlIC0tYXJjaD14NjQKICAKICBCVUlMRF9DT01NQU5EIAogICAgI0NPTU1BTkQgJHtDTUFLRV9DT01NQU5EfQogICAgIyAgLUQgU09VUkNFX0RJUj08U09VUkNFX0RJUj4KICAgICMgIC1QICR7Q01BS0VfQ1VSUkVOVF9TT1VSQ0VfRElSfS9zbGFuZ19wYXRjaC5jbWFrZQogICAgQ09NTUFORAogICAgICAke01BS0VfRVhFQ1VUQUJMRX0gJHtTTEFOR19CVUlMRF9MSUJTX0xJU1R9IGNvbmZpZz0ke1NMQU5HX0JVSUxEX0NPTkZJR30KCiAgSU5TVEFMTF9DT01NQU5EICR7Q01BS0VfQ09NTUFORH0KICAgIC1EIFNMQU5HX0xJQlNfTElTVD0ke1NMQU5HX0JVSUxEX0xJQlN9CiAgICAtRCBTT1VSQ0VfRElSPTxTT1VSQ0VfRElSPgogICAgLUQgQklOX0RJUj08U09VUkNFX0RJUj4vJHtTTEFOR19CSU5fRElSfS8KICAgIC1EIERFU1RfRElSPSR7RVhURVJOQUxTX0lOU1RBTExfRElSfQogICAgLVAgJHtDTUFLRV9DVVJSRU5UX1NPVVJDRV9ESVJ9L3NsYW5nX2luc3RhbGxfZmlsZXMuY21ha2UKCiAgVE1QX0RJUiAke0VYVEVSTkFMU19UTVBfRElSfS9zbGFuZwogIFNUQU1QX0RJUiAke0VYVEVSTkFMU19TVEFNUF9ESVJ9L3NsYW5nCikKCmVuZGlmKCkKCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCgphZGRfY3VzdG9tX3RhcmdldCggZHVtbXlfdGFyZ2V0IENPTU1BTkQgZWNobyAiVGhpcmQgcGFydHkgcHJvamVjdCBkdW1teSB0YXJnZXQiKQphZGRfZGVwZW5kZW5jaWVzKCBkdW1teV90YXJnZXQgCiAgemxpYgogIFRiYgogIEJsb3NjCiAgQm9vc3QKICBQeUJpbmQKICBPcGVuRVhSCiAgQXNzaW1wCiAgT3BlblZEQgogIGlzcGMKICBPcGVuSW1hZ2VEZW5vaXNlCiAgT3BlbkltYWdlSU8KICBSVFhESQogIFJUWEdJCiAgVk1BCiAgU2xhbmcKICBHbGZ3CiAgem1xCiAgY3Bwem1xCiAgdGlmZgogIEZyZWVJbWFnZQopCgAAAAAAAAAA0QkAAAAAAAAAAAAAAAAAAAAAAADRCQAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAD6GwAAAAAAAPobAAAAAAAAAAAAAAAA8L8"
				]
			]
		},
		{
			"contents": "file( GLOB SOURCES\n    ./*.cpp\n    ./Core/*.cpp\n    ./Core/API/*.cpp\n    ./Core/API/Vulkan/*.cpp\n    ./Core/Platform/*.cpp\n    ./Core/Platform/Linux/*.cpp\n    ./Core/Program/*.cpp\n    ./Core/State/*.cpp\n    ./Core/BufferTypes/*.cpp\n    ./RenderGraph/*.cpp\n    ./RenderGraph/BasePasses/*.cpp\n    ./RenderPasses/*.cpp\n    ./Scene/*.cpp\n    ./Scene/Animation/*.cpp\n    ./Scene/Camera/*.cpp\n    ./Scene/Importers/*.cpp\n    ./Scene/Lights/*.cpp\n    ./Scene/Material/*.cpp\n    #./Scene/ParticleSystem/*.cpp\n    ./Utils/*.cpp\n    ./Utils/Algorithm/*.cpp\n    ./Utils/Debug/*.cpp\n    ./Utils/Image/*.cpp\n    ./Utils/Perception/*.cpp\n    ./Utils/SampleGenerators/*.cpp\n    ./Utils/Sampling/*.cpp\n    ./Utils/Sampling/Pseudorandom/*.cpp\n    ./Utils/Scripting/*.cpp\n    ./Utils/Timing/*.cpp\n    ./Utils/UI/*.cpp\n    ./Utils/Video/*.cpp\n    ./Experimental/Scene/Lights/*.cpp\n    #./Testing/*.cpp\n\n    ${PROJECT_SOURCE_DIR}/third_party/imgui/imgui.cpp\n    ${PROJECT_SOURCE_DIR}/third_party/imgui/imgui_draw.cpp\n    ${PROJECT_SOURCE_DIR}/third_party/imgui/imgui_widgets.cpp\n    ${PROJECT_SOURCE_DIR}/third_party/imgui/imgui_tables.cpp\n    ${PROJECT_SOURCE_DIR}/third_party/imgui/backends/imgui_impl_glfw.cpp\n    ${PROJECT_SOURCE_DIR}/third_party/imgui/backends/imgui_impl_vulkan.cpp\n    ${PROJECT_SOURCE_DIR}/src/Externals/dear_imgui_addons/imguinodegrapheditor/imguinodegrapheditor.cpp\n    ${PROJECT_SOURCE_DIR}/src/Externals/mikktspace/mikktspace.c\n)\n\nadd_library( falcor_lib SHARED ${SOURCES} ${HEADERS} )\n\n# PyBind11\nfind_package(pybind11 REQUIRED CONFIG)\n\n# Python\nfind_package( Python3 COMPONENTS Development )\ninclude_directories( ${Python3_INCLUDE_DIRS} )\n\n# Assimp\nfind_package(ASSIMP REQUIRED)\nif(ASSIMP_FOUND)\n    set(ASSIMP_LIBRARY \"assimp\")\n    add_library(${ASSIMP_LIBRARY} SHARED IMPORTED)\n    set_target_properties(${ASSIMP_LIBRARY} PROPERTIES IMPORTED_LOCATION \"${ASSIMP_LIBRARY_DIRS}/libassimp.so\")\nendif(assimp_FOUND)\n\n# ZLIB\nfind_package( ZLIB REQUIRED )\nif(ZLIB_FOUND)\n    set(ZLIB_INCLUDE_DIRS ${ZLIB_INCLUDE_DIR})\nendif()\n\nif(ZLIB_FOUND AND NOT TARGET ZLIB::ZLIB)\n  if (CMAKE_BUILD_TYPE STREQUAL \"DEBUG\")\n    set( ZLIB_LIBRARY ${ZLIB_LIBRARY_DBG} )\n  else()\n    set( ZLIB_LIBRARY ${ZLIB_LIBRARY_RELEASE} )\n  endif()\n\n  add_library(ZLIB::ZLIB INTERFACE IMPORTED)\n  set_target_properties(ZLIB::ZLIB PROPERTIES\n    INTERFACE_INCLUDE_DIRECTORIES \"${ZLIB_INCLUDE_DIR}\"\n    INTERFACE_LINK_LIBRARIES \"${ZLIB_LIBRARY}\"\n  )\nendif()\n\n# Imath\nfind_package( Imath REQUIRED CONFIG )\n\n# OpenEXR\nfind_package( OpenEXR REQUIRED CONFIG )\n\n# OpenImageIO\nfind_package( OpenImageIO REQUIRED CONFIG )\nif (OpenImageIO_FOUND)\n    message( \"OpenImageIO found: ${OpenImageIO_FOUND}\" ) \n    message( \"OpenImageIO root: ${OpenImageIO_ROOT}\")   \n    message( \"OpenImageIO version: ${OpenImageIO_VERSION}\" )\n    message( \"OpenImageIO libs: ${OPENIMAGEIO_LIBRARIES}\")\nendif()\ninclude_directories( ${OPENIMAGEIO_INCLUDES} )\n\n# ImGui\ninclude_directories( ${PROJECT_SOURCE_DIR}/third_party/imgui )\n\n# GLFW \nfind_package(glfw3 CONFIG REQUIRED)\ninclude_directories(${GLFW_INCLUDE_DIRS})\nlink_libraries(${GLFW_LIBRARIES})\n\n# Use FindVulkan module added with CMAKE 3.7\nif (NOT CMAKE_VERSION VERSION_LESS 3.7.0)\n    message(STATUS \"Using module to find Vulkan\")\n    find_package(Vulkan)\nendif()\n\nif (NOT Vulkan_FOUND)\n    find_library(Vulkan_LIBRARY NAMES vulkan HINTS \"$ENV{VULKAN_SDK}/lib\" \"${CMAKE_SOURCE_DIR/libs/vulkan}\" REQUIRED)\n    if (Vulkan_LIBRARY)\n        set(Vulkan_FOUND OK)\n        message(\"Using bundled vulkan library version\")\n    endif()\nendif()\n\n# Use the package PkgConfig to detect GTK+ headers/library files\nFIND_PACKAGE(PkgConfig REQUIRED)\nPKG_CHECK_MODULES(GTK3 REQUIRED gtk+-3.0)\n\n# Setup CMake to use GTK+, tell the compiler where to look for headers\n# and to the linker where to look for libraries\ninclude_directories( ${GTK3_INCLUDE_DIRS} )\nlink_directories( ${GTK3_LIBRARY_DIRS} )\n\n# Add other flags to the compiler\nadd_definitions(${GTK3_CFLAGS_OTHER})\n\n# FreeImage\nfind_package( FreeImage REQUIRED )\ninclude_directories( ${FREEIMAGE_INCLUDE_DIRS} )\n\n# TIFF (required by FreeImage )\nfind_package( TIFF REQUIRED )\ninclude_directories( ${TIFF_INCLUDE_DIRS} )\n\n# Find Boost libs\nfind_package( Boost COMPONENTS system filesystem REQUIRED )\nmessage( \"Boost include dirs: \" ${Boost_INCLUDE_DIRS} )\ninclude_directories( ${Boost_INCLUDE_DIRS} )\n\n# We use Boost static libs\nadd_definitions( -DBOOST_LOG_DYN_LINK )\n\n# SLANG\nfind_library( SLANG_LIBRARY_DEBUG slang PATHS ${PROJECT_SOURCE_DIR}/third_party/slang/bin/linux-x64/debug )\n\nfind_library( SLANG_LIBRARY_RELEASE slang PATHS ${PROJECT_SOURCE_DIR}/third_party/slang/bin/linux-x64/release )\n\nset( SLANG_LIBRARY\n  debug ${SLANG_LIBRARY_DEBUG}\n  optimized ${SLANG_LIBRARY_RELEASE}\n)\n\nmessage (\"Using SLANG library: ${SLANG_LIBRARY}\")\n\nadd_definitions(-DPROJECT_DIR=\"${CMAKE_SOURCE_DIR}\")\nadd_definitions(-DFALCOR_DLL)\n\ntarget_link_libraries(\n    falcor_lib\n\n    glfw\n    avutil\n    avformat\n    swscale\n    stdc++fs\n    ${ASSIMP_LIBRARY}\n    ${SLANG_LIBRARY}\n    ${Boost_SYSTEM_LIBRARY}\n    ${Boost_FILESYSTEM_LIBRARY}\n    ${Python3_LIBRARIES}\n    ${Vulkan_LIBRARY}\n    ${GTK3_LIBRARIES}\n    ${FREEIMAGE_LIBRARIES}\n    ${TIFF_LIBRARIES}\n    ${ZLIB_LIBRARY}\n    OpenImageIO::OpenImageIO\n)\n\n# Copy/install all needed shaders\nset( SHADERS_OUTPUT_DIRECTORY ${CMAKE_RUNTIME_OUTPUT_DIRECTORY}/Shaders)\nfile(MAKE_DIRECTORY ${SHADERS_OUTPUT_DIRECTORY})\nfile(\n    COPY Utils Scene Experimental RenderGraph Testing\n    DESTINATION ${SHADERS_OUTPUT_DIRECTORY} \n    FILES_MATCHING PATTERN \"*.slan*\"\n)\n\n# Copy/install falcor data\nfile(\n    COPY Data\n    DESTINATION ${CMAKE_RUNTIME_OUTPUT_DIRECTORY} \n)\n\nif(UNIX)\n    install( \n        TARGETS falcor_lib\n        DESTINATION lib \n    )\n\n    # Install all needed shaders\n    install(\n        DIRECTORY Core Experimental Raytracing RenderGraph RenderPasses Scene Testing Utils\n        DESTINATION shaders\n        FILES_MATCHING PATTERN \"*.slan*\"\n    )\n\n    # Install falcor data\n    install(\n        DIRECTORY Data/Framework Data/LightProbes Data/NVIDIA\n        DESTINATION data\n    )\nendif()\n",
			"file": "src/Falcor/CMakeLists.txt",
			"file_size": 6070,
			"file_write_time": 133352805803079306,
			"settings":
			{
				"buffer_size": 6070,
				"encoding": "UTF-8",
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					3,
					1,
					"insert",
					{
						"characters": "ASSIMO"
					},
					"BwAAAIgGAAAAAAAAiQYAAAAAAAAAAAAAiQYAAAAAAACJBgAAAAAAAAYAAABhc3NpbXCJBgAAAAAAAIoGAAAAAAAAAAAAAIoGAAAAAAAAiwYAAAAAAAAAAAAAiwYAAAAAAACMBgAAAAAAAAAAAACMBgAAAAAAAI0GAAAAAAAAAAAAAI0GAAAAAAAAjgYAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAiAYAAAAAAACOBgAAAAAAAAAAAAAAAPC/"
				],
				[
					4,
					1,
					"left_delete",
					null,
					"AQAAAI0GAAAAAAAAjQYAAAAAAAABAAAATw",
					"AQAAAAAAAAABAAAAjgYAAAAAAACOBgAAAAAAAAAAAAAAAPC/"
				],
				[
					5,
					1,
					"insert",
					{
						"characters": "P"
					},
					"AQAAAI0GAAAAAAAAjgYAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAjQYAAAAAAACNBgAAAAAAAAAAAAAAAPC/"
				],
				[
					11,
					1,
					"paste",
					null,
					"AgAAAJwGAAAAAAAAogYAAAAAAAAAAAAAogYAAAAAAACiBgAAAAAAAAYAAABhc3NpbXA",
					"AQAAAAAAAAABAAAAnAYAAAAAAACiBgAAAAAAAAAAAAAAAPC/"
				]
			]
		},
		{
			"file": "CMakeLists.txt",
			"settings":
			{
				"buffer_size": 14857,
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					1,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAD7EQAAY21ha2VfbWluaW11bV9yZXF1aXJlZCggVkVSU0lPTiAzLjUgKQoKc2V0KENNQUtFX0NfQ09NUElMRVIgZ2NjLTcpCnNldChDTUFLRV9DWFhfQ09NUElMRVIgZysrLTcpCgpzZXQoIENNQUtFX0NYWF9TVEFOREFSRCAxNyApCnNldCggQ01BS0VfQ1hYX1NUQU5EQVJEX1JFUVVJUkVEIE9OICkKc2V0KCBDTUFLRV9DWFhfRVhURU5TSU9OUyBPTiApCgpzZXQoIFBST0pFQ1RfVkVSU0lPTl9NQUpPUiAwICkKc2V0KCBQUk9KRUNUX1ZFUlNJT05fTUlOT1IgMCApCnNldCggUFJPSkVDVF9WRVJTSU9OX1BBVENIIDAwMSApCgojIEJhc2ljIGluZm9ybWF0aW9uIGFib3V0IHByb2plY3QKc2V0KCBQUk9KRUNUX1ZFUlNJT04gJHtQUk9KRUNUX1ZFUlNJT05fTUFKT1J9LiR7UFJPSkVDVF9WRVJTSU9OX01JTk9SfS4ke1BST0pFQ1RfVkVSU0lPTl9QQVRDSH0gKQpwcm9qZWN0KCBGYWxjb3IgVkVSU0lPTiAke1BST0pFQ1RfVkVSU0lPTn0gKQoKIyBTZXQgdXAgaG91ZGluaSBoZGsgYW5kIGluc3RhbGxhdGlvbiBwYXRocwpzZXQoSE9VRElOSV9IT01FICIvb3B0L2hvdWRpbmkxOC41IikKc2V0KEhPVURJTklfVVNFUiAiJEVOVntIT01FfS9ob3VkaW5pMTguNSIpCgpsaXN0KCBBUFBFTkQgQ01BS0VfUFJFRklYX1BBVEggIiR7SE9VRElOSV9IT01FfS90b29sa2l0L2NtYWtlIiApCgoKIyBBZGQgZm9sZGVyIHdoZXJlIGFyZSBzdXBwb3J0aXZlIGZ1bmN0aW9ucwpzZXQoIENNQUtFX01PRFVMRV9QQVRIIAogICR7Q01BS0VfQ1VSUkVOVF9TT1VSQ0VfRElSfS9jbWFrZSAKICAke0NNQUtFX0NVUlJFTlRfU09VUkNFX0RJUn0vY21ha2UvbW9kdWxlcwogICR7Q01BS0VfQ1VSUkVOVF9TT1VSQ0VfRElSfS9jbWFrZS9kZWZhdWx0cwogICR7Q01BS0VfQ1VSUkVOVF9TT1VSQ0VfRElSfS9jbWFrZS9tYWNyb3MKICAke0NNQUtFX0NVUlJFTlRfU09VUkNFX0RJUn0vdGhpcmRfcGFydHkvZ2xtL2NtYWtlCiAgJHtDTUFLRV9JTlNUQUxMX1BSRUZJWH0vM3JkcGFydHkvbGliL2NtYWtlL2Fzc2ltcC01LjAKICAke0NNQUtFX0NVUlJFTlRfU09VUkNFX0RJUn0vdGhpcmRfcGFydHkvT3BlbkVYUi9jbWFrZQogICR7Q01BS0VfQ1VSUkVOVF9TT1VSQ0VfRElSfS90aGlyZF9wYXJ0eS9PcGVuSW1hZ2VJTy9zcmMvY21ha2UKKQpzZXQoIENNQUtFX0lOQ0xVREVfQ1VSUkVOVF9ESVIgT04gKQoKIyBTZXQgUFJPSkVDVF9WRVJTSU9OX1BBVENIIGFuZCBQUk9KRUNUX1ZFUlNJT05fVFdFQUsgdG8gMCBpZiBub3QgcHJlc2VudCwgbmVlZGVkIGJ5IGFkZF9wcm9qZWN0X21ldGEKI2ZpeF9wcm9qZWN0X3ZlcnNpb24oKQoKIyBTZXQgYWRkaXRpb25hbCBwcm9qZWN0IGluZm9ybWF0aW9uCnNldCggQ09NUEFOWSAiUGFyb3ZveiIgKQpzZXQoIENPUFlSSUdIVCAiQ29weXJpZ2h0IChjKSAyMDIwIFBhcm92b3oiICkKc2V0KCBJREVOVElGSUVSICJjb20ucGFyb3ZveiIgKQoKIyBTZXQgcHl0aG9uIHZpcnR1YWxlbnYgZm9yIFVTRApzZXQoIFBZVEhPTl9FWEVDVVRBQkxFICJweXRob24zLjciKQoKaWYoIEFQUExFICkKICBpZihQT0xJQ1kgQ01QMDA2OCkKICAgIGNtYWtlX3BvbGljeShTRVQgQ01QMDA2OCBORVcpICAjIENNYWtlIDMuOSs6IGBSUEFUSGAgc2V0dGluZ3Mgb24gbWFjT1MgZG8gbm90IGFmZmVjdCBgaW5zdGFsbF9uYW1lYC4KICBlbmRpZigpCmVuZGlmKCkKCmlmKEFQUExFKQogIHNldChDTUFLRV9NQUNPU1hfUlBBVEggMSkKICBzZXQoIENNQUtFX0lOU1RBTExfUFJFRklYICIvQXBwbGljYXRpb25zL0ZhbGNvci9GYWxjb3IiICkKZWxzZWlmKFVOSVgpCiAgc2V0KCBDTUFLRV9JTlNUQUxMX1BSRUZJWCAiL29wdC9sYXZhLyIgKQplbmRpZigpCgojIEhhbmRsZSBidWlsZCBtb2RlCmlmKCBOT1QgQ01BS0VfQlVJTERfVFlQRSApCiAgU0VUKCBDTUFLRV9CVUlMRF9UWVBFICJERUJVRyIgKQogICNTRVQoQ01BS0VfQlVJTERfVFlQRSAiUkVMRUFTRSIpCiAgI1NFVChDTUFLRV9CVUlMRF9UWVBFICJSRUxXSVRIREVCSU5GTyIpCiAgI1NFVChDTUFLRV9CVUlMRF9UWVBFICJNSU5TSVpFUkVMIikKICBtZXNzYWdlKCJDTUFLRV9CVUlMRF9UWVBFIG5vdCBzZXQhIFVzaW5nIGRlZmF1bHQgJHtDTUFLRV9CVUlMRF9UWVBFfSBtb2RlLiIpCmVuZGlmKCkKCiMgU3BlY2lmeSBidWlsZCBwYXRocwpzZXQoIEJVSUxEX1NVQkRJUiAiIikKc3RyaW5nKFRPTE9XRVIgJHtDTUFLRV9CVUlMRF9UWVBFfSBCVUlMRF9TVUJESVIpCgpzZXQoIENNQUtFX0FSQ0hJVkVfT1VUUFVUX0RJUkVDVE9SWSAke0NNQUtFX0JJTkFSWV9ESVJ9LyR7QlVJTERfU1VCRElSfS9saWIgKQpzZXQoIENNQUtFX0xJQlJBUllfT1VUUFVUX0RJUkVDVE9SWSAke0NNQUtFX0JJTkFSWV9ESVJ9LyR7QlVJTERfU1VCRElSfS9saWIgKQpzZXQoIENNQUtFX1JVTlRJTUVfT1VUUFVUX0RJUkVDVE9SWSAke0NNQUtFX0JJTkFSWV9ESVJ9LyR7QlVJTERfU1VCRElSfS9iaW4gKQoKYWRkX2RlZmluaXRpb25zKC1ETEFWQV9JTlNUQUxMX0RJUj0iJHtDTUFLRV9JTlNUQUxMX1BSRUZJWH0iKQoKaWYgKFdJTjMyIE9SIEFQUExFKQogIGlmIChDTUFLRV9JTlNUQUxMX1BSRUZJWF9JTklUSUFMSVpFRF9UT19ERUZBVUxUKQogICAgIyBXZSBkb24ndCB3YW50IHRvIGluc3RhbGwgaW4gZGVmYXVsdCBzeXN0ZW0gbG9jYXRpb24sIGluc3RhbGwgaXMgcmVhbGx5IGZvciB0aGUgU0RLLCBzbyBjYWxsIGl0IHRoYXQKICAgIHNldChDTUFLRV9JTlNUQUxMX1BSRUZJWCAiJHtQUk9KRUNUX0JJTkFSWV9ESVJ9L3NkayIgQ0FDSEUgUEFUSCAiRmFsY29yIGluc3RhbGwgcHJlZml4IiBGT1JDRSApCiAgZW5kaWYgKENNQUtFX0lOU1RBTExfUFJFRklYX0lOSVRJQUxJWkVEX1RPX0RFRkFVTFQpCmVuZGlmKFdJTjMyIE9SIEFQUExFKQoKCmlmIChDTUFLRV9CVUlMRF9UWVBFIFNUUkVRVUFMICJERUJVRyIpCiAgYWRkX2RlZmluaXRpb25zKC1EX0RFQlVHKQogIHNldChDTUFLRV9DWFhfRkxBR1NfREVCVUcgIiR7Q01BS0VfQ1hYX0ZMQUdTX0RFQlVHfSAtRERFQlVHIikKZW5kaWYgKCkKCgppZiAoIE1TVkMgKQogIEFERF9ERUZJTklUSU9OUygvVzMpCmVsc2VpZiAoIFVOSVggKSAjKENNQUtFX0NPTVBJTEVSX0lTX0dOVUNYWCkKICBBRERfREVGSU5JVElPTlMoLVdhbGwgLWZQSUMgLVdmYXRhbC1lcnJvcnMgLWczKSAjIC1Xbm8tcmVvcmRlciAtcGVkYW50aWMKZWxzZSAoKQogIE1FU1NBR0UoRkFUQUxfRVJST1IgIkNNYWtlTGlzdHMudHh0IGhhcyBub3QgYmVlbiB0ZXN0ZWQvd3JpdHRlbiBmb3IgeW91ciBjb21waWxlci4iKQplbmRpZiAoKQoKc2V0ICggRkFMQ09SX0lOQ0xVREVfUk9PVCAke0NNQUtFX0NVUlJFTlRfU09VUkNFX0RJUn0vc3JjICkKaW5jbHVkZV9kaXJlY3RvcmllcygKICAke0ZBTENPUl9JTkNMVURFX1JPT1R9CiAgJHtGQUxDT1JfSU5DTFVERV9ST09UfS9GYWxjb3IKICAke0ZBTENPUl9JTkNMVURFX1JPT1R9L0ZhbGNvci9Db3JlCiAgJHtGQUxDT1JfSU5DTFVERV9ST09UfS9FeHRlcm5hbHMKCiAgJHtDTUFLRV9JTlNUQUxMX1BSRUZJWH0vM3JkcGFydHkvaW5jbHVkZQoKICAke0NNQUtFX0NVUlJFTlRfU09VUkNFX0RJUn0vdGhpcmRfcGFydHkKICAke0NNQUtFX0NVUlJFTlRfU09VUkNFX0RJUn0vdGhpcmRfcGFydHkvcmFwaWRqc29uCiAgJHtDTUFLRV9DVVJSRU5UX1NPVVJDRV9ESVJ9L3NyYy9FeHRlcm5hbHMvR0xNCikKCiMgdXNlLCBpLmUuIGRvbid0IHNraXAgdGhlIGZ1bGwgUlBBVEggZm9yIHRoZSBidWlsZCB0cmVlCnNldChDTUFLRV9TS0lQX0JVSUxEX1JQQVRIIEZBTFNFKQoKIyB3aGVuIGJ1aWxkaW5nLCBkb24ndCB1c2UgdGhlIGluc3RhbGwgUlBBVEggYWxyZWFkeQojIChidXQgbGF0ZXIgb24gd2hlbiBpbnN0YWxsaW5nKQpzZXQoQ01BS0VfQlVJTERfV0lUSF9JTlNUQUxMX1JQQVRIIEZBTFNFKQoKc2V0KENNQUtFX0lOU1RBTExfUlBBVEggIiR7Q01BS0VfSU5TVEFMTF9QUkVGSVh9L2xpYiIpCgojIGFkZCB0aGUgYXV0b21hdGljYWxseSBkZXRlcm1pbmVkIHBhcnRzIG9mIHRoZSBSUEFUSAojIHdoaWNoIHBvaW50IHRvIGRpcmVjdG9yaWVzIG91dHNpZGUgdGhlIGJ1aWxkIHRyZWUgdG8gdGhlIGluc3RhbGwgUlBBVEgKc2V0KENNQUtFX0lOU1RBTExfUlBBVEhfVVNFX0xJTktfUEFUSCBUUlVFKQoKIy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQojIERvY3VtZW50YXRpb24KIy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKc2V0KCBGQUxDT1JfQlVJTERfTElCU19BU19GUkFNRVdPUktTIHRydWUgKQoKIyBOb3cgc2V0dXAgdGFyZ2V0cwoKIyB0aGlydCBwYXJ0eSBsaWJzCiNhZGRfc3ViZGlyZWN0b3J5KCB0aGlyZF9wYXJ0eSApCgojIE91ciBzdHVmZgphZGRfc3ViZGlyZWN0b3J5KCBzcmMgKQojYWRkX3N1YmRpcmVjdG9yeSggY29udHJpYiApCgoKI2luc3RhbGwoCiMgICAgRElSRUNUT1JZCiMgICAgJHtDTUFLRV9DVVJSRU5UX1NPVVJDRV9ESVJ9L3Rlc3RzCiMgICAgJHtDTUFLRV9DVVJSRU5UX1NPVVJDRV9ESVJ9L2NvbnRyaWIKIyAgICBERVNUSU5BVElPTiAke0NNQUtFX0lOU1RBTExfUFJFRklYfQojICAgIFVTRV9TT1VSQ0VfUEVSTUlTU0lPTlMKIyAgICBGSUxFU19NQVRDSElORyBQQVRURVJOICIqIgojKQAAAAAAAAAACToAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/"
				]
			]
		},
		{
			"contents": "#include <vector>\n#include <fstream>\n#include <iterator>\n#include <regex>\n#include <chrono>\n\n#include <stdio.h>\n\n#include <boost/spirit/include/support_istream_iterator.hpp>\n\n#include \"rapidjson/document.h\"\n\n#include \"reader_lsd.h\"\n#include \"grammar_lsd.h\"\n#include \"../reader_bgeo/bgeo/Bgeo.h\"\n\n#include \"lava_utils_lib/logging.h\"\n\nnamespace x3 = boost::spirit::x3;\n\nnamespace lava {\n\n\nReaderLSD::ReaderLSD(): ReaderBase(), mInitialized(false) { }\n\nReaderLSD::~ReaderLSD() {}\n\nvoid ReaderLSD::init(std::unique_ptr<RendererIface> pRendererInterface, bool echo) {\n    auto pSession = lsd::Session::create(std::move(pRendererInterface));\n    if (!pSession) {\n        LLOG_ERR << \"Error initializing session !!!\";\n        return;\n    }\n\n    if (!echo) {\n        // standard LSD visitor\n        mpVisitor = std::make_unique<lsd::Visitor>(pSession);\n    } else {\n        // LSD visitor with parsed console echo (for debug purposes)\n        mpVisitor = std::make_unique<lsd::EchoVisitor>(pSession);\n    }\n\n    mInitialized = true;\n\n    LLOG_DBG << \"ReaderLSD::init done\";\n}\n\nbool ReaderLSD::isInitialized() {\n    return mInitialized;\n}\n\nconst char *ReaderLSD::formatName() const{\n    return \"Lava LSD\";\n}\n\nbool ReaderLSD::checkExtension(const char *name) {\n    if (strcmp(name, \".lsd\")) return true;\n    return false;\n}\n\nvoid ReaderLSD::getFileExtensions(std::vector<std::string> &extensions) const{\n    extensions.insert(extensions.end(), _lsd_extensions.begin(), _lsd_extensions.end());\n}\n\nbool ReaderLSD::checkMagicNumber(unsigned magic) {\n  return true;\n}\n\nbool ReaderLSD::parseStream(std::istream& in) {\n    if (!isInitialized()) {\n        LLOG_ERR << \"Readed not initialized !!!\";\n        return false;\n    }\n\n    mpVisitor->setParserStream(in);\n\n    in.unsetf(std::ios_base::skipws);\n    \n    std::string str;\n    std::string::iterator begin, end;\n\n    bool eof = false;\n    while(!eof) {\n        if(!std::getline(in, str)) {\n            eof = true;\n            break;\n        }\n\n        begin = str.begin(); end = str.end();\n        \n        std::vector<lsd::ast::Command> commands; // ast tree\n        bool result = x3::phrase_parse(begin, end, lsd::parser::input, lsd::parser::skipper, commands); \n\n        if (!result) {\n            LLOG_ERR << \"Parsing LSD scene failed !!!\" << std::endl;\n            return false;\n        }\n\n        if (begin != end) {\n            LLOG_DBG << \"Remaining unparsed: \" << std::string(begin, end);\n        }\n\n        for (auto& cmd : commands) {\n            if (!mpVisitor->ignoreCommands()) {\n                //try {\n                    boost::apply_visitor(*mpVisitor, cmd);\n                //} catch (const std::runtime_error& re) {\n                //    LLOG_FTL << \"Runtime error: \" << re.what();\n                //    return false;\n                //} catch (const std::exception &exc) {\n                //    // catch anything thrown within try block that derives from std::exception\n                //    LLOG_FTL << exc.what();\n                //} catch (...) {\n                //    LLOG_FTL << \"Unknown error occured !!! __________________________\";\n                //    LLOG_FTL << str;\n                //    LLOG_FTL << \"____________________________________________________\";\n                //    return false;\n                //}\n            }\n        }\n    }\n\n    return true;\n}\n\n// factory methods\nstd::vector<std::string> *ReaderLSD::myExtensions() {\n    return &_lsd_extensions;\n}\n\nReaderBase::SharedPtr ReaderLSD::myConstructor() {\n    return ReaderBase::SharedPtr(new ReaderLSD());\n}\n\n}  // namespace lava",
			"file": "src/lava_lib/reader_lsd/reader_lsd.cpp",
			"file_size": 3564,
			"file_write_time": 133352798597227383,
			"settings":
			{
				"buffer_size": 3564,
				"encoding": "UTF-8",
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					3,
					1,
					"insert",
					{
						"characters": "\n\n"
					},
					"AgAAAHgJAAAAAAAAeQkAAAAAAAAAAAAAeQkAAAAAAAB6CQAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAB4CQAAAAAAAHgJAAAAAAAAAAAAAAAA8L8"
				],
				[
					5,
					1,
					"reindent",
					null,
					"AQAAAHkJAAAAAAAAhQkAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAB5CQAAAAAAAHkJAAAAAAAAAAAAAAAAAAA"
				],
				[
					6,
					1,
					"insert",
					{
						"characters": "if"
					},
					"AgAAAIUJAAAAAAAAhgkAAAAAAAAAAAAAhgkAAAAAAACHCQAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACFCQAAAAAAAIUJAAAAAAAAAAAAAAAA8L8"
				],
				[
					7,
					1,
					"insert_snippet",
					{
						"contents": "($0)"
					},
					"AQAAAIcJAAAAAAAAiQkAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACHCQAAAAAAAIcJAAAAAAAAAAAAAAAA8L8"
				],
				[
					8,
					1,
					"insert",
					{
						"characters": "m"
					},
					"AQAAAIgJAAAAAAAAiQkAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACICQAAAAAAAIgJAAAAAAAAAAAAAAAA8L8"
				],
				[
					9,
					1,
					"insert_completion",
					{
						"completion": "mpVisitor",
						"format": "text",
						"keep_prefix": false,
						"must_insert": false,
						"trigger": "mpVisitor"
					},
					"AgAAAIgJAAAAAAAAiAkAAAAAAAABAAAAbYgJAAAAAAAAkQkAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACJCQAAAAAAAIkJAAAAAAAAAAAAAAAA8L8"
				],
				[
					10,
					1,
					"insert",
					{
						"characters": "->failed"
					},
					"CAAAAJEJAAAAAAAAkgkAAAAAAAAAAAAAkgkAAAAAAACTCQAAAAAAAAAAAACTCQAAAAAAAJQJAAAAAAAAAAAAAJQJAAAAAAAAlQkAAAAAAAAAAAAAlQkAAAAAAACWCQAAAAAAAAAAAACWCQAAAAAAAJcJAAAAAAAAAAAAAJcJAAAAAAAAmAkAAAAAAAAAAAAAmAkAAAAAAACZCQAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACRCQAAAAAAAJEJAAAAAAAAAAAAAAAA8L8"
				],
				[
					11,
					1,
					"insert_snippet",
					{
						"contents": "($0)"
					},
					"AQAAAJkJAAAAAAAAmwkAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACZCQAAAAAAAJkJAAAAAAAAAAAAAAAA8L8"
				],
				[
					13,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAAJwJAAAAAAAAnQkAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACcCQAAAAAAAJwJAAAAAAAAAAAAAAAA8L8"
				],
				[
					14,
					1,
					"insert_snippet",
					{
						"contents": "{$0}"
					},
					"AQAAAJ0JAAAAAAAAnwkAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACdCQAAAAAAAJ0JAAAAAAAAAAAAAAAA8L8"
				],
				[
					15,
					1,
					"run_macro_file",
					{
						"file": "res://Packages/Default/Add Line in Braces.sublime-macro"
					},
					"BgAAAJ4JAAAAAAAAnwkAAAAAAAAAAAAAnwkAAAAAAACrCQAAAAAAAAAAAACrCQAAAAAAAKwJAAAAAAAAAAAAAKwJAAAAAAAAuAkAAAAAAAAAAAAAnwkAAAAAAACfCQAAAAAAAAwAAAAgICAgICAgICAgICCfCQAAAAAAAK8JAAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACeCQAAAAAAAJ4JAAAAAAAAAAAAAAAA8L8"
				],
				[
					16,
					1,
					"insert",
					{
						"characters": "ret"
					},
					"AwAAAK8JAAAAAAAAsAkAAAAAAAAAAAAAsAkAAAAAAACxCQAAAAAAAAAAAACxCQAAAAAAALIJAAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACvCQAAAAAAAK8JAAAAAAAAAAAAAAAA8L8"
				],
				[
					17,
					1,
					"insert_completion",
					{
						"completion": "return",
						"format": "text",
						"keep_prefix": false,
						"must_insert": false,
						"trigger": "return"
					},
					"AgAAAK8JAAAAAAAArwkAAAAAAAADAAAAcmV0rwkAAAAAAAC1CQAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACyCQAAAAAAALIJAAAAAAAAAAAAAAAA8L8"
				],
				[
					18,
					1,
					"insert",
					{
						"characters": " f"
					},
					"AgAAALUJAAAAAAAAtgkAAAAAAAAAAAAAtgkAAAAAAAC3CQAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAC1CQAAAAAAALUJAAAAAAAAAAAAAAAA8L8"
				],
				[
					19,
					1,
					"insert_completion",
					{
						"completion": "false",
						"format": "text",
						"keep_prefix": false,
						"must_insert": false,
						"trigger": "false"
					},
					"AgAAALYJAAAAAAAAtgkAAAAAAAABAAAAZrYJAAAAAAAAuwkAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAC3CQAAAAAAALcJAAAAAAAAAAAAAAAA8L8"
				],
				[
					20,
					1,
					"insert",
					{
						"characters": ";"
					},
					"AQAAALsJAAAAAAAAvAkAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAC7CQAAAAAAALsJAAAAAAAAAAAAAAAA8L8"
				],
				[
					1,
					1,
					"revert",
					null,
					"AwAAAAAAAAAAAAAAAAAAAAAAAABDCwAAI2luY2x1ZGUgPHZlY3Rvcj4KI2luY2x1ZGUgPGZzdHJlYW0+CiNpbmNsdWRlIDxpdGVyYXRvcj4KI2luY2x1ZGUgPHJlZ2V4PgojaW5jbHVkZSA8Y2hyb25vPgoKI2luY2x1ZGUgPHN0ZGlvLmg+CgojaW5jbHVkZSA8Ym9vc3Qvc3Bpcml0L2luY2x1ZGUvc3VwcG9ydF9pc3RyZWFtX2l0ZXJhdG9yLmhwcD4KCiNpbmNsdWRlICJyYXBpZGpzb24vZG9jdW1lbnQuaCIKCiNpbmNsdWRlICJyZWFkZXJfbHNkLmgiCiNpbmNsdWRlICJncmFtbWFyX2xzZC5oIgojaW5jbHVkZSAiLi4vcmVhZGVyX2JnZW8vYmdlby9CZ2VvLmgiCgojaW5jbHVkZSAibGF2YV91dGlsc19saWIvbG9nZ2luZy5oIgoKbmFtZXNwYWNlIHgzID0gYm9vc3Q6OnNwaXJpdDo6eDM7CgpuYW1lc3BhY2UgbGF2YSB7CgoKUmVhZGVyTFNEOjpSZWFkZXJMU0QoKTogUmVhZGVyQmFzZSgpLCBtSW5pdGlhbGl6ZWQoZmFsc2UpIHsgfQoKUmVhZGVyTFNEOjp+UmVhZGVyTFNEKCkge30KCnZvaWQgUmVhZGVyTFNEOjppbml0KHN0ZDo6c2hhcmVkX3B0cjxSZW5kZXJlcj4gcFJlbmRlcmVyLCBib29sIGVjaG8pIHsKICAgIGF1dG8gcFNlc3Npb24gPSBsc2Q6OlNlc3Npb246OmNyZWF0ZShwUmVuZGVyZXIpOwogICAgaWYgKCFwU2Vzc2lvbikgewogICAgICAgIExMT0dfRVJSIDw8ICJFcnJvciBpbml0aWFsaXppbmcgc2Vzc2lvbiAhISEiOwogICAgICAgIHJldHVybjsKICAgIH0KCiAgICBtRWNob0lucHV0ID0gZWNobzsKCiAgICBtcFZpc2l0b3IgPSBzdGQ6Om1ha2VfdW5pcXVlPGxzZDo6VmlzaXRvcj4ocFNlc3Npb24pOwogICAgbUluaXRpYWxpemVkID0gdHJ1ZTsKCiAgICBMTE9HX0RCRyA8PCAiUmVhZGVyTFNEOjppbml0IGRvbmUiOwp9Cgpib29sIFJlYWRlckxTRDo6aXNJbml0aWFsaXplZCgpIHsKICAgIHJldHVybiBtSW5pdGlhbGl6ZWQ7Cn0KCmNvbnN0IGNoYXIgKlJlYWRlckxTRDo6Zm9ybWF0TmFtZSgpIGNvbnN0ewogICAgcmV0dXJuICJMYXZhIExTRCI7Cn0KCmJvb2wgUmVhZGVyTFNEOjpjaGVja0V4dGVuc2lvbihjb25zdCBjaGFyICpuYW1lKSB7CiAgICBpZiAoc3RyY21wKG5hbWUsICIubHNkIikpIHJldHVybiB0cnVlOwogICAgcmV0dXJuIGZhbHNlOwp9Cgp2b2lkIFJlYWRlckxTRDo6Z2V0RmlsZUV4dGVuc2lvbnMoc3RkOjp2ZWN0b3I8c3RkOjpzdHJpbmc+ICZleHRlbnNpb25zKSBjb25zdHsKICAgIGV4dGVuc2lvbnMuaW5zZXJ0KGV4dGVuc2lvbnMuZW5kKCksIF9sc2RfZXh0ZW5zaW9ucy5iZWdpbigpLCBfbHNkX2V4dGVuc2lvbnMuZW5kKCkpOwp9Cgpib29sIFJlYWRlckxTRDo6Y2hlY2tNYWdpY051bWJlcih1bnNpZ25lZCBtYWdpYykgewogIHJldHVybiB0cnVlOwp9Cgpib29sIFJlYWRlckxTRDo6cGFyc2VTdHJlYW0oc3RkOjppc3RyZWFtJiBpbikgewogICAgaWYgKCFpc0luaXRpYWxpemVkKCkpIHsKICAgICAgICBMTE9HX0VSUiA8PCAiUmVhZGVkIG5vdCBpbml0aWFsaXplZCAhISEiOwogICAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KCiAgICBtcFZpc2l0b3ItPnNldFBhcnNlclN0cmVhbShpbik7CgogICAgaW4udW5zZXRmKHN0ZDo6aW9zX2Jhc2U6OnNraXB3cyk7CiAgICAKICAgIHN0ZDo6c3RyaW5nIHN0cjsKICAgIHN0ZDo6c3RyaW5nOjppdGVyYXRvciBiZWdpbiwgZW5kOwoKICAgIGJvb2wgZW9mID0gZmFsc2U7CiAgICB3aGlsZSghZW9mKSB7CiAgICAgICAgaWYoIXN0ZDo6Z2V0bGluZShpbiwgc3RyKSkgewogICAgICAgICAgICBlb2YgPSB0cnVlOwogICAgICAgICAgICBicmVhazsKICAgICAgICB9CgogICAgICAgIGlmKG1FY2hvSW5wdXQpIHN0ZDo6Y291dCA8PCBzdHI7CgogICAgICAgIGJlZ2luID0gc3RyLmJlZ2luKCk7IGVuZCA9IHN0ci5lbmQoKTsKICAgICAgICAKICAgICAgICBzdGQ6OnZlY3Rvcjxsc2Q6OmFzdDo6Q29tbWFuZD4gY29tbWFuZHM7IC8vIGFzdCB0cmVlCiAgICAgICAgYm9vbCByZXN1bHQgPSB4Mzo6cGhyYXNlX3BhcnNlKGJlZ2luLCBlbmQsIGxzZDo6cGFyc2VyOjppbnB1dCwgbHNkOjpwYXJzZXI6OnNraXBwZXIsIGNvbW1hbmRzKTsgCgogICAgICAgIGlmICghcmVzdWx0KSB7CiAgICAgICAgICAgIExMT0dfRVJSIDw8ICJQYXJzaW5nIExTRCBzY2VuZSBmYWlsZWQgISEhIiA8PCBzdGQ6OmVuZGw7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CgogICAgICAgIGlmIChiZWdpbiAhPSBlbmQpIHsKICAgICAgICAgICAgTExPR19EQkcgPDwgIlJlbWFpbmluZyB1bnBhcnNlZDogIiA8PCBzdGQ6OnN0cmluZyhiZWdpbiwgZW5kKTsKICAgICAgICB9CgogICAgICAgIGZvciAoYXV0byYgY21kIDogY29tbWFuZHMpIHsKICAgICAgICAgICAgaWYgKCFtcFZpc2l0b3ItPmlnbm9yZUNvbW1hbmRzKCkpIHsKICAgICAgICAgICAgICAgIGJvb3N0OjphcHBseV92aXNpdG9yKCptcFZpc2l0b3IsIGNtZCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmKG1wVmlzaXRvci0+ZmFpbGVkKCkpIHsKICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYobXBWaXNpdG9yLT5yZWFkeVRvUXVpdCgpKSB7CiAgICAgICAgICAgICAgICBlb2YgPSB0cnVlOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0gCiAgICAgICAgfQogICAgfQogICAgcmV0dXJuIHRydWU7Cn0KCi8vIGZhY3RvcnkgbWV0aG9kcwpzdGQ6OnZlY3RvcjxzdGQ6OnN0cmluZz4gKlJlYWRlckxTRDo6bXlFeHRlbnNpb25zKCkgewogICAgcmV0dXJuICZfbHNkX2V4dGVuc2lvbnM7Cn0KClJlYWRlckJhc2U6OlNoYXJlZFB0ciBSZWFkZXJMU0Q6Om15Q29uc3RydWN0b3IoKSB7CiAgICByZXR1cm4gUmVhZGVyQmFzZTo6U2hhcmVkUHRyKG5ldyBSZWFkZXJMU0QoKSk7Cn0KCn0gIC8vIG5hbWVzcGFjZSBsYXZhAAAAAAAAAADsDQAAAAAAAAAAAAAAAAAAAAAAAOwNAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAC8CQAAAAAAALwJAAAAAAAAAAAAAAAA8L8"
				]
			]
		},
		{
			"contents": "#ifndef SRC_LAVA_LIB_READER_LSD_LSD_VISITOR_H_\n#define SRC_LAVA_LIB_READER_LSD_LSD_VISITOR_H_\n\n#include <array>\n#include <memory>\n#include <string>\n#include <algorithm>\n#include <iostream>\n#include <variant>\n\n#include \"grammar_lsd.h\"\n#include \"../reader_bgeo/bgeo/Bgeo.h\"\n\nnamespace lava { \n\nnamespace lsd { \n\nclass Session;\n\nstruct Visitor: public boost::static_visitor<> {\n public:\n    Visitor(std::unique_ptr<Session>& pSession);\n\n    virtual void operator()(ast::NoValue const& c) const {};\n    virtual void operator()(ast::ifthen const& c);\n    virtual void operator()(ast::endif const& c);\n    virtual void operator()(ast::setenv const& c) const;\n    virtual void operator()(ast::cmd_image const& c) const;\n    virtual void operator()(ast::cmd_iprmode const& c) const;\n    virtual void operator()(ast::cmd_end const& c) const;\n    virtual void operator()(ast::cmd_quit const& c) const;\n    virtual void operator()(ast::cmd_start const& c) const;\n    virtual void operator()(ast::cmd_time const& c) const;\n    virtual void operator()(ast::cmd_detail const& c);\n    virtual void operator()(ast::cmd_version const& c) const;\n    virtual void operator()(ast::cmd_config const& c) const;\n    virtual void operator()(ast::cmd_defaults const& c) const;\n    virtual void operator()(ast::cmd_transform const& c) const;\n    virtual void operator()(ast::cmd_mtransform const& c) const;\n    virtual void operator()(ast::cmd_geometry const& c) const;\n    virtual void operator()(ast::cmd_property const& c) const;\n    virtual void operator()(ast::cmd_deviceoption const& c) const;\n    virtual void operator()(ast::cmd_declare const& c) const;\n    virtual void operator()(ast::cmd_raytrace const& c) const;\n    virtual void operator()(ast::cmd_reset const& c) const;\n    virtual void operator()(ast::ray_embeddedfile const& c) const;\n\n    void setParserStream(std::istream& in);\n\n    bool ignoreCommands() { return mIgnoreCommands; };\n\n protected:\n    std::unique_ptr<Session> mpSession;\n\n private:\n    std::istream*   mpParserStream; // used for inline bgeo reading\n    bool mIgnoreCommands;\n};\n\n\nstruct EchoVisitor: public Visitor {\n public:\n    EchoVisitor(std::unique_ptr<Session>& pSession);\n    EchoVisitor(std::unique_ptr<Session>& pSession, std::ostream& os);\n\n    void operator()(ast::NoValue const& c) const override {};\n    void operator()(ast::ifthen const& c) override;\n    void operator()(ast::endif const& c) override;\n    void operator()(ast::setenv const& c) const override;\n    void operator()(ast::cmd_image const& c) const override;\n    void operator()(ast::cmd_iprmode const& c) const override;\n    void operator()(ast::cmd_end const& c) const override;\n    void operator()(ast::cmd_quit const& c) const override;\n    void operator()(ast::cmd_start const& c) const override;\n    void operator()(ast::cmd_time const& c) const override;\n    void operator()(ast::cmd_detail const& c) override;\n    void operator()(ast::cmd_version const& c) const override;\n    void operator()(ast::cmd_config const& c) const override;\n    void operator()(ast::cmd_defaults const& c) const override;\n    void operator()(ast::cmd_transform const& c) const override;\n    void operator()(ast::cmd_mtransform const& c) const override;\n    void operator()(ast::cmd_geometry const& c) const override;\n    void operator()(ast::cmd_property const& c) const override;\n    void operator()(ast::cmd_deviceoption const& c) const override;\n    void operator()(ast::cmd_declare const& c) const override;\n    void operator()(ast::cmd_raytrace const& c) const override;\n    void operator()(ast::cmd_reset const& c) const override;\n    void operator()(ast::ray_embeddedfile const& c) const override;\n\n //private:\n    void operator()(std::vector<PropValue> const& v) const;\n    void operator()(int v) const;\n    void operator()(double v) const;\n    void operator()(std::string const& v) const;\n    void operator()(Int2 const& v) const;\n    void operator()(Int3 const& v) const;\n    void operator()(Int4 const& v) const;\n    void operator()(Vector2 const& v) const;\n    void operator()(Vector3 const& v) const;\n    void operator()(Vector4 const& v) const;\n    void operator()(PropValue const& v) const;\n\n private:\n    std::ostream& _os;\n};\n\n}  // namespace lsd\n\n}  // namespace lava\n\n#endif  // SRC_LAVA_LIB_READER_LSD_LSD_VISITOR_H_",
			"file": "src/lava_lib/reader_lsd/visitor.h",
			"file_size": 4307,
			"file_write_time": 133352798597267383,
			"settings":
			{
				"buffer_size": 4307,
				"encoding": "UTF-8",
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					6,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AgAAAEMIAAAAAAAARAgAAAAAAAAAAAAARAgAAAAAAABICAAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABDCAAAAAAAAEMIAAAAAAAAAAAAAAAA8L8"
				],
				[
					7,
					1,
					"paste",
					null,
					"AQAAAEgIAAAAAAAAeggAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABICAAAAAAAAEgIAAAAAAAAAAAAAAAA8L8"
				],
				[
					10,
					1,
					"insert",
					{
						"characters": "faile"
					},
					"BgAAAFQIAAAAAAAAVQgAAAAAAAAAAAAAVQgAAAAAAABVCAAAAAAAAAsAAAByZWFkeVRvUXVpdFUIAAAAAAAAVggAAAAAAAAAAAAAVggAAAAAAABXCAAAAAAAAAAAAABXCAAAAAAAAFgIAAAAAAAAAAAAAFgIAAAAAAAAWQgAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABUCAAAAAAAAF8IAAAAAAAAAAAAAAAA8L8"
				],
				[
					11,
					1,
					"insert_completion",
					{
						"completion": "failed",
						"format": "text",
						"keep_prefix": false,
						"must_insert": false,
						"trigger": "failed"
					},
					"AgAAAFQIAAAAAAAAVAgAAAAAAAAFAAAAZmFpbGVUCAAAAAAAAFoIAAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABZCAAAAAAAAFkIAAAAAAAAAAAAAAAA8L8"
				],
				[
					13,
					1,
					"insert",
					{
						"characters": "Failed"
					},
					"BgAAAG0IAAAAAAAAbggAAAAAAAAAAAAAbggAAAAAAABvCAAAAAAAAAAAAABvCAAAAAAAAHAIAAAAAAAAAAAAAHAIAAAAAAAAcQgAAAAAAAAAAAAAcQgAAAAAAAByCAAAAAAAAAAAAAByCAAAAAAAAHMIAAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABtCAAAAAAAAG0IAAAAAAAAAAAAAAAA8L8"
				],
				[
					14,
					4,
					"right_delete",
					null,
					"BAAAAHMIAAAAAAAAcwgAAAAAAAABAAAAUXMIAAAAAAAAcwgAAAAAAAABAAAAdXMIAAAAAAAAcwgAAAAAAAABAAAAaXMIAAAAAAAAcwgAAAAAAAABAAAAdA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABzCAAAAAAAAHMIAAAAAAAAAAAAAAAA8L8"
				],
				[
					16,
					1,
					"insert",
					{
						"characters": "\nbo"
					},
					"BAAAACcJAAAAAAAAKAkAAAAAAAAAAAAAKAkAAAAAAAAsCQAAAAAAAAAAAAAsCQAAAAAAAC0JAAAAAAAAAAAAAC0JAAAAAAAALgkAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAnCQAAAAAAACcJAAAAAAAAAAAAAABwekA"
				],
				[
					17,
					1,
					"insert_completion",
					{
						"completion": "bool",
						"format": "text",
						"keep_prefix": false,
						"must_insert": false,
						"trigger": "bool"
					},
					"AgAAACwJAAAAAAAALAkAAAAAAAACAAAAYm8sCQAAAAAAADAJAAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAuCQAAAAAAAC4JAAAAAAAAAAAAAAAA8L8"
				],
				[
					18,
					1,
					"insert",
					{
						"characters": " mF"
					},
					"AwAAADAJAAAAAAAAMQkAAAAAAAAAAAAAMQkAAAAAAAAyCQAAAAAAAAAAAAAyCQAAAAAAADMJAAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAwCQAAAAAAADAJAAAAAAAAAAAAAAAA8L8"
				],
				[
					19,
					1,
					"insert_completion",
					{
						"completion": "mFailed",
						"format": "text",
						"keep_prefix": false,
						"must_insert": false,
						"trigger": "mFailed"
					},
					"AgAAADEJAAAAAAAAMQkAAAAAAAACAAAAbUYxCQAAAAAAADgJAAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAzCQAAAAAAADMJAAAAAAAAAAAAAAAA8L8"
				],
				[
					20,
					1,
					"insert",
					{
						"characters": " ="
					},
					"AgAAADgJAAAAAAAAOQkAAAAAAAAAAAAAOQkAAAAAAAA6CQAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAA4CQAAAAAAADgJAAAAAAAAAAAAAAAA8L8"
				],
				[
					21,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAADoJAAAAAAAAOwkAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAA6CQAAAAAAADoJAAAAAAAAAAAAAAAA8L8"
				],
				[
					22,
					1,
					"insert_completion",
					{
						"completion": "false",
						"format": "text",
						"keep_prefix": false,
						"must_insert": true,
						"trigger": "false"
					},
					"AQAAADsJAAAAAAAAQAkAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAA7CQAAAAAAADsJAAAAAAAAAAAAAAAA8L8"
				],
				[
					23,
					1,
					"insert",
					{
						"characters": ";"
					},
					"AQAAAEAJAAAAAAAAQQkAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABACQAAAAAAAEAJAAAAAAAAAAAAAAAA8L8"
				],
				[
					32,
					1,
					"insert",
					{
						"characters": "mpSes"
					},
					"BgAAAGwIAAAAAAAAbQgAAAAAAAAAAAAAbQgAAAAAAABtCAAAAAAAAAcAAABtRmFpbGVkbQgAAAAAAABuCAAAAAAAAAAAAABuCAAAAAAAAG8IAAAAAAAAAAAAAG8IAAAAAAAAcAgAAAAAAAAAAAAAcAgAAAAAAABxCAAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABsCAAAAAAAAHMIAAAAAAAAAAAAAAAA8L8"
				],
				[
					33,
					1,
					"insert_completion",
					{
						"completion": "mpSession",
						"format": "text",
						"keep_prefix": false,
						"must_insert": false,
						"trigger": "mpSession"
					},
					"AgAAAGwIAAAAAAAAbAgAAAAAAAAFAAAAbXBTZXNsCAAAAAAAAHUIAAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABxCAAAAAAAAHEIAAAAAAAAAAAAAAAA8L8"
				],
				[
					34,
					1,
					"insert",
					{
						"characters": " ?"
					},
					"AgAAAHUIAAAAAAAAdggAAAAAAAAAAAAAdggAAAAAAAB3CAAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAB1CAAAAAAAAHUIAAAAAAAAAAAAAAAA8L8"
				],
				[
					35,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAAHcIAAAAAAAAeAgAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAB3CAAAAAAAAHcIAAAAAAAAAAAAAAAA8L8"
				],
				[
					36,
					1,
					"insert",
					{
						"characters": "no"
					},
					"AgAAAHgIAAAAAAAAeQgAAAAAAAAAAAAAeQgAAAAAAAB6CAAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAB4CAAAAAAAAHgIAAAAAAAAAAAAAAAA8L8"
				],
				[
					37,
					2,
					"left_delete",
					null,
					"AgAAAHkIAAAAAAAAeQgAAAAAAAABAAAAb3gIAAAAAAAAeAgAAAAAAAABAAAAbg",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAB6CAAAAAAAAHoIAAAAAAAAAAAAAAAA8L8"
				],
				[
					38,
					1,
					"insert",
					{
						"characters": "mpSe"
					},
					"BAAAAHgIAAAAAAAAeQgAAAAAAAAAAAAAeQgAAAAAAAB6CAAAAAAAAAAAAAB6CAAAAAAAAHsIAAAAAAAAAAAAAHsIAAAAAAAAfAgAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAB4CAAAAAAAAHgIAAAAAAAAAAAAAAAA8L8"
				],
				[
					39,
					1,
					"insert_completion",
					{
						"completion": "mpSession",
						"format": "text",
						"keep_prefix": false,
						"must_insert": false,
						"trigger": "mpSession"
					},
					"AgAAAHgIAAAAAAAAeAgAAAAAAAAEAAAAbXBTZXgIAAAAAAAAgQgAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAB8CAAAAAAAAHwIAAAAAAAAAAAAAAAA8L8"
				],
				[
					40,
					1,
					"insert",
					{
						"characters": "-<>"
					},
					"AwAAAIEIAAAAAAAAgggAAAAAAAAAAAAAgggAAAAAAACDCAAAAAAAAAAAAACDCAAAAAAAAIQIAAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACBCAAAAAAAAIEIAAAAAAAAAAAAAAAA8L8"
				],
				[
					41,
					2,
					"left_delete",
					null,
					"AgAAAIMIAAAAAAAAgwgAAAAAAAABAAAAPoIIAAAAAAAAgggAAAAAAAABAAAAPA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACECAAAAAAAAIQIAAAAAAAAAAAAAAAA8L8"
				],
				[
					42,
					1,
					"insert",
					{
						"characters": ">faile"
					},
					"BgAAAIIIAAAAAAAAgwgAAAAAAAAAAAAAgwgAAAAAAACECAAAAAAAAAAAAACECAAAAAAAAIUIAAAAAAAAAAAAAIUIAAAAAAAAhggAAAAAAAAAAAAAhggAAAAAAACHCAAAAAAAAAAAAACHCAAAAAAAAIgIAAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACCCAAAAAAAAIIIAAAAAAAAAAAAAAAA8L8"
				],
				[
					43,
					1,
					"insert_completion",
					{
						"completion": "failed",
						"format": "text",
						"keep_prefix": false,
						"must_insert": false,
						"trigger": "failed"
					},
					"AgAAAIMIAAAAAAAAgwgAAAAAAAAFAAAAZmFpbGWDCAAAAAAAAIkIAAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACICAAAAAAAAIgIAAAAAAAAAAAAAAAA8L8"
				],
				[
					44,
					1,
					"insert_snippet",
					{
						"contents": "($0)"
					},
					"AQAAAIkIAAAAAAAAiwgAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACJCAAAAAAAAIkIAAAAAAAAAAAAAAAA8L8"
				],
				[
					46,
					1,
					"insert",
					{
						"characters": " :"
					},
					"AgAAAIsIAAAAAAAAjAgAAAAAAAAAAAAAjAgAAAAAAACNCAAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACLCAAAAAAAAIsIAAAAAAAAAAAAAAAA8L8"
				],
				[
					47,
					1,
					"insert",
					{
						"characters": " fa"
					},
					"AwAAAI0IAAAAAAAAjggAAAAAAAAAAAAAjggAAAAAAACPCAAAAAAAAAAAAACPCAAAAAAAAJAIAAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACNCAAAAAAAAI0IAAAAAAAAAAAAAAAA8L8"
				],
				[
					48,
					1,
					"insert_completion",
					{
						"completion": "false",
						"format": "text",
						"keep_prefix": false,
						"must_insert": false,
						"trigger": "false"
					},
					"AgAAAI4IAAAAAAAAjggAAAAAAAACAAAAZmGOCAAAAAAAAJMIAAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACQCAAAAAAAAJAIAAAAAAAAAAAAAAAA8L8"
				],
				[
					51,
					2,
					"left_delete",
					null,
					"AgAAAEgJAAAAAAAASAkAAAAAAAAZAAAAICAgIGJvb2wgbUZhaWxlZCA9IGZhbHNlO0cJAAAAAAAARwkAAAAAAAABAAAACg",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABhCQAAAAAAAEgJAAAAAAAAAAAAAAAA8L8"
				],
				[
					63,
					1,
					"right_delete",
					null,
					"AQAAAGIIAAAAAAAAYggAAAAAAAA0AAAAIHsgcmV0dXJuIG1wU2Vzc2lvbiA/IG1wU2Vzc2lvbi0+ZmFpbGVkKCkgOiBmYWxzZTsgfQ",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABiCAAAAAAAAJYIAAAAAAAAAAAAAAAA8L8"
				],
				[
					66,
					7,
					"right_delete",
					null,
					"BwAAAEgIAAAAAAAASAgAAAAAAAABAAAAaUgIAAAAAAAASAgAAAAAAAABAAAAbkgIAAAAAAAASAgAAAAAAAABAAAAbEgIAAAAAAAASAgAAAAAAAABAAAAaUgIAAAAAAAASAgAAAAAAAABAAAAbkgIAAAAAAAASAgAAAAAAAABAAAAZUgIAAAAAAAASAgAAAAAAAABAAAAIA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABICAAAAAAAAEgIAAAAAAAAAAAAAAAA8L8"
				],
				[
					68,
					7,
					"right_delete",
					null,
					"BwAAABEIAAAAAAAAEQgAAAAAAAABAAAAaREIAAAAAAAAEQgAAAAAAAABAAAAbhEIAAAAAAAAEQgAAAAAAAABAAAAbBEIAAAAAAAAEQgAAAAAAAABAAAAaREIAAAAAAAAEQgAAAAAAAABAAAAbhEIAAAAAAAAEQgAAAAAAAABAAAAZREIAAAAAAAAEQgAAAAAAAABAAAAIA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAARCAAAAAAAABEIAAAAAAAAAAAAAAAAQkA"
				],
				[
					70,
					7,
					"right_delete",
					null,
					"BwAAAM0HAAAAAAAAzQcAAAAAAAABAAAAac0HAAAAAAAAzQcAAAAAAAABAAAAbs0HAAAAAAAAzQcAAAAAAAABAAAAbM0HAAAAAAAAzQcAAAAAAAABAAAAac0HAAAAAAAAzQcAAAAAAAABAAAAbs0HAAAAAAAAzQcAAAAAAAABAAAAZc0HAAAAAAAAzQcAAAAAAAABAAAAIA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADNBwAAAAAAAM0HAAAAAAAAAAAAAAAAQkA"
				],
				[
					1,
					1,
					"revert",
					null,
					"AwAAAAAAAAAAAAAAAAAAAAAAAAApEgAAI2lmbmRlZiBTUkNfTEFWQV9MSUJfUkVBREVSX0xTRF9MU0RfVklTSVRPUl9IXwojZGVmaW5lIFNSQ19MQVZBX0xJQl9SRUFERVJfTFNEX0xTRF9WSVNJVE9SX0hfCgojaW5jbHVkZSA8YXJyYXk+CiNpbmNsdWRlIDxtZW1vcnk+CiNpbmNsdWRlIDxzdHJpbmc+CiNpbmNsdWRlIDxhbGdvcml0aG0+CiNpbmNsdWRlIDxpb3N0cmVhbT4KI2luY2x1ZGUgPHZhcmlhbnQ+CgojaW5jbHVkZSAiZ3JhbW1hcl9sc2QuaCIKI2luY2x1ZGUgIi4uL3JlYWRlcl9iZ2VvL2JnZW8vQmdlby5oIgoKbmFtZXNwYWNlIGxhdmEgeyAKCm5hbWVzcGFjZSBsc2QgeyAKCmNsYXNzIFNlc3Npb247CgpzdHJ1Y3QgVmlzaXRvcjogcHVibGljIGJvb3N0OjpzdGF0aWNfdmlzaXRvcjw+IHsKICBwdWJsaWM6CiAgICBWaXNpdG9yKHN0ZDo6dW5pcXVlX3B0cjxTZXNzaW9uPiYgcFNlc3Npb24pOwoKICAgIHZpcnR1YWwgdm9pZCBvcGVyYXRvcigpKGFzdDo6Tm9WYWx1ZSBjb25zdCYgYykgY29uc3Qge307CiAgICB2aXJ0dWFsIHZvaWQgb3BlcmF0b3IoKShhc3Q6OmlmdGhlbiBjb25zdCYgYyk7CiAgICB2aXJ0dWFsIHZvaWQgb3BlcmF0b3IoKShhc3Q6OmVuZGlmIGNvbnN0JiBjKTsKICAgIHZpcnR1YWwgdm9pZCBvcGVyYXRvcigpKGFzdDo6c2V0ZW52IGNvbnN0JiBjKSBjb25zdDsKICAgIHZpcnR1YWwgdm9pZCBvcGVyYXRvcigpKGFzdDo6Y21kX2ltYWdlIGNvbnN0JiBjKSBjb25zdDsKICAgIHZpcnR1YWwgdm9pZCBvcGVyYXRvcigpKGFzdDo6Y21kX2lwcm1vZGUgY29uc3QmIGMpIGNvbnN0OwogICAgdmlydHVhbCB2b2lkIG9wZXJhdG9yKCkoYXN0OjpjbWRfZW5kIGNvbnN0JiBjKSBjb25zdDsKICAgIHZpcnR1YWwgdm9pZCBvcGVyYXRvcigpKGFzdDo6Y21kX2VkZ2UgY29uc3QmIGMpIGNvbnN0OwogICAgdmlydHVhbCB2b2lkIG9wZXJhdG9yKCkoYXN0OjpjbWRfcXVpdCBjb25zdCYgYykgY29uc3Q7CiAgICB2aXJ0dWFsIHZvaWQgb3BlcmF0b3IoKShhc3Q6OmNtZF9zdGFydCBjb25zdCYgYykgY29uc3Q7CiAgICB2aXJ0dWFsIHZvaWQgb3BlcmF0b3IoKShhc3Q6OmNtZF90aW1lIGNvbnN0JiBjKSBjb25zdDsKICAgIHZpcnR1YWwgdm9pZCBvcGVyYXRvcigpKGFzdDo6Y21kX2RldGFpbCBjb25zdCYgYyk7CiAgICB2aXJ0dWFsIHZvaWQgb3BlcmF0b3IoKShhc3Q6OmNtZF92ZXJzaW9uIGNvbnN0JiBjKSBjb25zdDsKICAgIHZpcnR1YWwgdm9pZCBvcGVyYXRvcigpKGFzdDo6Y21kX2NvbmZpZyBjb25zdCYgYykgY29uc3Q7CiAgICB2aXJ0dWFsIHZvaWQgb3BlcmF0b3IoKShhc3Q6OmNtZF9kZWZhdWx0cyBjb25zdCYgYykgY29uc3Q7CiAgICB2aXJ0dWFsIHZvaWQgb3BlcmF0b3IoKShhc3Q6OmNtZF90cmFuc2Zvcm0gY29uc3QmIGMpIGNvbnN0OwogICAgdmlydHVhbCB2b2lkIG9wZXJhdG9yKCkoYXN0OjpjbWRfbXRyYW5zZm9ybSBjb25zdCYgYykgY29uc3Q7CiAgICB2aXJ0dWFsIHZvaWQgb3BlcmF0b3IoKShhc3Q6OmNtZF9nZW9tZXRyeSBjb25zdCYgYykgY29uc3Q7CiAgICB2aXJ0dWFsIHZvaWQgb3BlcmF0b3IoKShhc3Q6OmNtZF9wcm9wZXJ0eSBjb25zdCYgYykgY29uc3Q7CiAgICB2aXJ0dWFsIHZvaWQgb3BlcmF0b3IoKShhc3Q6OmNtZF9kZXZpY2VvcHRpb24gY29uc3QmIGMpIGNvbnN0OwogICAgdmlydHVhbCB2b2lkIG9wZXJhdG9yKCkoYXN0OjpjbWRfZGVjbGFyZSBjb25zdCYgYykgY29uc3Q7CiAgICB2aXJ0dWFsIHZvaWQgb3BlcmF0b3IoKShhc3Q6OmNtZF9yYXl0cmFjZSBjb25zdCYgYykgY29uc3Q7CiAgICB2aXJ0dWFsIHZvaWQgb3BlcmF0b3IoKShhc3Q6OmNtZF9yZXNldCBjb25zdCYgYykgY29uc3Q7CiAgICB2aXJ0dWFsIHZvaWQgb3BlcmF0b3IoKShhc3Q6OmNtZF9zb2NrZXQgY29uc3QmIGMpIGNvbnN0OwogICAgdmlydHVhbCB2b2lkIG9wZXJhdG9yKCkoYXN0OjpyYXlfZW1iZWRkZWRmaWxlIGNvbnN0JiBjKSBjb25zdDsKCiAgICB2b2lkIHNldFBhcnNlclN0cmVhbShzdGQ6OmlzdHJlYW0mIGluKTsKCiAgICBib29sIGlnbm9yZUNvbW1hbmRzKCkgY29uc3QgeyByZXR1cm4gbUlnbm9yZUNvbW1hbmRzOyB9OwogICAgYm9vbCByZWFkeVRvUXVpdCgpIGNvbnN0IHsgcmV0dXJuIG1RdWl0OyB9OwogICAgYm9vbCBmYWlsZWQoKSBjb25zdDsKCiAgcHJvdGVjdGVkOgogICAgc3RkOjp1bmlxdWVfcHRyPFNlc3Npb24+IG1wU2Vzc2lvbjsKCiAgcHJpdmF0ZToKICAgIHN0ZDo6aXN0cmVhbSogICBtcFBhcnNlclN0cmVhbTsgLy8gdXNlZCBmb3IgaW5saW5lIGJnZW8gcmVhZGluZwogICAgYm9vbCBtSWdub3JlQ29tbWFuZHM7CiAgICBib29sIG1RdWl0Owp9OwoKCnN0cnVjdCBFY2hvVmlzaXRvcjogcHVibGljIFZpc2l0b3IgewogIHB1YmxpYzoKICAgIEVjaG9WaXNpdG9yKHN0ZDo6dW5pcXVlX3B0cjxTZXNzaW9uPiYgcFNlc3Npb24pOwogICAgRWNob1Zpc2l0b3Ioc3RkOjp1bmlxdWVfcHRyPFNlc3Npb24+JiBwU2Vzc2lvbiwgc3RkOjpvc3RyZWFtJiBvcyk7CgogICAgdm9pZCBvcGVyYXRvcigpKGFzdDo6Tm9WYWx1ZSBjb25zdCYgYykgY29uc3Qgb3ZlcnJpZGUge307CiAgICB2b2lkIG9wZXJhdG9yKCkoYXN0OjppZnRoZW4gY29uc3QmIGMpIG92ZXJyaWRlOwogICAgdm9pZCBvcGVyYXRvcigpKGFzdDo6ZW5kaWYgY29uc3QmIGMpIG92ZXJyaWRlOwogICAgdm9pZCBvcGVyYXRvcigpKGFzdDo6c2V0ZW52IGNvbnN0JiBjKSBjb25zdCBvdmVycmlkZTsKICAgIHZvaWQgb3BlcmF0b3IoKShhc3Q6OmNtZF9pbWFnZSBjb25zdCYgYykgY29uc3Qgb3ZlcnJpZGU7CiAgICB2b2lkIG9wZXJhdG9yKCkoYXN0OjpjbWRfaXBybW9kZSBjb25zdCYgYykgY29uc3Qgb3ZlcnJpZGU7CiAgICB2b2lkIG9wZXJhdG9yKCkoYXN0OjpjbWRfZW5kIGNvbnN0JiBjKSBjb25zdCBvdmVycmlkZTsKICAgIHZvaWQgb3BlcmF0b3IoKShhc3Q6OmNtZF9lZGdlIGNvbnN0JiBjKSBjb25zdCBvdmVycmlkZTsKICAgIHZvaWQgb3BlcmF0b3IoKShhc3Q6OmNtZF9xdWl0IGNvbnN0JiBjKSBjb25zdCBvdmVycmlkZTsKICAgIHZvaWQgb3BlcmF0b3IoKShhc3Q6OmNtZF9zdGFydCBjb25zdCYgYykgY29uc3Qgb3ZlcnJpZGU7CiAgICB2b2lkIG9wZXJhdG9yKCkoYXN0OjpjbWRfdGltZSBjb25zdCYgYykgY29uc3Qgb3ZlcnJpZGU7CiAgICB2b2lkIG9wZXJhdG9yKCkoYXN0OjpjbWRfZGV0YWlsIGNvbnN0JiBjKSBvdmVycmlkZTsKICAgIHZvaWQgb3BlcmF0b3IoKShhc3Q6OmNtZF92ZXJzaW9uIGNvbnN0JiBjKSBjb25zdCBvdmVycmlkZTsKICAgIHZvaWQgb3BlcmF0b3IoKShhc3Q6OmNtZF9jb25maWcgY29uc3QmIGMpIGNvbnN0IG92ZXJyaWRlOwogICAgdm9pZCBvcGVyYXRvcigpKGFzdDo6Y21kX2RlZmF1bHRzIGNvbnN0JiBjKSBjb25zdCBvdmVycmlkZTsKICAgIHZvaWQgb3BlcmF0b3IoKShhc3Q6OmNtZF90cmFuc2Zvcm0gY29uc3QmIGMpIGNvbnN0IG92ZXJyaWRlOwogICAgdm9pZCBvcGVyYXRvcigpKGFzdDo6Y21kX210cmFuc2Zvcm0gY29uc3QmIGMpIGNvbnN0IG92ZXJyaWRlOwogICAgdm9pZCBvcGVyYXRvcigpKGFzdDo6Y21kX2dlb21ldHJ5IGNvbnN0JiBjKSBjb25zdCBvdmVycmlkZTsKICAgIHZvaWQgb3BlcmF0b3IoKShhc3Q6OmNtZF9wcm9wZXJ0eSBjb25zdCYgYykgY29uc3Qgb3ZlcnJpZGU7CiAgICB2b2lkIG9wZXJhdG9yKCkoYXN0OjpjbWRfZGV2aWNlb3B0aW9uIGNvbnN0JiBjKSBjb25zdCBvdmVycmlkZTsKICAgIHZvaWQgb3BlcmF0b3IoKShhc3Q6OmNtZF9kZWNsYXJlIGNvbnN0JiBjKSBjb25zdCBvdmVycmlkZTsKICAgIHZvaWQgb3BlcmF0b3IoKShhc3Q6OmNtZF9yYXl0cmFjZSBjb25zdCYgYykgY29uc3Qgb3ZlcnJpZGU7CiAgICB2b2lkIG9wZXJhdG9yKCkoYXN0OjpjbWRfcmVzZXQgY29uc3QmIGMpIGNvbnN0IG92ZXJyaWRlOwogICAgdm9pZCBvcGVyYXRvcigpKGFzdDo6Y21kX3NvY2tldCBjb25zdCYgYykgY29uc3Qgb3ZlcnJpZGU7CiAgICB2b2lkIG9wZXJhdG9yKCkoYXN0OjpyYXlfZW1iZWRkZWRmaWxlIGNvbnN0JiBjKSBjb25zdCBvdmVycmlkZTsKCiAgLy9wcml2YXRlOgogICAgdm9pZCBvcGVyYXRvcigpKHN0ZDo6dmVjdG9yPFByb3BWYWx1ZT4gY29uc3QmIHYpIGNvbnN0OwogICAgdm9pZCBvcGVyYXRvcigpKGludCB2KSBjb25zdDsKICAgIHZvaWQgb3BlcmF0b3IoKShkb3VibGUgdikgY29uc3Q7CiAgICB2b2lkIG9wZXJhdG9yKCkoc3RkOjpzdHJpbmcgY29uc3QmIHYpIGNvbnN0OwogICAgdm9pZCBvcGVyYXRvcigpKEludDIgY29uc3QmIHYpIGNvbnN0OwogICAgdm9pZCBvcGVyYXRvcigpKEludDMgY29uc3QmIHYpIGNvbnN0OwogICAgdm9pZCBvcGVyYXRvcigpKEludDQgY29uc3QmIHYpIGNvbnN0OwogICAgdm9pZCBvcGVyYXRvcigpKFZlY3RvcjIgY29uc3QmIHYpIGNvbnN0OwogICAgdm9pZCBvcGVyYXRvcigpKFZlY3RvcjMgY29uc3QmIHYpIGNvbnN0OwogICAgdm9pZCBvcGVyYXRvcigpKFZlY3RvcjQgY29uc3QmIHYpIGNvbnN0OwogICAgdm9pZCBvcGVyYXRvcigpKFByb3BWYWx1ZSBjb25zdCYgdikgY29uc3Q7CgogcHJpdmF0ZToKICAgIHN0ZDo6b3N0cmVhbSYgX29zOwp9OwoKfSAgLy8gbmFtZXNwYWNlIGxzZAoKfSAgLy8gbmFtZXNwYWNlIGxhdmEKCiNlbmRpZiAgLy8gU1JDX0xBVkFfTElCX1JFQURFUl9MU0RfTFNEX1ZJU0lUT1JfSF8AAAAAAAAAANMQAAAAAAAAAAAAAAAAAAAAAAAA0xAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADNBwAAAAAAAM0HAAAAAAAAAAAAAAAA8L8"
				]
			]
		},
		{
			"contents": "#ifndef SRC_LAVA_LIB_READER_LSD_SESSION_H_\n#define SRC_LAVA_LIB_READER_LSD_SESSION_H_\n\n#include <memory>\n#include <variant>\n#include <future>\n#include <unordered_map>\n\n#include \"grammar_lsd.h\"\n#include \"../reader_bgeo/bgeo/Bgeo.h\"\n#include \"../renderer_iface.h\"\n#include \"scope.h\"\n\n//#include \"../scene_builder.h\" \n\nnamespace lava {\n\nnamespace lsd {\n\nclass Session {\n public:\n \tusing UniquePtr = std::unique_ptr<Session>;\n    static UniquePtr create(std::unique_ptr<RendererIface> pRendererIface);\n\n    \n    ~Session();\n\n public:\n \tscope::Geo::SharedPtr getCurrentGeo();\n    scope::ScopeBase::SharedPtr getCurrentScope();\n\n \tbool cmdStart(lsd::ast::Style object_type);\n \tbool cmdEnd();\n \tvoid cmdSetEnv(const std::string& key, const std::string& value);\n \tbool cmdRaytrace();\n    void cmdIPRmode(const std::string& mode);\n    void cmdConfig(const std::string& file_name);\n    void cmdProperty(lsd::ast::Style style, const std::string& token, const Property::Value& value);\n    void cmdPropertyV(lsd::ast::Style style, const std::vector<std::pair<std::string, Property::Value>>& values);\n    void cmdDeclare(lsd::ast::Style style, lsd::ast::Type type, const std::string& token, const lsd::PropValue& value);\n    void cmdImage(lsd::ast::DisplayType display_type, const std::string& filename);\n    void cmdTransform(const Matrix4& transform);\n    void cmdMTransform(const Matrix4& transform);\n    bool cmdGeometry(const std::string& name);\n    void cmdTime(double time);\n\n    void pushLight(const scope::Light::SharedPtr pLight);\n    void pushBgeo(const std::string& name, ika::bgeo::Bgeo::SharedConstPtr pBgeo, bool async = false);\n    std::string getExpandedString(const std::string& str);\n\n private:\n \tSession(std::unique_ptr<RendererIface> pRendererIface);\n \t\n \tbool prepareDisplayData();\n \tbool prepareFrameData();\n\n \tbool pushGeometryInstance(const scope::Object::SharedPtr pObj);\n\n private:\n    bool                            mIPRmode = false;\n \tbool \t\t\t\t\t\t\tmFirstRun = true; // This variable used to detect subsequent cmd_raytrace calls for multy-frame and IPR modes \n \tstd::unique_ptr<RendererIface> \tmpRendererIface;\n \t\n \tRendererIface::DisplayData\t\tmDisplayData;\n \tRendererIface::FrameData\t\tmFrameData;\n\n \tscope::ScopeBase::SharedPtr\t\tmpCurrentScope;\n \tscope::Global::SharedPtr\t\tmpGlobal;\n\n \tstd::map<std::string, std::variant<uint32_t, std::shared_future<uint32_t>>>\tmMeshMap;     // maps detail(mesh) name to SceneBuilder mesh id\tor it's async future\n    std::map<std::string, uint32_t> mLightsMap;     // maps detail(mesh) name to SceneBuilder mesh id \n};\n\n}  // namespace lsd\n\n}  // namespace lava\n\n#endif  // SRC_LAVA_LIB_READER_LSD_SESSION_H_",
			"file": "src/lava_lib/reader_lsd/session.h",
			"file_size": 2657,
			"file_write_time": 133352798597267383,
			"settings":
			{
				"buffer_size": 2657,
				"encoding": "UTF-8",
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					3,
					1,
					"insert",
					{
						"characters": "\nbool"
					},
					"BwAAAOUPAAAAAAAA5g8AAAAAAAAAAAAA5g8AAAAAAADoDwAAAAAAAAAAAADoDwAAAAAAAOoPAAAAAAAAAAAAAOoPAAAAAAAA6w8AAAAAAAAAAAAA6w8AAAAAAADsDwAAAAAAAAAAAADsDwAAAAAAAO0PAAAAAAAAAAAAAO0PAAAAAAAA7g8AAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADlDwAAAAAAAOUPAAAAAAAAAAAAAAAA8L8"
				],
				[
					4,
					1,
					"insert",
					{
						"characters": " fail"
					},
					"BQAAAO4PAAAAAAAA7w8AAAAAAAAAAAAA7w8AAAAAAADwDwAAAAAAAAAAAADwDwAAAAAAAPEPAAAAAAAAAAAAAPEPAAAAAAAA8g8AAAAAAAAAAAAA8g8AAAAAAADzDwAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADuDwAAAAAAAO4PAAAAAAAAAAAAAAAA8L8"
				],
				[
					5,
					1,
					"insert_completion",
					{
						"completion": "failed",
						"format": "text",
						"keep_prefix": false,
						"must_insert": false,
						"trigger": "failed"
					},
					"AgAAAO8PAAAAAAAA7w8AAAAAAAAEAAAAZmFpbO8PAAAAAAAA9Q8AAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADzDwAAAAAAAPMPAAAAAAAAAAAAAAAA8L8"
				],
				[
					6,
					1,
					"insert",
					{
						"characters": " ="
					},
					"AgAAAPUPAAAAAAAA9g8AAAAAAAAAAAAA9g8AAAAAAAD3DwAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAD1DwAAAAAAAPUPAAAAAAAAAAAAAAAA8L8"
				],
				[
					7,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAAPcPAAAAAAAA+A8AAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAD3DwAAAAAAAPcPAAAAAAAAAAAAAAAA8L8"
				],
				[
					8,
					9,
					"left_delete",
					null,
					"CQAAAPcPAAAAAAAA9w8AAAAAAAABAAAAIPYPAAAAAAAA9g8AAAAAAAABAAAAPfUPAAAAAAAA9Q8AAAAAAAABAAAAIPQPAAAAAAAA9A8AAAAAAAABAAAAZPMPAAAAAAAA8w8AAAAAAAABAAAAZfIPAAAAAAAA8g8AAAAAAAABAAAAbPEPAAAAAAAA8Q8AAAAAAAABAAAAafAPAAAAAAAA8A8AAAAAAAABAAAAYe8PAAAAAAAA7w8AAAAAAAABAAAAZg",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAD4DwAAAAAAAPgPAAAAAAAAAAAAAAAA8L8"
				],
				[
					9,
					1,
					"insert",
					{
						"characters": "mFail"
					},
					"BQAAAO8PAAAAAAAA8A8AAAAAAAAAAAAA8A8AAAAAAADxDwAAAAAAAAAAAADxDwAAAAAAAPIPAAAAAAAAAAAAAPIPAAAAAAAA8w8AAAAAAAAAAAAA8w8AAAAAAAD0DwAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADvDwAAAAAAAO8PAAAAAAAAAAAAAAAA8L8"
				],
				[
					10,
					1,
					"insert",
					{
						"characters": "ed"
					},
					"AgAAAPQPAAAAAAAA9Q8AAAAAAAAAAAAA9Q8AAAAAAAD2DwAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAD0DwAAAAAAAPQPAAAAAAAAAAAAAAAA8L8"
				],
				[
					11,
					1,
					"insert",
					{
						"characters": " ="
					},
					"AgAAAPYPAAAAAAAA9w8AAAAAAAAAAAAA9w8AAAAAAAD4DwAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAD2DwAAAAAAAPYPAAAAAAAAAAAAAAAA8L8"
				],
				[
					12,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAAPgPAAAAAAAA+Q8AAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAD4DwAAAAAAAPgPAAAAAAAAAAAAAAAA8L8"
				],
				[
					13,
					1,
					"insert_completion",
					{
						"completion": "false",
						"format": "text",
						"keep_prefix": false,
						"must_insert": true,
						"trigger": "false"
					},
					"AQAAAPkPAAAAAAAA/g8AAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAD5DwAAAAAAAPkPAAAAAAAAAAAAAAAA8L8"
				],
				[
					14,
					1,
					"insert",
					{
						"characters": ";"
					},
					"AQAAAP4PAAAAAAAA/w8AAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAD+DwAAAAAAAP4PAAAAAAAAAAAAAAAA8L8"
				],
				[
					16,
					1,
					"insert",
					{
						"characters": "\n\n"
					},
					"AgAAANoPAAAAAAAA2w8AAAAAAAAAAAAA2w8AAAAAAADcDwAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADaDwAAAAAAANoPAAAAAAAAAAAAAAAgbEA"
				],
				[
					18,
					1,
					"reindent",
					null,
					"AQAAANsPAAAAAAAA3w8AAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADbDwAAAAAAANsPAAAAAAAAAAAAAAAAAAA"
				],
				[
					19,
					1,
					"insert",
					{
						"characters": "bool"
					},
					"BAAAAN8PAAAAAAAA4A8AAAAAAAAAAAAA4A8AAAAAAADhDwAAAAAAAAAAAADhDwAAAAAAAOIPAAAAAAAAAAAAAOIPAAAAAAAA4w8AAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADfDwAAAAAAAN8PAAAAAAAAAAAAAAAA8L8"
				],
				[
					20,
					1,
					"insert",
					{
						"characters": " fail"
					},
					"BQAAAOMPAAAAAAAA5A8AAAAAAAAAAAAA5A8AAAAAAADlDwAAAAAAAAAAAADlDwAAAAAAAOYPAAAAAAAAAAAAAOYPAAAAAAAA5w8AAAAAAAAAAAAA5w8AAAAAAADoDwAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADjDwAAAAAAAOMPAAAAAAAAAAAAAAAA8L8"
				],
				[
					21,
					1,
					"insert_completion",
					{
						"completion": "failed",
						"format": "text",
						"keep_prefix": false,
						"must_insert": false,
						"trigger": "failed"
					},
					"AgAAAOQPAAAAAAAA5A8AAAAAAAAEAAAAZmFpbOQPAAAAAAAA6g8AAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADoDwAAAAAAAOgPAAAAAAAAAAAAAAAA8L8"
				],
				[
					22,
					1,
					"insert_snippet",
					{
						"contents": "($0)"
					},
					"AQAAAOoPAAAAAAAA7A8AAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADqDwAAAAAAAOoPAAAAAAAAAAAAAAAA8L8"
				],
				[
					24,
					1,
					"insert",
					{
						"characters": " c"
					},
					"AgAAAOwPAAAAAAAA7Q8AAAAAAAAAAAAA7Q8AAAAAAADuDwAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADsDwAAAAAAAOwPAAAAAAAAAAAAAAAA8L8"
				],
				[
					25,
					1,
					"insert_completion",
					{
						"completion": "const",
						"format": "text",
						"keep_prefix": false,
						"must_insert": false,
						"trigger": "const"
					},
					"AgAAAO0PAAAAAAAA7Q8AAAAAAAABAAAAY+0PAAAAAAAA8g8AAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADuDwAAAAAAAO4PAAAAAAAAAAAAAAAA8L8"
				],
				[
					26,
					1,
					"insert",
					{
						"characters": " P"
					},
					"AgAAAPIPAAAAAAAA8w8AAAAAAAAAAAAA8w8AAAAAAAD0DwAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADyDwAAAAAAAPIPAAAAAAAAAAAAAAAA8L8"
				],
				[
					27,
					1,
					"left_delete",
					null,
					"AQAAAPMPAAAAAAAA8w8AAAAAAAABAAAAUA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAD0DwAAAAAAAPQPAAAAAAAAAAAAAAAA8L8"
				],
				[
					28,
					1,
					"insert_snippet",
					{
						"contents": "{$0}"
					},
					"AQAAAPMPAAAAAAAA9Q8AAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADzDwAAAAAAAPMPAAAAAAAAAAAAAAAA8L8"
				],
				[
					29,
					1,
					"insert",
					{
						"characters": " re"
					},
					"AwAAAPQPAAAAAAAA9Q8AAAAAAAAAAAAA9Q8AAAAAAAD2DwAAAAAAAAAAAAD2DwAAAAAAAPcPAAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAD0DwAAAAAAAPQPAAAAAAAAAAAAAAAA8L8"
				],
				[
					30,
					1,
					"insert_completion",
					{
						"completion": "return",
						"format": "text",
						"keep_prefix": false,
						"must_insert": false,
						"trigger": "return"
					},
					"AgAAAPUPAAAAAAAA9Q8AAAAAAAACAAAAcmX1DwAAAAAAAPsPAAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAD3DwAAAAAAAPcPAAAAAAAAAAAAAAAA8L8"
				],
				[
					31,
					1,
					"insert",
					{
						"characters": " mF"
					},
					"AwAAAPsPAAAAAAAA/A8AAAAAAAAAAAAA/A8AAAAAAAD9DwAAAAAAAAAAAAD9DwAAAAAAAP4PAAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAD7DwAAAAAAAPsPAAAAAAAAAAAAAAAA8L8"
				],
				[
					33,
					1,
					"insert_completion",
					{
						"completion": "mFailed",
						"format": "text",
						"keep_prefix": false,
						"must_insert": false,
						"trigger": "mFailed"
					},
					"AgAAAPwPAAAAAAAA/A8AAAAAAAACAAAAbUb8DwAAAAAAAAMQAAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAD+DwAAAAAAAP4PAAAAAAAAAAAAAAAA8L8"
				],
				[
					34,
					1,
					"insert",
					{
						"characters": ";"
					},
					"AQAAAAMQAAAAAAAABBAAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAADEAAAAAAAAAMQAAAAAAAAAAAAAAAA8L8"
				],
				[
					35,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAAAQQAAAAAAAABRAAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAEEAAAAAAAAAQQAAAAAAAAAAAAAAAA8L8"
				],
				[
					39,
					3,
					"left_delete",
					null,
					"AwAAANsPAAAAAAAA2w8AAAAAAAArAAAAICAgIGJvb2wgZmFpbGVkKCkgY29uc3QgeyByZXR1cm4gbUZhaWxlZDsgfdoPAAAAAAAA2g8AAAAAAAABAAAACtkPAAAAAAAA2Q8AAAAAAAABAAAACg",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAGEAAAAAAAANsPAAAAAAAAAAAAAAAA8L8"
				],
				[
					41,
					1,
					"insert",
					{
						"characters": "\n\n"
					},
					"AgAAAG0NAAAAAAAAbg0AAAAAAAAAAAAAbg0AAAAAAABvDQAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABtDQAAAAAAAG0NAAAAAAAAAAAAAADgiUA"
				],
				[
					43,
					1,
					"reindent",
					null,
					"AQAAAG4NAAAAAAAAcg0AAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABuDQAAAAAAAG4NAAAAAAAAAAAAAAAAAAA"
				],
				[
					44,
					1,
					"paste",
					null,
					"AQAAAHINAAAAAAAAnQ0AAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAByDQAAAAAAAHINAAAAAAAAAAAAAAAA8L8"
				],
				[
					47,
					2,
					"left_delete",
					null,
					"AgAAAHQNAAAAAAAAdA0AAAAAAAACAAAAICByDQAAAAAAAHINAAAAAAAAAgAAACAg",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAB2DQAAAAAAAHYNAAAAAAAAAAAAAAAA8L8"
				],
				[
					1,
					1,
					"revert",
					null,
					"AwAAAAAAAAAAAAAAAAAAAAAAAAA1GAAAI2lmbmRlZiBTUkNfTEFWQV9MSUJfUkVBREVSX0xTRF9TRVNTSU9OX0hfCiNkZWZpbmUgU1JDX0xBVkFfTElCX1JFQURFUl9MU0RfU0VTU0lPTl9IXwoKI2luY2x1ZGUgPG1lbW9yeT4KI2luY2x1ZGUgPHZhcmlhbnQ+CiNpbmNsdWRlIDxmdXR1cmU+CiNpbmNsdWRlIDxtYXA+CiNpbmNsdWRlIDx1bm9yZGVyZWRfbWFwPgoKI2luY2x1ZGUgImdyYW1tYXJfbHNkLmgiCiNpbmNsdWRlICIuLi9yZWFkZXJfYmdlby9iZ2VvL0JnZW8uaCIKI2luY2x1ZGUgIi4uL3JlbmRlcmVyLmgiCiNpbmNsdWRlICJzY29wZS5oIgojaW5jbHVkZSAiLi4vZGlzcGxheS5oIgoKI2luY2x1ZGUgIkZhbGNvci9VdGlscy9NYXRoL1ZlY3Rvci5oIgojaW5jbHVkZSAiRmFsY29yL1V0aWxzL1RpbWluZy9Qcm9maWxlci5oIgojaW5jbHVkZSAiRmFsY29yL1NjZW5lL01hdGVyaWFsWC9NYXRlcmlhbFguaCIKI2luY2x1ZGUgIkZhbGNvci9TY2VuZS9NYXRlcmlhbFgvTXhUeXBlcy5oIgoKCm5hbWVzcGFjZSBsYXZhIHsKCm5hbWVzcGFjZSBsc2QgewoKY2xhc3MgU2Vzc2lvbiB7CiAgcHVibGljOgogCSAgdXNpbmcgVW5pcXVlUHRyID0gc3RkOjp1bmlxdWVfcHRyPFNlc3Npb24+OwogICAgc3RhdGljIFVuaXF1ZVB0ciBjcmVhdGUoUmVuZGVyZXI6OlNoYXJlZFB0ciBwUmVuZGVyZXIpOyAgICAKICAgIH5TZXNzaW9uKCk7CgogICAgc3RydWN0IERpc3BsYXlJbmZvIHsKICAgICAgRGlzcGxheTo6RGlzcGxheVR5cGUgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXlUeXBlOwogICAgICBEaXNwbGF5OjpUeXBlRm9ybWF0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZUZvcm1hdDsKICAgICAgc3RkOjp2ZWN0b3I8c3RkOjpwYWlyPHN0ZDo6c3RyaW5nLCBzdGQ6OnZlY3RvcjxzdGQ6OnN0cmluZz4+PiAgIGRpc3BsYXlTdHJpbmdQYXJhbWV0ZXJzOwogICAgICBzdGQ6OnZlY3RvcjxzdGQ6OnBhaXI8c3RkOjpzdHJpbmcsIHN0ZDo6dmVjdG9yPGludD4+PiAgICAgICAgICAgZGlzcGxheUludFBhcmFtZXRlcnM7CiAgICAgIHN0ZDo6dmVjdG9yPHN0ZDo6cGFpcjxzdGQ6OnN0cmluZywgc3RkOjp2ZWN0b3I8ZmxvYXQ+Pj4gICAgICAgICBkaXNwbGF5RmxvYXRQYXJhbWV0ZXJzOwoKICAgICAgc3RkOjpzdHJpbmcgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dEZpbGVOYW1lOwogICAgfTsKCiAgICBzdHJ1Y3QgQ2FtZXJhSW5mbyB7CiAgICAgIGRvdWJsZSB0aW1lID0gMC4wOwoKICAgICAgLy8gY2FtZXJhIHNlY3Rpb24KICAgICAgc3RkOjpzdHJpbmcgY2FtZXJhUHJvamVjdGlvbk5hbWUgPSAicGVyc3BlY3RpdmUiOwogICAgICBkb3VibGUgICAgICBjYW1lcmFOZWFyUGxhbmUgPSAwLjAxOwogICAgICBkb3VibGUgICAgICBjYW1lcmFGYXJQbGFuZSAgPSAxMDAwLjA7CiAgICAgIGdsbTo6bWF0NCAgIGNhbWVyYVRyYW5zZm9ybTsKICAgICAgZG91YmxlICAgICAgY2FtZXJhRm9jYWxMZW5ndGggPSAxLjA7CiAgICAgIGRvdWJsZSAgICAgIGNhbWVyYUZyYW1lSGVpZ2h0ID0gMS4wOwoKICAgICAgUmVuZGVyZXI6OlNhbXBsZVBhdHRlcm4gc2FtcGxlUGF0dGVybiA9IFJlbmRlcmVyOjpTYW1wbGVQYXR0ZXJuOjpTdHJhdGlmaWVkOwogICAgfTsKCiAgICBzdHJ1Y3QgVGlsZUluZm8gewogICAgICBGYWxjb3I6OnVpbnQ0ICAgcmVuZGVyUmVnaW9uOwogICAgICBGYWxjb3I6OmZsb2F0NCAgY2FtZXJhQ3JvcFJlZ2lvbjsKICAgIH07CgogIHB1YmxpYzoKIAkgIHNjb3BlOjpHZW86OlNoYXJlZFB0ciBnZXRDdXJyZW50R2VvKCk7CiAgICBzY29wZTo6U2NvcGVCYXNlOjpTaGFyZWRQdHIgZ2V0Q3VycmVudFNjb3BlKCk7CgogICAgLyoqIGdldCBzdHJpbmcgZXhwYW5kZWQgd2l0aCBsb2NhbCBlbnYgdmFyaWFibGVzCiAgICAgKi8KICAgIHN0ZDo6c3RyaW5nIGdldEV4cGFuZGVkU3RyaW5nKGNvbnN0IHN0ZDo6c3RyaW5nJiBzKTsKCiAgICBib29sIGNtZFN0YXJ0KGxzZDo6YXN0OjpTdHlsZSBvYmplY3RfdHlwZSk7CiAgICBib29sIGNtZEVuZCgpOwogICAgdm9pZCBjbWRTZXRFbnYoY29uc3Qgc3RkOjpzdHJpbmcmIGtleSwgY29uc3Qgc3RkOjpzdHJpbmcmIHZhbHVlKTsKICAgIGJvb2wgY21kUmF5dHJhY2UoKTsKICAgIHZvaWQgY21kSVBSbW9kZShsc2Q6OmFzdDo6SVBSTW9kZSBtb2RlLCBib29sIHN0YXNoKTsKICAgIHZvaWQgY21kRWRnZShjb25zdCBzdGQ6OnN0cmluZyYgc3JjX25vZGVfdXVpZCwgY29uc3Qgc3RkOjpzdHJpbmcmIHNyY19ub2RlX291dHB1dF9zb2NrZXQsIGNvbnN0IHN0ZDo6c3RyaW5nJiBkc3Rfbm9kZV91dWlkLCBjb25zdCBzdGQ6OnN0cmluZyYgZHN0X25vZGVfaW5wdXRfc29ja2V0KTsKICAgIHZvaWQgY21kQ29uZmlnKGxzZDo6YXN0OjpUeXBlIHR5cGUsIGNvbnN0IHN0ZDo6c3RyaW5nJiBuYW1lLCBjb25zdCBsc2Q6OlByb3BWYWx1ZSYgdmFsdWUpOwogICAgdm9pZCBjbWRQcm9wZXJ0eShsc2Q6OmFzdDo6U3R5bGUgc3R5bGUsIGNvbnN0IHN0ZDo6c3RyaW5nJiB0b2tlbiwgY29uc3QgUHJvcGVydHk6OlZhbHVlJiB2YWx1ZSk7CiAgICB2b2lkIGNtZFByb3BlcnR5Vihsc2Q6OmFzdDo6U3R5bGUgc3R5bGUsIGNvbnN0IHN0ZDo6dmVjdG9yPHN0ZDo6cGFpcjxzdGQ6OnN0cmluZywgUHJvcGVydHk6OlZhbHVlPj4mIHZhbHVlcyk7CiAgICB2b2lkIGNtZERlY2xhcmUobHNkOjphc3Q6OlN0eWxlIHN0eWxlLCBsc2Q6OmFzdDo6VHlwZSB0eXBlLCBjb25zdCBzdGQ6OnN0cmluZyYgdG9rZW4sIGNvbnN0IGxzZDo6UHJvcFZhbHVlJiB2YWx1ZSk7CiAgICB2b2lkIGNtZEltYWdlKGxzZDo6YXN0OjpEaXNwbGF5VHlwZSBkaXNwbGF5X3R5cGUsIGNvbnN0IHN0ZDo6c3RyaW5nJiBmaWxlbmFtZSk7CiAgICB2b2lkIGNtZFRyYW5zZm9ybShjb25zdCBNYXRyaXg0JiB0cmFuc2Zvcm0pOwogICAgYm9vbCBjbWRTb2NrZXQoRmFsY29yOjpNeFNvY2tldERpcmVjdGlvbiBkaXJlY3Rpb24sIEZhbGNvcjo6TXhTb2NrZXREYXRhVHlwZSBkYXRhVHlwZSwgY29uc3Qgc3RkOjpzdHJpbmcmIG5hbWUpOwogICAgdm9pZCBjbWRNVHJhbnNmb3JtKGNvbnN0IE1hdHJpeDQmIHRyYW5zZm9ybSk7CiAgICBib29sIGNtZEdlb21ldHJ5KGNvbnN0IHN0ZDo6c3RyaW5nJiBuYW1lKTsKICAgIHZvaWQgY21kVGltZShkb3VibGUgdGltZSk7CiAgICB2b2lkIGNtZFF1aXQoKTsKCiAgICB2b2lkIHB1c2hMaWdodChjb25zdCBzY29wZTo6TGlnaHQ6OlNoYXJlZFB0ciBwTGlnaHQpOwogICAgdm9pZCBwdXNoQmdlbyhjb25zdCBzdGQ6OnN0cmluZyYgbmFtZSwgbHNkOjpzY29wZTo6R2VvOjpTaGFyZWRQdHIgcEdlbyk7CiAgICB2b2lkIHB1c2hCZ2VvQXN5bmMoY29uc3Qgc3RkOjpzdHJpbmcmIG5hbWUsIGxzZDo6c2NvcGU6Okdlbzo6U2hhcmVkUHRyIHBHZW8pOwoKICAgIGJvb2wgZmFpbGVkKCkgY29uc3QgeyByZXR1cm4gbUZhaWxlZDsgfQoKICBwcml2YXRlOgogCSAgU2Vzc2lvbihzdGQ6OnNoYXJlZF9wdHI8UmVuZGVyZXI+IHBSZW5kZXJlcik7CiAJCiAgICB2b2lkIHNldFVwQ2FtZXJhKEZhbGNvcjo6Q2FtZXJhOjpTaGFyZWRQdHIgcENhbWVyYSwgRmFsY29yOjpmbG9hdDQgY3JvcFJlZ2lvbiA9IHswLjBmLCAwLjBmLCAxLjBmLCAxLjBmfSk7CiAgICAvL2Jvb2wgcHJlcGFyZUdsb2JhbERhdGEoKTsKICAgIGJvb2wgcHJlcGFyZUZyYW1lRGF0YSgpOwogCSAgYm9vbCBwcmVwYXJlRGlzcGxheURhdGEoKTsKIAkKICAgIHZvaWQgc2V0RW52VmFyaWFibGUoY29uc3Qgc3RkOjpzdHJpbmcmIGtleSwgY29uc3Qgc3RkOjpzdHJpbmcmIHZhbHVlKTsKCiAgICBGYWxjb3I6Ok1hdGVyaWFsWDo6VW5pcXVlUHRyIGNyZWF0ZU1hdGVyaWFsWEZyb21MU0QobHNkOjpzY29wZTo6TWF0ZXJpYWw6OlNoYXJlZENvbnN0UHRyIHBNYXRlcmlhbExTRCk7CgogCSAgYm9vbCBwdXNoR2VvbWV0cnlJbnN0YW5jZShsc2Q6OnNjb3BlOjpPYmplY3Q6OlNoYXJlZENvbnN0UHRyIHBPYmopOwogICAgdm9pZCBhZGRNeE5vZGUoRmFsY29yOjpNeE5vZGU6OlNoYXJlZFB0ciBwUGFyZW50LCBzY29wZTo6Tm9kZTo6U2hhcmVkQ29uc3RQdHIgcE5vZGVMU0QpOwoKICBwcml2YXRlOgogICAgYm9vbCBtRmFpbGVkID0gZmFsc2U7CiAgICBib29sICBtSVBSID0gZmFsc2U7CiAgICBhc3Q6OklQUk1vZGUgbUlQUm1vZGUgPSBhc3Q6OklQUk1vZGU6OkdFTkVSQVRFOwoKICAgIGJvb2wgIG1GaXJzdFJ1biA9IHRydWU7IC8vIFRoaXMgdmFyaWFibGUgdXNlZCB0byBkZXRlY3Qgc3Vic2VxdWVudCBjbWRfcmF5dHJhY2UgY2FsbHMgZm9yIG11bHR5LWZyYW1lIGFuZCBJUFIgbW9kZXMgCiAgICBSZW5kZXJlcjo6U2hhcmVkUHRyIAkgICAgICAgICBtcFJlbmRlcmVyID0gbnVsbHB0cjsKICAgIERldmljZTo6U2hhcmVkUHRyICAgICAgICAgICAgICBtcERldmljZSAgID0gbnVsbHB0cjsKCiAgICBzdGQ6Om1hcDxzdGQ6OnN0cmluZywgc3RkOjpzdHJpbmc+ICBtRW52bWFwOwoKICAgIFJlbmRlcmVyOjpGcmFtZUluZm8gICAgICAgICAgICAgbUN1cnJlbnRGcmFtZUluZm87CgogICAgLy9SZW5kZXJlcklmYWNlOjpHbG9iYWxEYXRhICAgICAgIG1HbG9iYWxEYXRhOwogICAgRGlzcGxheUluZm8JCSAgICAgICAgICAgICAgICAgIG1DdXJyZW50RGlzcGxheUluZm87CiAgICBDYW1lcmFJbmZvICAgICAgICAgICAgICAgICAgICAgIG1DdXJyZW50Q2FtZXJhSW5mbzsKICAgIGRvdWJsZSAgICAgICAgICAgICAgICAgICAgICAgICAgbUN1cnJlbnRUaW1lID0gMDsKICAgIC8vUmVuZGVyZXJJZmFjZTo6RnJhbWVEYXRhCQkgICAgbUZyYW1lRGF0YTsKCiAgICBzY29wZTo6U2NvcGVCYXNlOjpTaGFyZWRQdHIJCSAgbXBDdXJyZW50U2NvcGU7CiAgICBzY29wZTo6TWF0ZXJpYWw6OlNoYXJlZFB0ciAgICAgIG1wTWF0ZXJpYWxTY29wZTsKICAgIHNjb3BlOjpHbG9iYWw6OlNoYXJlZFB0cgkJICAgIG1wR2xvYmFsOwoKICAgIERpc3BsYXk6OlNoYXJlZFB0ciAgICAgICAgICAgICAgbXBEaXNwbGF5OwogICAgc3RkOjp1bm9yZGVyZWRfbWFwPHN0ZDo6c3RyaW5nLCBEaXNwbGF5OjpTaGFyZWRQdHI+IG1EaXNwbGF5czsKCiAgICBSZW5kZXJlcjo6Q29uZmlnICAgICAgICAgICAgICAgIG1SZW5kZXJlckNvbmZpZzsKCiAgICBzdGQ6OnVub3JkZXJlZF9tYXA8c3RkOjpzdHJpbmcsIHN0ZDo6dmFyaWFudDx1aW50MzJfdCwgc3RkOjpzaGFyZWRfZnV0dXJlPHVpbnQzMl90Pj4+CW1NZXNoTWFwOyAgICAgLy8gbWFwcyBkZXRhaWwobWVzaCkgbmFtZSB0byBTY2VuZUJ1aWxkZXIgbWVzaCBpZAlvciBpdCdzIGFzeW5jIGZ1dHVyZQogICAgc3RkOjp1bm9yZGVyZWRfbWFwPHN0ZDo6c3RyaW5nLCB1aW50MzJfdD4gbUxpZ2h0c01hcDsgICAgIC8vIG1hcHMgZGV0YWlsKG1lc2gpIG5hbWUgdG8gU2NlbmVCdWlsZGVyIG1lc2ggaWQgCn07CgpzdGF0aWMgaW5saW5lIHN0ZDo6c3RyaW5nIHRvX3N0cmluZyhjb25zdCBTZXNzaW9uOjpUaWxlSW5mbyYgdGlsZUluZm8pIHsKICByZXR1cm4gIlRpbGVJbmZvOiByZWdpb25bIiArIHN0ZDo6dG9fc3RyaW5nKHRpbGVJbmZvLnJlbmRlclJlZ2lvblswXSkgCiAgICAgICAgICAgICAgICAgICAgKyAiLCAiICsgIHN0ZDo6dG9fc3RyaW5nKHRpbGVJbmZvLnJlbmRlclJlZ2lvblsxXSkgCiAgICAgICAgICAgICAgICAgICAgKyAiLCAiICsgIHN0ZDo6dG9fc3RyaW5nKHRpbGVJbmZvLnJlbmRlclJlZ2lvblsyXSkKICAgICAgICAgICAgICAgICAgICArICIsICIgKyAgc3RkOjp0b19zdHJpbmcodGlsZUluZm8ucmVuZGVyUmVnaW9uWzNdKSArICJdIgogICAgICAgICAgICAgICAgICAgICsgIlsiICsgc3RkOjp0b19zdHJpbmcodGlsZUluZm8uY2FtZXJhQ3JvcFJlZ2lvblswXSkKICAgICAgICAgICAgICAgICAgICArICIsICIgKyAgc3RkOjp0b19zdHJpbmcodGlsZUluZm8uY2FtZXJhQ3JvcFJlZ2lvblsxXSkKICAgICAgICAgICAgICAgICAgICArICIsICIgKyAgc3RkOjp0b19zdHJpbmcodGlsZUluZm8uY2FtZXJhQ3JvcFJlZ2lvblsyXSkKICAgICAgICAgICAgICAgICAgICArICIsICIgKyAgc3RkOjp0b19zdHJpbmcodGlsZUluZm8uY2FtZXJhQ3JvcFJlZ2lvblszXSkgKyAiXSI7Cn0KCn0gIC8vIG5hbWVzcGFjZSBsc2QKCn0gIC8vIG5hbWVzcGFjZSBsYXZhCgojZW5kaWYgIC8vIFNSQ19MQVZBX0xJQl9SRUFERVJfTFNEX1NFU1NJT05fSF8AAAAAAAAAAGEKAAAAAAAAAAAAAAAAAAAAAAAAYQoAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAByDQAAAAAAAHINAAAAAAAAAAAAAAAA8L8"
				]
			]
		},
		{
			"file": "src/Falcor/Core/API/GFX/GFXTexture.cpp",
			"settings":
			{
				"buffer_size": 7847,
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					1,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAACnHgAALyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKgogIyBDb3B5cmlnaHQgKGMpIDIwMTUtMjIsIE5WSURJQSBDT1JQT1JBVElPTi4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KICMKICMgUmVkaXN0cmlidXRpb24gYW5kIHVzZSBpbiBzb3VyY2UgYW5kIGJpbmFyeSBmb3Jtcywgd2l0aCBvciB3aXRob3V0CiAjIG1vZGlmaWNhdGlvbiwgYXJlIHBlcm1pdHRlZCBwcm92aWRlZCB0aGF0IHRoZSBmb2xsb3dpbmcgY29uZGl0aW9ucwogIyBhcmUgbWV0OgogIyAgKiBSZWRpc3RyaWJ1dGlvbnMgb2Ygc291cmNlIGNvZGUgbXVzdCByZXRhaW4gdGhlIGFib3ZlIGNvcHlyaWdodAogIyAgICBub3RpY2UsIHRoaXMgbGlzdCBvZiBjb25kaXRpb25zIGFuZCB0aGUgZm9sbG93aW5nIGRpc2NsYWltZXIuCiAjICAqIFJlZGlzdHJpYnV0aW9ucyBpbiBiaW5hcnkgZm9ybSBtdXN0IHJlcHJvZHVjZSB0aGUgYWJvdmUgY29weXJpZ2h0CiAjICAgIG5vdGljZSwgdGhpcyBsaXN0IG9mIGNvbmRpdGlvbnMgYW5kIHRoZSBmb2xsb3dpbmcgZGlzY2xhaW1lciBpbiB0aGUKICMgICAgZG9jdW1lbnRhdGlvbiBhbmQvb3Igb3RoZXIgbWF0ZXJpYWxzIHByb3ZpZGVkIHdpdGggdGhlIGRpc3RyaWJ1dGlvbi4KICMgICogTmVpdGhlciB0aGUgbmFtZSBvZiBOVklESUEgQ09SUE9SQVRJT04gbm9yIHRoZSBuYW1lcyBvZiBpdHMKICMgICAgY29udHJpYnV0b3JzIG1heSBiZSB1c2VkIHRvIGVuZG9yc2Ugb3IgcHJvbW90ZSBwcm9kdWN0cyBkZXJpdmVkCiAjICAgIGZyb20gdGhpcyBzb2Z0d2FyZSB3aXRob3V0IHNwZWNpZmljIHByaW9yIHdyaXR0ZW4gcGVybWlzc2lvbi4KICMKICMgVEhJUyBTT0ZUV0FSRSBJUyBQUk9WSURFRCBCWSBUSEUgQ09QWVJJR0hUIEhPTERFUlMgIkFTIElTIiBBTkQgQU5ZCiAjIEVYUFJFU1MgT1IgSU1QTElFRCBXQVJSQU5USUVTLCBJTkNMVURJTkcsIEJVVCBOT1QgTElNSVRFRCBUTywgVEhFCiAjIElNUExJRUQgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFkgQU5EIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUgogIyBQVVJQT1NFIEFSRSBESVNDTEFJTUVELiAgSU4gTk8gRVZFTlQgU0hBTEwgVEhFIENPUFlSSUdIVCBPV05FUiBPUgogIyBDT05UUklCVVRPUlMgQkUgTElBQkxFIEZPUiBBTlkgRElSRUNULCBJTkRJUkVDVCwgSU5DSURFTlRBTCwgU1BFQ0lBTCwKICMgRVhFTVBMQVJZLCBPUiBDT05TRVFVRU5USUFMIERBTUFHRVMgKElOQ0xVRElORywgQlVUIE5PVCBMSU1JVEVEIFRPLAogIyBQUk9DVVJFTUVOVCBPRiBTVUJTVElUVVRFIEdPT0RTIE9SIFNFUlZJQ0VTOyBMT1NTIE9GIFVTRSwgREFUQSwgT1IKICMgUFJPRklUUzsgT1IgQlVTSU5FU1MgSU5URVJSVVBUSU9OKSBIT1dFVkVSIENBVVNFRCBBTkQgT04gQU5ZIFRIRU9SWQogIyBPRiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQ09OVFJBQ1QsIFNUUklDVCBMSUFCSUxJVFksIE9SIFRPUlQKICMgKElOQ0xVRElORyBORUdMSUdFTkNFIE9SIE9USEVSV0lTRSkgQVJJU0lORyBJTiBBTlkgV0FZIE9VVCBPRiBUSEUgVVNFCiAjIE9GIFRISVMgU09GVFdBUkUsIEVWRU4gSUYgQURWSVNFRCBPRiBUSEUgUE9TU0lCSUxJVFkgT0YgU1VDSCBEQU1BR0UuCiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi8KI2luY2x1ZGUgInN0ZGFmeC5oIgoKI2luY2x1ZGUgIkZhbGNvci9Db3JlL0FQSS9UZXh0dXJlLmgiCiNpbmNsdWRlICJGYWxjb3IvQ29yZS9BUEkvRGV2aWNlLmgiCiNpbmNsdWRlICJGYWxjb3IvQ29yZS9BUEkvRm9ybWF0cy5oIgoKI2luY2x1ZGUgIkdGWEZvcm1hdHMuaCIKI2luY2x1ZGUgIkdGWFJlc291cmNlLmgiCgpuYW1lc3BhY2UgRmFsY29yIHsKCm5hbWVzcGFjZSB7CmlubGluZSBnZng6OklSZXNvdXJjZTo6VHlwZSBnZXRSZXNvdXJjZVR5cGUoVGV4dHVyZTo6VHlwZSB0eXBlKSB7Cglzd2l0Y2ggKHR5cGUpIHsKCQljYXNlIFRleHR1cmU6OlR5cGU6OlRleHR1cmUxRDoKCQkJcmV0dXJuIGdmeDo6SVJlc291cmNlOjpUeXBlOjpUZXh0dXJlMUQ7CgkJY2FzZSBUZXh0dXJlOjpUeXBlOjpUZXh0dXJlMkQ6CgkJY2FzZSBUZXh0dXJlOjpUeXBlOjpUZXh0dXJlMkRNdWx0aXNhbXBsZToKCQkJcmV0dXJuIGdmeDo6SVJlc291cmNlOjpUeXBlOjpUZXh0dXJlMkQ7CgkJY2FzZSBUZXh0dXJlOjpUeXBlOjpUZXh0dXJlQ3ViZToKCQkJcmV0dXJuIGdmeDo6SVJlc291cmNlOjpUeXBlOjpUZXh0dXJlQ3ViZTsKCQljYXNlIFRleHR1cmU6OlR5cGU6OlRleHR1cmUzRDoKCQkJcmV0dXJuIGdmeDo6SVJlc291cmNlOjpUeXBlOjpUZXh0dXJlM0Q7CgkJZGVmYXVsdDoKCQkJYXNzZXJ0KGZhbHNlKTsKCQkJcmV0dXJuIGdmeDo6SVJlc291cmNlOjpUeXBlOjpVbmtub3duOwoJfQp9Cgp9Cgp1aW50NjRfdCBUZXh0dXJlOjpnZXRUZXh0dXJlU2l6ZUluQnl0ZXMoKSBjb25zdCB7CgoJaWYobUlzVURJTVRleHR1cmUpIHsKCQkvLyBVRElNIHRleHR1cmVzIGFyZSBqdXN0IHBsYWNlaG9sZGVycyB3aXRoIG5vIEdQVSBkYXRhIGFsbG9jYXRlZC4KCQlyZXR1cm4gMDsKCX0KCgkvLyBnZXQgYWxsb2NhdGlvbiBpbmZvIGZvciByZXNvdXJjZSBkZXNjcmlwdGlvbgoJc2l6ZV90IG91dFNpemVCeXRlcyA9IDAsIG91dEFsaWdubWVudCA9IDA7CgoJU2xhbmc6OkNvbVB0cjxnZng6OklEZXZpY2U+IGlEZXZpY2VQdHIgPSBtcERldmljZS0+Z2V0QXBpSGFuZGxlKCk7CglnZng6OklUZXh0dXJlUmVzb3VyY2UqIHRleHR1cmVSZXNvdXJjZSA9IHN0YXRpY19jYXN0PGdmeDo6SVRleHR1cmVSZXNvdXJjZSo+KGdldEFwaUhhbmRsZSgpLmdldCgpKTsKCUZBTENPUl9BU1NFUlQodGV4dHVyZVJlc291cmNlKTsKCglnZng6OklUZXh0dXJlUmVzb3VyY2U6OkRlc2MgKmRlc2MgPSB0ZXh0dXJlUmVzb3VyY2UtPmdldERlc2MoKTsKCgltcERldmljZS0+Z2V0QXBpSGFuZGxlKCktPmdldFRleHR1cmVBbGxvY2F0aW9uSW5mbygqZGVzYywgJm91dFNpemVCeXRlcywgJm91dEFsaWdubWVudCk7CglGQUxDT1JfQVNTRVJUKG91dFNpemVCeXRlcyA+IDApOwoKCXJldHVybiBvdXRTaXplQnl0ZXM7Cgp9Cgp2b2lkIFRleHR1cmU6OmFwaUluaXQoY29uc3Qgdm9pZCogcERhdGEsIGJvb2wgYXV0b0dlbk1pcHMpIHsKCS8vIGNyZWF0ZSByZXNvdXJjZSBkZXNjcmlwdGlvbgoJZ2Z4OjpJVGV4dHVyZVJlc291cmNlOjpEZXNjIGRlc2MgPSB7fTsKCgkvLyBiYXNlIGRlc2NyaXB0aW9uCglkZXNjLnNwYXJzZSA9IG1Jc1NwYXJzZTsKCgkvLyB0eXBlCglkZXNjLnR5cGUgPSBnZXRSZXNvdXJjZVR5cGUobVR5cGUpOyAvLyBzYW1lIGFzIHJlc291cmNlIGRpbWVuc2lvbiBpbiBEM0QxMgoKCS8vIGRlZmF1bHQgc3RhdGUgYW5kIGFsbG93ZWQgc3RhdGVzCglnZng6OlJlc291cmNlU3RhdGUgZGVmYXVsdFN0YXRlOwoJZ2V0R0ZYUmVzb3VyY2VTdGF0ZShtQmluZEZsYWdzLCBkZWZhdWx0U3RhdGUsIGRlc2MuYWxsb3dlZFN0YXRlcyk7CgoJLy8gQWx3YXlzIHNldCB0ZXh0dXJlIHRvIGdlbmVyYWwoY29tbW9uKSBzdGF0ZSB1cG9uIGNyZWF0aW9uLgoJZGVzYy5kZWZhdWx0U3RhdGUgPSBnZng6OlJlc291cmNlU3RhdGU6OkdlbmVyYWw7CgoJZGVzYy5tZW1vcnlUeXBlID0gZ2Z4OjpNZW1vcnlUeXBlOjpEZXZpY2VMb2NhbDsKCS8vIHRleHR1cmUgcmVzb3VyY2Ugc3BlY2lmaWMgZGVzY3JpcHRpb24gYXR0cmlidXRlcwoKCS8vIHNpemUKCWRlc2Muc2l6ZS53aWR0aCA9IGFsaWduX3RvKGdldEZvcm1hdFdpZHRoQ29tcHJlc3Npb25SYXRpbyhtRm9ybWF0KSwgbVdpZHRoKTsKCWRlc2Muc2l6ZS5oZWlnaHQgPSBhbGlnbl90byhnZXRGb3JtYXRIZWlnaHRDb21wcmVzc2lvblJhdGlvKG1Gb3JtYXQpLCBtSGVpZ2h0KTsKCWRlc2Muc2l6ZS5kZXB0aCA9IG1EZXB0aDsgLy8gcmVsZXZhbnQgZm9yIFRleHR1cmUzRAoKCS8vIGFycmF5IHNpemUKCWlmIChtVHlwZSA9PSBUZXh0dXJlOjpUeXBlOjpUZXh0dXJlQ3ViZSkgewoJCWRlc2MuYXJyYXlTaXplID0gbUFycmF5U2l6ZSAqIDY7Cgl9IGVsc2UgewoJCWRlc2MuYXJyYXlTaXplID0gbUFycmF5U2l6ZTsKCX0KCgkvLyBtaXAgbWFwIGxldmVscwoJZGVzYy5udW1NaXBMZXZlbHMgPSBtTWlwTGV2ZWxzOwoKCS8vIGZvcm1hdAoJZGVzYy5mb3JtYXQgPSBnZXRHRlhGb3JtYXQobUZvcm1hdCk7IC8vIGxvb2t1cCBjYW4gcmVzdWx0IGluIFVua25vd24gLyB1bnN1cHBvcnRlZCBmb3JtYXQKCgkvLyBzYW1wbGUgZGVzY3JpcHRpb24KCWRlc2Muc2FtcGxlRGVzYy5udW1TYW1wbGVzID0gbVNhbXBsZUNvdW50OwoJZGVzYy5zYW1wbGVEZXNjLnF1YWxpdHkgPSAwOwoKCS8vIGNsZWFyIHZhbHVlCglnZng6OkNsZWFyVmFsdWUgY2xlYXJWYWx1ZTsKCWlmICgobUJpbmRGbGFncyAmIChUZXh0dXJlOjpCaW5kRmxhZ3M6OlJlbmRlclRhcmdldCB8IFRleHR1cmU6OkJpbmRGbGFnczo6RGVwdGhTdGVuY2lsKSkgIT0gVGV4dHVyZTo6QmluZEZsYWdzOjpOb25lKSB7CgkJaWYgKChtQmluZEZsYWdzICYgVGV4dHVyZTo6QmluZEZsYWdzOjpEZXB0aFN0ZW5jaWwpICE9IFRleHR1cmU6OkJpbmRGbGFnczo6Tm9uZSkgewoJCQljbGVhclZhbHVlLmRlcHRoU3RlbmNpbC5kZXB0aCA9IDEuMGY7CgkJfQoJfQoJZGVzYy5vcHRpbWFsQ2xlYXJWYWx1ZSA9IGNsZWFyVmFsdWU7CgoJLy8gc2hhcmVkIHJlc291cmNlCglpZiAoaXNfc2V0KG1CaW5kRmxhZ3MsIFJlc291cmNlOjpCaW5kRmxhZ3M6OlNoYXJlZCkpIHsKCQlkZXNjLmlzU2hhcmVkID0gdHJ1ZTsKCX0KCgkvLyB2YWxpZGF0ZSBkZXNjcmlwdGlvbgoJYXNzZXJ0KGRlc2Muc2l6ZS53aWR0aCA+IDAgJiYgZGVzYy5zaXplLmhlaWdodCA+IDApOwoJYXNzZXJ0KGRlc2MubnVtTWlwTGV2ZWxzID4gMCAmJiBkZXNjLnNpemUuZGVwdGggPiAwICYmIGRlc2MuYXJyYXlTaXplID4gMCAmJiBkZXNjLnNhbXBsZURlc2MubnVtU2FtcGxlcyA+IDApOwoKCS8vIGNyZWF0ZSByZXNvdXJjZQoJU2xhbmc6OkNvbVB0cjxnZng6OklUZXh0dXJlUmVzb3VyY2U+IHRleHR1cmVSZXNvdXJjZSA9IG1wRGV2aWNlLT5nZXRBcGlIYW5kbGUoKS0+Y3JlYXRlVGV4dHVyZVJlc291cmNlKGRlc2MsIHNoYXJlZF9mcm9tX3RoaXMoKSwgbnVsbHB0cik7Cglhc3NlcnQodGV4dHVyZVJlc291cmNlKTsKCglpZighdGV4dHVyZVJlc291cmNlKSBMTE9HX0ZUTCA8PCAiRXJyb3IgY3JlYXRpbmcgdGV4dHVyZSBvZiBmb3JtYXQgIiA8PCB0b19zdHJpbmcobUZvcm1hdCk7CgoJbUFwaUhhbmRsZSA9IHRleHR1cmVSZXNvdXJjZTsKCiNpZiBkZWZpbmVkKEZBTENPUl9HRlhfVkspIHx8IGRlZmluZWQoRkFMQ09SX1ZLKQoJbU1pcFRhaWxpbWFnZU1lbW9yeUJpbmQubWVtb3J5ID0gVktfTlVMTF9IQU5ETEU7CiNlbmRpZgoKCS8vIHVwbG9hZCBpbml0IGRhdGEgdGhyb3VnaCB0ZXh0dXJlIGNsYXNzCglpZiAocERhdGEpIHsKCQl1cGxvYWRJbml0RGF0YShwRGF0YSwgYXV0b0dlbk1pcHMpOwoJfQp9CgpUZXh0dXJlOjp+VGV4dHVyZSgpIHsKCWlmIChtQXBpSGFuZGxlKSB7CgkJaWYobUlzU3BhcnNlKSB7CgkJCWZvcihhdXRvIHBQYWdlOiBtU3BhcnNlRGF0YVBhZ2VzKSB7CgkJCQlwUGFnZS0+cmVsZWFzZSgpOwoJCQl9CiNpZiBGQUxDT1JfR0ZYX1ZLCgkJCW1wRGV2aWNlLT5nZXRBcGlIYW5kbGUoKS0+cmVsZWFzZVRhaWxNZW1vcnkodGhpcyk7CiNlbmRpZgoJCX0KCgkJQXBpT2JqZWN0SGFuZGxlIG9iamVjdEhhbmRsZTsKCQltQXBpSGFuZGxlLT5xdWVyeUludGVyZmFjZShTTEFOR19VVUlEX0lTbGFuZ1Vua25vd24sICh2b2lkKiopb2JqZWN0SGFuZGxlLndyaXRlUmVmKCkpOwoJCW1wRGV2aWNlLT5yZWxlYXNlUmVzb3VyY2Uob2JqZWN0SGFuZGxlKTsKCX0KfQoKdm9pZCBUZXh0dXJlOjp1cGRhdGVTcGFyc2VCaW5kSW5mbygpIHsKCgltcERldmljZS0+Z2V0QXBpSGFuZGxlKCktPnVwZGF0ZVNwYXJzZUJpbmRJbmZvKHRoaXMpOwoJcmV0dXJuOwoKCWdmeDo6SW50ZXJvcEhhbmRsZSBoYW5kbGUgPSB7fTsKCW1BcGlIYW5kbGUtPmdldE5hdGl2ZVJlc291cmNlSGFuZGxlKCZoYW5kbGUpOwoKI2lmIEZBTENPUl9HRlhfVksKCWFzc2VydChoYW5kbGUuYXBpID09IGdmeDo6SW50ZXJvcEhhbmRsZUFQSTo6VnVsa2FuKTsKCglWa0ltYWdlIGltYWdlID0gKFZrSW1hZ2UpaGFuZGxlLmhhbmRsZVZhbHVlOwoKCWFzc2VydChpbWFnZSAhPSBWS19OVUxMX0hBTkRMRSk7CgoJaWYgKCFtSXNTcGFyc2UpIHsKCQlMTE9HX0VSUiA8PCAiVW5hYmxlIHRvIHNwYXJzZSBiaW5kIG5vbiBzcGFyc2UgdGV4dHVyZSAhISEiOwoJCXJldHVybjsKCX0KCQoJLy8gVXBkYXRlIGxpc3Qgb2YgbWVtb3J5LWJhY2tlZCBzcGFyc2UgaW1hZ2UgbWVtb3J5IGJpbmRzCgltU3BhcnNlSW1hZ2VNZW1vcnlCaW5kcy5jbGVhcigpOwoJZm9yIChjb25zdCBhdXRvJiBwUGFnZSA6IG1TcGFyc2VEYXRhUGFnZXMpIHsKCQkvL2lmICggcFBhZ2UtPmlzUmVzaWRlbnQoKSkKCQltU3BhcnNlSW1hZ2VNZW1vcnlCaW5kcy5wdXNoX2JhY2socFBhZ2UtPm1JbWFnZU1lbW9yeUJpbmQpOwoJfQoKCS8vIFVwZGF0ZSBzcGFyc2UgYmluZCBpbmZvCgltQmluZFNwYXJzZUluZm8gPSB7fTsKCW1CaW5kU3BhcnNlSW5mby5zVHlwZSA9IFZLX1NUUlVDVFVSRV9UWVBFX0JJTkRfU1BBUlNFX0lORk87CgoJLy8gdG9kbzogU2VtYXBob3JlIGZvciBxdWV1ZSBzdWJtaXNzaW9uCgkvLyBiaW5kU3BhcnNlSW5mby5zaWduYWxTZW1hcGhvcmVDb3VudCA9IDE7CgkvLyBiaW5kU3BhcnNlSW5mby5wU2lnbmFsU2VtYXBob3JlcyA9ICZiaW5kU3BhcnNlU2VtYXBob3JlOwoKCS8vIEltYWdlIG1lbW9yeSBiaW5kcwoJbUltYWdlTWVtb3J5QmluZEluZm8gPSB7fTsKCW1JbWFnZU1lbW9yeUJpbmRJbmZvLmltYWdlID0gaW1hZ2U7CgltSW1hZ2VNZW1vcnlCaW5kSW5mby5iaW5kQ291bnQgPSBzdGF0aWNfY2FzdDx1aW50MzJfdD4obVNwYXJzZUltYWdlTWVtb3J5QmluZHMuc2l6ZSgpKTsKCW1JbWFnZU1lbW9yeUJpbmRJbmZvLnBCaW5kcyA9IG1TcGFyc2VJbWFnZU1lbW9yeUJpbmRzLmRhdGEoKTsKCgltQmluZFNwYXJzZUluZm8uaW1hZ2VCaW5kQ291bnQgPSAobUltYWdlTWVtb3J5QmluZEluZm8uYmluZENvdW50ID4gMCkgPyAxIDogMDsKCW1CaW5kU3BhcnNlSW5mby5wSW1hZ2VCaW5kcyA9ICZtSW1hZ2VNZW1vcnlCaW5kSW5mbzsKCgkvLyBPcGFxdWUgaW1hZ2UgbWVtb3J5IGJpbmRzIGZvciB0aGUgbWlwIHRhaWwKCW1PcGFxdWVNZW1vcnlCaW5kSW5mby5pbWFnZSA9IGltYWdlOwoJbU9wYXF1ZU1lbW9yeUJpbmRJbmZvLmJpbmRDb3VudCA9IHN0YXRpY19jYXN0PHVpbnQzMl90PihtT3BhcXVlTWVtb3J5QmluZHMuc2l6ZSgpKTsKCW1PcGFxdWVNZW1vcnlCaW5kSW5mby5wQmluZHMgPSBtT3BhcXVlTWVtb3J5QmluZHMuZGF0YSgpOwoJbUJpbmRTcGFyc2VJbmZvLmltYWdlT3BhcXVlQmluZENvdW50ID0gKG1PcGFxdWVNZW1vcnlCaW5kSW5mby5iaW5kQ291bnQgPiAwKSA/IDEgOiAwOwoJbUJpbmRTcGFyc2VJbmZvLnBJbWFnZU9wYXF1ZUJpbmRzID0gJm1PcGFxdWVNZW1vcnlCaW5kSW5mbzsKCgoJLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0KCS8vIEJpbmQgdG8gcXVldWUKCVZrUXVldWUgbmF0aXZlUXVldWUgPSBtcERldmljZS0+Z2V0Q29tbWFuZFF1ZXVlTmF0aXZlSGFuZGxlKExvd0xldmVsQ29udGV4dERhdGE6OkNvbW1hbmRRdWV1ZVR5cGU6OkRpcmVjdCwgMCk7CgoJLy90b2RvOiB1c2Ugc3BhcnNlIGJpbmQgc2VtYXBob3JlCgl2a1F1ZXVlV2FpdElkbGUobmF0aXZlUXVldWUpOwojZW5kaWYgIC8vIEZBTENPUl9HRlhfVksKfQoKfSAgLy8gbmFtZXNwYWNlIEZhbGNvcgoAAAAAAAAAAKceAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAZh4AAAAAAABxHgAAAAAAAAAAAAAAAPC/"
				]
			]
		},
		{
			"file": "src/Falcor/Core/API/GFX/GFXDevice.cpp",
			"settings":
			{
				"buffer_size": 20734,
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					1,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAD+UAAALyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKgogIyBDb3B5cmlnaHQgKGMpIDIwMTUtMjIsIE5WSURJQSBDT1JQT1JBVElPTi4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KICMKICMgUmVkaXN0cmlidXRpb24gYW5kIHVzZSBpbiBzb3VyY2UgYW5kIGJpbmFyeSBmb3Jtcywgd2l0aCBvciB3aXRob3V0CiAjIG1vZGlmaWNhdGlvbiwgYXJlIHBlcm1pdHRlZCBwcm92aWRlZCB0aGF0IHRoZSBmb2xsb3dpbmcgY29uZGl0aW9ucwogIyBhcmUgbWV0OgogIyAgKiBSZWRpc3RyaWJ1dGlvbnMgb2Ygc291cmNlIGNvZGUgbXVzdCByZXRhaW4gdGhlIGFib3ZlIGNvcHlyaWdodAogIyAgICBub3RpY2UsIHRoaXMgbGlzdCBvZiBjb25kaXRpb25zIGFuZCB0aGUgZm9sbG93aW5nIGRpc2NsYWltZXIuCiAjICAqIFJlZGlzdHJpYnV0aW9ucyBpbiBiaW5hcnkgZm9ybSBtdXN0IHJlcHJvZHVjZSB0aGUgYWJvdmUgY29weXJpZ2h0CiAjICAgIG5vdGljZSwgdGhpcyBsaXN0IG9mIGNvbmRpdGlvbnMgYW5kIHRoZSBmb2xsb3dpbmcgZGlzY2xhaW1lciBpbiB0aGUKICMgICAgZG9jdW1lbnRhdGlvbiBhbmQvb3Igb3RoZXIgbWF0ZXJpYWxzIHByb3ZpZGVkIHdpdGggdGhlIGRpc3RyaWJ1dGlvbi4KICMgICogTmVpdGhlciB0aGUgbmFtZSBvZiBOVklESUEgQ09SUE9SQVRJT04gbm9yIHRoZSBuYW1lcyBvZiBpdHMKICMgICAgY29udHJpYnV0b3JzIG1heSBiZSB1c2VkIHRvIGVuZG9yc2Ugb3IgcHJvbW90ZSBwcm9kdWN0cyBkZXJpdmVkCiAjICAgIGZyb20gdGhpcyBzb2Z0d2FyZSB3aXRob3V0IHNwZWNpZmljIHByaW9yIHdyaXR0ZW4gcGVybWlzc2lvbi4KICMKICMgVEhJUyBTT0ZUV0FSRSBJUyBQUk9WSURFRCBCWSBUSEUgQ09QWVJJR0hUIEhPTERFUlMgIkFTIElTIiBBTkQgQU5ZCiAjIEVYUFJFU1MgT1IgSU1QTElFRCBXQVJSQU5USUVTLCBJTkNMVURJTkcsIEJVVCBOT1QgTElNSVRFRCBUTywgVEhFCiAjIElNUExJRUQgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFkgQU5EIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUgogIyBQVVJQT1NFIEFSRSBESVNDTEFJTUVELiAgSU4gTk8gRVZFTlQgU0hBTEwgVEhFIENPUFlSSUdIVCBPV05FUiBPUgogIyBDT05UUklCVVRPUlMgQkUgTElBQkxFIEZPUiBBTlkgRElSRUNULCBJTkRJUkVDVCwgSU5DSURFTlRBTCwgU1BFQ0lBTCwKICMgRVhFTVBMQVJZLCBPUiBDT05TRVFVRU5USUFMIERBTUFHRVMgKElOQ0xVRElORywgQlVUIE5PVCBMSU1JVEVEIFRPLAogIyBQUk9DVVJFTUVOVCBPRiBTVUJTVElUVVRFIEdPT0RTIE9SIFNFUlZJQ0VTOyBMT1NTIE9GIFVTRSwgREFUQSwgT1IKICMgUFJPRklUUzsgT1IgQlVTSU5FU1MgSU5URVJSVVBUSU9OKSBIT1dFVkVSIENBVVNFRCBBTkQgT04gQU5ZIFRIRU9SWQogIyBPRiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQ09OVFJBQ1QsIFNUUklDVCBMSUFCSUxJVFksIE9SIFRPUlQKICMgKElOQ0xVRElORyBORUdMSUdFTkNFIE9SIE9USEVSV0lTRSkgQVJJU0lORyBJTiBBTlkgV0FZIE9VVCBPRiBUSEUgVVNFCiAjIE9GIFRISVMgU09GVFdBUkUsIEVWRU4gSUYgQURWSVNFRCBPRiBUSEUgUE9TU0lCSUxJVFkgT0YgU1VDSCBEQU1BR0UuCiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi8KI2luY2x1ZGUgInN0ZGFmeC5oIgoKI2luY2x1ZGUgIkdGWERldmljZUFwaURhdGEuaCIKI2luY2x1ZGUgIkdGWEZvcm1hdHMuaCIKI2luY2x1ZGUgIkZhbGNvci9Db3JlL1Byb2dyYW0vUHJvZ3JhbS5oIgojaW5jbHVkZSAiRmFsY29yL0NvcmUvQVBJL0RldmljZU1hbmFnZXIuaCIKI2luY2x1ZGUgIkZhbGNvci9Db3JlL0FQSS9SZW5kZXJDb250ZXh0LmgiCgojaWYgRkFMQ09SX0VOQUJMRV9OVkFQSSAmJiBGQUxDT1JfRDNEMTJfQVZBSUxBQkxFCiNpbmNsdWRlICJDb3JlL0FQSS9EM0QxMi9EM0QxMk52QXBpRXhEZXNjLmgiCiNkZWZpbmUgRkFMQ09SX05WQVBJX0FWQUlMQUJMRSAxCiNlbHNlCiNkZWZpbmUgRkFMQ09SX05WQVBJX0FWQUlMQUJMRSAwCiNlbmRpZgoKCnVzaW5nIG5hbWVzcGFjZSBnZng7CgojaW5jbHVkZSAiRmFsY29yL0NvcmUvQVBJL0RldmljZS5oIgoKbmFtZXNwYWNlIEZhbGNvciB7CgojaWYgRkFMQ09SX05WQVBJX0FWQUlMQUJMRQoJLy8gVG8gdXNlIE5WQVBJLCB3ZSBpbnRlcmNlcHQgdGhlIEFQSSBjYWxscyBpbiB0aGUgZ2Z4IGxheWVyIGFuZCBkaXNwYXRjaCBpbnRvIHRoZSBOVkFQSV9DcmVhdGUqUGlwZWxpbmVTdGF0ZQoJLy8gZnVuY3Rpb25zIGluc3RlYWQgaWYgdGhlIHNoYWRlciB1c2VzIE5WQVBJIGZ1bmN0aW9uYWxpdGllcy4KCS8vIFdlIHVzZSB0aGUgZ2Z4IEFQSSBkaXNwYXRjaGVyIG1lY2hhbmlzbSB0byBpbnRlcmNlcHQgYW5kIHJlZGlyZWN0IHRoZSBBUEkgY2FsbC4KCS8vIFRoaXMgaXMgZG9uZSBieSBkZWZpbmluZyBhbiBpbXBsZW1lbnRhdGlvbiBvZiBgSVBpcGVsaW5lQ3JlYXRpb25BUElEaXNwYXRjaGVyYCBhbmQgcGFzc2luZyBhbiBpbnN0YW5jZSBvZiB0aGlzCgkvLyBpbXBsZW1lbnRhdGlvbiB0byBgZ2Z4Q3JlYXRlRGV2aWNlYC4KCWNsYXNzIFBpcGVsaW5lQ3JlYXRpb25BUElEaXNwYXRjaGVyIDogcHVibGljIGdmeDo6SVBpcGVsaW5lQ3JlYXRpb25BUElEaXNwYXRjaGVyIHsKCXByaXZhdGU6CgoJCWJvb2wgZmluZE52QXBpU2hhZGVyUGFyYW1ldGVyKHNsYW5nOjpJQ29tcG9uZW50VHlwZSogcHJvZ3JhbSwgdWludDMyX3QmIHNwYWNlLCB1aW50MzJfdCYgcmVnaXN0ZXJJZCkgewoJCQlhdXRvIGdsb2JhbFR5cGVMYXlvdXQgPSBwcm9ncmFtLT5nZXRMYXlvdXQoKS0+Z2V0R2xvYmFsUGFyYW1zVmFyTGF5b3V0KCktPmdldFR5cGVMYXlvdXQoKTsKCQkJYXV0byBpbmRleCA9IGdsb2JhbFR5cGVMYXlvdXQtPmZpbmRGaWVsZEluZGV4QnlOYW1lKCJnX052aWRpYUV4dCIpOwoJCQlpZiAoaW5kZXggIT0gLTEpIHsKCQkJCWF1dG8gZmllbGQgPSBnbG9iYWxUeXBlTGF5b3V0LT5nZXRGaWVsZEJ5SW5kZXgoKHVuc2lnbmVkIGludClpbmRleCk7CgkJCQlzcGFjZSA9IGZpZWxkLT5nZXRCaW5kaW5nU3BhY2UoKTsKCQkJCXJlZ2lzdGVySWQgPSBmaWVsZC0+Z2V0QmluZGluZ0luZGV4KCk7CgkJCQlyZXR1cm4gdHJ1ZTsKCQkJfQoJCQlyZXR1cm4gZmFsc2U7CgkJfQoKCQl2b2lkIGNyZWF0ZU52QXBpVWF2U2xvdEV4RGVzYyhOdkFwaVBzb0V4RGVzYyYgcmV0LCB1aW50MzJfdCBzcGFjZSwgdWludDMyX3QgdWF2U2xvdCkgewoJCQlyZXQucHNvRXh0ZW5zaW9uID0gTlZfUFNPX1NFVF9TSEFERVJfRVhUTkVOU0lPTl9TTE9UX0FORF9TUEFDRTsKCgkJCWF1dG8mIGRlc2MgPSByZXQubUV4dFNsb3REZXNjOwoJCQlzdGQ6Om1lbXNldCgmZGVzYywgMCwgc2l6ZW9mKGRlc2MpKTsKCgkJCWRlc2MucHNvRXh0ZW5zaW9uID0gTlZfUFNPX1NFVF9TSEFERVJfRVhUTkVOU0lPTl9TTE9UX0FORF9TUEFDRTsKCQkJZGVzYy52ZXJzaW9uID0gTlZfU0VUX1NIQURFUl9FWFRFTlNJT05fU0xPVF9ERVNDX1ZFUjsKCQkJZGVzYy5iYXNlVmVyc2lvbiA9IE5WX1BTT19FWFRFTlNJT05fREVTQ19WRVI7CgkJCWRlc2MudWF2U2xvdCA9IHVhdlNsb3Q7CgkJCWRlc2MucmVnaXN0ZXJTcGFjZSA9IHNwYWNlOwoJCX0KCglwdWJsaWM6CgkJUGlwZWxpbmVDcmVhdGlvbkFQSURpc3BhdGNoZXIoKSB7CgkJCWlmIChOdkFQSV9Jbml0aWFsaXplKCkgIT0gTlZBUElfT0spIHsKCQkJCXRocm93IHN0ZDo6cnVudGltZV9lcnJvcigiRmFpbGVkIHRvIGluaXRpYWxpemUgTlZBUEkuIik7CgkJCX0KCQl9CgoJCX5QaXBlbGluZUNyZWF0aW9uQVBJRGlzcGF0Y2hlcigpIHsKCQkJTnZBUElfVW5sb2FkKCk7CgkJfQoKCQl2aXJ0dWFsIFNMQU5HX05PX1RIUk9XIFNsYW5nUmVzdWx0IFNMQU5HX01DQUxMIHF1ZXJ5SW50ZXJmYWNlKFNsYW5nVVVJRCBjb25zdCYgdXVpZCwgdm9pZCoqIG91dE9iamVjdCkgb3ZlcnJpZGUgewoJCQlpZiAodXVpZCA9PSBTbGFuZ1VVSUQgU0xBTkdfVVVJRF9JUGlwZWxpbmVDcmVhdGlvbkFQSURpc3BhdGNoZXIpIHsKCQkJCSpvdXRPYmplY3QgPSBzdGF0aWNfY2FzdDxnZng6OklQaXBlbGluZUNyZWF0aW9uQVBJRGlzcGF0Y2hlcio+KHRoaXMpOwoJCQkJcmV0dXJuIFNMQU5HX09LOwoJCQl9CgkJCXJldHVybiBTTEFOR19FX05PX0lOVEVSRkFDRTsKCQl9CgoJCS8vIFRoZSBsaWZldGltZSBvZiB0aGlzIGRpc3BhdGNoZXIgb2JqZWN0IHdpbGwgYmUgbWFuYWdlZCBieSBgRmFsY29yOjpEZXZpY2VgIHNvIHdlIGRvbid0IG5lZWQKCQkvLyB0byBhY3R1YWxseSBpbXBsZW1lbnQgcmVmZXJlbmNlIGNvdW50aW5nIGhlcmUuCgkJdmlydHVhbCBTTEFOR19OT19USFJPVyB1aW50MzJfdCBTTEFOR19NQ0FMTCBhZGRSZWYoKSBvdmVycmlkZSB7CgkJCXJldHVybiAxOwoJCX0KCgkJdmlydHVhbCBTTEFOR19OT19USFJPVyB1aW50MzJfdCBTTEFOR19NQ0FMTCByZWxlYXNlKCkgb3ZlcnJpZGUgewoJCQlyZXR1cm4gMTsKCQl9CgoJCS8vIFRoaXMgbWV0aG9kIHdpbGwgYmUgY2FsbGVkIGJ5IHRoZSBnZnggbGF5ZXIgdG8gY3JlYXRlIGFuIEFQSSBvYmplY3QgZm9yIGEgY29tcHV0ZSBwaXBlbGluZSBzdGF0ZS4KCQl2aXJ0dWFsIGdmeDo6UmVzdWx0IGNyZWF0ZUNvbXB1dGVQaXBlbGluZVN0YXRlKGdmeDo6SURldmljZSogZGV2aWNlLCBzbGFuZzo6SUNvbXBvbmVudFR5cGUqIHByb2dyYW0sIHZvaWQqIHBpcGVsaW5lRGVzYywgdm9pZCoqIG91dFBpcGVsaW5lU3RhdGUpIHsKCQkJZ2Z4OjpJRGV2aWNlOjpJbnRlcm9wSGFuZGxlcyBuYXRpdmVIYW5kbGU7CgkJCWRldmljZS0+Z2V0TmF0aXZlRGV2aWNlSGFuZGxlcygmbmF0aXZlSGFuZGxlKTsKCQkJSUQzRDEyRGV2aWNlKiBwRDNEMTJEZXZpY2UgPSByZWludGVycHJldF9jYXN0PElEM0QxMkRldmljZSo+KG5hdGl2ZUhhbmRsZS5oYW5kbGVzWzBdLmhhbmRsZVZhbHVlKTsKCgkJCXVpbnQzMl90IHNwYWNlLCByZWdpc3RlcklkOwoJCQlpZiAoZmluZE52QXBpU2hhZGVyUGFyYW1ldGVyKHByb2dyYW0sIHNwYWNlLCByZWdpc3RlcklkKSkgewoJCQkJTnZBcGlQc29FeERlc2MgcHNvRGVzYyA9IHt9OwoJCQkJY3JlYXRlTnZBcGlVYXZTbG90RXhEZXNjKHBzb0Rlc2MsIHNwYWNlLCByZWdpc3RlcklkKTsKCQkJCWNvbnN0IE5WQVBJX0QzRDEyX1BTT19FWFRFTlNJT05fREVTQyogcHBQU09FeHRlbnNpb25zRGVzY1sxXSA9IHsgJnBzb0Rlc2MubUV4dFNsb3REZXNjIH07CgkJCQlhdXRvIHJlc3VsdCA9IE52QVBJX0QzRDEyX0NyZWF0ZUNvbXB1dGVQaXBlbGluZVN0YXRlKAoJCQkJCXBEM0QxMkRldmljZSwKCQkJCQlyZWludGVycHJldF9jYXN0PEQzRDEyX0NPTVBVVEVfUElQRUxJTkVfU1RBVEVfREVTQyo+KHBpcGVsaW5lRGVzYyksCgkJCQkJMSwKCQkJCQlwcFBTT0V4dGVuc2lvbnNEZXNjLAoJCQkJCShJRDNEMTJQaXBlbGluZVN0YXRlKiopb3V0UGlwZWxpbmVTdGF0ZSk7CgkJCQlyZXR1cm4gKHJlc3VsdCA9PSBOVkFQSV9PSykgPyBTTEFOR19PSyA6IFNMQU5HX0ZBSUw7CgkJCX0gZWxzZSB7CgkJCQlJRDNEMTJQaXBlbGluZVN0YXRlKiBwU3RhdGUgPSBudWxscHRyOwoJCQkJU0xBTkdfUkVUVVJOX09OX0ZBSUwocEQzRDEyRGV2aWNlLT5DcmVhdGVDb21wdXRlUGlwZWxpbmVTdGF0ZSgKCQkJCQlyZWludGVycHJldF9jYXN0PEQzRDEyX0NPTVBVVEVfUElQRUxJTkVfU1RBVEVfREVTQyo+KHBpcGVsaW5lRGVzYyksIElJRF9QUFZfQVJHUygmcFN0YXRlKSkpOwoJCQkJKm91dFBpcGVsaW5lU3RhdGUgPSBwU3RhdGU7CgkJCX0KCQkJcmV0dXJuIFNMQU5HX09LOwoJCX0KCgkJLy8gVGhpcyBtZXRob2Qgd2lsbCBiZSBjYWxsZWQgYnkgdGhlIGdmeCBsYXllciB0byBjcmVhdGUgYW4gQVBJIG9iamVjdCBmb3IgYSBncmFwaGljcyBwaXBlbGluZSBzdGF0ZS4KCQl2aXJ0dWFsIGdmeDo6UmVzdWx0IGNyZWF0ZUdyYXBoaWNzUGlwZWxpbmVTdGF0ZShnZng6OklEZXZpY2UqIGRldmljZSwgc2xhbmc6OklDb21wb25lbnRUeXBlKiBwcm9ncmFtLCB2b2lkKiBwaXBlbGluZURlc2MsIHZvaWQqKiBvdXRQaXBlbGluZVN0YXRlKSB7CgkJCWdmeDo6SURldmljZTo6SW50ZXJvcEhhbmRsZXMgbmF0aXZlSGFuZGxlOwoJCQlkZXZpY2UtPmdldE5hdGl2ZURldmljZUhhbmRsZXMoJm5hdGl2ZUhhbmRsZSk7CgkJCUlEM0QxMkRldmljZSogcEQzRDEyRGV2aWNlID0gcmVpbnRlcnByZXRfY2FzdDxJRDNEMTJEZXZpY2UqPihuYXRpdmVIYW5kbGUuaGFuZGxlc1swXS5oYW5kbGVWYWx1ZSk7CgoJCQl1aW50MzJfdCBzcGFjZSwgcmVnaXN0ZXJJZDsKCQkJaWYgKGZpbmROdkFwaVNoYWRlclBhcmFtZXRlcihwcm9ncmFtLCBzcGFjZSwgcmVnaXN0ZXJJZCkpIHsKCQkJCU52QXBpUHNvRXhEZXNjIHBzb0Rlc2MgPSB7fTsKCQkJCWNyZWF0ZU52QXBpVWF2U2xvdEV4RGVzYyhwc29EZXNjLCBzcGFjZSwgcmVnaXN0ZXJJZCk7CgkJCQljb25zdCBOVkFQSV9EM0QxMl9QU09fRVhURU5TSU9OX0RFU0MqIHBwUFNPRXh0ZW5zaW9uc0Rlc2NbMV0gPSB7ICZwc29EZXNjLm1FeHRTbG90RGVzYyB9OwoKCQkJCWF1dG8gcmVzdWx0ID0gTnZBUElfRDNEMTJfQ3JlYXRlR3JhcGhpY3NQaXBlbGluZVN0YXRlKAoJCQkJCXBEM0QxMkRldmljZSwKCQkJCQlyZWludGVycHJldF9jYXN0PEQzRDEyX0dSQVBISUNTX1BJUEVMSU5FX1NUQVRFX0RFU0MqPihwaXBlbGluZURlc2MpLAoJCQkJCTEsCgkJCQkJcHBQU09FeHRlbnNpb25zRGVzYywKCQkJCQkoSUQzRDEyUGlwZWxpbmVTdGF0ZSoqKW91dFBpcGVsaW5lU3RhdGUpOwoJCQkJcmV0dXJuIChyZXN1bHQgPT0gTlZBUElfT0spID8gU0xBTkdfT0sgOiBTTEFOR19GQUlMOwoJCQl9IGVsc2UgewoJCQkJSUQzRDEyUGlwZWxpbmVTdGF0ZSogcFN0YXRlID0gbnVsbHB0cjsKCQkJCVNMQU5HX1JFVFVSTl9PTl9GQUlMKHBEM0QxMkRldmljZS0+Q3JlYXRlR3JhcGhpY3NQaXBlbGluZVN0YXRlKAoJCQkJCXJlaW50ZXJwcmV0X2Nhc3Q8RDNEMTJfR1JBUEhJQ1NfUElQRUxJTkVfU1RBVEVfREVTQyo+KHBpcGVsaW5lRGVzYyksIElJRF9QUFZfQVJHUygmcFN0YXRlKSkpOwoJCQkJKm91dFBpcGVsaW5lU3RhdGUgPSBwU3RhdGU7CgkJCX0KCQkJcmV0dXJuIFNMQU5HX09LOwoJCX0KCgkJLy8gVGhpcyBtZXRob2Qgd2lsbCBiZSBjYWxsZWQgYnkgdGhlIGdmeCBsYXllciByaWdodCBiZWZvcmUgY3JlYXRpbmcgYSByYXkgdHJhY2luZyBzdGF0ZSBvYmplY3QuCgkJdmlydHVhbCBnZng6OlJlc3VsdCBiZWZvcmVDcmVhdGVSYXlUcmFjaW5nU3RhdGUoZ2Z4OjpJRGV2aWNlKiBkZXZpY2UsIHNsYW5nOjpJQ29tcG9uZW50VHlwZSogcHJvZ3JhbSkgewoJCQlnZng6OklEZXZpY2U6OkludGVyb3BIYW5kbGVzIG5hdGl2ZUhhbmRsZTsKCQkJZGV2aWNlLT5nZXROYXRpdmVEZXZpY2VIYW5kbGVzKCZuYXRpdmVIYW5kbGUpOwoJCQlJRDNEMTJEZXZpY2UqIHBEM0QxMkRldmljZSA9IHJlaW50ZXJwcmV0X2Nhc3Q8SUQzRDEyRGV2aWNlKj4obmF0aXZlSGFuZGxlLmhhbmRsZXNbMF0uaGFuZGxlVmFsdWUpOwoKCQkJdWludDMyX3Qgc3BhY2UsIHJlZ2lzdGVySWQ7CgkJCWlmIChmaW5kTnZBcGlTaGFkZXJQYXJhbWV0ZXIocHJvZ3JhbSwgc3BhY2UsIHJlZ2lzdGVySWQpKSB7CgkJCQlpZiAoTnZBUElfRDNEMTJfU2V0TnZTaGFkZXJFeHRuU2xvdFNwYWNlKHBEM0QxMkRldmljZSwgcmVnaXN0ZXJJZCwgc3BhY2UpICE9IE5WQVBJX09LKSB7CgkJCQkJdGhyb3cgc3RkOjpydW50aW1lX2Vycm9yKCJGYWlsZWQgdG8gc2V0IE52QXBpIGV4dGVuc2lvbiIpOwoJCQkJfQoJCQl9CgoJCQlyZXR1cm4gU0xBTkdfT0s7CgkJfQoKCQkvLyBUaGlzIG1ldGhvZCB3aWxsIGJlIGNhbGxlZCBieSB0aGUgZ2Z4IGxheWVyIHJpZ2h0IGFmdGVyIGNyZWF0aW5nIGEgcmF5IHRyYWNpbmcgc3RhdGUgb2JqZWN0LgoJCXZpcnR1YWwgZ2Z4OjpSZXN1bHQgYWZ0ZXJDcmVhdGVSYXlUcmFjaW5nU3RhdGUoZ2Z4OjpJRGV2aWNlKiBkZXZpY2UsIHNsYW5nOjpJQ29tcG9uZW50VHlwZSogcHJvZ3JhbSkgewoJCQlnZng6OklEZXZpY2U6OkludGVyb3BIYW5kbGVzIG5hdGl2ZUhhbmRsZTsKCQkJZGV2aWNlLT5nZXROYXRpdmVEZXZpY2VIYW5kbGVzKCZuYXRpdmVIYW5kbGUpOwoJCQlJRDNEMTJEZXZpY2UqIHBEM0QxMkRldmljZSA9IHJlaW50ZXJwcmV0X2Nhc3Q8SUQzRDEyRGV2aWNlKj4obmF0aXZlSGFuZGxlLmhhbmRsZXNbMF0uaGFuZGxlVmFsdWUpOwoKCQkJdWludDMyX3Qgc3BhY2UsIHJlZ2lzdGVySWQ7CgkJCWlmIChmaW5kTnZBcGlTaGFkZXJQYXJhbWV0ZXIocHJvZ3JhbSwgc3BhY2UsIHJlZ2lzdGVySWQpKSB7CgkJCQlpZiAoTnZBUElfRDNEMTJfU2V0TnZTaGFkZXJFeHRuU2xvdFNwYWNlKHBEM0QxMkRldmljZSwgMHhGRkZGRkZGRiwgMCkgIT0gTlZBUElfT0spIHsKCQkJCQl0aHJvdyBzdGQ6OnJ1bnRpbWVfZXJyb3IoIkZhaWxlZCB0byBzZXQgTnZBcGkgZXh0ZW5zaW9uIik7CgkJCQl9CgkJCX0KCQkJcmV0dXJuIFNMQU5HX09LOwoJCX0KCgl9OwojZW5kaWYgLy8gRkFMQ09SX05WQVBJX0FWQUlMQUJMRQoKCUNvbW1hbmRRdWV1ZUhhbmRsZSBEZXZpY2U6OmdldENvbW1hbmRRdWV1ZUhhbmRsZShMb3dMZXZlbENvbnRleHREYXRhOjpDb21tYW5kUXVldWVUeXBlIHR5cGUsIHVpbnQzMl90IGluZGV4KSBjb25zdCB7CgkJcmV0dXJuIG1DbWRRdWV1ZXNbKHVpbnQzMl90KXR5cGVdW2luZGV4XTsKCX0KCiNpZiBGQUxDT1JfR0ZYX1ZLCiAgVmtRdWV1ZSBEZXZpY2U6OmdldENvbW1hbmRRdWV1ZU5hdGl2ZUhhbmRsZShMb3dMZXZlbENvbnRleHREYXRhOjpDb21tYW5kUXVldWVUeXBlIHR5cGUsIHVpbnQzMl90IGluZGV4KSBjb25zdCB7CiAgCXJldHVybiBtQ21kTmF0aXZlUXVldWVzWyh1aW50MzJfdCl0eXBlXVtpbmRleF07CiAgfQojZW5kaWYgIC8vIEZBTENPUl9HRlhfVksKCglBcGlDb21tYW5kUXVldWVUeXBlIERldmljZTo6Z2V0QXBpQ29tbWFuZFF1ZXVlVHlwZShMb3dMZXZlbENvbnRleHREYXRhOjpDb21tYW5kUXVldWVUeXBlIHR5cGUpIGNvbnN0IHsKCQlzd2l0Y2ggKHR5cGUpIHsKCQljYXNlIExvd0xldmVsQ29udGV4dERhdGE6OkNvbW1hbmRRdWV1ZVR5cGU6OkNvcHk6CgkJCXJldHVybiBBcGlDb21tYW5kUXVldWVUeXBlOjpHcmFwaGljczsKCQljYXNlIExvd0xldmVsQ29udGV4dERhdGE6OkNvbW1hbmRRdWV1ZVR5cGU6OkNvbXB1dGU6CgkJCXJldHVybiBBcGlDb21tYW5kUXVldWVUeXBlOjpHcmFwaGljczsKCQljYXNlIExvd0xldmVsQ29udGV4dERhdGE6OkNvbW1hbmRRdWV1ZVR5cGU6OkRpcmVjdDoKCQkJcmV0dXJuIEFwaUNvbW1hbmRRdWV1ZVR5cGU6OkdyYXBoaWNzOwoJCWRlZmF1bHQ6CgkJCXRocm93IHN0ZDo6cnVudGltZV9lcnJvcigiVW5rbm93biBjb21tYW5kIHF1ZXVlIHR5cGUiKTsKCQl9Cgl9CgoJYm9vbCBEZXZpY2U6OmdldEFwaUZib0RhdGEodWludDMyX3Qgd2lkdGgsIHVpbnQzMl90IGhlaWdodCwgUmVzb3VyY2VGb3JtYXQgY29sb3JGb3JtYXQsIFJlc291cmNlRm9ybWF0IGRlcHRoRm9ybWF0LCBSZXNvdXJjZUhhbmRsZSBhcGlIYW5kbGVzW2tTd2FwQ2hhaW5CdWZmZXJzQ291bnRdLCB1aW50MzJfdCYgY3VycmVudEJhY2tCdWZmZXJJbmRleCkgewoJCWZvciAodWludDMyX3QgaSA9IDA7IGkgPCBrU3dhcENoYWluQnVmZmVyc0NvdW50OyBpKyspIHsKCQkJU2xhbmc6OkNvbVB0cjxnZng6OklUZXh0dXJlUmVzb3VyY2U+IGltYWdlSGFuZGxlOwoJCQlTbGFuZ1Jlc3VsdCBociA9IG1wQXBpRGF0YS0+cFN3YXBDaGFpbi0+Z2V0SW1hZ2UoaSwgaW1hZ2VIYW5kbGUud3JpdGVSZWYoKSk7CgkJCWFwaUhhbmRsZXNbaV0gPSBpbWFnZUhhbmRsZS5nZXQoKTsKCQkJaWYgKFNMQU5HX0ZBSUxFRChocikpCgkJCXsKCQkJCUxMT0dfRVJSIDw8ICJGYWlsZWQgdG8gZ2V0IGJhY2stYnVmZmVyICIgPDwgc3RkOjp0b19zdHJpbmcoaSkgPDwgIiBmcm9tIHRoZSBzd2FwLWNoYWluIjsKCQkJCXJldHVybiBmYWxzZTsKCQkJfQoJCX0KCQljdXJyZW50QmFja0J1ZmZlckluZGV4ID0gdGhpcy0+bUN1cnJlbnRCYWNrQnVmZmVySW5kZXg7CgkJcmV0dXJuIHRydWU7Cgl9CgoJYm9vbCBEZXZpY2U6OmdldEFwaUZib0RhdGEodWludDMyX3Qgd2lkdGgsIHVpbnQzMl90IGhlaWdodCwgUmVzb3VyY2VGb3JtYXQgY29sb3JGb3JtYXQsIFJlc291cmNlRm9ybWF0IGRlcHRoRm9ybWF0LCBSZXNvdXJjZUhhbmRsZSAmYXBpSGFuZGxlKSB7CgkvLyBjcmVhdGUgcmVzb3VyY2UgZGVzY3JpcHRpb24KCWdmeDo6SVRleHR1cmVSZXNvdXJjZTo6RGVzYyBkZXNjID0ge307CgoJZGVzYy50eXBlID0gZ2Z4OjpJUmVzb3VyY2U6OlR5cGU6OlRleHR1cmUyRDsgLy8gc2FtZSBhcyByZXNvdXJjZSBkaW1lbnNpb24gaW4gRDNEMTIKCgkvLyBkZWZhdWx0IHN0YXRlIGFuZCBhbGxvd2VkIHN0YXRlcwoJZ2Z4OjpSZXNvdXJjZVN0YXRlIGRlZmF1bHRTdGF0ZTsKCWRlc2MuZGVmYXVsdFN0YXRlID0gZ2Z4OjpSZXNvdXJjZVN0YXRlOjpHZW5lcmFsOwoKCWRlc2MubWVtb3J5VHlwZSA9IGdmeDo6TWVtb3J5VHlwZTo6RGV2aWNlTG9jYWw7CgkKCWRlc2Muc2l6ZS53aWR0aCA9IGFsaWduX3RvKGdldEZvcm1hdFdpZHRoQ29tcHJlc3Npb25SYXRpbyhjb2xvckZvcm1hdCksIHdpZHRoKTsKCWRlc2Muc2l6ZS5oZWlnaHQgPSBhbGlnbl90byhnZXRGb3JtYXRIZWlnaHRDb21wcmVzc2lvblJhdGlvKGNvbG9yRm9ybWF0KSwgaGVpZ2h0KTsKCWRlc2Muc2l6ZS5kZXB0aCA9IDE7CglkZXNjLmFycmF5U2l6ZSA9IDE7CglkZXNjLm51bU1pcExldmVscyA9IDE7CgoJLy8gZm9ybWF0CglkZXNjLmZvcm1hdCA9IGdldEdGWEZvcm1hdChjb2xvckZvcm1hdCk7IC8vIGxvb2t1cCBjYW4gcmVzdWx0IGluIFVua25vd24gLyB1bnN1cHBvcnRlZCBmb3JtYXQKCgkvLyBzYW1wbGUgZGVzY3JpcHRpb24KCWRlc2Muc2FtcGxlRGVzYy5udW1TYW1wbGVzID0gMTsKCWRlc2Muc2FtcGxlRGVzYy5xdWFsaXR5ID0gMDsKCgkvLyBjbGVhciB2YWx1ZQoJZ2Z4OjpDbGVhclZhbHVlIGNsZWFyVmFsdWU7CgljbGVhclZhbHVlLmRlcHRoU3RlbmNpbC5kZXB0aCA9IDEuMGY7CglkZXNjLm9wdGltYWxDbGVhclZhbHVlID0gY2xlYXJWYWx1ZTsKCWRlc2MuaXNTaGFyZWQgPSBmYWxzZTsKCgkvLyB2YWxpZGF0ZSBkZXNjcmlwdGlvbgoJRkFMQ09SX0FTU0VSVChkZXNjLnNpemUud2lkdGggPiAwICYmIGRlc2Muc2l6ZS5oZWlnaHQgPiAwKTsKCUZBTENPUl9BU1NFUlQoZGVzYy5udW1NaXBMZXZlbHMgPiAwICYmIGRlc2Muc2l6ZS5kZXB0aCA+IDAgJiYgZGVzYy5hcnJheVNpemUgPiAwICYmIGRlc2Muc2FtcGxlRGVzYy5udW1TYW1wbGVzID4gMCk7CgoJLy8gY3JlYXRlIHJlc291cmNlCglzdGQ6OnNoYXJlZF9wdHI8RmFsY29yOjpUZXh0dXJlPiBwVGV4dHVyZTsKCWFwaUhhbmRsZSA9IG1wQXBpRGF0YS0+cERldmljZS0+Y3JlYXRlVGV4dHVyZVJlc291cmNlKGRlc2MsIHBUZXh0dXJlLCBudWxscHRyKTsKCUZBTENPUl9BU1NFUlQoYXBpSGFuZGxlKTsKCglyZXR1cm4gdHJ1ZTsKfQoKCXZvaWQgRGV2aWNlOjp0b2dnbGVGdWxsU2NyZWVuKGJvb2wgZnVsbHNjcmVlbikge30KCgl2b2lkIERldmljZTo6ZGVzdHJveUFwaU9iamVjdHMoKSB7CiNpZiBGQUxDT1JfTlZBUElfQVZBSUxBQkxFCgkJc2FmZV9kZWxldGUobXBBcGlEYXRhLT5wQXBpRGlzcGF0Y2hlcik7CiNlbmRpZgoJCXNhZmVfZGVsZXRlKG1wQXBpRGF0YSk7Cgl9CgoJZ2Z4OjpJVHJhbnNpZW50UmVzb3VyY2VIZWFwKiBEZXZpY2U6OmdldEN1cnJlbnRUcmFuc2llbnRSZXNvdXJjZUhlYXAoKSB7CgkJcmV0dXJuIG1wQXBpRGF0YS0+cFRyYW5zaWVudFJlc291cmNlSGVhcHNbbUN1cnJlbnRCYWNrQnVmZmVySW5kZXhdLmdldCgpOwoJfQoKCXZvaWQgRGV2aWNlOjpwcmVzZW50KCkgewoJCWFzc2VydCghbUhlYWRsZXNzKTsKCQltcFJlbmRlckNvbnRleHQtPnJlc291cmNlQmFycmllcihtcFN3YXBDaGFpbkZib3NbbUN1cnJlbnRCYWNrQnVmZmVySW5kZXhdLT5nZXRDb2xvclRleHR1cmUoMCkuZ2V0KCksIFJlc291cmNlOjpTdGF0ZTo6UHJlc2VudCk7CgkJbXBSZW5kZXJDb250ZXh0LT5mbHVzaCgpOwoJCW1wQXBpRGF0YS0+cFN3YXBDaGFpbi0+cHJlc2VudCgpOwoJCS8vIENhbGwgdG8gYWNxdWlyZU5leHRJbWFnZSB3aWxsIGJsb2NrIHVudGlsIHRoZSBuZXh0IGltYWdlIGluIHRoZSBzd2FwY2hhaW4gaXMgcmVhZHkgZm9yIHByZXNlbnQgYW5kIGFsbCB0aGUKCQkvLyBHUFUgdGFza3MgYXNzb2NpYXRlZCB3aXRoIHJlbmRlcmluZyB0aGUgbmV4dCBpbWFnZSBpbiB0aGUgc3dhcGNoYWluIGhhcyBhbHJlYWR5IGNvbXBsZXRlZC4KCQltQ3VycmVudEJhY2tCdWZmZXJJbmRleCA9IG1wQXBpRGF0YS0+cFN3YXBDaGFpbi0+YWNxdWlyZU5leHRJbWFnZSgpOwoJCWlmIChtQ3VycmVudEJhY2tCdWZmZXJJbmRleCAhPSAtMSkgewoJCQltcFJlbmRlckNvbnRleHQtPmdldExvd0xldmVsRGF0YSgpLT5jbG9zZUNvbW1hbmRCdWZmZXIoKTsKCQkJZ2V0Q3VycmVudFRyYW5zaWVudFJlc291cmNlSGVhcCgpLT5zeW5jaHJvbml6ZUFuZFJlc2V0KCk7CgkJCW1wUmVuZGVyQ29udGV4dC0+Z2V0TG93TGV2ZWxEYXRhKCktPm9wZW5Db21tYW5kQnVmZmVyKCk7CgkJfQoJCS8vIFNpbmNlIGNhbGwgdG8gYGFjcXVpcmVOZXh0SW1hZ2VgIGFscmVhZHkgaW5jbHVkZWQgYSBmZW5jZSB3YWl0IGluc2lkZSBHRlgsIHdlIGRvbid0IG5lZWQgdG8gd2FpdCBhZ2Fpbi4KCQkvLyBJbnN0ZWFkIHdlIGp1c3Qgc2lnbmFsIGBtcEZyYW1lRmVuY2VgIGZyb20gdGhlIGhvc3QuCgkJbXBGcmFtZUZlbmNlLT5leHRlcm5hbFNpZ25hbCgpOwoJCWlmIChtcEZyYW1lRmVuY2UtPmdldENwdVZhbHVlKCkgPj0ga1N3YXBDaGFpbkJ1ZmZlcnNDb3VudCkgbXBGcmFtZUZlbmNlLT5zZXRHcHVWYWx1ZShtcEZyYW1lRmVuY2UtPmdldENwdVZhbHVlKCkgLSBrU3dhcENoYWluQnVmZmVyc0NvdW50KTsKCQlleGVjdXRlRGVmZXJyZWRSZWxlYXNlcygpOwoJCW1GcmFtZUlEKys7Cgl9CgoJRGV2aWNlOjpTdXBwb3J0ZWRGZWF0dXJlcyBxdWVyeVN1cHBvcnRlZEZlYXR1cmVzKERldmljZUhhbmRsZSBwRGV2aWNlKSB7CgkJRGV2aWNlOjpTdXBwb3J0ZWRGZWF0dXJlcyByZXN1bHQgPSBEZXZpY2U6OlN1cHBvcnRlZEZlYXR1cmVzOjpOb25lOwoJCWlmIChwRGV2aWNlLT5oYXNGZWF0dXJlKCJyYXktdHJhY2luZyIpKSB7CgkJCXJlc3VsdCB8PSBEZXZpY2U6OlN1cHBvcnRlZEZlYXR1cmVzOjpSYXl0cmFjaW5nOwoJCX0KCQlpZiAocERldmljZS0+aGFzRmVhdHVyZSgicmF5LXF1ZXJ5IikpIHsKCQkJcmVzdWx0IHw9IERldmljZTo6U3VwcG9ydGVkRmVhdHVyZXM6OlJheXRyYWNpbmdUaWVyMV8xOwoJCX0KCQlpZiAocERldmljZS0+aGFzRmVhdHVyZSgiY29uc2VydmF0aXZlLXJhc3Rlcml6YXRpb24tMyIpKSB7CgkJCXJlc3VsdCB8PSBEZXZpY2U6OlN1cHBvcnRlZEZlYXR1cmVzOjpDb25zZXJ2YXRpdmVSYXN0ZXJpemF0aW9uVGllcjM7CgkJfQoJCWlmIChwRGV2aWNlLT5oYXNGZWF0dXJlKCJjb25zZXJ2YXRpdmUtcmFzdGVyaXphdGlvbi0yIikpIHsKCQkJcmVzdWx0IHw9IERldmljZTo6U3VwcG9ydGVkRmVhdHVyZXM6OkNvbnNlcnZhdGl2ZVJhc3Rlcml6YXRpb25UaWVyMjsKCQl9CgkJaWYgKHBEZXZpY2UtPmhhc0ZlYXR1cmUoImNvbnNlcnZhdGl2ZS1yYXN0ZXJpemF0aW9uLTEiKSkgewoJCQlyZXN1bHQgfD0gRGV2aWNlOjpTdXBwb3J0ZWRGZWF0dXJlczo6Q29uc2VydmF0aXZlUmFzdGVyaXphdGlvblRpZXIxOwoJCX0KCQlpZiAocERldmljZS0+aGFzRmVhdHVyZSgicmFzdGVyaXplci1vcmRlcmVkLXZpZXdzIikpIHsKCQkJcmVzdWx0IHw9IERldmljZTo6U3VwcG9ydGVkRmVhdHVyZXM6OlJhc3Rlcml6ZXJPcmRlcmVkVmlld3M7CgkJfQoJCWlmIChwRGV2aWNlLT5oYXNGZWF0dXJlKCJwcm9ncmFtbWFibGUtc2FtcGxlLXBvc2l0aW9ucy0yIikpIHsKCQkJcmVzdWx0IHw9IERldmljZTo6U3VwcG9ydGVkRmVhdHVyZXM6OlByb2dyYW1tYWJsZVNhbXBsZVBvc2l0aW9uc0Z1bGw7CgkJfQoJCWlmIChwRGV2aWNlLT5oYXNGZWF0dXJlKCJwcm9ncmFtbWFibGUtc2FtcGxlLXBvc2l0aW9ucy0xIikpIHsKCQkJcmVzdWx0IHw9IERldmljZTo6U3VwcG9ydGVkRmVhdHVyZXM6OlByb2dyYW1tYWJsZVNhbXBsZVBvc2l0aW9uc1BhcnRpYWxPbmx5OwoJCX0KCQlpZiAocERldmljZS0+aGFzRmVhdHVyZSgiYXRvbWljLWludDY0IikpIHsKCQkJcmVzdWx0IHw9IERldmljZTo6U3VwcG9ydGVkRmVhdHVyZXM6OkF0b21pY0ludDY0OwoJCX0KCQlpZiAocERldmljZS0+aGFzRmVhdHVyZSgiYXRvbWljLWZsb2F0IikpIHsKCQkJcmVzdWx0IHw9IERldmljZTo6U3VwcG9ydGVkRmVhdHVyZXM6OkF0b21pY0Zsb2F0OwoJCX0KCQlpZiAocERldmljZS0+aGFzRmVhdHVyZSgiYmFyeWNlbnRyaWNzIikpIHsKCQkJcmVzdWx0IHw9IERldmljZTo6U3VwcG9ydGVkRmVhdHVyZXM6OkJhcnljZW50cmljczsKCQl9CgkJcmV0dXJuIHJlc3VsdDsKCX0KCglEZXZpY2U6OlNoYWRlck1vZGVsIHF1ZXJ5U3VwcG9ydGVkU2hhZGVyTW9kZWwoRGV2aWNlSGFuZGxlIHBEZXZpY2UpIHsKCQlzdHJ1Y3QgU01MZXZlbCB7IGNvbnN0IGNoYXIqIG5hbWU7IERldmljZTo6U2hhZGVyTW9kZWwgbGV2ZWw7IH07CgkJY29uc3QgU01MZXZlbCBsZXZlbHNbXSA9IHsKCQkJeyJzbV82XzciLCBEZXZpY2U6OlNoYWRlck1vZGVsOjpTTTZfN30sCgkJCXsic21fNl82IiwgRGV2aWNlOjpTaGFkZXJNb2RlbDo6U002XzZ9LAoJCQl7InNtXzZfNSIsIERldmljZTo6U2hhZGVyTW9kZWw6OlNNNl81fSwKCQkJeyJzbV82XzQiLCBEZXZpY2U6OlNoYWRlck1vZGVsOjpTTTZfNH0sCgkJCXsic21fNl8zIiwgRGV2aWNlOjpTaGFkZXJNb2RlbDo6U002XzN9LAoJCQl7InNtXzZfMiIsIERldmljZTo6U2hhZGVyTW9kZWw6OlNNNl8yfSwKCQkJeyJzbV82XzEiLCBEZXZpY2U6OlNoYWRlck1vZGVsOjpTTTZfMX0sCgkJCXsic21fNl8wIiwgRGV2aWNlOjpTaGFkZXJNb2RlbDo6U002XzB9CgkJfTsKCgkJZm9yIChhdXRvIGxldmVsIDogbGV2ZWxzKSB7CgkJCWlmIChwRGV2aWNlLT5oYXNGZWF0dXJlKGxldmVsLm5hbWUpKSB7CgkJCQlyZXR1cm4gbGV2ZWwubGV2ZWw7CgkJCX0KCQl9CgkJcmV0dXJuIERldmljZTo6U2hhZGVyTW9kZWw6OlVua25vd247Cgl9CgoJYm9vbCBEZXZpY2U6OmFwaUluaXQoKSB7CgkJY29uc3QgdWludDMyX3Qga1RyYW5zaWVudEhlYXBDb25zdGFudEJ1ZmZlclNpemUgPSAxNiAqIDEwMjQgKiAxMDI0OwoKCQlEZXZpY2VBcGlEYXRhKiBwRGF0YSA9IG5ldyBEZXZpY2VBcGlEYXRhOwoJCW1wQXBpRGF0YSA9IHBEYXRhOwoKCQlJRGV2aWNlOjpEZXNjIGRlc2MgPSB7fTsKCiNpZiBGQUxDT1JfR0ZYX1ZLCgkJZGVzYy5kZXZpY2VUeXBlID0gRGV2aWNlVHlwZTo6VnVsa2FuOwojZW5kaWYKCQkKCQlkZXNjLnNsYW5nLnNsYW5nR2xvYmFsU2Vzc2lvbiA9IGdldFNsYW5nR2xvYmFsU2Vzc2lvbigpOwoKCQlnZng6OkQzRDEyRGV2aWNlRXh0ZW5kZWREZXNjIGV4dERlc2MgPSB7fTsKCQlleHREZXNjLnJvb3RQYXJhbWV0ZXJTaGFkZXJBdHRyaWJ1dGVOYW1lID0gInJvb3QiOwoJCXZvaWQqIHBFeHREZXNjID0gJmV4dERlc2M7CgkJZGVzYy5leHRlbmRlZERlc2NDb3VudCA9IDE7CgkJZGVzYy5leHRlbmRlZERlc2NzID0gJnBFeHREZXNjOwoKI2lmIEZBTENPUl9OVkFQSV9BVkFJTEFCTEUKCQltcEFwaURhdGEtPnBBcGlEaXNwYXRjaGVyID0gbmV3IFBpcGVsaW5lQ3JlYXRpb25BUElEaXNwYXRjaGVyKCk7CgkJZGVzYy5hcGlDb21tYW5kRGlzcGF0Y2hlciA9IHN0YXRpY19jYXN0PElTbGFuZ1Vua25vd24qPihtcEFwaURhdGEtPnBBcGlEaXNwYXRjaGVyKTsKI2VuZGlmCgojaWZkZWYgRkFMQ09SX0dGWAoJCWlmIChtVXNlSURlc2MpIHsKCQkJZGVzYy5leGlzdGluZ0RldmljZUhhbmRsZXMgPSBtSURlc2MuZXhpc3RpbmdEZXZpY2VIYW5kbGVzOwoJCX0KI2VuZGlmCgoJCWlmIChTTEFOR19GQUlMRUQoZ2Z4Q3JlYXRlRGV2aWNlKCZkZXNjLCBwRGF0YS0+cERldmljZS53cml0ZVJlZigpKSkpIHJldHVybiBmYWxzZTsKCgkJbUFwaUhhbmRsZSA9IHBEYXRhLT5wRGV2aWNlOwoKI2lmIEZBTENPUl9HRlhfVksKCQlnZng6OklEZXZpY2U6OkludGVyb3BIYW5kbGVzIGludGVyb3BIYW5kbGVzID0ge307CgkJbUFwaUhhbmRsZS0+Z2V0TmF0aXZlRGV2aWNlSGFuZGxlcygmaW50ZXJvcEhhbmRsZXMpOwoKCQltVmtJbnN0YW5jZSA9IHJlaW50ZXJwcmV0X2Nhc3Q8VmtJbnN0YW5jZT4oaW50ZXJvcEhhbmRsZXMuaGFuZGxlc1swXS5oYW5kbGVWYWx1ZSk7CgkJbVZrUGh5c2ljYWxEZXZpY2UgPSByZWludGVycHJldF9jYXN0PFZrUGh5c2ljYWxEZXZpY2U+KGludGVyb3BIYW5kbGVzLmhhbmRsZXNbMV0uaGFuZGxlVmFsdWUpOwoJCW1Wa0RldmljZSA9IHJlaW50ZXJwcmV0X2Nhc3Q8VmtEZXZpY2U+KGludGVyb3BIYW5kbGVzLmhhbmRsZXNbMl0uaGFuZGxlVmFsdWUpOwojZW5kaWYKCgkJbUdwdVRpbWVzdGFtcEZyZXF1ZW5jeSA9IDEwMDAuMCAvIChkb3VibGUpbUFwaUhhbmRsZS0+Z2V0RGV2aWNlSW5mbygpLnRpbWVzdGFtcEZyZXF1ZW5jeTsKCQltU3VwcG9ydGVkRmVhdHVyZXMgPSBxdWVyeVN1cHBvcnRlZEZlYXR1cmVzKG1BcGlIYW5kbGUpOwoJCW1TdXBwb3J0ZWRTaGFkZXJNb2RlbCA9IHF1ZXJ5U3VwcG9ydGVkU2hhZGVyTW9kZWwobUFwaUhhbmRsZSk7CgoJCWlmKCAhbUhlYWRsZXNzICkgewoJCQlmb3IgKHVpbnQzMl90IGkgPSAwOyBpIDwga1N3YXBDaGFpbkJ1ZmZlcnNDb3VudDsgKytpKSB7CgkJCQlJVHJhbnNpZW50UmVzb3VyY2VIZWFwOjpEZXNjIHRyYW5zaWVudEhlYXBEZXNjID0ge307CgkJCQl0cmFuc2llbnRIZWFwRGVzYy5mbGFncyA9IElUcmFuc2llbnRSZXNvdXJjZUhlYXA6OkZsYWdzOjpBbGxvd1Jlc2l6aW5nOwoJCQkJdHJhbnNpZW50SGVhcERlc2MuY29uc3RhbnRCdWZmZXJTaXplID0ga1RyYW5zaWVudEhlYXBDb25zdGFudEJ1ZmZlclNpemU7CgkJCQl0cmFuc2llbnRIZWFwRGVzYy5zYW1wbGVyRGVzY3JpcHRvckNvdW50ID0gMjA0ODsKCQkJCXRyYW5zaWVudEhlYXBEZXNjLnVhdkRlc2NyaXB0b3JDb3VudCA9IDEwMDAwMDA7CgkJCQl0cmFuc2llbnRIZWFwRGVzYy5zcnZEZXNjcmlwdG9yQ291bnQgPSAxMDAwMDAwOwoJCQkJdHJhbnNpZW50SGVhcERlc2MuY29uc3RhbnRCdWZmZXJEZXNjcmlwdG9yQ291bnQgPSAxMDAwMDAwOwoJCQkJdHJhbnNpZW50SGVhcERlc2MuYWNjZWxlcmF0aW9uU3RydWN0dXJlRGVzY3JpcHRvckNvdW50ID0gMTAwMDAwMDsKCgkJCQlpZiAoU0xBTkdfRkFJTEVEKHBEYXRhLT5wRGV2aWNlLT5jcmVhdGVUcmFuc2llbnRSZXNvdXJjZUhlYXAodHJhbnNpZW50SGVhcERlc2MsIHBEYXRhLT5wVHJhbnNpZW50UmVzb3VyY2VIZWFwc1tpXS53cml0ZVJlZigpKSkpIHsKCQkJCQlyZXR1cm4gZmFsc2U7CgkJCQl9CgkJCX0KCQl9IGVsc2UgewoJCQlJVHJhbnNpZW50UmVzb3VyY2VIZWFwOjpEZXNjIHRyYW5zaWVudEhlYXBEZXNjID0ge307CgkJCXRyYW5zaWVudEhlYXBEZXNjLmZsYWdzID0gSVRyYW5zaWVudFJlc291cmNlSGVhcDo6RmxhZ3M6OkFsbG93UmVzaXppbmc7CgkJCXRyYW5zaWVudEhlYXBEZXNjLmNvbnN0YW50QnVmZmVyU2l6ZSA9IGtUcmFuc2llbnRIZWFwQ29uc3RhbnRCdWZmZXJTaXplOwoJCQl0cmFuc2llbnRIZWFwRGVzYy5zYW1wbGVyRGVzY3JpcHRvckNvdW50ID0gMjA0ODsKCQkJdHJhbnNpZW50SGVhcERlc2MudWF2RGVzY3JpcHRvckNvdW50ID0gMTAwMDAwMDsKCQkJdHJhbnNpZW50SGVhcERlc2Muc3J2RGVzY3JpcHRvckNvdW50ID0gMTAwMDAwMDsKCQkJdHJhbnNpZW50SGVhcERlc2MuY29uc3RhbnRCdWZmZXJEZXNjcmlwdG9yQ291bnQgPSAxMDAwMDAwOwoJCQl0cmFuc2llbnRIZWFwRGVzYy5hY2NlbGVyYXRpb25TdHJ1Y3R1cmVEZXNjcmlwdG9yQ291bnQgPSAxMDAwMDAwOwoJCQlpZiAoU0xBTkdfRkFJTEVEKHBEYXRhLT5wRGV2aWNlLT5jcmVhdGVUcmFuc2llbnRSZXNvdXJjZUhlYXAodHJhbnNpZW50SGVhcERlc2MsIHBEYXRhLT5wVHJhbnNpZW50UmVzb3VyY2VIZWFwc1swXS53cml0ZVJlZigpKSkpIHsKCQkJCXJldHVybiBmYWxzZTsKCQkJfQoJCX0KCgkJSUNvbW1hbmRRdWV1ZTo6RGVzYyBxdWV1ZURlc2MgPSB7fTsKCQlxdWV1ZURlc2MudHlwZSA9IElDb21tYW5kUXVldWU6OlF1ZXVlVHlwZTo6R3JhcGhpY3M7CgkJaWYgKFNMQU5HX0ZBSUxFRChwRGF0YS0+cERldmljZS0+Y3JlYXRlQ29tbWFuZFF1ZXVlKHF1ZXVlRGVzYywgcERhdGEtPnBRdWV1ZS53cml0ZVJlZigpKSkpIHJldHVybiBmYWxzZTsKCQlmb3IgKGF1dG8mIHF1ZXVlIDogbUNtZFF1ZXVlcykgewoJCQlxdWV1ZS5wdXNoX2JhY2socERhdGEtPnBRdWV1ZSk7CgkJfQoKI2lmIEZBTENPUl9HRlhfVksKCQlmb3IgKGF1dG8mIHF1ZXVlIDogbUNtZE5hdGl2ZVF1ZXVlcykgewoJCSAgZ2Z4OjpJbnRlcm9wSGFuZGxlIGhhbmRsZSA9IHt9OwogICAgCUZBTENPUl9HRlhfQ0FMTChwRGF0YS0+cFF1ZXVlLT5nZXROYXRpdmVIYW5kbGUoJmhhbmRsZSkpOwogICAgCS8vYXNzZXJ0KGhhbmRsZS5hcGkgPT0gZ2Z4OjpJbnRlcm9wSGFuZGxlQVBJOjpWdWxrYW4pOwogICAgCXF1ZXVlLnB1c2hfYmFjayhyZWludGVycHJldF9jYXN0PFZrUXVldWU+KGhhbmRsZS5oYW5kbGVWYWx1ZSkpOwoJCX0KI2VuZGlmCgoKI2lmIEZBTENPUl9HRlhfVksKCQlpZiAoIW1IZWFkbGVzcyAmJiBtcFdpbmRvdykgewoJCQlpZiAobXBXaW5kb3ctPmdldENsaWVudEFyZWFTaXplKCkueCA9PSAwIHx8IG1wV2luZG93LT5nZXRDbGllbnRBcmVhU2l6ZSgpLnkgPT0gMCkgewoJCQkJTExPR19XUk4gPDwgIkF0dGVtcHRpbmcgdG8gaW5pdGlhbGl6ZSBWdWxrYW4gZGV2aWNlIG9uIGEgMC1zaXplZCB3aW5kb3cuIFRoZSBzd2FwY2hhaW4gd2lsbCBiZSBpbnZhbGlkIGFuZCB1c2luZyBpdCBjb3VsZCBsZWFkIHRvIGVycm9yLiI7CgkJCX0KCQl9CiNlbmRpZgoKCQlpZiAoIW1IZWFkbGVzcyAmJiBtcFdpbmRvdykgewoJCQlyZXR1cm4gY3JlYXRlU3dhcENoYWluKG1EZXNjLmNvbG9yRm9ybWF0KTsKCQl9IGVsc2UgewoJCQlyZXR1cm4gY3JlYXRlT2Zmc2NyZWVuRkJPKG1EZXNjLmNvbG9yRm9ybWF0KTsKCQl9Cgl9CgoJYm9vbCBEZXZpY2U6OmNyZWF0ZVN3YXBDaGFpbihSZXNvdXJjZUZvcm1hdCBjb2xvckZvcm1hdCkgewoJCWFzc2VydChtcFdpbmRvdyk7CgkJSVN3YXBjaGFpbjo6RGVzYyBkZXNjID0geyB9OwoJCWRlc2MuZm9ybWF0ID0gZ2V0R0ZYRm9ybWF0KGNvbG9yRm9ybWF0KTsKCQlkZXNjLmltYWdlQ291bnQgPSBrU3dhcENoYWluQnVmZmVyc0NvdW50OwoJCWF1dG8gY2xpZW50U2l6ZSA9IG1wV2luZG93LT5nZXRDbGllbnRBcmVhU2l6ZSgpOwoJCWRlc2Mud2lkdGggPSBjbGllbnRTaXplLng7CgkJZGVzYy5oZWlnaHQgPSBjbGllbnRTaXplLnk7CgkJZGVzYy5lbmFibGVWU3luYyA9IG1EZXNjLmVuYWJsZVZzeW5jOwoJCWRlc2MucXVldWUgPSBtcEFwaURhdGEtPnBRdWV1ZS5nZXQoKTsKCiNpZmRlZiBXSU4zMgoJCWlmIChTTEFOR19GQUlMRUQobXBBcGlEYXRhLT5wRGV2aWNlLT5jcmVhdGVTd2FwY2hhaW4oZGVzYywgZ2Z4OjpXaW5kb3dIYW5kbGU6OkZyb21Id25kKG1wV2luZG93LT5nZXRBcGlIYW5kbGUoKSksIG1wQXBpRGF0YS0+cFN3YXBDaGFpbi53cml0ZVJlZigpKSkpCiNlbHNlCgkJaWYgKFNMQU5HX0ZBSUxFRChtcEFwaURhdGEtPnBEZXZpY2UtPmNyZWF0ZVN3YXBjaGFpbihkZXNjLCBnZng6OldpbmRvd0hhbmRsZTo6RnJvbVhXaW5kb3cobXBXaW5kb3ctPmdldEFwaUhhbmRsZSgpLnBEaXNwbGF5LCBtcFdpbmRvdy0+Z2V0QXBpSGFuZGxlKCkud2luZG93KSwgbXBBcGlEYXRhLT5wU3dhcENoYWluLndyaXRlUmVmKCkpKSkKI2VuZGlmCgkJewoJCQlyZXR1cm4gZmFsc2U7CgkJfQoJCW1DdXJyZW50QmFja0J1ZmZlckluZGV4ID0gbXBBcGlEYXRhLT5wU3dhcENoYWluLT5hY3F1aXJlTmV4dEltYWdlKCk7CgkJcmV0dXJuIHRydWU7Cgl9CgoJYm9vbCBEZXZpY2U6OmNyZWF0ZU9mZnNjcmVlbkZCTyhSZXNvdXJjZUZvcm1hdCBjb2xvckZvcm1hdCkgewoJCXJldHVybiB0cnVlOwoJfQoKCXZvaWQgRGV2aWNlOjphcGlSZXNpemVTd2FwQ2hhaW4odWludDMyX3Qgd2lkdGgsIHVpbnQzMl90IGhlaWdodCwgUmVzb3VyY2VGb3JtYXQgY29sb3JGb3JtYXQpIHsKCQlGQUxDT1JfQVNTRVJUKG1wQXBpRGF0YS0+cFN3YXBDaGFpbik7CgkJRkFMQ09SX0dGWF9DQUxMKG1wQXBpRGF0YS0+cFN3YXBDaGFpbi0+cmVzaXplKHdpZHRoLCBoZWlnaHQpKTsKCQltQ3VycmVudEJhY2tCdWZmZXJJbmRleCA9IG1wQXBpRGF0YS0+cFN3YXBDaGFpbi0+YWNxdWlyZU5leHRJbWFnZSgpOwoJCWlmIChtQ3VycmVudEJhY2tCdWZmZXJJbmRleCAhPSAtMSkgewoJCQltcFJlbmRlckNvbnRleHQtPmdldExvd0xldmVsRGF0YSgpLT5jbG9zZUNvbW1hbmRCdWZmZXIoKTsKCQkJZ2V0Q3VycmVudFRyYW5zaWVudFJlc291cmNlSGVhcCgpLT5zeW5jaHJvbml6ZUFuZFJlc2V0KCk7CgkJCW1wUmVuZGVyQ29udGV4dC0+Z2V0TG93TGV2ZWxEYXRhKCktPm9wZW5Db21tYW5kQnVmZmVyKCk7CgkJfQoJfQoKCWJvb2wgRGV2aWNlOjppc1dpbmRvd09jY2x1ZGVkKCkgY29uc3QgewoJCXJldHVybiBtQ3VycmVudEJhY2tCdWZmZXJJbmRleCA9PSAtMTsKCX0KCglEZXZpY2U6On5EZXZpY2UoKSB7IAoJfQoKfSAvLyBuYW1lc3BhY2UgRmFsY29yCgAAAAAAAAAA/lAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAMCIAAAAAAAAwIgAAAAAAAAAAAAAAAPC/"
				]
			]
		},
		{
			"file": "src/RenderPasses/DeferredLightingPass/DeferredLightingPass.cs.slang",
			"settings":
			{
				"buffer_size": 25072,
				"encoding": "UTF-8",
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					3,
					2,
					"right_delete",
					null,
					"AgAAAINPAAAAAAAAg08AAAAAAAABAAAAL4NPAAAAAAAAg08AAAAAAAABAAAALw",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAINPAAAAAAAAg08AAAAAAAAAAAAAAADwvw"
				],
				[
					5,
					1,
					"insert",
					{
						"characters": "//"
					},
					"AgAAAMBPAAAAAAAAwU8AAAAAAAAAAAAAwU8AAAAAAADCTwAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAMBPAAAAAAAAwE8AAAAAAAAAAAAAAABCQA"
				],
				[
					1,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAADwYQAAI2luY2x1ZGUgIlV0aWxzL01hdGgvTWF0aENvbnN0YW50cy5zbGFuZ2giCgppbXBvcnQgU2NlbmUuUmFzdGVyOwppbXBvcnQgU2NlbmUuU2hhZGluZzsKaW1wb3J0IFNjZW5lLlJheXRyYWNpbmdJbmxpbmU7CgppbXBvcnQgVXRpbHMuTWF0aC5NYXRoSGVscGVyczsKaW1wb3J0IFV0aWxzLlNhbXBsaW5nLlNhbXBsZUdlbmVyYXRvcjsKaW1wb3J0IEV4cGVyaW1lbnRhbC5TY2VuZS5MaWdodHMuTGlnaHRIZWxwZXJzOwppbXBvcnQgRXhwZXJpbWVudGFsLlNjZW5lLkxpZ2h0cy5FbnZNYXBTYW1wbGVyOwoKaW1wb3J0IEV4cGVyaW1lbnRhbC5TY2VuZS5NYXRlcmlhbHMuRnJlc25lbDsKaW1wb3J0IEV4cGVyaW1lbnRhbC5TY2VuZS5NYXRlcmlhbHMuTWljcm9mYWNldDsKaW1wb3J0IEV4cGVyaW1lbnRhbC5TY2VuZS5NYXRlcmlhbHMuU3RhbmRhcmRNYXRlcmlhbDsKCiNkZWZpbmUgaXNfdmFsaWQobmFtZSkgKGlzX3ZhbGlkXyMjbmFtZSAhPSAwKQoKaW1wb3J0IERlZmVycmVkTGlnaHRpbmdIZWxwZXJzOwppbXBvcnQgRGVmZXJyZWRMaWdodGluZ0FPVjsKCiNpZm5kZWYgX01BWF9SQVlfTEVWRUwKI2RlZmluZSBfTUFYX1JBWV9MRVZFTCAwCiNlbmRpZgoKI2RlZmluZSBfRklYX1NIQURPV19URVJNSU5BVE9SCiNkZWZpbmUgX1VTRV9NVUxUSVBMRV9JTVBPUlRBTkNFX1NBTVBMSU5HCiNkZWZpbmUgX0NBQ0hFX05FWFRfUkFZCgojZGVmaW5lIExVTUFfUkVDNzA5KGYzY29sb3IpIGRvdChmM2NvbG9yLCBmbG9hdDMoMC4yMTI2ZiwgMC43MTUyZiwgMC4wNzIyZikpCiNkZWZpbmUgTFVNQV9DQ0lSNjAxKGYzY29sb3IpIGRvdChmM2NvbG9yLCBmbG9hdDMoMC4yOTlmLCAwLjU4N2YsIDAuMTE0ZikpCgojZGVmaW5lIEdSRVkoZjNjb2xvcikgKExVTUFfUkVDNzA5KGYzY29sb3IpICsgMC41ZikKCi8vIEV4dHJhIGlucHV0IGNoYW5uZWxzClRleHR1cmUyRDxmbG9hdD4gZ0RlcHRoOwpUZXh0dXJlMkQ8UGFja2VkSGl0SW5mbz4gZ1ZidWZmZXI7ClRleHR1cmUyRDxmbG9hdDQ+IGdUZXh0dXJlR3JhZHM7CgovLyBFeHRyYSBVQVYgb3V0cHV0IGNoYW5uZWxzClJhc3Rlcml6ZXJPcmRlcmVkVGV4dHVyZTJEPGZsb2F0PiAgZ091dFB6OwpSYXN0ZXJpemVyT3JkZXJlZFRleHR1cmUyRDxmbG9hdDQ+IGdPdXRQb3NpdGlvbjsKUmFzdGVyaXplck9yZGVyZWRUZXh0dXJlMkQ8ZmxvYXQ0PiBnT3V0QWxiZWRvOwpSYXN0ZXJpemVyT3JkZXJlZFRleHR1cmUyRDxmbG9hdDQ+IGdPdXRFbWlzc2lvbjsKUmFzdGVyaXplck9yZGVyZWRUZXh0dXJlMkQ8ZmxvYXQ0PiBnT3V0U2hhZG93czsKUmFzdGVyaXplck9yZGVyZWRUZXh0dXJlMkQ8ZmxvYXQ0PiBnT3V0Tm9ybWFsczsKUmFzdGVyaXplck9yZGVyZWRUZXh0dXJlMkQ8ZmxvYXQyPiBnT3V0TW90aW9uVmVjczsKUmFzdGVyaXplck9yZGVyZWRUZXh0dXJlMkQ8ZmxvYXQ+ICBnT3V0T2NjbHVzaW9uOwpSYXN0ZXJpemVyT3JkZXJlZFRleHR1cmUyRDxmbG9hdD4gIGdPdXRGcmVzbmVsOwpSYXN0ZXJpemVyT3JkZXJlZFRleHR1cmUyRDxmbG9hdD4gIGdQcmltSUQ7ClJhc3Rlcml6ZXJPcmRlcmVkVGV4dHVyZTJEPGZsb2F0PiAgZ09wSUQ7ClJhc3Rlcml6ZXJPcmRlcmVkVGV4dHVyZTJEPGZsb2F0MTZfdD4gIGdWYXJpYW5jZTsKClJhc3Rlcml6ZXJPcmRlcmVkVGV4dHVyZTJEPGZsb2F0MTZfdDQ+IGdMYXN0RnJhbWVTdW07CgovLyBNYWluIG91dHB1dCBjaGFubmVsClJXVGV4dHVyZTJEPGZsb2F0ND4gZ0luT3V0Q29sb3I7CgpjYnVmZmVyIFBlckZyYW1lQ0IgewogIHVpbnQyICAgICAgICAgICAgIGdOb2lzZU9mZnNldDsKICB1aW50ICAgICAgICAgICAgICBnU2FtcGxlTnVtYmVyOyAgICAgICAgICAgICAgICAgLy8gSW50ZXJmcmFtZSBzYW1wbGUgbnVtYmVyLgogIGJvb2wgICAgICAgICAgICAgIGdVc2VJbXBvcnRhbmNlU2FtcGxpbmcgPSB0cnVlOyAvLyBVc2UgQlJERiBpbXBvcnRhbmNlIHNhbXBsaW5nLgogIGludCAgICAgICAgICAgICAgIHVzZVBkZiA9IDA7ICAgICAgICAgICAgICAgICAgICAvLyBVc2UgQlJERiBzYW1wbGluZyBwZGYgZXhwbGljaXRseSwgb3RoZXJ3aXNlIHRoZSBwcmVjb21wdXRlZCB3ZWlnaHQgKGZvciBkZWJ1Z2dpbmcpLgogIGZsb2F0MTZfdDMgICAgICAgIGdDb2xvckxpbWl0ID0gZmxvYXQzKDEwLjAsIDEwLjAsIDEwLjApOwogIGZsb2F0MTZfdDMgICAgICAgIGdJbmRpcmVjdENvbG9yTGltaXQgPSBmbG9hdDMoMy4wLCAzLjAsIDMuMCk7CiAgdWludCAgICAgICAgICAgICAgZ1JheURpZmZ1c2VMaW1pdCA9IDA7CiAgdWludCAgICAgICAgICAgICAgZ1JheVJlZmxlY3RMaW1pdCA9IDA7CiAgdWludCAgICAgICAgICAgICAgZ1JheVJlZnJhY3RMaW1pdCA9IDA7CiAgZmxvYXQgICAgICAgICAgICAgZ1JheUJpYXMgPSAwLjAwMDE7CiAgZmxvYXQgICAgICAgICAgICAgZ1JheUNvbnRyaWJUaHJlc2ggPSAwLjE7CiAgdWludCAgICAgICAgICAgICAgZ1J1c3NSb3VsZXR0ZUxldmVsID0gMjsKICB1aW50MiAgICAgICAgICAgICBnRnJhbWVEaW07CiAgdWludCAgICAgICAgICAgICAgZ1NhbXBsZXNQZXJGcmFtZTsKCiAgRW52TWFwU2FtcGxlciAgICAgZ0Vudk1hcFNhbXBsZXI7Cn07CgpTYW1wbGVyU3RhdGUgZ05vaXNlU2FtcGxlcjsKU2FtcGxlclN0YXRlIGdEZXB0aFNhbXBsZXI7ClRleHR1cmUyRCBnTm9pc2VUZXg7CgoKLyoqIHdyaXRlIEFPVkRhdGEKKi8Kdm9pZCB3cml0ZUFPVih1aW50MiBpcG9zLCBjb25zdCBBT1ZEYXRhIGQpIHsKI2lmIGlzX3ZhbGlkKGdPdXRQeikKICAgICAgICBnT3V0UHpbaXBvc10gPSBkLmRlcHRoOwojZW5kaWYgIC8vIGdPdXRQegoKI2lmIGlzX3ZhbGlkKGdPdXRBbGJlZG8pCiAgICAgICAgZ091dEFsYmVkb1tpcG9zXSA9IGZsb2F0NChkLmFsYmVkbywgLjApOwojZW5kaWYgIC8vIGdPdXRBbGJlZG8KCiNpZiBpc192YWxpZChnT3V0RW1pc3Npb24pCiAgICAgICAgZ091dEVtaXNzaW9uW2lwb3NdID0gZmxvYXQ0KGQuZW1pc3Npb24sIC4wKTsKI2VuZGlmICAvLyBnT3V0RW1pc3Npb24KCiNpZiBpc192YWxpZChnT3V0Tm9ybWFscykKICAgICAgICBnT3V0Tm9ybWFsc1tpcG9zXSA9IGZsb2F0NChkLm5vcm1hbCwgLjBmKTsKI2VuZGlmICAvLyBnT3V0Tm9ybWFscwoKI2lmIGlzX3ZhbGlkKGdPdXRTaGFkb3dzKQogICAgICAgIGdPdXRTaGFkb3dzW2lwb3NdID0gZmxvYXQ0KGQuc2hhZG93LCAuMGYpOwojZW5kaWYgIC8vIGdPdXRTaGFkb3dzCgojaWYgaXNfdmFsaWQoZ091dFBvc2l0aW9uKQogICAgICAgIGdPdXRQb3NpdGlvbltpcG9zXSA9IGZsb2F0NChkLnBvc2l0aW9uLCAuMCk7CiNlbmRpZiAgLy8gZ091dFBvc2l0aW9uCgojaWYgaXNfdmFsaWQoZ091dEZyZXNuZWwpCiAgICAgICAgZ091dEZyZXNuZWxbaXBvc10gPSBkLmZyZXNuZWw7CiNlbmRpZiAgLy8gZ091dEZyZXNuZWwKCiNpZiBpc192YWxpZChnUHJpbUlEKQogICAgICAgIGdQcmltSURbaXBvc10gPSBkLnByaW1JRDsKI2VuZGlmICAvLyBnT3V0RnJlc25lbAoKI2lmIGlzX3ZhbGlkKGdPcElEKQogICAgICAgIGdPcElEW2lwb3NdID0gZC5vcElEOwojZW5kaWYgIC8vIGdPcElECgp9CgplbnVtIGNsYXNzIFJheVR5cGUgewogICAgUHJpbWFyeSAgICAgICAgICAgICAgICAgPSAwLCAgICAvLy88IENhbWVyYSByYXkuCiAgICBEaWZmdXNlICAgICAgICAgICAgICAgICA9IDEsICAgIC8vLzwgRGlmZnVzZSByZWZsZWN0aW9uLgogICAgU3BlY3VsYXIgICAgICAgICAgICAgICAgPSAyLCAgICAvLy88IFNwZWN1bGFyIHJlZmxlY3Rpb24gKGluY2x1ZGluZyBkZWx0YSkuCiAgICBUcmFuc21pc3Npb24gICAgICAgICAgICA9IDMsICAgIC8vLzwgVHJhbnNtaXNzaW9uIChhbGwga2luZHMpLgp9OwoKc3RydWN0IFJheURhdGEgewogICAgdWludCAgIGxldmVsOyAgIC8vLzwgUmF5IGJvdW5jZXMgY291bnRlcgogICAgZmxvYXQgIGxlbmd0aDsgIC8vLzwgUmF5IGRpc3RhbmNlIHRyYXZlbGVkCiAgICBmbG9hdDMgb3JpZ2luOyAKICAgIGZsb2F0MyBkaXI7CiAgICBmbG9hdDMgd2VpZ2h0OyAgLy8vPCBSYXkgdGhyb3VnaHB1dAogICAgSGl0SW5mbyBoaXQ7CiAgICBSYXlUeXBlIHR5cGU7CiAgICAKICAgIHN0YXRpYyBSYXlEYXRhIGNyZWF0ZSgpIHsKICAgICAgICBSYXlEYXRhIHI7CiAgICAgICAgci5sZXZlbCA9IDA7CiAgICAgICAgci5sZW5ndGggPSAwLjBmOwogICAgICAgIHIud2VpZ2h0ID0gZmxvYXQzKDEuZik7CiAgICAgICAgci5vcmlnaW4gPSByLmRpciA9IGZsb2F0MygwLjApOwogICAgICAgIHIudHlwZSA9IFJheVR5cGU6OlByaW1hcnk7CiAgICAgICAgci5oaXQgPSB7fTsKICAgICAgICByZXR1cm4gcjsKICAgIH0KfTsKCmZsb2F0IF9jb21wdXRlRW52aXJvbm1lbnRNYXBMT0QoZmxvYXQgcGRmLCBUZXh0dXJlMkQgZW52aXJvbm1lbnRNYXApIHsKICAgIHVpbnQgdHh3LCB0eGg7CiAgICBlbnZpcm9ubWVudE1hcC5HZXREaW1lbnNpb25zKHR4dywgdHhoKTsKICAgIHJldHVybiBsb2cyKHBkZiAqIHR4aCAqIE1fMV9QSSk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBGcm9tIGNoYXB0ZXIgMjEgaW4gUmF5IFRyYWNpbmcgR2Vtcy4KfQoKLyoqIEhlbHBlciB0byBjcmVhdGUgYSB0ZXh0dXJlIHNhbXBsZXIgaW5zdGFuY2UuCiAgICBUaGUgbWV0aG9kIGZvciBjb21wdXRpbmcgdGV4dHVyZSBsZXZlbC1vZi1kZXRhaWwgZGVwZW5kcyBvbiB0aGUgY29uZmlndXJhdGlvbi4KICAgIFxwYXJhbVtpbl0gcGl4ZWwgQ3VycmVudCBwaXhlbCBjb29yZGluYXRlcy4KICAgIFxyZXR1cm4gVGV4dHVyZSBzYW1wbGVyIGluc3RhbmNlLgoqLwpJVGV4dHVyZVNhbXBsZXIgY3JlYXRlVGV4dHVyZVNhbXBsZXIoY29uc3QgdWludDIgcGl4ZWxfcG9zKSB7CiAgICAjaWYgaXNfdmFsaWQoZ1RleHR1cmVHcmFkcykKICAgICAgICBjb25zdCBmbG9hdDQgdGV4R3JhZHMgPSBnVGV4dHVyZUdyYWRzW3BpeGVsX3Bvc107CiAgICAgICAgcmV0dXJuIEV4cGxpY2l0R3JhZGllbnRUZXh0dXJlU2FtcGxlcih0ZXhHcmFkcy54eSwgdGV4R3JhZHMuencpOwogICAgI2Vsc2UKICAgICAgICByZXR1cm4gRXhwbGljaXRMb2RUZXh0dXJlU2FtcGxlcigwLmYpOwogICAgI2VuZGlmCn0KCi8vZmxvYXQzIGNhbGNJbGx1bWluYW5jZTxTIDogSVNhbXBsZUdlbmVyYXRvciwgTCA6IElUZXh0dXJlU2FtcGxlcj4oaW5vdXQgZmxvYXQzIHJheURpciwgaW5vdXQgSGl0SW5mbyBoaXQsIFRyaWFuZ2xlSGl0IHRyaWFuZ2xlSGl0LCBTaGFkaW5nRGF0YSBzZCwgaW5vdXQgZmxvYXQzIHNhbXBsZVdlaWdodCwgaW5vdXQgUyBzZywgaW5vdXQgQU9WRGF0YSBhb3ZfZGF0YSwgY29uc3QgZmxvYXQ0IHJuZCwgTCBsb2QsIHVpbnQgcmF5TGV2ZWwsIGNvbnN0IHVpbnQgbWF4UmF5TGV2ZWwpewoKZmxvYXQzIGNhbGNJbGx1bWluYW5jZTxTIDogSVNhbXBsZUdlbmVyYXRvciwgTCA6IElUZXh0dXJlU2FtcGxlcj4oaW5vdXQgUmF5RGF0YSByYXlEYXRhLCBUcmlhbmdsZUhpdCB0cmlhbmdsZUhpdCwgU2hhZGluZ0RhdGEgc2QsIGlub3V0IFMgc2csIGlub3V0IEFPVkRhdGEgYW92X2RhdGEsIGNvbnN0IGZsb2F0NCBybmQsIEwgbG9kLCBjb25zdCB1aW50IG1heFJheUxldmVsKXsKCiAgICBmbG9hdDMgc3VyZmFjZUNvbG9yID0gZmxvYXQzKDAuMCk7CgogICAgY29uc3QgZmxvYXQgbHVtYVdlaWdodCA9IExVTUFfQ0NJUjYwMShyYXlEYXRhLndlaWdodCkgLyBnUmF5Q29udHJpYlRocmVzaDsKICAgIGNvbnN0IGZsb2F0IHJyVGhyZXNob2xkID0gcm5kLng7Ly8gKiAoKGZsb2F0KXJheURhdGEubGV2ZWwgLyAoZmxvYXQpbWluKDEsIG1heFJheUxldmVsKSk7ICAvLyByYW5nZSBzaG91bGQgYmUgWzAsIDFdCiAgICBpZihnUnVzc1JvdWxldHRlTGV2ZWwgPiAwICYmIHJheURhdGEubGV2ZWwgPj0gZ1J1c3NSb3VsZXR0ZUxldmVsICYmIGx1bWFXZWlnaHQgPCByclRocmVzaG9sZCkgewogICAgICAgIHJheURhdGEud2VpZ2h0ID0gZmxvYXQzKDAuZik7CiAgICAgICAgcmV0dXJuIHN1cmZhY2VDb2xvcjsKICAgIH0KCiAgICBmbG9hdDMgcmF5T3JpZ2luID0gc2QucG9zVzsKICAgIGZsb2F0MyByYXlTaGFkb3dPcmlnaW4gPSByYXlPcmlnaW47CiAgICBmbG9hdDMgZ2VvbWV0cnlGYWNlTm9ybWFsVyA9IGdldEdlb21ldHJpY0ZhY2VOb3JtYWxXKHRyaWFuZ2xlSGl0Lmluc3RhbmNlSUQsIHRyaWFuZ2xlSGl0LnByaW1pdGl2ZUluZGV4KTsKCiAgICAvLyBGYWNlIGZvcndhZCBpbnRlcnBvbGF0ZWQgbm9ybWFsCiAgICAvL3NkLk4gPSBmYWNlZm9yd2FyZChzZC5OLCByYXlEYXRhLmRpciwgZ2VvbWV0cnlGYWNlTm9ybWFsVyk7CgogICAgW1ticmFuY2ggXV0gaWYgKGdTY2VuZS5kb0ZpeFNoYWRvd1Rlcm1pbmF0b3IodHJpYW5nbGVIaXQuaW5zdGFuY2VJRCkpIHsKICAgICAgICByYXlTaGFkb3dPcmlnaW4gPSBnU2NlbmUuY29tcHV0ZVNoYWRpbmdQb3NpdGlvbih0cmlhbmdsZUhpdC5pbnN0YW5jZUlELCB0cmlhbmdsZUhpdC5wcmltaXRpdmVJbmRleCwgc2QucG9zVywgc2QuTiwgdHJpYW5nbGVIaXQuZ2V0QmFyeWNlbnRyaWNXZWlnaHRzKCkpOwogICAgfQoKICAgIC8vcmF5T3JpZ2luIC09IHJheURhdGEuZGlyICogZ1JheUJpYXM7CgogICAgUmF5UXVlcnk8UkFZX0ZMQUdfU0tJUF9QUk9DRURVUkFMX1BSSU1JVElWRVMgfCBSQVlfRkxBR19GT1JDRV9PUEFRVUUgfCBSQVlfRkxBR19BQ0NFUFRfRklSU1RfSElUX0FORF9FTkRfU0VBUkNIPiByYXlTaGFkb3dPcmlnaW5RdWVyeTsKICAgIC8vbGV0IHJheUZsYWdzID0gUkFZX0ZMQUdfU0tJUF9QUk9DRURVUkFMX1BSSU1JVElWRVMgfCBSQVlfRkxBR19GT1JDRV9PUEFRVUUgfCBSQVlfRkxBR19BQ0NFUFRfRklSU1RfSElUX0FORF9FTkRfU0VBUkNIOwogICAgbGV0IHJheUZsYWdzID0gUkFZX0ZMQUdfU0tJUF9QUk9DRURVUkFMX1BSSU1JVElWRVMgfCBSQVlfRkxBR19GT1JDRV9PUEFRVUU7CgogICAgLy8gQ3JlYXRlIEJTREYgaW5zdGFuY2UgYW5kIHF1ZXJ5IGl0cyBwcm9wZXJ0aWVzLgogICAgY29uc3QgSU1hdGVyaWFsSW5zdGFuY2UgbWkgPSBnU2NlbmUubWF0ZXJpYWxzLmdldE1hdGVyaWFsSW5zdGFuY2Uoc2QsIGxvZCk7CiAgICBCU0RGUHJvcGVydGllcyBic2RmUHJvcGVydGllcyA9IG1pLmdldFByb3BlcnRpZXMoc2QpOwoKICAgIHVpbnQgc2hhZGluZ0xvYmVzID0gKHVpbnQpTG9iZVR5cGU6OkRpZmZ1c2VSZWZsZWN0aW9uIHwgKHVpbnQpTG9iZVR5cGU6OkRlbHRhUmVmbGVjdGlvbiB8ICh1aW50KUxvYmVUeXBlOjpTcGVjdWxhclJlZmxlY3Rpb24gfCAodWludClMb2JlVHlwZTo6U3BlY3VsYXJUcmFuc21pc3Npb24gfCAodWludClMb2JlVHlwZTo6RGVsdGFUcmFuc21pc3Npb247CiAgICAKICAgIC8vIFJheSBsZXZlbCBjb21tb24gc3R1ZmYKICAgIGlmIChyYXlEYXRhLmxldmVsID4gMCkgeyAKICAgICAgICAvLyBSYXkgbGV2ZWwgMSsKCiAgICAgICAgLy8gVGVybWluYXRlIHNwZWN1bGFyIGNhdXN0aWNzLgogICAgfSBlbHNlIHsKICAgICAgICAvLyBSYXkgbGV2ZWwgMCAoY2FtZXJhIHJheSkKICAgICAgICBhb3ZfZGF0YS5wb3NpdGlvbiA9IHNkLnBvc1c7CiAgICAgICAgYW92X2RhdGEubm9ybWFsID0gc2QuTjsKICAgICAgICBhb3ZfZGF0YS5hbGJlZG8gPSBic2RmUHJvcGVydGllcy5kaWZmdXNlUmVmbGVjdGlvbkFsYmVkbzsKICAgIH0KCiAgICBIaXRJbmZvIGJzZGZIaXQgPSB7fTsgLy8gV2Ugc3RvcmUgYnNkZiBoaXQgaGVyZSBhcyBhIGNhbmRpZGF0ZSBmb3IgdGhlIG5leHQgYm91bmNlCiAgICBmbG9hdCBic2RmSGl0VCA9IDAuZjsgLy8gV2Ugc3RvcmUgaGl0IGRpc3RhbmNlIHRvIGNoZWNrIGFnYWlucyBwb3RlbnRpYWwgbGlnaHQgc291cmNlIHRvIHNhbXBsZSBmcm9tIHRoZSBzdXJmYWNlIGJzZGYKICAgIEJTREZTYW1wbGUgYnNkZlNhbXBsZTsKCiAgICBzZC5tdGwuc2V0QWN0aXZlTG9iZXMoc2hhZGluZ0xvYmVzKTsKICAgIGJvb2wgdmFsaWRCc2RmU2FtcGxlID0gbWkuc2FtcGxlKHNkLCBzZywgYnNkZlNhbXBsZSwgdHJ1ZSk7CiAgICBmbG9hdDMgbmV4dFJheURpciA9IG5vcm1hbGl6ZShic2RmU2FtcGxlLndvKTsKCiAgICBmbG9hdDMgZGlmZnVzZUNvbG9yICA9IGZsb2F0MygwLmYpOwogICAgZmxvYXQzIHNwZWN1bGFyQ29sb3IgPSBmbG9hdDMoMC5mKTsKICAgIGZsb2F0MyBzaGFkb3dDb2xvciAgID0gZmxvYXQzKDEuZik7CgogICAgLy8gUHJvY2VzcyBsaWdodHMKI2lmIF9TQ0VORV9MSUdIVF9DT1VOVAogICAgW3Vucm9sbF0KICAgIGZvciAoaW50IGxpZ2h0SW5kZXggPSAwOyBsaWdodEluZGV4IDwgX1NDRU5FX0xJR0hUX0NPVU5UOyBsaWdodEluZGV4KyspIHsKI2Vsc2UKICAgIFtsb29wXQogICAgZm9yIChpbnQgbGlnaHRJbmRleCA9IDA7IGxpZ2h0SW5kZXggPCBnU2NlbmUuZ2V0TGlnaHRDb3VudCgpOyBsaWdodEluZGV4KyspIHsKI2VuZGlmCgogICAgICAgIExpZ2h0RGF0YSBsaWdodCA9IGdTY2VuZS5nZXRMaWdodChsaWdodEluZGV4KTsKICAgICAgICBmbG9hdDMgc2hhZG93RmFjdG9yID0gZmxvYXQzKDEuMGYpOwogICAgICAgIGlmKHJheURhdGEubGV2ZWwgPT0gMCkgewogICAgICAgICAgICBpZighbGlnaHQuY29udHJpYnV0ZXNEaXJlY3RJbGx1bWluYXRpb24oKSkgY29udGludWU7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgaWYoIWxpZ2h0LmNvbnRyaWJ1dGVzSW5kaXJlY3RJbGx1bWluYXRpb24oKSkgY29udGludWU7CiAgICAgICAgfQoKICAgICAgICBBbmFseXRpY0xpZ2h0U2FtcGxlIGxzOwoKICAgICAgICAvLyBTYW1wbGUgbGlnaHQgYW5kIHJlamVjdCBzYW1wbGUgaWYgbG93ZXIgaGVtaXNwaGVyZS4KICAgICAgICBzZC5tdGwuc2V0QWN0aXZlTG9iZXMoc2hhZGluZ0xvYmVzKTsKCiAgICAgICAgaWYgKHNhbXBsZUxpZ2h0KHNkLnBvc1csIHNkLk4sIGxpZ2h0LCBybmQsIGxzKSAmJiBkb3QobHMuZGlyLCBzZC5OKSA+IGtNaW5Db3NUaGV0YSkgewogICAgICAgICAgICBbW2JyYW5jaF1daWYgKChsaWdodC5zaGFkb3dUeXBlID09IHVpbnQoTGlnaHRTaGFkb3dUeXBlLlJheVRyYWNlZCkpICYmIChnU2NlbmUuaXNPYmplY3RTaGFkb3dzUmVjZWl2aW5nKHRyaWFuZ2xlSGl0Lmluc3RhbmNlSUQpKSkgewoKICAgICAgICAgICAgICAgIFNjZW5lUmF5UXVlcnk8MT4gcmF5UXVlcnk7CiAgICAgICAgICAgICAgICBjb25zdCBSYXkgcmF5ID0gUmF5KHJheVNoYWRvd09yaWdpbiwgbHMuc2hhZG93RGlyLCAwLjAwMWYsIGxzLmRpc3RhbmNlKTsKCiAgICAgICAgICAgICAgICBbW2JyYW5jaF1dIGlmKGdTY2VuZS5pc09iamVjdFNlbGZTaGFkb3dzUmVjZWl2aW5nKHRyaWFuZ2xlSGl0Lmluc3RhbmNlSUQpKSB7CiAgICAgICAgICAgICAgICAgICAgc2hhZG93RmFjdG9yID0gcmF5UXVlcnkudHJhY2VWaXNpYmlsaXR5UmF5KHJheSwgcmF5RmxhZ3MsIDB4MDIpID8gZmxvYXQzKDEuMCkgOiBsaWdodC5zaGFkb3dDb2xvcjsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgc2hhZG93RmFjdG9yID0gcmF5UXVlcnkudHJhY2VWaXNpYmlsaXR5UmF5KHJheSwgcmF5RmxhZ3MsIDB4MDIsIHRyaWFuZ2xlSGl0Lmluc3RhbmNlSUQuaW5kZXgpID8gZmxvYXQzKDEuMCkgOiBsaWdodC5zaGFkb3dDb2xvcjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgLyoKICAgICAgICAgICAgICAgIC8vIFRlc3QgdmlzaWJpbGl0eSBieSB0cmFjaW5nIGEgc2hhZG93IHJheS4KICAgICAgICAgICAgICAgIFJheURlc2MgcmF5OwogICAgICAgICAgICAgICAgcmF5Lk9yaWdpbiA9IHJheVNoYWRvd09yaWdpbjsKICAgICAgICAgICAgICAgIHJheS5EaXJlY3Rpb24gPSBscy5zaGFkb3dEaXI7CiAgICAgICAgICAgICAgICByYXkuVE1pbiA9IC4wMDFmOwogICAgICAgICAgICAgICAgcmF5LlRNYXggPSBscy5kaXN0YW5jZTsKCiAgICAgICAgICAgICAgICByYXlTaGFkb3dPcmlnaW5RdWVyeS5UcmFjZVJheUlubGluZShnU2NlbmUucnRBY2NlbCwgcmF5RmxhZ3MsIDB4MDIsIHJheSk7CiAgICAgICAgICAgICAgICByYXlTaGFkb3dPcmlnaW5RdWVyeS5Qcm9jZWVkKCk7CiAgICAgICAgICAgICAgICBzaGFkb3dGYWN0b3IgPSAocmF5U2hhZG93T3JpZ2luUXVlcnkuQ29tbWl0dGVkU3RhdHVzKCkgPT0gQ09NTUlUVEVEX1RSSUFOR0xFX0hJVCkgPyBsaWdodC5zaGFkb3dDb2xvciA6IGZsb2F0MygxLjApOwogICAgICAgICAgICAgICAgKi8KICAgICAgICAgICAgfQoKICAgICAgICAgICAgZmxvYXQgbWlzRGlmZldlaWdodCA9IDEuMGY7CiAgICAgICAgICAgIGZsb2F0IG1pc1NwZWNXZWlnaHQgPSAxLjBmOwogICAgICAgICAgICBmbG9hdCBtaXNSZWZyV2VpZ2h0ID0gMS4wZjsKCiNpZmRlZiBfVVNFX01VTFRJUExFX0lNUE9SVEFOQ0VfU0FNUExJTkcgICAgICAgICAgICAKICAgICAgICAgICAgW1ticmFuY2ggXV0gaWYgKCFsaWdodC5pc0RlbHRhTGlnaHQoKSAmJiAobHMucGRmID4gLjBmKSkgewogICAgICAgICAgICAgICAgc2QubXRsLnNldEFjdGl2ZUxvYmVzKCh1aW50KUxvYmVUeXBlOjpEaWZmdXNlUmVmbGVjdGlvbik7CiAgICAgICAgICAgICAgICBtaXNEaWZmV2VpZ2h0ID0gZXZhbE1JUygxLjBmLCBscy5wZGYsIDEuMGYsIG1pLmV2YWxQZGYoc2QsIGxzLmRpcikpOwogICAgICAgICAgICAgICAgbWlzRGlmZldlaWdodCAvPSBscy5wZGY7CgogICAgICAgICAgICAgICAgc2QubXRsLnNldEFjdGl2ZUxvYmVzKCh1aW50KUxvYmVUeXBlOjpTcGVjdWxhclJlZmxlY3Rpb24pOwogICAgICAgICAgICAgICAgbWlzU3BlY1dlaWdodCA9IGV2YWxNSVMoMS4wZiwgbHMucGRmLCAxLjBmLCBtaS5ldmFsUGRmKHNkLCBscy5kaXIpKTsKICAgICAgICAgICAgICAgIG1pc1NwZWNXZWlnaHQgLz0gbHMucGRmOwoKICAgICAgICAgICAgICAgIHNkLm10bC5zZXRBY3RpdmVMb2JlcygodWludClMb2JlVHlwZTo6U3BlY3VsYXJUcmFuc21pc3Npb24pOwogICAgICAgICAgICAgICAgbWlzUmVmcldlaWdodCA9IGV2YWxNSVMoMS4wZiwgbHMucGRmLCAxLjBmLCBtaS5ldmFsUGRmKHNkLCBscy5kaXIpKTsKICAgICAgICAgICAgICAgIG1pc1JlZnJXZWlnaHQgLz0gbHMucGRmOwogICAgICAgICAgICB9CiNlbmRpZiAvL19VU0VfTVVMVElQTEVfSU1QT1JUQU5DRV9TQU1QTElORwoKICAgICAgICAgICAgW1ticmFuY2ggXV0gaWYgKChyYXlEYXRhLmxldmVsID09IDAgJiYgbGlnaHQuY29udHJpYnV0ZXNEaXJlY3REaWZmdXNlSWxsdW1pbmF0aW9uKCkpIHx8IChyYXlEYXRhLmxldmVsID4gMCAmJiBsaWdodC5jb250cmlidXRlc0luZGlyZWN0RGlmZnVzZUlsbHVtaW5hdGlvbigpKSkgewogICAgICAgICAgICAgICAgc2QubXRsLnNldEFjdGl2ZUxvYmVzKCh1aW50KUxvYmVUeXBlOjpEaWZmdXNlUmVmbGVjdGlvbik7CiAgICAgICAgICAgICAgICBkaWZmdXNlQ29sb3IgKz0gbWkuZXZhbChzZCwgbHMuZGlyLCBzZykgKiBscy5pICooKHJheURhdGEubGV2ZWwgPT0gMCkgPyBsaWdodC5kaXJlY3REaWZmdXNlSW50ZW5zaXR5IDogbGlnaHQuaW5kaXJlY3REaWZmdXNlSW50ZW5zaXR5ICkgKiBzaGFkb3dGYWN0b3IgKiBtaXNEaWZmV2VpZ2h0OwogICAgICAgICAgICB9CgogICAgICAgICAgICBbW2JyYW5jaCBdXSBpZiAoKHJheURhdGEubGV2ZWwgPT0gMCAmJiBsaWdodC5jb250cmlidXRlc0RpcmVjdFNwZWN1bGFySWxsdW1pbmF0aW9uKCkpIHx8IChyYXlEYXRhLmxldmVsID4gMCAmJiBsaWdodC5jb250cmlidXRlc0luZGlyZWN0U3BlY3VsYXJJbGx1bWluYXRpb24oKSkpIHsKICAgICAgICAgICAgICAgIHNkLm10bC5zZXRBY3RpdmVMb2JlcygodWludClMb2JlVHlwZTo6U3BlY3VsYXJSZWZsZWN0aW9uKTsKICAgICAgICAgICAgICAgIHNwZWN1bGFyQ29sb3IgKz0gbWkuZXZhbChzZCwgbHMuZGlyLCBzZykgKiBscy5pICogKChyYXlEYXRhLmxldmVsID09IDApID8gbGlnaHQuZGlyZWN0U3BlY3VsYXJJbnRlbnNpdHkgOiBsaWdodC5pbmRpcmVjdFNwZWN1bGFySW50ZW5zaXR5ICkgKiBzaGFkb3dGYWN0b3IgKiBtaXNTcGVjV2VpZ2h0OwoKICAgICAgICAgICAgICAgIHNkLm10bC5zZXRBY3RpdmVMb2JlcygodWludClMb2JlVHlwZTo6U3BlY3VsYXJUcmFuc21pc3Npb24pOwogICAgICAgICAgICAgICAgc3BlY3VsYXJDb2xvciArPSBtaS5ldmFsKHNkLCBscy5kaXIsIHNnKSAqIGxzLmkgKiAoKHJheURhdGEubGV2ZWwgPT0gMCkgPyBsaWdodC5kaXJlY3RTcGVjdWxhckludGVuc2l0eSA6IGxpZ2h0LmluZGlyZWN0U3BlY3VsYXJJbnRlbnNpdHkgKSAqIHNoYWRvd0ZhY3RvciAqIG1pc1JlZnJXZWlnaHQ7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHNoYWRvd0NvbG9yICo9IHNoYWRvd0ZhY3RvcjsKICAgICAgICB9CgojaWZkZWYgX1VTRV9NVUxUSVBMRV9JTVBPUlRBTkNFX1NBTVBMSU5HCgogICAgICAgIC8vIFNhbXBsZSBic2RmIGZvciBub24gc2luZ3VsYXIgbGlnaHQKICAgICAgICBpZighbGlnaHQuaXNEZWx0YUxpZ2h0KCkpIHsKI2lmZGVmIF9DQUNIRV9ORVhUX1JBWQogICAgICAgICAgICAvL1JheVF1ZXJ5PFJBWV9GTEFHX1NLSVBfUFJPQ0VEVVJBTF9QUklNSVRJVkVTIHwgUkFZX0ZMQUdfRk9SQ0VfT1BBUVVFPiByYXlTaGFkb3dPcmlnaW5RdWVyeTsKICAgICAgICAgICAgLy9sZXQgcmF5RmxhZ3MgPSBSQVlfRkxBR19TS0lQX1BST0NFRFVSQUxfUFJJTUlUSVZFUyB8IFJBWV9GTEFHX0ZPUkNFX09QQVFVRTsKCiAgICAgICAgICAgIFJheVF1ZXJ5PFJBWV9GTEFHX1NLSVBfUFJPQ0VEVVJBTF9QUklNSVRJVkVTIHwgUkFZX0ZMQUdfRk9SQ0VfT1BBUVVFIHwgUkFZX0ZMQUdfQUNDRVBUX0ZJUlNUX0hJVF9BTkRfRU5EX1NFQVJDSD4gcmF5U2hhZG93T3JpZ2luUXVlcnk7CiAgICAgICAgICAgIGxldCByYXlGbGFncyA9IFJBWV9GTEFHX1NLSVBfUFJPQ0VEVVJBTF9QUklNSVRJVkVTIHwgUkFZX0ZMQUdfRk9SQ0VfT1BBUVVFIHwgUkFZX0ZMQUdfQUNDRVBUX0ZJUlNUX0hJVF9BTkRfRU5EX1NFQVJDSDsKI2VuZGlmCgogICAgICAgICAgICB1aW50IF9zaGFkaW5nTG9iZXMgPSAwOwogICAgICAgICAgICBbW2JyYW5jaCBdXSBpZiAoKHJheURhdGEubGV2ZWwgPT0gMCAmJiBsaWdodC5jb250cmlidXRlc0RpcmVjdERpZmZ1c2VJbGx1bWluYXRpb24oKSkgfHwgKHJheURhdGEubGV2ZWwgPiAwICYmIGxpZ2h0LmNvbnRyaWJ1dGVzSW5kaXJlY3REaWZmdXNlSWxsdW1pbmF0aW9uKCkpKSB7CiAgICAgICAgICAgICAgICBfc2hhZGluZ0xvYmVzIHw9ICh1aW50KUxvYmVUeXBlOjpEaWZmdXNlUmVmbGVjdGlvbjsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgW1ticmFuY2ggXV0gaWYgKChyYXlEYXRhLmxldmVsID09IDAgJiYgbGlnaHQuY29udHJpYnV0ZXNEaXJlY3RTcGVjdWxhcklsbHVtaW5hdGlvbigpKSB8fCAocmF5RGF0YS5sZXZlbCA+IDAgJiYgbGlnaHQuY29udHJpYnV0ZXNJbmRpcmVjdFNwZWN1bGFySWxsdW1pbmF0aW9uKCkpKSB7CiAgICAgICAgICAgICAgICBfc2hhZGluZ0xvYmVzIHw9ICh1aW50KUxvYmVUeXBlOjpTcGVjdWxhclJlZmxlY3Rpb24gfCAodWludClMb2JlVHlwZTo6U3BlY3VsYXJUcmFuc21pc3Npb247CiAgICAgICAgICAgIH0KICAgICAgICAgICAgc2QubXRsLnNldEFjdGl2ZUxvYmVzKF9zaGFkaW5nTG9iZXMpOwogICAgICAgICAgICB2YWxpZEJzZGZTYW1wbGUgPSBtaS5zYW1wbGUoc2QsIHNnLCBic2RmU2FtcGxlLCB0cnVlKTsKICAgICAgICAgICAgCiAgICAgICAgICAgIGlmKHZhbGlkQnNkZlNhbXBsZSkgewogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAvLyBJbnRlcnNlY3QgbGlnaHQgc291cmNlIGFuZCByZWplY3QgaW52YWxpZCBsaWdodCBzYW1wbGUuCiAgICAgICAgICAgICAgICBpZiAoaW50ZXJzZWN0TGlnaHQoc2QucG9zVywgYnNkZlNhbXBsZS53bywgbGlnaHQsIGxzKSAmJiBkb3QobHMuZGlyLCBzZC5OKSA+IGtNaW5Db3NUaGV0YSkgewogICAgICAgICAgICAgICAgICAgIGZsb2F0IG1pc1dlaWdodCA9IGV2YWxNSVMoMS4sIGJzZGZTYW1wbGUucGRmLCAxLiwgbHMucGRmKTsKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICBzaGFkb3dGYWN0b3IgPSBmbG9hdDMoMS4wZik7CgogICAgICAgICAgICAgICAgICAgIFJheURlc2MgcmF5OwogICAgICAgICAgICAgICAgICAgIHJheS5PcmlnaW4gPSByYXlTaGFkb3dPcmlnaW47CiAgICAgICAgICAgICAgICAgICAgcmF5LkRpcmVjdGlvbiA9IGJzZGZTYW1wbGUud287CiAgICAgICAgICAgICAgICAgICAgcmF5LlRNaW4gPSAuMDAxZjsKICAgICAgICAgICAgICAgICAgICByYXkuVE1heCA9IGxzLmRpc3RhbmNlOwoKICAgICAgICAgICAgICAgICAgICByYXlTaGFkb3dPcmlnaW5RdWVyeS5UcmFjZVJheUlubGluZShnU2NlbmUucnRBY2NlbCwgcmF5RmxhZ3MsIDB4MDIsIHJheSk7CiAgICAgICAgICAgICAgICAgICAgcmF5U2hhZG93T3JpZ2luUXVlcnkuUHJvY2VlZCgpOwoKICAgICAgICAgICAgICAgICAgICBpZihyYXlTaGFkb3dPcmlnaW5RdWVyeS5Db21taXR0ZWRTdGF0dXMoKSA9PSBDT01NSVRURURfVFJJQU5HTEVfSElUKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHNoYWRvd0ZhY3RvciA9IGxpZ2h0LnNoYWRvd0NvbG9yOwojaWZkZWYgX0NBQ0hFX05FWFRfUkFZCiAgICAgICAgICAgICAgICAgICAgICAgIGJzZGZIaXQgPSBIaXRJbmZvKGdldENvbW1pdHRlZFRyaWFuZ2xlSGl0KHJheVNoYWRvd09yaWdpblF1ZXJ5KSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGJzZGZIaXRUID0gcmF5U2hhZG93T3JpZ2luUXVlcnkuQ29tbWl0dGVkUmF5VCgpOwojZW5kaWYKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIFticmFuY2hdCiAgICAgICAgICAgICAgICAgICAgaWYoYnNkZlNhbXBsZS5pc0xvYmUoTG9iZVR5cGU6OkRpZmZ1c2VSZWZsZWN0aW9uKSkgewogICAgICAgICAgICAgICAgICAgICAgICBzZC5tdGwuc2V0QWN0aXZlTG9iZXMoKHVpbnQpTG9iZVR5cGU6OkRpZmZ1c2VSZWZsZWN0aW9uKTsKICAgICAgICAgICAgICAgICAgICAgICAgZmxvYXQgbWlzV2VpZ2h0ID0gZXZhbE1JUygxLiwgbWkuZXZhbFBkZihzZCwgYnNkZlNhbXBsZS53byksIDEuLCBscy5wZGYpOwogICAgICAgICAgICAgICAgICAgICAgICBkaWZmdXNlQ29sb3IgKz0gYnNkZlNhbXBsZS53ZWlnaHQgKiBscy5pICogKChyYXlEYXRhLmxldmVsID09IDApID8gbGlnaHQuZGlyZWN0RGlmZnVzZUludGVuc2l0eSA6IGxpZ2h0LmluZGlyZWN0RGlmZnVzZUludGVuc2l0eSApICogc2hhZG93RmFjdG9yICogbWlzV2VpZ2h0OwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZihic2RmU2FtcGxlLmlzTG9iZShMb2JlVHlwZTo6U3BlY3VsYXJSZWZsZWN0aW9uKSkgewogICAgICAgICAgICAgICAgICAgICAgICBzZC5tdGwuc2V0QWN0aXZlTG9iZXMoKHVpbnQpTG9iZVR5cGU6OlNwZWN1bGFyUmVmbGVjdGlvbik7CiAgICAgICAgICAgICAgICAgICAgICAgIGZsb2F0IG1pc1dlaWdodCA9IGV2YWxNSVMoMS4sIG1pLmV2YWxQZGYoc2QsIGJzZGZTYW1wbGUud28pLCAxLiwgbHMucGRmKTsKICAgICAgICAgICAgICAgICAgICAgICAgc3BlY3VsYXJDb2xvciArPSBic2RmU2FtcGxlLndlaWdodCAqIGxzLmkgKiAoKHJheURhdGEubGV2ZWwgPT0gMCkgPyBsaWdodC5kaXJlY3RTcGVjdWxhckludGVuc2l0eSA6IGxpZ2h0LmluZGlyZWN0U3BlY3VsYXJJbnRlbnNpdHkgKSAqIHNoYWRvd0ZhY3RvciAqIG1pc1dlaWdodDsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYoYnNkZlNhbXBsZS5pc0xvYmUoTG9iZVR5cGU6OlNwZWN1bGFyVHJhbnNtaXNzaW9uKSB8fCBic2RmU2FtcGxlLmlzTG9iZShMb2JlVHlwZTo6RGVsdGFUcmFuc21pc3Npb24pKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHNkLm10bC5zZXRBY3RpdmVMb2JlcygodWludClMb2JlVHlwZTo6U3BlY3VsYXJSZWZsZWN0aW9uKTsKICAgICAgICAgICAgICAgICAgICAgICAgZmxvYXQgbWlzV2VpZ2h0ID0gZXZhbE1JUygxLiwgbWkuZXZhbFBkZihzZCwgYnNkZlNhbXBsZS53byksIDEuLCBscy5wZGYpOwogICAgICAgICAgICAgICAgICAgICAgICBzcGVjdWxhckNvbG9yICs9IGJzZGZTYW1wbGUud2VpZ2h0ICogbHMuaSAqICgocmF5RGF0YS5sZXZlbCA9PSAwKSA/IGxpZ2h0LmRpcmVjdFNwZWN1bGFySW50ZW5zaXR5IDogbGlnaHQuaW5kaXJlY3RTcGVjdWxhckludGVuc2l0eSApICogc2hhZG93RmFjdG9yICogbWlzV2VpZ2h0OwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KI2VuZGlmICAvLyBfVVNFX01VTFRJUExFX0lNUE9SVEFOQ0VfU0FNUExJTkcKCiAgICB9IC8vIGxpZ2h0IGxvb3AKCiAgICBhb3ZfZGF0YS5zaGFkb3cgKz0gZmxvYXQzKDEuZikgLSBzaGFkb3dDb2xvcjsKCiAgICBmbG9hdDMgX3N1cmZhY2VDb2xvciA9IGRpZmZ1c2VDb2xvciArIHNwZWN1bGFyQ29sb3I7CgogICAgYm9vbCBlbWlzc2lvbklsbHVtbmF0ZXNPYmplY3RzID0gZmFsc2U7CiAgICBfc3VyZmFjZUNvbG9yICs9ICgocmF5RGF0YS50eXBlID09IFJheVR5cGU6OlByaW1hcnkpIHx8IChyYXlEYXRhLnR5cGUgPT0gUmF5VHlwZTo6U3BlY3VsYXIpIHx8ICgocmF5RGF0YS50eXBlID09IFJheVR5cGU6OkRpZmZ1c2UpICYmIGVtaXNzaW9uSWxsdW1uYXRlc09iamVjdHMpKSA/IAogICAgICAgIG1pLmdldFByb3BlcnRpZXMoc2QpLmVtaXNzaW9uIDogZmxvYXQzKDAuMCk7CiAgICAKICAgIF9zdXJmYWNlQ29sb3IgKj0gcmF5RGF0YS53ZWlnaHQ7CiAgICAKICAgIGZsb2F0MyBjb2xvckxpbWl0ID0gcmF5RGF0YS5sZXZlbCA9PSAwID8gKGZsb2F0MylnQ29sb3JMaW1pdCA6IChmbG9hdDMpZ0luZGlyZWN0Q29sb3JMaW1pdDsKICAgIHN1cmZhY2VDb2xvciA9IGZsb2F0MyhtaW4oX3N1cmZhY2VDb2xvci5yLCBjb2xvckxpbWl0LnIpLCBtaW4oX3N1cmZhY2VDb2xvci5nLCBjb2xvckxpbWl0LmcpLCBtaW4oX3N1cmZhY2VDb2xvci5iLCBjb2xvckxpbWl0LmIpKTsKICAgIAogICAgW1ticmFuY2ggXV0gaWYoIHJheURhdGEubGV2ZWwgPj0gbWF4UmF5TGV2ZWwpIHJldHVybiBzdXJmYWNlQ29sb3I7CgogICAgLy8vIE5leHQgaGl0IHBvaW50CiAgICByYXlEYXRhLmhpdCA9IHt9OwogICAgCiAgICB1aW50IGxvYmVzID0gKHVpbnQpTG9iZVR5cGU6Ok5vbmU7CgogICAgaWYocmF5RGF0YS5sZXZlbCA8IGdSYXlEaWZmdXNlTGltaXQpIGxvYmVzIHw9ICh1aW50KUxvYmVUeXBlOjpEaWZmdXNlUmVmbGVjdGlvbjsKICAgIGlmKHJheURhdGEubGV2ZWwgPCBnUmF5UmVmbGVjdExpbWl0KSBsb2JlcyB8PSAodWludClMb2JlVHlwZTo6U3BlY3VsYXJSZWZsZWN0aW9uIHwgKHVpbnQpTG9iZVR5cGU6OkRlbHRhUmVmbGVjdGlvbjsKICAgIGlmKHJheURhdGEubGV2ZWwgPCBnUmF5UmVmcmFjdExpbWl0KSBsb2JlcyB8PSAodWludClMb2JlVHlwZTo6U3BlY3VsYXJUcmFuc21pc3Npb24gfCAodWludClMb2JlVHlwZTo6RGVsdGFUcmFuc21pc3Npb247CiAgICAKICAgIHNkLm10bC5zZXRBY3RpdmVMb2Jlcyhsb2Jlcyk7CgojaWZkZWYgX0NBQ0hFX05FWFRfUkFZICAgIAogICAgLy9JbnZhbGlkIGJzZGYgc2FtcGxlLiBUZXJtaW5hdGUgaGVyZQogICAgW1ticmFuY2ggXV0gaWYoIXZhbGlkQnNkZlNhbXBsZSkgewogICAgICAgIHJldHVybiBzdXJmYWNlQ29sb3I7CiAgICB9CgogICAgaWYoYnNkZkhpdFQgPiAwLjAgJiYgKDEgPT0gMikpIHsKICAgICAgICAvLyBSZXVzZSBmb3VuZCBzdXJmYWNlIGhpdAogICAgICAgIAogICAgICAgIHJheURhdGEud2VpZ2h0ICo9IGJzZGZTYW1wbGUud2VpZ2h0OwogICAgICAgIHJheURhdGEuZGlyID0gbm9ybWFsaXplKGJzZGZTYW1wbGUud28pOyAgIAogICAgICAgIHJheURhdGEuaGl0ID0gYnNkZkhpdDsKICAgICAgICByYXlEYXRhLmxlbmd0aCArPSBic2RmSGl0VDsKCiAgICB9IGVsc2UgewogICAgICAgIC8vIEZpbmQgbmV4dCBoaXQKICAgICAgICAKICAgICAgICBpZihtaS5zYW1wbGUoc2QsIHNnLCBic2RmU2FtcGxlLCB0cnVlKSkgewogICAgICAgICAgICBSYXlRdWVyeTxSQVlfRkxBR19TS0lQX1BST0NFRFVSQUxfUFJJTUlUSVZFUyB8IFJBWV9GTEFHX0ZPUkNFX09QQVFVRT4gcmF5UXVlcnk7CiAgICAgICAgICAgIGxldCByYXlGbGFncyA9IFJBWV9GTEFHX1NLSVBfUFJPQ0VEVVJBTF9QUklNSVRJVkVTIHwgUkFZX0ZMQUdfRk9SQ0VfT1BBUVVFOwoKICAgICAgICAgICAgYm9vbCB1c2VBbHBoYVRlc3QgPSBmYWxzZTsKICAgICAgICAgICAgCiAgICAgICAgICAgIHJheURhdGEud2VpZ2h0ICo9IGJzZGZTYW1wbGUud2VpZ2h0OwogICAgICAgICAgICByYXlEYXRhLmRpciA9IG5vcm1hbGl6ZShic2RmU2FtcGxlLndvKTsKCiAgICAgICAgICAgIFJheURlc2MgcmF5OwogICAgICAgICAgICByYXkuT3JpZ2luID0gc2QucG9zVzsKICAgICAgICAgICAgcmF5LkRpcmVjdGlvbiA9IHJheURhdGEuZGlyOwogICAgICAgICAgICByYXkuVE1pbiA9ICAuMDAxZjsKICAgICAgICAgICAgcmF5LlRNYXggPSAxMDAwMDAuMGY7CgogICAgICAgICAgICByYXlRdWVyeS5UcmFjZVJheUlubGluZShnU2NlbmUucnRBY2NlbCwgcmF5RmxhZ3MsIDB4MDIsIHJheSk7CiAgICAgICAgICAgIHJheVF1ZXJ5LlByb2NlZWQoKTsKCiAgICAgICAgICAgIGlmIChyYXlRdWVyeS5Db21taXR0ZWRTdGF0dXMoKSA9PSBDT01NSVRURURfVFJJQU5HTEVfSElUKSB7CiAgICAgICAgICAgICAgICByYXlEYXRhLmhpdCA9IEhpdEluZm8oZ2V0Q29tbWl0dGVkVHJpYW5nbGVIaXQocmF5UXVlcnkpKTsKICAgICAgICAgICAgICAgIHJheURhdGEubGVuZ3RoICs9IHJheVF1ZXJ5LkNvbW1pdHRlZFJheVQoKTsKCiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBpZihic2RmU2FtcGxlLmlzTG9iZShMb2JlVHlwZTo6U3BlY3VsYXJUcmFuc21pc3Npb24pIHx8IGJzZGZTYW1wbGUuaXNMb2JlKExvYmVUeXBlOjpEZWx0YVRyYW5zbWlzc2lvbikpIHsKCiAgICAgICAgICAgICAgICAgICAgW2xvb3BdCiAgICAgICAgICAgICAgICAgICAgZm9yIChpbnQgbGlnaHRJbmRleCA9IDA7IGxpZ2h0SW5kZXggPCBnU2NlbmUuZ2V0TGlnaHRDb3VudCgpOyBsaWdodEluZGV4KyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgTGlnaHREYXRhIGxpZ2h0ID0gZ1NjZW5lLmdldExpZ2h0KGxpZ2h0SW5kZXgpOwogICAgICAgICAgICAgICAgICAgICAgICBpZighbGlnaHQuaXNEZWx0YUxpZ2h0KCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFuYWx5dGljTGlnaHRTYW1wbGUgbHM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW50ZXJzZWN0TGlnaHQoc2QucG9zVywgcmF5RGF0YS5kaXIsIGxpZ2h0LCBscykpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdXJmYWNlQ29sb3IgKz0gcmF5RGF0YS53ZWlnaHQgKiBscy5pICogKChyYXlEYXRhLmxldmVsID09IDApID8gbGlnaHQuZGlyZWN0U3BlY3VsYXJJbnRlbnNpdHkgOiBsaWdodC5pbmRpcmVjdFNwZWN1bGFySW50ZW5zaXR5ICk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gICAKICAgICAgICB9CiAgICB9CiNlbmRpZgoKICAgIHJldHVybiBzdXJmYWNlQ29sb3I7Cn0KCltudW10aHJlYWRzKDE2LCAxNiwgMSldCnZvaWQgbWFpbih1aW50MyBkaXNwYXRjaFRocmVhZElkIDogU1ZfRGlzcGF0Y2hUaHJlYWRJRCkgewogICAgLy8gcGl4ZWwgcG9zaXRpb24KICAgIGNvbnN0IHVpbnQyIGlwb3MgPSBkaXNwYXRjaFRocmVhZElkLnh5OwoKICAgIC8vIGVhcmx5IG91dAogICAgaWYgKGFueShpcG9zID49IGdGcmFtZURpbSkpIHJldHVybjsKCgogICAgI2lmIGlzX3ZhbGlkKGdUZXh0dXJlR3JhZHMpCiAgICAgICAgY29uc3QgZmxvYXQ0IHRleEdyYWRzID0gZ1RleHR1cmVHcmFkc1tpcG9zXTsKICAgICAgICAvL2dJbk91dENvbG9yW2lwb3NdID0gdGV4R3JhZHM7CiAgICAgICAgLy9yZXR1cm47CiAgICAjZW5kaWYKCiAgICBjb25zdCBIaXRJbmZvIGhpdCA9IEhpdEluZm8oZ1ZidWZmZXJbaXBvc10pOwogICAgQU9WRGF0YSBhb3ZfZGF0YSA9IEFPVkRhdGEuY3JlYXRlKCk7CiAgICAKICAgIFtbYnJhbmNoXV0gaWYgKCFoaXQuaXNWYWxpZCgpIHx8IGhpdC5nZXRUeXBlKCkgIT0gSGl0VHlwZTo6VHJpYW5nbGUpIHsKICAgICAgICB3cml0ZUFPVihpcG9zLCBhb3ZfZGF0YSk7ICAgICAgICAKICAgICAgICByZXR1cm47CiAgICB9CgogICAgY29uc3QgZmxvYXQzIHJheURpciA9IG5vcm1hbGl6ZShnU2NlbmUuY2FtZXJhLmNvbXB1dGVSYXlQaW5ob2xlKGlwb3MsIGdGcmFtZURpbSkuZGlyKTsKICAgIAogICAgSVRleHR1cmVTYW1wbGVyIHByaW1hcnlMb2QgPSBjcmVhdGVUZXh0dXJlU2FtcGxlcihpcG9zKTsKICAgIC8vSVRleHR1cmVTYW1wbGVyIHByaW1hcnlMb2QgPSBUYWlsVGV4dHVyZVNhbXBsZXIoKTsKICAgIC8vSVRleHR1cmVTYW1wbGVyIHByaW1hcnlMb2QgPSBFeHBsaWNpdExvZFRleHR1cmVTYW1wbGVyKDQuZik7CiAgICAKICAgIC8vIFByaW1hcnkgcmF5IHN1cmZhY2UgZGF0YQogICAgVHJpYW5nbGVIaXQgcHJpbWFyeVRyaWFuZ2xlSGl0OwogICAgU2hhZGluZ0RhdGEgcHJpbWFyeVNoYWRpbmdEYXRhOwogICAgW1ticmFuY2hdXSBpZighY2FsY1NoYWRpbmdEYXRhKHJheURpciwgaGl0LCBwcmltYXJ5TG9kLCBwcmltYXJ5U2hhZGluZ0RhdGEsIHByaW1hcnlUcmlhbmdsZUhpdCkpIHJldHVybjsKCiAgICAvLyBTYW1wbGUgZ2VuZXJhdG9yCiAgICBTYW1wbGVHZW5lcmF0b3Igc2cgPSBTYW1wbGVHZW5lcmF0b3IoaXBvcywgZ1NhbXBsZU51bWJlcik7CgogICAgZmxvYXQyIHNjcmVlblVWID0gZmxvYXQyKGlwb3MpIC8gZmxvYXQyKGdGcmFtZURpbSk7IAoKICAgIC8vIEJlYXV0eSBwYXNzIGNvbG9yCiAgICBmbG9hdDMgc3VyZmFjZUNvbG9yID0gZmxvYXQzKDAuMGYpOwoKICAgIGNvbnN0IHVpbnQgbWF4UmF5TGV2ZWwgPSBfTUFYX1JBWV9MRVZFTDsKICAgIGZsb2F0MTZfdCB2YXJpYW5jZSA9IDEuZjsKCiNpZiBpc192YWxpZChnTGFzdEZyYW1lU3VtKSAmJiBfVVNFX1ZBUklBTkNFCiAgICBjb25zdCBmbG9hdDE2X3Q0IF9sYXN0RnJhbWVTdW0gPSBnTGFzdEZyYW1lU3VtW2lwb3NdOwogICAgY29uc3QgZmxvYXQxNl90MyBsYXN0RnJhbWVTdW0gPSBfbGFzdEZyYW1lU3VtLnJnYjsKICAgIGNvbnN0IGZsb2F0MTZfdCBsYXN0VmFyaWFuY2UgPSBfbGFzdEZyYW1lU3VtLmE7CiNlbHNlCiAgICBjb25zdCBmbG9hdDE2X3QzIGxhc3RGcmFtZVN1bSA9IGZsb2F0MTZfdDMoMC4wKTsKICAgIGNvbnN0IGZsb2F0MTZfdCBsYXN0VmFyaWFuY2UgPSAxLjA7CiNlbmRpZgoKI2lmIF9VU0VfVkFSSUFOQ0UKICAgIGlmKGdTYW1wbGVOdW1iZXIgPiAxNiAmJiBsYXN0VmFyaWFuY2UgPCAwLjAwMDVmKSB7CiAgICAgICAgZ0luT3V0Q29sb3JbaXBvc10gPSBmbG9hdDQobGFzdEZyYW1lU3VtLCAxLmYpOwogICAgICAgIHJldHVybjsKICAgIH0KI2VuZGlmCgojaWZkZWYgX1NIQURJTkdfUkFURQogICAgW2xvb3BdCiAgICAvL1t1bnJvbGxdCiAgICBmb3IoaW50IHNoYWRpbmdJdGVyID0gMDsgc2hhZGluZ0l0ZXIgPCBfU0hBRElOR19SQVRFOyBzaGFkaW5nSXRlcisrKSB7CiNlbHNlCiAgICBjb25zdCBpbnQgc2hhZGluZ0l0ZXIgPSAwOwojZW5kaWYKCiAgICAvLyBTcGF0aW8gdGVtcG9yYWwgYmx1ZSBub2lzZQojaWZkZWYgX1VTRV9TVEJOX1NBTVBMSU5HCiAgICBjb25zdCBmbG9hdDQgcm5kID0gZ05vaXNlVGV4LlNhbXBsZUxldmVsKGdOb2lzZVNhbXBsZXIsIGZsb2F0MigoaXBvcyArIGdOb2lzZU9mZnNldCArIHVpbnQyKHNhbXBsZU5leHQyRChzZykgKiB1aW50Mig2NCkpKSAvIGZsb2F0Mig2NCkpLCAwKTsKI2Vsc2UKICAgIGNvbnN0IGZsb2F0NCBybmQgPSBmbG9hdDQoc2FtcGxlTmV4dDJEKHNnKSwgc2FtcGxlTmV4dDJEKHNnKSk7CiNlbmRpZgogICAgCiAgICBSYXlEYXRhIHJheURhdGEgPSBSYXlEYXRhLmNyZWF0ZSgpOwogICAgcmF5RGF0YS5kaXIgPSByYXlEaXI7CiAgICByYXlEYXRhLmhpdCA9IGhpdDsKICAgIAogICAgVHJpYW5nbGVIaXQgX3RyaWFuZ2xlSGl0ID0gcHJpbWFyeVRyaWFuZ2xlSGl0OwogICAgU2hhZGluZ0RhdGEgX3NoYWRpbmdEYXRhID0gcHJpbWFyeVNoYWRpbmdEYXRhOwogICAgSVRleHR1cmVTYW1wbGVyIF9sb2QgPSBwcmltYXJ5TG9kOwogICAgCiNpZiBfTUFYX1JBWV9MRVZFTCAhPSAwCiAgICBbbG9vcF0KICAgIGZvcih1aW50IHJheUxldmVsID0gMDsgcmF5TGV2ZWwgPD0gbWF4UmF5TGV2ZWw7IHJheUxldmVsKyspIHsKICAgICAgICBpZihyYXlMZXZlbCA+IDApIHsKICAgICAgICAgICAgLy9fbG9kID0gRXhwbGljaXRMb2RUZXh0dXJlU2FtcGxlcig1LjApOwogICAgICAgICAgICBfbG9kID0gVGFpbFRleHR1cmVTYW1wbGVyKCk7CiAgICAgICAgICAgIGlmKCFjYWxjU2hhZGluZ0RhdGEocmF5RGF0YS5kaXIsIHJheURhdGEuaGl0LCBfbG9kLCBfc2hhZGluZ0RhdGEsIF90cmlhbmdsZUhpdCkpIGJyZWFrOwogICAgICAgIH0KI2Vsc2UKICAgICAgICBjb25zdCB1aW50IHJheUxldmVsID0gMDsKI2VuZGlmCiAgICAgICAgcmF5RGF0YS5sZXZlbCA9IHJheUxldmVsOwogICAgICAgIHN1cmZhY2VDb2xvciArPSBjYWxjSWxsdW1pbmFuY2UocmF5RGF0YSwgX3RyaWFuZ2xlSGl0LCBfc2hhZGluZ0RhdGEsIHNnLCBhb3ZfZGF0YSwgcm5kLCBfbG9kLCBtYXhSYXlMZXZlbCk7CgojaWYgX01BWF9SQVlfTEVWRUwgIT0gMAogICAgICAgIGlmKCFyYXlEYXRhLmhpdC5pc1ZhbGlkKCkpIGJyZWFrOwogICAgfQojZW5kaWYKCiNpZmRlZiBfU0hBRElOR19SQVRFCiAgICB9CiAgICBzdXJmYWNlQ29sb3IgLz0gKGZsb2F0KShfU0hBRElOR19SQVRFKTsKI2VuZGlmCgovLyBDb21wdXRlIHZhcmlhbmNlIGlmIG5lZWRlZAojaWYgX1VTRV9WQVJJQU5DRQogICAgaWYoZ1NhbXBsZU51bWJlciA+IDE2KSB7CiAgICAgICAgZmxvYXQgbHVtYVByZXYgPSBMVU1BX0NDSVI2MDEobGFzdEZyYW1lU3VtIC8gZmxvYXQoZ1NhbXBsZU51bWJlcikpOwogICAgICAgIGZsb2F0IGx1bWFDdXJyID0gTFVNQV9DQ0lSNjAxKChsYXN0RnJhbWVTdW0gKyBzdXJmYWNlQ29sb3IpIC8gZmxvYXQoZ1NhbXBsZU51bWJlciArIDEpKTsKICAgICAgICB2YXJpYW5jZSA9IDEuZiAtIChsdW1hUHJldiA+IGx1bWFDdXJyID8gKGx1bWFDdXJyL2x1bWFQcmV2KSA6IChsdW1hUHJldi9sdW1hQ3VycikpOwogICAgfQojZW5kaWYKCiAgICAvLyBXcml0ZSBtYWluIGNoYW5uZWwgb3V0cHV0IGNvbG9yCiAgICBnSW5PdXRDb2xvcltpcG9zXSA9IGZsb2F0NChtaW4oc3VyZmFjZUNvbG9yLnIsIGdDb2xvckxpbWl0LnIpLCBtaW4oc3VyZmFjZUNvbG9yLmcsIGdDb2xvckxpbWl0LmcpLCBtaW4oc3VyZmFjZUNvbG9yLmIsIGdDb2xvckxpbWl0LmIpLCAxLjApOwoKICAgIC8vIENhbGMgYW92IHZhcmlhYmxlcwojaWYgaXNfdmFsaWQoZ091dFB6KQogICAgewogICAgI2lmIGlzX3ZhbGlkKGdEZXB0aCkKICAgICAgICBmbG9hdDIgX3NjcmVlblVWID0gc2NyZWVuVVYgKiAyLjAgLSBmbG9hdDIoMS5mKTsKICAgICAgICBmbG9hdDQgc2NyZWVuUCA9IGZsb2F0NChfc2NyZWVuVVYueCwgX3NjcmVlblVWLnksIGdEZXB0aFtpcG9zXSwgMS4wKTsKICAgICNlbHNlCiAgICAgICAgZmxvYXQ0IHNjcmVlblAgPSBtdWwoZmxvYXQ0KHByaW1hcnlTaGFkaW5nRGF0YS5wb3NXLCAxLmYpLCBnU2NlbmUuY2FtZXJhLmdldFZpZXdQcm9qKCkpOwogICAgI2VuZGlmICAvLyBnRGVwdGgKICAgICAgICBmbG9hdDQgdmlld1AgPSBtdWwoc2NyZWVuUCwgZ1NjZW5lLmNhbWVyYS5kYXRhLmludlByb2pNYXQpOwogICAgICAgIGFvdl9kYXRhLmRlcHRoID0gLSh2aWV3UC56IC8gdmlld1Audyk7CiAgICB9CiNlbmRpZiAgLy8gZ091dFB6CgojaWYgaXNfdmFsaWQoZ091dEZyZXNuZWwpCiAgICB7CiAgICAgICAgYW92X2RhdGEuZnJlc25lbCA9IGV2YWxGcmVzbmVsU2NobGljaygwLmYsIDEuZiwgZG90KHByaW1hcnlTaGFkaW5nRGF0YS5WLCBwcmltYXJ5U2hhZGluZ0RhdGEuTikpOwogICAgfQojZW5kaWYKCiNpZiBpc192YWxpZChnT3V0RW1pc3Npb24pCiAgICB7CiAgICAgICAgY29uc3QgSU1hdGVyaWFsSW5zdGFuY2UgbWkgPSBnU2NlbmUubWF0ZXJpYWxzLmdldE1hdGVyaWFsSW5zdGFuY2UocHJpbWFyeVNoYWRpbmdEYXRhLCBwcmltYXJ5TG9kKTsKICAgICAgICBhb3ZfZGF0YS5lbWlzc2lvbiA9IG1pLmdldFByb3BlcnRpZXMocHJpbWFyeVNoYWRpbmdEYXRhKS5lbWlzc2lvbjsKICAgIH0KI2VuZGlmICAvLyBnT3V0RW1pc3Npb24KCiNpZiBpc192YWxpZChnT3V0U2hhZG93cykKICAgICNpZmRlZiBfU0hBRElOR19SQVRFCiAgICAgICAgYW92X2RhdGEuc2hhZG93IC89IChmbG9hdClfU0hBRElOR19SQVRFOwogICAgI2VuZGlmCiNlbmRpZiAgLy8gZ091dFNoYWRvd3MKCiNpZiBpc192YWxpZChnUHJpbUlEKQogICAgewogICAgICAgIGFvdl9kYXRhLnByaW1JRCA9IHByaW1hcnlUcmlhbmdsZUhpdC5wcmltaXRpdmVJbmRleDsKICAgIH0KI2VuZGlmCgojaWYgaXNfdmFsaWQoZ09wSUQpCiAgICB7CiAgICAgICAgLy9hb3ZfZGF0YS5vcElEID0gZ1NjZW5lLmdldEdlb21ldHJ5SW5zdGFuY2UocHJpbWFyeVRyaWFuZ2xlSGl0Lmluc3RhbmNlSUQpLmdsb2JhbE1hdHJpeElEICsgMTsKICAgICAgICBhb3ZfZGF0YS5vcElEID0gcHJpbWFyeVRyaWFuZ2xlSGl0Lmluc3RhbmNlSUQuaW5kZXg7CiAgICB9CiNlbmRpZgoKICAgIC8vIFdyaXRlIGF2YWlsYWJsZSBBT1ZzCiAgICB3cml0ZUFPVihpcG9zLCBhb3ZfZGF0YSk7CgojaWYgaXNfdmFsaWQoZ0xhc3RGcmFtZVN1bSkgJiYgX1VTRV9WQVJJQU5DRQogICAgewogICAgICAgIGdMYXN0RnJhbWVTdW1baXBvc10gPSBmbG9hdDE2X3Q0KGxhc3RGcmFtZVN1bSArIHN1cmZhY2VDb2xvciwgdmFyaWFuY2UpOwogICAgfQojZW5kaWYKCiNpZiBpc192YWxpZChnVmFyaWFuY2UpICYmIF9VU0VfVkFSSUFOQ0UKICAgIHsKICAgICAgICBnVmFyaWFuY2VbaXBvc10gPSB2YXJpYW5jZTsKICAgIH0KI2VuZGlmCgp9CgAAAAAAAAAA8GEAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAwk8AAAAAAADCTwAAAAAAAAAAAAAAAPC/"
				]
			]
		},
		{
			"contents": "/***************************************************************************\n # Copyright (c) 2020, NVIDIA CORPORATION. All rights reserved.\n #\n # Redistribution and use in source and binary forms, with or without\n # modification, are permitted provided that the following conditions\n # are met:\n #  * Redistributions of source code must retain the above copyright\n #    notice, this list of conditions and the following disclaimer.\n #  * Redistributions in binary form must reproduce the above copyright\n #    notice, this list of conditions and the following disclaimer in the\n #    documentation and/or other materials provided with the distribution.\n #  * Neither the name of NVIDIA CORPORATION nor the names of its\n #    contributors may be used to endorse or promote products derived\n #    from this software without specific prior written permission.\n #\n # THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS ``AS IS'' AND ANY\n # EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n # IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR\n # PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT OWNER OR\n # CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,\n # EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,\n # PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n # PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY\n # OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n # (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n # OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n **************************************************************************/\n#include <stdlib.h>\n#include <algorithm>\n\n#include <OpenImageIO/imageio.h>\n#include <OpenImageIO/imagebuf.h>\n#include <OpenImageIO/imagebufalgo.h>\n\n#include <boost/filesystem.hpp>\nnamespace fs = boost::filesystem;\n\n#include \"stdafx.h\"\n#include \"Bitmap.h\"\n#include \"LTX_Bitmap.h\"\n#include \"BitmapUtils.h\"\n#include \"LTX_BitmapAlgo.h\"\n#include \"LTX_BitmapUtils.h\"\n\n#include \"Falcor/Core/API/Texture.h\"\n#include \"Falcor/Core/API/ResourceManager.h\"\n#include \"Falcor/Utils/Debug/debug.h\"\n\nnamespace Falcor {\n\nnamespace oiio = OpenImageIO_v2_3;\n\nstatic const size_t kLtxHeaderOffset = sizeof(LTX_Header);\n\nstatic struct {\n    bool operator()(size_t a, size_t b) const {   \n        return a < b;\n    }   \n} pageSort;\n\nbool LTX_Bitmap::checkMagic(const unsigned char* magic) {\n    int match = 0;\n    match += memcmp(&gLtxFileMagic[0], &magic[0], 4);\n    match += memcmp(&gLtxFileMagic[7], &magic[7], 5);\n    if(match == 0 && 48 <= magic[5] && magic[5] <= 57 && 48 <= magic[6] && magic[6] <= 57)\n        return true;\n\n    return false;\n}\n\nvoid LTX_Bitmap::makeMagic(uint8_t minor, uint8_t major, unsigned char *magic) {\n    if (minor > 9 || major > 9) {\n        LOG_ERR(\"Major and minor versions should be less than 10 !!!\");\n        return;\n    }\n\n    memcpy(magic, gLtxFileMagic, 12);\n    magic[5] = 48 + static_cast<unsigned char>(major);\n    magic[6] = 48 + static_cast<unsigned char>(minor);\n}\n\nLTX_Bitmap::SharedConstPtr LTX_Bitmap::createFromFile(std::shared_ptr<Device> pDevice, const std::string& filename, bool isTopDown) {\n    std::ifstream file (filename, std::ios::in | std::ios::binary);\n    if (file.is_open()) {\n        unsigned char magic[12];\n        file.read((char *)&magic, 12);\n        \n        if (!checkMagic(magic)) {\n            LOG_ERR(\"Non LTX file provided (magic test failed) !!!\");\n            return nullptr;\n        }\n\n        file.seekg(0, file.beg);\n    } else {\n        LOG_ERR(\"Error opening file: %s !!!\", filename.c_str());\n        return nullptr;\n    }\n\n    auto pLtxBitmap = new LTX_Bitmap();\n    pLtxBitmap->mFilename = filename;\n    \n    auto pFile = fopen(filename.c_str(), \"rb\");\n    fread(&pLtxBitmap->mHeader, sizeof(LTX_Header), 1, pFile );\n\n    fseek(pFile, 0L, SEEK_END);\n    size_t mDataSize = ftell(pFile) - sizeof(LTX_Header);\n    fclose(pFile);\n\n    return SharedConstPtr(pLtxBitmap);\n}\n\nLTX_Bitmap::LTX_Bitmap() {\n\n}\n\nLTX_Bitmap::~LTX_Bitmap() {\n\n}\n\nstatic ResourceFormat getFormatOIIO(unsigned char baseType, int nchannels) {\n    using BASETYPE = oiio::TypeDesc::BASETYPE;\n    switch (nchannels) {\n        case 1:\n            switch (BASETYPE(baseType)) {\n                case BASETYPE::UINT8:\n                    return ResourceFormat::R8Unorm;\n                case BASETYPE::UINT32:\n                    return ResourceFormat::R32Uint;\n                case BASETYPE::FLOAT:\n                    return ResourceFormat::R32Float;\n                default:\n                    should_not_get_here();\n                    break;\n            }\n            break;\n        case 2:\n            switch (BASETYPE(baseType)) {\n                case BASETYPE::UINT8:\n                    return ResourceFormat::RG8Unorm;\n                case BASETYPE::UINT32:\n                    return ResourceFormat::RG32Uint;\n                case BASETYPE::FLOAT:\n                    return ResourceFormat::RG32Float;\n                default:\n                    should_not_get_here();\n                    break;\n            }\n            break;\n        case 3:\n            switch (BASETYPE(baseType)) {\n                case BASETYPE::UINT8:\n                    return ResourceFormat::RGB8Unorm;\n                case BASETYPE::UINT32:\n                    return ResourceFormat::RGB32Uint;\n                case BASETYPE::FLOAT:\n                    return ResourceFormat::RGB32Float;\n                default:\n                    should_not_get_here();\n                    break;\n            }\n            break;\n\n        case 4:\n            switch (BASETYPE(baseType)) {\n                case BASETYPE::UINT8:\n                    return ResourceFormat::RGBA8Unorm;\n                case BASETYPE::UINT32:\n                    return ResourceFormat::RGBA32Uint;\n                case BASETYPE::FLOAT:\n                    return ResourceFormat::RGBA32Float;\n                default:\n                    should_not_get_here();\n                    break;\n            }\n            break;\n        default:\n            should_not_get_here();\n            break;\n    }\n    return ResourceFormat::RGBA8Unorm;\n}\n\nstatic ResourceFormat getDestFormat(const ResourceFormat &format) {\n    switch (format) {\n        case ResourceFormat::RGB8Unorm:\n            return ResourceFormat::RGBA8Unorm;  // this should force 24bit to 32bit conversion\n        case ResourceFormat::RGB32Uint:\n            return ResourceFormat::RGBA32Uint;  // this should force 96bit to 128bit conversion\n        case ResourceFormat::RGB32Float:\n            return ResourceFormat::RGBA32Float; // this should force 96bit to 128bit conversion\n        default:\n            break;\n    }\n\n    return format;\n}\n\nstatic uint3 getPageDims(const ResourceFormat &format) {\n    uint32_t channelCount = getFormatChannelCount(format);\n    uint32_t totalBits = 0;\n\n    for(uint i = 0; i < channelCount; i++) totalBits += getNumChannelBits(format, i);\n\n    switch(totalBits) {\n        case 8:\n            return {256, 256, 1};\n        case 16:\n            return {256, 128, 1};\n        case 32:\n            return {128, 128, 1};\n        case 64:\n            return {128, 64, 1};\n        case 128:\n            return {64, 64, 1};\n        default:\n            should_not_get_here();\n            break;\n    } \n\n    return {0, 0, 0};\n}\n\nstatic LTX_MipInfo calcMipInfo(const uint3& imgDims, const ResourceFormat &format) {\n    LTX_MipInfo info;\n\n    info.mipLevelsCount = Texture::getMaxMipCount(imgDims);\n    info.mipTailStart = info.mipLevelsCount;\n    info.pageDims = getPageDims(format);\n    info.mipLevelsDims = std::vector<uint3>(info.mipLevelsCount);\n\n    // pre calculate image dimensions for each mip level (mipLevelDims)\n    for( uint mipLevel = 0; mipLevel < info.mipLevelsCount; mipLevel++) {\n        info.mipLevelsDims[mipLevel].x = imgDims.x / pow(2, mipLevel);\n        info.mipLevelsDims[mipLevel].y = imgDims.y / pow(2, mipLevel);\n        info.mipLevelsDims[mipLevel].z = 1;//imgDims.z / pow(2, mipLevel);\n    }\n\n    // find mip tail starting mip level\n    uint8_t cMipLevel = 0;\n    for( auto const& mipDims: info.mipLevelsDims) {\n        if( (info.pageDims.x > mipDims.x) && (info.pageDims.y > mipDims.y)) {\n            info.mipTailStart = cMipLevel;\n            break;\n        }\n        cMipLevel += 1;\n    }\n\n    return info;\n}\n\nvoid LTX_Bitmap::convertToKtxFile(std::shared_ptr<Device> pDevice, const std::string& srcFilename, const std::string& dstFilename, bool isTopDown) {\n    auto in = oiio::ImageInput::open(srcFilename);\n    if (!in) {\n        LOG_ERR(\"Error reading image file %s\", srcFilename.c_str());\n    }\n    const oiio::ImageSpec &spec = in->spec();\n\n    LOG_DBG(\"OIIO channel formats size: %zu\", spec.channelformats.size());\n    LOG_DBG(\"OIIO is signed: %s\", spec.format.is_signed() ? \"YES\" : \"NO\");\n    LOG_DBG(\"OIIO is float: %s\", spec.format.is_floating_point() ? \"YES\" : \"NO\");\n    LOG_DBG(\"OIIO basetype %u\", oiio::TypeDesc::BASETYPE(spec.format.basetype));\n    LOG_DBG(\"OIIO bytes per pixel %zu\", spec.pixel_bytes());\n    LOG_DBG(\"OIIO nchannels %i\", spec.nchannels);\n    \n    auto srcFormat = getFormatOIIO(spec.format.basetype, spec.nchannels);\n    LOG_WARN(\"Source ResourceFormat from OIIO: %s\", to_string(srcFormat).c_str());\n    auto dstFormat = getDestFormat(srcFormat);\n\n    oiio::ImageBuf srcBuff;\n\n    if(spec.nchannels == 3 ) {\n        // This is an RGB image. Convert it to RGBA image with full-on alpha channel \n        \n        int channelorder[] = { 0, 1, 2, -1 /*use a float value*/ };\n        float channelvalues[] = { 0 /*ignore*/, 0 /*ignore*/, 0 /*ignore*/, 1.0 };\n        std::string channelnames[] = { \"\", \"\", \"\", \"A\" };\n        oiio::ImageBuf tmpBuffRGB(srcFilename);\n        srcBuff = oiio::ImageBufAlgo::channels(tmpBuffRGB, 4, channelorder, channelvalues, channelnames);\n    } else {\n        srcBuff = oiio::ImageBuf(srcFilename);\n    }\n\n    // TODO: make image analysis (pre scale down source with blurry data) and reflect that in dstDims\n    uint3 srcDims = {spec.width, spec.height, spec.depth};\n    uint3 dstDims = srcDims;\n\n    // calc mip related info\n    auto mipInfo = calcMipInfo(dstDims, dstFormat);\n    \n    // make header\n    LTX_Header header;\n    unsigned char magic[12];\n    makeMagic(9, 8, &header.magic[0]);\n\n    header.srcLastWriteTime = fs::last_write_time(srcFilename);\n    header.width = dstDims.x;\n    header.height = dstDims.y;\n    header.depth = dstDims.z;\n    header.pageDims = {mipInfo.pageDims.x, mipInfo.pageDims.y, mipInfo.pageDims.z};\n    header.pageDataSize = 65536;\n    header.pagesCount = 0;\n    header.arrayLayersCount = 1;\n    header.mipLevelsCount = mipInfo.mipLevelsCount;\n    header.mipTailStart   = mipInfo.mipTailStart;\n    header.format = dstFormat;//pBitmap->getFormat();\n\n    // open file and write header\n    FILE *pFile = fopen(dstFilename.c_str(), \"wb\");\n    fwrite(&header, sizeof(unsigned char), sizeof(LTX_Header), pFile);\n\n    LOG_WARN(\"LTX Mip page dims %u %u %u ...\", mipInfo.pageDims.x, mipInfo.pageDims.y, mipInfo.pageDims.z);\n\n    if(ltxCpuGenerateAndWriteMIPTilesHQSlow(header, mipInfo, srcBuff, pFile)) {\n    //if(ltxCpuGenerateDebugMIPTiles(header, mipInfo, srcBuff, pFile)) {\n        // re-write header as it might get modified ... \n        // TODO: increment pagesCount ONLY upon successfull fwrite !\n        fseek(pFile, 0, SEEK_SET);\n        fwrite(&header, sizeof(unsigned char), sizeof(LTX_Header), pFile);\n    }\n    fclose(pFile);\n}\n\nvoid LTX_Bitmap::readPageData(size_t pageNum, void *pData) const {\n    if (pageNum >= mHeader.pagesCount ) {\n        logError(\"LTX_Bitmap::readPageData pageNum exceeds pages count !!!\");\n        return;\n    }\n\n    auto pFile = fopen(mFilename.c_str(), \"rb\");\n    fseek(pFile, kLtxHeaderOffset + pageNum * mHeader.pageDataSize, SEEK_SET);\n    fread(pData, 1, mHeader.pageDataSize, pFile);\n    fclose(pFile);\n}\n\n// This version uses previously opened file. On large scenes this saves us at least 50% time\nvoid LTX_Bitmap::readPageData(size_t pageNum, void *pData, FILE *pFile) const {\n    assert(pFile);\n\n    if (pageNum >= mHeader.pagesCount ) {\n        logError(\"LTX_Bitmap::readPageData pageNum exceeds pages count !!!\");\n        return;\n    }\n\n    fseek(pFile, kLtxHeaderOffset + pageNum * mHeader.pageDataSize, SEEK_SET);\n    fread(pData, 1, mHeader.pageDataSize, pFile);\n}\n\nvoid LTX_Bitmap::readPagesData(std::vector<std::pair<size_t, void*>>& pages, bool unsorted) const {\n    auto pFile = fopen(mFilename.c_str(), \"rb\");\n\n    if (unsorted) {\n        std::sort (pages.begin(), pages.end(), [](std::pair<size_t, void*> a, std::pair<size_t, void*> b) {\n            return a.first < b.first;   \n        });\n    }\n\n    for(auto& page: pages) {\n        fseek(pFile, kLtxHeaderOffset + page.first * mHeader.pageDataSize, SEEK_SET);\n    }\n    \n    fclose(pFile);\n}\n\n}  // namespace Falcor\n",
			"file": "src/Falcor/Utils/Image/LTX_Bitmap.cpp",
			"file_size": 12916,
			"file_write_time": 133352798597067383,
			"settings":
			{
				"buffer_size": 12916,
				"encoding": "UTF-8",
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					6,
					1,
					"insert",
					{
						"characters": "\nif"
					},
					"BAAAAItIAAAAAAAAjEgAAAAAAAAAAAAAjEgAAAAAAACNSAAAAAAAAAAAAACNSAAAAAAAAI5IAAAAAAAAAAAAAI5IAAAAAAAAj0gAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAItIAAAAAAAAi0gAAAAAAAAAAAAAAADwvw"
				],
				[
					7,
					1,
					"insert_snippet",
					{
						"contents": "($0)"
					},
					"AQAAAI9IAAAAAAAAkUgAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAI9IAAAAAAAAj0gAAAAAAAAAAAAAAADwvw"
				],
				[
					8,
					1,
					"insert",
					{
						"characters": "!p"
					},
					"AgAAAJBIAAAAAAAAkUgAAAAAAAAAAAAAkUgAAAAAAACSSAAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAJBIAAAAAAAAkEgAAAAAAAAAAAAAAADwvw"
				],
				[
					9,
					1,
					"insert",
					{
						"characters": "F"
					},
					"AQAAAJJIAAAAAAAAk0gAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAJJIAAAAAAAAkkgAAAAAAAAAAAAAAADwvw"
				],
				[
					10,
					1,
					"insert_completion",
					{
						"completion": "pFile",
						"format": "text",
						"keep_prefix": false,
						"must_insert": false,
						"trigger": "pFile"
					},
					"AgAAAJFIAAAAAAAAkUgAAAAAAAACAAAAcEaRSAAAAAAAAJZIAAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAJNIAAAAAAAAk0gAAAAAAAAAAAAAAADwvw"
				],
				[
					12,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAAJdIAAAAAAAAmEgAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAJdIAAAAAAAAl0gAAAAAAAAAAAAAAADwvw"
				],
				[
					13,
					1,
					"insert_snippet",
					{
						"contents": "{$0}"
					},
					"AQAAAJhIAAAAAAAAmkgAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAJhIAAAAAAAAmEgAAAAAAAAAAAAAAADwvw"
				],
				[
					14,
					1,
					"run_macro_file",
					{
						"file": "res://Packages/Default/Add Line in Braces.sublime-macro"
					},
					"BgAAAJlIAAAAAAAAmkgAAAAAAAAAAAAAmkgAAAAAAACbSAAAAAAAAAAAAACbSAAAAAAAAJxIAAAAAAAAAAAAAJxIAAAAAAAAnUgAAAAAAAAAAAAAmkgAAAAAAACaSAAAAAAAAAEAAAAJmkgAAAAAAACcSAAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAJlIAAAAAAAAmUgAAAAAAAAAAAAAAADwvw"
				],
				[
					16,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AwAAAJ9IAAAAAAAAoEgAAAAAAAAAAAAAoEgAAAAAAAChSAAAAAAAAAAAAACaSAAAAAAAAJpIAAAAAAAAAgAAAAkJ",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAJ9IAAAAAAAAn0gAAAAAAAAAAAAAAABSQA"
				],
				[
					18,
					1,
					"reindent",
					null,
					"AQAAAJpIAAAAAAAAnEgAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAJpIAAAAAAAAmkgAAAAAAAAAAAAAAABCQA"
				],
				[
					19,
					1,
					"insert",
					{
						"characters": "LLO"
					},
					"BAAAAJxIAAAAAAAAnUgAAAAAAAAAAAAAoUgAAAAAAAChSAAAAAAAAAEAAAAJnUgAAAAAAACeSAAAAAAAAAAAAACeSAAAAAAAAJ9IAAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAJxIAAAAAAAAnEgAAAAAAAAAAAAAAADwvw"
				],
				[
					20,
					1,
					"insert_completion",
					{
						"completion": "LLOG_ERR",
						"format": "text",
						"keep_prefix": false,
						"must_insert": false,
						"trigger": "LLOG_ERR"
					},
					"AgAAAJxIAAAAAAAAnEgAAAAAAAADAAAATExPnEgAAAAAAACkSAAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAJ9IAAAAAAAAn0gAAAAAAAAAAAAAAADwvw"
				],
				[
					21,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAAKRIAAAAAAAApUgAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAKRIAAAAAAAApEgAAAAAAAAAAAAAAADwvw"
				],
				[
					22,
					4,
					"left_delete",
					null,
					"BAAAAKRIAAAAAAAApEgAAAAAAAABAAAAIKNIAAAAAAAAo0gAAAAAAAABAAAAUqJIAAAAAAAAokgAAAAAAAABAAAAUqFIAAAAAAAAoUgAAAAAAAABAAAARQ",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAKVIAAAAAAAApUgAAAAAAAAAAAAAAADwvw"
				],
				[
					23,
					1,
					"insert",
					{
						"characters": "ERR"
					},
					"AwAAAKFIAAAAAAAAokgAAAAAAAAAAAAAokgAAAAAAACjSAAAAAAAAAAAAACjSAAAAAAAAKRIAAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAKFIAAAAAAAAoUgAAAAAAAAAAAAAAADwvw"
				],
				[
					24,
					1,
					"insert",
					{
						"characters": " <<"
					},
					"AwAAAKRIAAAAAAAApUgAAAAAAAAAAAAApUgAAAAAAACmSAAAAAAAAAAAAACmSAAAAAAAAKdIAAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAKRIAAAAAAAApEgAAAAAAAAAAAAAAADwvw"
				],
				[
					25,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAAKdIAAAAAAAAqEgAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAKdIAAAAAAAAp0gAAAAAAAAAAAAAAADwvw"
				],
				[
					26,
					1,
					"insert_snippet",
					{
						"contents": "\"$0\""
					},
					"AQAAAKhIAAAAAAAAqkgAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAKhIAAAAAAAAqEgAAAAAAAAAAAAAAADwvw"
				],
				[
					27,
					1,
					"insert",
					{
						"characters": "Er"
					},
					"AgAAAKlIAAAAAAAAqkgAAAAAAAAAAAAAqkgAAAAAAACrSAAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAKlIAAAAAAAAqUgAAAAAAAAAAAAAAADwvw"
				],
				[
					28,
					1,
					"insert_completion",
					{
						"completion": "Error",
						"format": "text",
						"keep_prefix": false,
						"must_insert": false,
						"trigger": "Error"
					},
					"AgAAAKlIAAAAAAAAqUgAAAAAAAACAAAARXKpSAAAAAAAAK5IAAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAKtIAAAAAAAAq0gAAAAAAAAAAAAAAADwvw"
				],
				[
					29,
					1,
					"insert",
					{
						"characters": " ope"
					},
					"BAAAAK5IAAAAAAAAr0gAAAAAAAAAAAAAr0gAAAAAAACwSAAAAAAAAAAAAACwSAAAAAAAALFIAAAAAAAAAAAAALFIAAAAAAAAskgAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAK5IAAAAAAAArkgAAAAAAAAAAAAAAADwvw"
				],
				[
					30,
					1,
					"insert_completion",
					{
						"completion": "opening",
						"format": "text",
						"keep_prefix": false,
						"must_insert": false,
						"trigger": "opening"
					},
					"AgAAAK9IAAAAAAAAr0gAAAAAAAADAAAAb3Blr0gAAAAAAAC2SAAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAALJIAAAAAAAAskgAAAAAAAAAAAAAAADwvw"
				],
				[
					31,
					1,
					"insert",
					{
						"characters": " file"
					},
					"BQAAALZIAAAAAAAAt0gAAAAAAAAAAAAAt0gAAAAAAAC4SAAAAAAAAAAAAAC4SAAAAAAAALlIAAAAAAAAAAAAALlIAAAAAAAAukgAAAAAAAAAAAAAukgAAAAAAAC7SAAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAALZIAAAAAAAAtkgAAAAAAAAAAAAAAADwvw"
				],
				[
					32,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAALtIAAAAAAAAvEgAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAALtIAAAAAAAAu0gAAAAAAAAAAAAAAADwvw"
				],
				[
					35,
					1,
					"insert",
					{
						"characters": "l"
					},
					"AQAAALdIAAAAAAAAuEgAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAALdIAAAAAAAAt0gAAAAAAAAAAAAAAADwvw"
				],
				[
					36,
					1,
					"left_delete",
					null,
					"AQAAALdIAAAAAAAAt0gAAAAAAAABAAAAbA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAALhIAAAAAAAAuEgAAAAAAAAAAAAAAADwvw"
				],
				[
					39,
					1,
					"insert",
					{
						"characters": " <<"
					},
					"AwAAAL1IAAAAAAAAvkgAAAAAAAAAAAAAvkgAAAAAAAC/SAAAAAAAAAAAAAC/SAAAAAAAAMBIAAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAL1IAAAAAAAAvUgAAAAAAAAAAAAAAADwvw"
				],
				[
					40,
					1,
					"insert",
					{
						"characters": " d"
					},
					"AgAAAMBIAAAAAAAAwUgAAAAAAAAAAAAAwUgAAAAAAADCSAAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAMBIAAAAAAAAwEgAAAAAAAAAAAAAAADwvw"
				],
				[
					41,
					1,
					"insert_completion",
					{
						"completion": "dstFilename",
						"format": "text",
						"keep_prefix": false,
						"must_insert": false,
						"trigger": "dstFilename"
					},
					"AgAAAMFIAAAAAAAAwUgAAAAAAAABAAAAZMFIAAAAAAAAzEgAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAMJIAAAAAAAAwkgAAAAAAAAAAAAAAADwvw"
				],
				[
					42,
					1,
					"insert",
					{
						"characters": " <<"
					},
					"AwAAAMxIAAAAAAAAzUgAAAAAAAAAAAAAzUgAAAAAAADOSAAAAAAAAAAAAADOSAAAAAAAAM9IAAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAMxIAAAAAAAAzEgAAAAAAAAAAAAAAADwvw"
				],
				[
					43,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAAM9IAAAAAAAA0EgAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAM9IAAAAAAAAz0gAAAAAAAAAAAAAAADwvw"
				],
				[
					44,
					1,
					"insert_snippet",
					{
						"contents": "\"$0\""
					},
					"AQAAANBIAAAAAAAA0kgAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAANBIAAAAAAAA0EgAAAAAAAAAAAAAAADwvw"
				],
				[
					45,
					1,
					"insert",
					{
						"characters": " for"
					},
					"BAAAANFIAAAAAAAA0kgAAAAAAAAAAAAA0kgAAAAAAADTSAAAAAAAAAAAAADTSAAAAAAAANRIAAAAAAAAAAAAANRIAAAAAAAA1UgAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAANFIAAAAAAAA0UgAAAAAAAAAAAAAAADwvw"
				],
				[
					46,
					1,
					"insert",
					{
						"characters": " writing"
					},
					"CAAAANVIAAAAAAAA1kgAAAAAAAAAAAAA1kgAAAAAAADXSAAAAAAAAAAAAADXSAAAAAAAANhIAAAAAAAAAAAAANhIAAAAAAAA2UgAAAAAAAAAAAAA2UgAAAAAAADaSAAAAAAAAAAAAADaSAAAAAAAANtIAAAAAAAAAAAAANtIAAAAAAAA3EgAAAAAAAAAAAAA3EgAAAAAAADdSAAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAANVIAAAAAAAA1UgAAAAAAAAAAAAAAADwvw"
				],
				[
					47,
					1,
					"insert",
					{
						"characters": " !!!"
					},
					"BAAAAN1IAAAAAAAA3kgAAAAAAAAAAAAA3kgAAAAAAADfSAAAAAAAAAAAAADfSAAAAAAAAOBIAAAAAAAAAAAAAOBIAAAAAAAA4UgAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAN1IAAAAAAAA3UgAAAAAAAAAAAAAAADwvw"
				],
				[
					49,
					1,
					"insert",
					{
						"characters": "l"
					},
					"AQAAAOJIAAAAAAAA40gAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAOJIAAAAAAAA4kgAAAAAAAAAAAAAAADwvw"
				],
				[
					50,
					1,
					"left_delete",
					null,
					"AQAAAOJIAAAAAAAA4kgAAAAAAAABAAAAbA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAONIAAAAAAAA40gAAAAAAAAAAAAAAADwvw"
				],
				[
					51,
					1,
					"insert",
					{
						"characters": ";"
					},
					"AQAAAOJIAAAAAAAA40gAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAOJIAAAAAAAA4kgAAAAAAAAAAAAAAADwvw"
				],
				[
					56,
					1,
					"insert",
					{
						"characters": "\\n"
					},
					"AgAAAOFIAAAAAAAA4kgAAAAAAAAAAAAA4kgAAAAAAADjSAAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAOFIAAAAAAAA4UgAAAAAAAAAAAAAAADwvw"
				],
				[
					57,
					1,
					"insert",
					{
						"characters": " Text"
					},
					"BQAAAONIAAAAAAAA5EgAAAAAAAAAAAAA5EgAAAAAAADlSAAAAAAAAAAAAADlSAAAAAAAAOZIAAAAAAAAAAAAAOZIAAAAAAAA50gAAAAAAAAAAAAA50gAAAAAAADoSAAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAONIAAAAAAAA40gAAAAAAAAAAAAAAADwvw"
				],
				[
					58,
					1,
					"insert_completion",
					{
						"completion": "Texture",
						"format": "text",
						"keep_prefix": false,
						"must_insert": false,
						"trigger": "Texture"
					},
					"AgAAAORIAAAAAAAA5EgAAAAAAAAEAAAAVGV4dORIAAAAAAAA60gAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAOhIAAAAAAAA6EgAAAAAAAAAAAAAAADwvw"
				],
				[
					59,
					1,
					"insert",
					{
						"characters": " conver"
					},
					"BwAAAOtIAAAAAAAA7EgAAAAAAAAAAAAA7EgAAAAAAADtSAAAAAAAAAAAAADtSAAAAAAAAO5IAAAAAAAAAAAAAO5IAAAAAAAA70gAAAAAAAAAAAAA70gAAAAAAADwSAAAAAAAAAAAAADwSAAAAAAAAPFIAAAAAAAAAAAAAPFIAAAAAAAA8kgAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAOtIAAAAAAAA60gAAAAAAAAAAAAAAADwvw"
				],
				[
					60,
					1,
					"insert",
					{
						"characters": "sion"
					},
					"BAAAAPJIAAAAAAAA80gAAAAAAAAAAAAA80gAAAAAAAD0SAAAAAAAAAAAAAD0SAAAAAAAAPVIAAAAAAAAAAAAAPVIAAAAAAAA9kgAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAPJIAAAAAAAA8kgAAAAAAAAAAAAAAADwvw"
				],
				[
					61,
					1,
					"insert",
					{
						"characters": " failer"
					},
					"BwAAAPZIAAAAAAAA90gAAAAAAAAAAAAA90gAAAAAAAD4SAAAAAAAAAAAAAD4SAAAAAAAAPlIAAAAAAAAAAAAAPlIAAAAAAAA+kgAAAAAAAAAAAAA+kgAAAAAAAD7SAAAAAAAAAAAAAD7SAAAAAAAAPxIAAAAAAAAAAAAAPxIAAAAAAAA/UgAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAPZIAAAAAAAA9kgAAAAAAAAAAAAAAADwvw"
				],
				[
					62,
					1,
					"left_delete",
					null,
					"AQAAAPxIAAAAAAAA/EgAAAAAAAABAAAAcg",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAP1IAAAAAAAA/UgAAAAAAAAAAAAAAADwvw"
				],
				[
					63,
					1,
					"insert",
					{
						"characters": "d."
					},
					"AgAAAPxIAAAAAAAA/UgAAAAAAAAAAAAA/UgAAAAAAAD+SAAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAPxIAAAAAAAA/EgAAAAAAAAAAAAAAADwvw"
				],
				[
					66,
					1,
					"insert",
					{
						"characters": "\""
					},
					"AQAAAOxIAAAAAAAA7UgAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAOxIAAAAAAAA7EgAAAAAAAAAAAAAAADwvw"
				],
				[
					67,
					1,
					"insert",
					{
						"characters": " \""
					},
					"AgAAAO1IAAAAAAAA7kgAAAAAAAAAAAAA7kgAAAAAAADvSAAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAO1IAAAAAAAA7UgAAAAAAAAAAAAAAADwvw"
				],
				[
					68,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAAO9IAAAAAAAA8EgAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAO9IAAAAAAAA70gAAAAAAAAAAAAAAADwvw"
				],
				[
					73,
					1,
					"left_delete",
					null,
					"AQAAAOJIAAAAAAAA4kgAAAAAAAAgAAAAbiBUZXh0dXJlICIgIiBjb252ZXJzaW9uIGZhaWxlZC4",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAOJIAAAAAAAAAkkAAAAAAAAAAAAAAADwvw"
				],
				[
					74,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AgAAAOJIAAAAAAAA40gAAAAAAAAAAAAA40gAAAAAAADlSAAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAOJIAAAAAAAA4kgAAAAAAAAAAAAAAADwvw"
				],
				[
					75,
					4,
					"left_delete",
					null,
					"BAAAAORIAAAAAAAA5EgAAAAAAAABAAAACeNIAAAAAAAA40gAAAAAAAABAAAACeJIAAAAAAAA4kgAAAAAAAABAAAACuFIAAAAAAAA4UgAAAAAAAABAAAAXA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAOVIAAAAAAAA5UgAAAAAAAAAAAAAAADwvw"
				],
				[
					79,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AgAAAKVIAAAAAAAApkgAAAAAAAAAAAAApkgAAAAAAACoSAAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAKVIAAAAAAAApUgAAAAAAAAAAAAAAADwvw"
				],
				[
					84,
					1,
					"insert",
					{
						"characters": "\t"
					},
					"AQAAAKhIAAAAAAAAqUgAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAKhIAAAAAAAAqEgAAAAAAAAAAAAAAADwvw"
				],
				[
					87,
					1,
					"insert",
					{
						"characters": " <<"
					},
					"AwAAAKRIAAAAAAAApUgAAAAAAAAAAAAApUgAAAAAAACmSAAAAAAAAAAAAACmSAAAAAAAAKdIAAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAKRIAAAAAAAApEgAAAAAAAAAAAAAAADwvw"
				],
				[
					88,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAAKdIAAAAAAAAqEgAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAKdIAAAAAAAAp0gAAAAAAAAAAAAAAADwvw"
				],
				[
					89,
					1,
					"paste",
					null,
					"AQAAAKhIAAAAAAAAyEgAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAKhIAAAAAAAAqEgAAAAAAAAAAAAAAADwvw"
				],
				[
					91,
					1,
					"insert",
					{
						"characters": "\""
					},
					"AQAAAKhIAAAAAAAAqUgAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAKhIAAAAAAAAqEgAAAAAAAAAAAAAAADwvw"
				],
				[
					92,
					2,
					"right_delete",
					null,
					"AgAAAKlIAAAAAAAAqUgAAAAAAAABAAAAbqlIAAAAAAAAqUgAAAAAAAABAAAAIA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAKlIAAAAAAAAqUgAAAAAAAAAAAAAAADwvw"
				],
				[
					96,
					1,
					"insert",
					{
						"characters": "\""
					},
					"AQAAAMdIAAAAAAAAyEgAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAMdIAAAAAAAAx0gAAAAAAAAAAAAAAADwvw"
				],
				[
					99,
					1,
					"insert",
					{
						"characters": " <<"
					},
					"AwAAALJIAAAAAAAAs0gAAAAAAAAAAAAAs0gAAAAAAAC0SAAAAAAAAAAAAAC0SAAAAAAAALVIAAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAALJIAAAAAAAAskgAAAAAAAAAAAAAAADwvw"
				],
				[
					100,
					1,
					"insert",
					{
						"characters": " <<"
					},
					"AwAAALVIAAAAAAAAtkgAAAAAAAAAAAAAtkgAAAAAAAC3SAAAAAAAAAAAAAC3SAAAAAAAALhIAAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAALVIAAAAAAAAtUgAAAAAAAAAAAAAAADwvw"
				],
				[
					101,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAALhIAAAAAAAAuUgAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAALhIAAAAAAAAuEgAAAAAAAAAAAAAAADwvw"
				],
				[
					102,
					1,
					"left_delete",
					null,
					"AQAAALhIAAAAAAAAuEgAAAAAAAABAAAAIA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAALlIAAAAAAAAuUgAAAAAAAAAAAAAAADwvw"
				],
				[
					108,
					1,
					"insert",
					{
						"characters": "\\n"
					},
					"AgAAAM1IAAAAAAAAzkgAAAAAAAAAAAAAzkgAAAAAAADPSAAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAM1IAAAAAAAAzUgAAAAAAAAAAAAAAADwvw"
				],
				[
					116,
					1,
					"paste",
					null,
					"AQAAALZIAAAAAAAAwUgAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAALZIAAAAAAAAtkgAAAAAAAAAAAAAAADwvw"
				],
				[
					117,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAAMFIAAAAAAAAwkgAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAMFIAAAAAAAAwUgAAAAAAAAAAAAAAADwvw"
				],
				[
					123,
					1,
					"insert",
					{
						"characters": "\n\n"
					},
					"AgAAAP48AAAAAAAA/zwAAAAAAAAAAAAA/zwAAAAAAAAAPQAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAP48AAAAAAAA/jwAAAAAAAAAAAAAAADwvw"
				],
				[
					125,
					1,
					"reindent",
					null,
					"AQAAAP88AAAAAAAAAD0AAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAP88AAAAAAAA/zwAAAAAAAAAAAAAAAAAAA"
				],
				[
					126,
					1,
					"paste",
					null,
					"AQAAAAA9AAAAAAAA5j0AAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAA9AAAAAAAAAD0AAAAAAAAAAAAAAADwvw"
				],
				[
					128,
					2,
					"right_delete",
					null,
					"AgAAAAA9AAAAAAAAAD0AAAAAAAABAAAACQA9AAAAAAAAAD0AAAAAAAABAAAALw",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAA9AAAAAAAAAD0AAAAAAAAAAAAAAIBGQA"
				],
				[
					129,
					1,
					"insert",
					{
						"characters": "/"
					},
					"AQAAAAA9AAAAAAAAAT0AAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAA9AAAAAAAAAD0AAAAAAAAAAAAAAADwvw"
				],
				[
					131,
					1,
					"insert",
					{
						"characters": "ltx"
					},
					"AwAAAAg9AAAAAAAACT0AAAAAAAAAAAAACT0AAAAAAAAKPQAAAAAAAAAAAAAKPQAAAAAAAAs9AAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAg9AAAAAAAACD0AAAAAAAAAAAAAAADwvw"
				],
				[
					132,
					1,
					"insert",
					{
						"characters": " texture"
					},
					"CAAAAAs9AAAAAAAADD0AAAAAAAAAAAAADD0AAAAAAAANPQAAAAAAAAAAAAANPQAAAAAAAA49AAAAAAAAAAAAAA49AAAAAAAADz0AAAAAAAAAAAAADz0AAAAAAAAQPQAAAAAAAAAAAAAQPQAAAAAAABE9AAAAAAAAAAAAABE9AAAAAAAAEj0AAAAAAAAAAAAAEj0AAAAAAAATPQAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAs9AAAAAAAACz0AAAAAAAAAAAAAAADwvw"
				],
				[
					133,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAABM9AAAAAAAAFD0AAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAABM9AAAAAAAAEz0AAAAAAAAAAAAAAADwvw"
				],
				[
					136,
					17,
					"right_delete",
					null,
					"EQAAABg9AAAAAAAAGD0AAAAAAAABAAAAIBg9AAAAAAAAGD0AAAAAAAABAAAAYRg9AAAAAAAAGD0AAAAAAAABAAAAbhg9AAAAAAAAGD0AAAAAAAABAAAAZBg9AAAAAAAAGD0AAAAAAAABAAAAIBg9AAAAAAAAGD0AAAAAAAABAAAAdxg9AAAAAAAAGD0AAAAAAAABAAAAchg9AAAAAAAAGD0AAAAAAAABAAAAaRg9AAAAAAAAGD0AAAAAAAABAAAAdBg9AAAAAAAAGD0AAAAAAAABAAAAZRg9AAAAAAAAGD0AAAAAAAABAAAAIBg9AAAAAAAAGD0AAAAAAAABAAAAaBg9AAAAAAAAGD0AAAAAAAABAAAAZRg9AAAAAAAAGD0AAAAAAAABAAAAYRg9AAAAAAAAGD0AAAAAAAABAAAAZBg9AAAAAAAAGD0AAAAAAAABAAAAZRg9AAAAAAAAGD0AAAAAAAABAAAAcg",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAABg9AAAAAAAAGD0AAAAAAAAAAAAAAADwvw"
				],
				[
					139,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AgAAAN09AAAAAAAA3j0AAAAAAAAAAAAA3j0AAAAAAADhPQAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAN09AAAAAAAA3T0AAAAAAAAAAAAAAADwvw"
				],
				[
					140,
					1,
					"left_delete",
					null,
					"AQAAAOA9AAAAAAAA4D0AAAAAAAABAAAACQ",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAOE9AAAAAAAA4T0AAAAAAAAAAAAAAADwvw"
				],
				[
					141,
					1,
					"insert",
					{
						"characters": "re"
					},
					"AgAAAOA9AAAAAAAA4T0AAAAAAAAAAAAA4T0AAAAAAADiPQAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAOA9AAAAAAAA4D0AAAAAAAAAAAAAAADwvw"
				],
				[
					142,
					1,
					"insert_completion",
					{
						"completion": "return",
						"format": "text",
						"keep_prefix": false,
						"must_insert": false,
						"trigger": "return"
					},
					"AgAAAOA9AAAAAAAA4D0AAAAAAAACAAAAcmXgPQAAAAAAAOY9AAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAOI9AAAAAAAA4j0AAAAAAAAAAAAAAADwvw"
				],
				[
					143,
					1,
					"insert",
					{
						"characters": " f"
					},
					"AgAAAOY9AAAAAAAA5z0AAAAAAAAAAAAA5z0AAAAAAADoPQAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAOY9AAAAAAAA5j0AAAAAAAAAAAAAAADwvw"
				],
				[
					144,
					1,
					"insert_completion",
					{
						"completion": "false",
						"format": "text",
						"keep_prefix": false,
						"must_insert": false,
						"trigger": "false"
					},
					"AgAAAOc9AAAAAAAA5z0AAAAAAAABAAAAZuc9AAAAAAAA7D0AAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAOg9AAAAAAAA6D0AAAAAAAAAAAAAAADwvw"
				],
				[
					145,
					1,
					"insert",
					{
						"characters": ";"
					},
					"AQAAAOw9AAAAAAAA7T0AAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAOw9AAAAAAAA7D0AAAAAAAAAAAAAAADwvw"
				],
				[
					152,
					1,
					"left_delete",
					null,
					"AQAAAGM9AAAAAAAAYz0AAAAAAAA+AAAAPDwgIlRleHR1cmUgIiA8PCBzcmNGaWxlbmFtZSA8PCAiIGNvbnZlcnNpb24gZmFpbGVkLlxuIiAKCQkJPDw",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAKE9AAAAAAAAYz0AAAAAAAAAAAAAAADwvw"
				],
				[
					153,
					1,
					"insert",
					{
						"characters": "<<"
					},
					"AgAAAGM9AAAAAAAAZD0AAAAAAAAAAAAAZD0AAAAAAABlPQAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAGM9AAAAAAAAYz0AAAAAAAAAAAAAAADwvw"
				],
				[
					156,
					1,
					"right_delete",
					null,
					"AQAAAPdIAAAAAAAA90gAAAAAAAAOAAAAb3BlbiBmaWxlIGFuZCA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAPdIAAAAAAAABUkAAAAAAAAAAAAAAADwvw"
				],
				[
					160,
					1,
					"left_delete",
					null,
					"AQAAAAVJAAAAAAAABUkAAAAAAADJAAAARklMRSAqcEZpbGUgPSBmb3Blbihkc3RGaWxlbmFtZS5jX3N0cigpLCAid2IiKTsKCWlmKCFwRmlsZSkgewoJCUxMT0dfRVJSIDw8ICJUZXh0dXJlICIgPDwgc3JjRmlsZW5hbWUgPDwgIiBjb252ZXJzaW9uIGZhaWxlZC5cbiIgCgkJCTw8ICJFcnJvciBvcGVuaW5nIGZpbGUgIiA8PCBkc3RGaWxlbmFtZSA8PCAiIGZvciB3cml0aW5nICEhISI7Cgl9CgoJ",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAVJAAAAAAAAzkkAAAAAAAAAAAAAAABCQA"
				],
				[
					161,
					1,
					"insert",
					{
						"characters": "if(!"
					},
					"BAAAAAVJAAAAAAAABkkAAAAAAAAAAAAABkkAAAAAAAAHSQAAAAAAAAAAAAAHSQAAAAAAAAhJAAAAAAAAAAAAAAhJAAAAAAAACUkAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAVJAAAAAAAABUkAAAAAAAAAAAAAAADwvw"
				],
				[
					162,
					1,
					"left_delete",
					null,
					"AQAAAAhJAAAAAAAACEkAAAAAAAABAAAAIQ",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAlJAAAAAAAACUkAAAAAAAAAAAAAAADwvw"
				],
				[
					165,
					1,
					"insert",
					{
						"characters": " !="
					},
					"AwAAAElJAAAAAAAASkkAAAAAAAAAAAAASkkAAAAAAABLSQAAAAAAAAAAAABLSQAAAAAAAExJAAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAElJAAAAAAAASUkAAAAAAAAAAAAAAADwvw"
				],
				[
					166,
					1,
					"insert",
					{
						"characters": " s"
					},
					"AgAAAExJAAAAAAAATUkAAAAAAAAAAAAATUkAAAAAAABOSQAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAExJAAAAAAAATEkAAAAAAAAAAAAAAADwvw"
				],
				[
					167,
					1,
					"insert",
					{
						"characters": "i"
					},
					"AQAAAE5JAAAAAAAAT0kAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAE5JAAAAAAAATkkAAAAAAAAAAAAAAADwvw"
				],
				[
					168,
					1,
					"insert_completion",
					{
						"completion": "sizeof",
						"format": "text",
						"keep_prefix": false,
						"must_insert": false,
						"trigger": "sizeof"
					},
					"AgAAAE1JAAAAAAAATUkAAAAAAAACAAAAc2lNSQAAAAAAAFNJAAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAE9JAAAAAAAAT0kAAAAAAAAAAAAAAADwvw"
				],
				[
					169,
					1,
					"insert_snippet",
					{
						"contents": "($0)"
					},
					"AQAAAFNJAAAAAAAAVUkAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAFNJAAAAAAAAU0kAAAAAAAAAAAAAAADwvw"
				],
				[
					170,
					1,
					"insert",
					{
						"characters": "L"
					},
					"AQAAAFRJAAAAAAAAVUkAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAFRJAAAAAAAAVEkAAAAAAAAAAAAAAADwvw"
				],
				[
					171,
					1,
					"insert_completion",
					{
						"completion": "LTX_Header",
						"format": "text",
						"keep_prefix": false,
						"must_insert": false,
						"trigger": "LTX_Header"
					},
					"AgAAAFRJAAAAAAAAVEkAAAAAAAABAAAATFRJAAAAAAAAXkkAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAFVJAAAAAAAAVUkAAAAAAAAAAAAAAADwvw"
				],
				[
					173,
					1,
					"insert",
					{
						"characters": ")"
					},
					"AQAAAF9JAAAAAAAAYEkAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAF9JAAAAAAAAX0kAAAAAAAAAAAAAAADwvw"
				],
				[
					174,
					1,
					"right_delete",
					null,
					"AQAAAGBJAAAAAAAAYEkAAAAAAAABAAAAOw",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAGBJAAAAAAAAYEkAAAAAAAAAAAAAAADwvw"
				],
				[
					175,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAAGBJAAAAAAAAYUkAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAGBJAAAAAAAAYEkAAAAAAAAAAAAAAADwvw"
				],
				[
					176,
					1,
					"insert_snippet",
					{
						"contents": "{$0}"
					},
					"AQAAAGFJAAAAAAAAY0kAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAGFJAAAAAAAAYUkAAAAAAAAAAAAAAADwvw"
				],
				[
					177,
					1,
					"run_macro_file",
					{
						"file": "res://Packages/Default/Add Line in Braces.sublime-macro"
					},
					"BgAAAGJJAAAAAAAAY0kAAAAAAAAAAAAAY0kAAAAAAABkSQAAAAAAAAAAAABkSQAAAAAAAGVJAAAAAAAAAAAAAGVJAAAAAAAAZkkAAAAAAAAAAAAAY0kAAAAAAABjSQAAAAAAAAEAAAAJY0kAAAAAAABlSQAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAGJJAAAAAAAAYkkAAAAAAAAAAAAAAADwvw"
				],
				[
					178,
					1,
					"insert",
					{
						"characters": "LLO"
					},
					"AwAAAGVJAAAAAAAAZkkAAAAAAAAAAAAAZkkAAAAAAABnSQAAAAAAAAAAAABnSQAAAAAAAGhJAAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAGVJAAAAAAAAZUkAAAAAAAAAAAAAAADwvw"
				],
				[
					179,
					1,
					"insert_completion",
					{
						"completion": "LLOG_ERR",
						"format": "text",
						"keep_prefix": false,
						"must_insert": false,
						"trigger": "LLOG_ERR"
					},
					"AgAAAGVJAAAAAAAAZUkAAAAAAAADAAAATExPZUkAAAAAAABtSQAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAGhJAAAAAAAAaEkAAAAAAAAAAAAAAADwvw"
				],
				[
					180,
					1,
					"insert",
					{
						"characters": " <<"
					},
					"AwAAAG1JAAAAAAAAbkkAAAAAAAAAAAAAbkkAAAAAAABvSQAAAAAAAAAAAABvSQAAAAAAAHBJAAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAG1JAAAAAAAAbUkAAAAAAAAAAAAAAADwvw"
				],
				[
					181,
					1,
					"insert",
					{
						"characters": " E"
					},
					"AgAAAHBJAAAAAAAAcUkAAAAAAAAAAAAAcUkAAAAAAABySQAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAHBJAAAAAAAAcEkAAAAAAAAAAAAAAADwvw"
				],
				[
					182,
					1,
					"left_delete",
					null,
					"AQAAAHFJAAAAAAAAcUkAAAAAAAABAAAARQ",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAHJJAAAAAAAAckkAAAAAAAAAAAAAAADwvw"
				],
				[
					183,
					1,
					"insert",
					{
						"characters": "|"
					},
					"AQAAAHFJAAAAAAAAckkAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAHFJAAAAAAAAcUkAAAAAAAAAAAAAAADwvw"
				],
				[
					184,
					1,
					"insert_snippet",
					{
						"contents": "\"$0\""
					},
					"AQAAAHJJAAAAAAAAdEkAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAHJJAAAAAAAAckkAAAAAAAAAAAAAAADwvw"
				],
				[
					185,
					1,
					"insert",
					{
						"characters": "E"
					},
					"AQAAAHNJAAAAAAAAdEkAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAHNJAAAAAAAAc0kAAAAAAAAAAAAAAADwvw"
				],
				[
					186,
					1,
					"left_delete",
					null,
					"AQAAAHNJAAAAAAAAc0kAAAAAAAABAAAARQ",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAHRJAAAAAAAAdEkAAAAAAAAAAAAAAADwvw"
				],
				[
					187,
					1,
					"run_macro_file",
					{
						"file": "res://Packages/Default/Delete Left Right.sublime-macro"
					},
					"AgAAAHJJAAAAAAAAckkAAAAAAAABAAAAInJJAAAAAAAAckkAAAAAAAABAAAAIg",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAHNJAAAAAAAAc0kAAAAAAAAAAAAAAADwvw"
				],
				[
					188,
					1,
					"left_delete",
					null,
					"AQAAAHFJAAAAAAAAcUkAAAAAAAABAAAAfA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAHJJAAAAAAAAckkAAAAAAAAAAAAAAADwvw"
				],
				[
					189,
					1,
					"insert_snippet",
					{
						"contents": "\"$0\""
					},
					"AQAAAHFJAAAAAAAAc0kAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAHFJAAAAAAAAcUkAAAAAAAAAAAAAAADwvw"
				],
				[
					190,
					1,
					"insert",
					{
						"characters": ":"
					},
					"AQAAAHJJAAAAAAAAc0kAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAHJJAAAAAAAAckkAAAAAAAAAAAAAAADwvw"
				],
				[
					191,
					1,
					"left_delete",
					null,
					"AQAAAHJJAAAAAAAAckkAAAAAAAABAAAAOg",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAHNJAAAAAAAAc0kAAAAAAAAAAAAAAADwvw"
				],
				[
					192,
					1,
					"insert",
					{
						"characters": "Er"
					},
					"AgAAAHJJAAAAAAAAc0kAAAAAAAAAAAAAc0kAAAAAAAB0SQAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAHJJAAAAAAAAckkAAAAAAAAAAAAAAADwvw"
				],
				[
					193,
					1,
					"insert_completion",
					{
						"completion": "Error",
						"format": "text",
						"keep_prefix": false,
						"must_insert": false,
						"trigger": "Error"
					},
					"AgAAAHJJAAAAAAAAckkAAAAAAAACAAAARXJySQAAAAAAAHdJAAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAHRJAAAAAAAAdEkAAAAAAAAAAAAAAADwvw"
				],
				[
					194,
					1,
					"insert",
					{
						"characters": " writing"
					},
					"CAAAAHdJAAAAAAAAeEkAAAAAAAAAAAAAeEkAAAAAAAB5SQAAAAAAAAAAAAB5SQAAAAAAAHpJAAAAAAAAAAAAAHpJAAAAAAAAe0kAAAAAAAAAAAAAe0kAAAAAAAB8SQAAAAAAAAAAAAB8SQAAAAAAAH1JAAAAAAAAAAAAAH1JAAAAAAAAfkkAAAAAAAAAAAAAfkkAAAAAAAB/SQAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAHdJAAAAAAAAd0kAAAAAAAAAAAAAAADwvw"
				],
				[
					195,
					1,
					"insert",
					{
						"characters": " herad"
					},
					"BgAAAH9JAAAAAAAAgEkAAAAAAAAAAAAAgEkAAAAAAACBSQAAAAAAAAAAAACBSQAAAAAAAIJJAAAAAAAAAAAAAIJJAAAAAAAAg0kAAAAAAAAAAAAAg0kAAAAAAACESQAAAAAAAAAAAACESQAAAAAAAIVJAAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAH9JAAAAAAAAf0kAAAAAAAAAAAAAAADwvw"
				],
				[
					196,
					3,
					"left_delete",
					null,
					"AwAAAIRJAAAAAAAAhEkAAAAAAAABAAAAZINJAAAAAAAAg0kAAAAAAAABAAAAYYJJAAAAAAAAgkkAAAAAAAABAAAAcg",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAIVJAAAAAAAAhUkAAAAAAAAAAAAAAADwvw"
				],
				[
					197,
					1,
					"insert",
					{
						"characters": "a"
					},
					"AQAAAIJJAAAAAAAAg0kAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAIJJAAAAAAAAgkkAAAAAAAAAAAAAAADwvw"
				],
				[
					198,
					1,
					"insert_completion",
					{
						"completion": "header",
						"format": "text",
						"keep_prefix": false,
						"must_insert": false,
						"trigger": "header"
					},
					"AgAAAIBJAAAAAAAAgEkAAAAAAAADAAAAaGVhgEkAAAAAAACGSQAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAINJAAAAAAAAg0kAAAAAAAAAAAAAAADwvw"
				],
				[
					199,
					1,
					"insert",
					{
						"characters": " for"
					},
					"BAAAAIZJAAAAAAAAh0kAAAAAAAAAAAAAh0kAAAAAAACISQAAAAAAAAAAAACISQAAAAAAAIlJAAAAAAAAAAAAAIlJAAAAAAAAikkAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAIZJAAAAAAAAhkkAAAAAAAAAAAAAAADwvw"
				],
				[
					200,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAAIpJAAAAAAAAi0kAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAIpJAAAAAAAAikkAAAAAAAAAAAAAAADwvw"
				],
				[
					201,
					1,
					"insert",
					{
						"characters": "texture"
					},
					"BwAAAItJAAAAAAAAjEkAAAAAAAAAAAAAjEkAAAAAAACNSQAAAAAAAAAAAACNSQAAAAAAAI5JAAAAAAAAAAAAAI5JAAAAAAAAj0kAAAAAAAAAAAAAj0kAAAAAAACQSQAAAAAAAAAAAACQSQAAAAAAAJFJAAAAAAAAAAAAAJFJAAAAAAAAkkkAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAItJAAAAAAAAi0kAAAAAAAAAAAAAAADwvw"
				],
				[
					202,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAAJJJAAAAAAAAk0kAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAJJJAAAAAAAAkkkAAAAAAAAAAAAAAADwvw"
				],
				[
					204,
					1,
					"insert",
					{
						"characters": " <<"
					},
					"AwAAAJRJAAAAAAAAlUkAAAAAAAAAAAAAlUkAAAAAAACWSQAAAAAAAAAAAACWSQAAAAAAAJdJAAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAJRJAAAAAAAAlEkAAAAAAAAAAAAAAADwvw"
				],
				[
					205,
					1,
					"insert",
					{
						"characters": " f"
					},
					"AgAAAJdJAAAAAAAAmEkAAAAAAAAAAAAAmEkAAAAAAACZSQAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAJdJAAAAAAAAl0kAAAAAAAAAAAAAAADwvw"
				],
				[
					206,
					1,
					"left_delete",
					null,
					"AQAAAJhJAAAAAAAAmEkAAAAAAAABAAAAZg",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAJlJAAAAAAAAmUkAAAAAAAAAAAAAAADwvw"
				],
				[
					207,
					1,
					"insert",
					{
						"characters": "ds"
					},
					"AgAAAJhJAAAAAAAAmUkAAAAAAAAAAAAAmUkAAAAAAACaSQAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAJhJAAAAAAAAmEkAAAAAAAAAAAAAAADwvw"
				],
				[
					208,
					1,
					"insert_completion",
					{
						"completion": "dstFilename",
						"format": "text",
						"keep_prefix": false,
						"must_insert": false,
						"trigger": "dstFilename"
					},
					"AgAAAJhJAAAAAAAAmEkAAAAAAAACAAAAZHOYSQAAAAAAAKNJAAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAJpJAAAAAAAAmkkAAAAAAAAAAAAAAADwvw"
				],
				[
					209,
					1,
					"insert",
					{
						"characters": ";"
					},
					"AQAAAKNJAAAAAAAApEkAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAKNJAAAAAAAAo0kAAAAAAAAAAAAAAADwvw"
				],
				[
					211,
					1,
					"insert",
					{
						"characters": " <<"
					},
					"AwAAAKNJAAAAAAAApEkAAAAAAAAAAAAApEkAAAAAAAClSQAAAAAAAAAAAAClSQAAAAAAAKZJAAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAKNJAAAAAAAAo0kAAAAAAAAAAAAAAADwvw"
				],
				[
					212,
					1,
					"insert",
					{
						"characters": " |\""
					},
					"AwAAAKZJAAAAAAAAp0kAAAAAAAAAAAAAp0kAAAAAAACoSQAAAAAAAAAAAACoSQAAAAAAAKlJAAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAKZJAAAAAAAApkkAAAAAAAAAAAAAAADwvw"
				],
				[
					213,
					2,
					"left_delete",
					null,
					"AgAAAKhJAAAAAAAAqEkAAAAAAAABAAAAIqdJAAAAAAAAp0kAAAAAAAABAAAAfA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAKlJAAAAAAAAqUkAAAAAAAAAAAAAAADwvw"
				],
				[
					214,
					1,
					"insert",
					{
						"characters": "\""
					},
					"AQAAAKdJAAAAAAAAqEkAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAKdJAAAAAAAAp0kAAAAAAAAAAAAAAADwvw"
				],
				[
					215,
					1,
					"insert",
					{
						"characters": " !\""
					},
					"AwAAAKhJAAAAAAAAqUkAAAAAAAAAAAAAqUkAAAAAAACqSQAAAAAAAAAAAACqSQAAAAAAAKtJAAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAKhJAAAAAAAAqEkAAAAAAAAAAAAAAADwvw"
				],
				[
					217,
					1,
					"insert",
					{
						"characters": "\nre"
					},
					"BAAAAKxJAAAAAAAArUkAAAAAAAAAAAAArUkAAAAAAACvSQAAAAAAAAAAAACvSQAAAAAAALBJAAAAAAAAAAAAALBJAAAAAAAAsUkAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAKxJAAAAAAAArEkAAAAAAAAAAAAAAADwvw"
				],
				[
					218,
					1,
					"insert_completion",
					{
						"completion": "return",
						"format": "text",
						"keep_prefix": false,
						"must_insert": false,
						"trigger": "return"
					},
					"AgAAAK9JAAAAAAAAr0kAAAAAAAACAAAAcmWvSQAAAAAAALVJAAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAALFJAAAAAAAAsUkAAAAAAAAAAAAAAADwvw"
				],
				[
					219,
					1,
					"insert",
					{
						"characters": " f"
					},
					"AgAAALVJAAAAAAAAtkkAAAAAAAAAAAAAtkkAAAAAAAC3SQAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAALVJAAAAAAAAtUkAAAAAAAAAAAAAAADwvw"
				],
				[
					220,
					1,
					"insert_completion",
					{
						"completion": "false",
						"format": "text",
						"keep_prefix": false,
						"must_insert": false,
						"trigger": "false"
					},
					"AgAAALZJAAAAAAAAtkkAAAAAAAABAAAAZrZJAAAAAAAAu0kAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAALdJAAAAAAAAt0kAAAAAAAAAAAAAAADwvw"
				],
				[
					221,
					1,
					"insert",
					{
						"characters": ";"
					},
					"AQAAALtJAAAAAAAAvEkAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAALtJAAAAAAAAu0kAAAAAAAAAAAAAAADwvw"
				],
				[
					223,
					1,
					"insert",
					{
						"characters": "\n\n"
					},
					"BQAAAL9JAAAAAAAAwEkAAAAAAAAAAAAAwEkAAAAAAADBSQAAAAAAAAAAAADBSQAAAAAAAMJJAAAAAAAAAAAAAMJJAAAAAAAAw0kAAAAAAAAAAAAAwEkAAAAAAADASQAAAAAAAAEAAAAJ",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAL9JAAAAAAAAv0kAAAAAAAAAAAAAAKBnQA"
				],
				[
					224,
					1,
					"paste",
					null,
					"AQAAAMJJAAAAAAAAAkoAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAMJJAAAAAAAAwkkAAAAAAAAAAAAAAADwvw"
				],
				[
					228,
					4,
					"left_delete",
					null,
					"BAAAAMJJAAAAAAAAwkkAAAAAAABAAAAATExPR19FUlIgPDwgIlRleHR1cmUgIiA8PCBzcmNGaWxlbmFtZSA8PCAiIGNvbnZlcnNpb24gZmFpbGVkLlxuIsFJAAAAAAAAwUkAAAAAAAABAAAACcBJAAAAAAAAwEkAAAAAAAABAAAACr9JAAAAAAAAv0kAAAAAAAABAAAACg",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAMJJAAAAAAAAAkoAAAAAAAAAAAAAAADwvw"
				],
				[
					1,
					1,
					"revert",
					null,
					"AwAAAAAAAAAAAAAAAAAAAAAAAABrZwAALyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKgogIyBDb3B5cmlnaHQgKGMpIDIwMjAsIE5WSURJQSBDT1JQT1JBVElPTi4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KICMKICMgUmVkaXN0cmlidXRpb24gYW5kIHVzZSBpbiBzb3VyY2UgYW5kIGJpbmFyeSBmb3Jtcywgd2l0aCBvciB3aXRob3V0CiAjIG1vZGlmaWNhdGlvbiwgYXJlIHBlcm1pdHRlZCBwcm92aWRlZCB0aGF0IHRoZSBmb2xsb3dpbmcgY29uZGl0aW9ucwogIyBhcmUgbWV0OgogIyAgKiBSZWRpc3RyaWJ1dGlvbnMgb2Ygc291cmNlIGNvZGUgbXVzdCByZXRhaW4gdGhlIGFib3ZlIGNvcHlyaWdodAogIyAgICBub3RpY2UsIHRoaXMgbGlzdCBvZiBjb25kaXRpb25zIGFuZCB0aGUgZm9sbG93aW5nIGRpc2NsYWltZXIuCiAjICAqIFJlZGlzdHJpYnV0aW9ucyBpbiBiaW5hcnkgZm9ybSBtdXN0IHJlcHJvZHVjZSB0aGUgYWJvdmUgY29weXJpZ2h0CiAjICAgIG5vdGljZSwgdGhpcyBsaXN0IG9mIGNvbmRpdGlvbnMgYW5kIHRoZSBmb2xsb3dpbmcgZGlzY2xhaW1lciBpbiB0aGUKICMgICAgZG9jdW1lbnRhdGlvbiBhbmQvb3Igb3RoZXIgbWF0ZXJpYWxzIHByb3ZpZGVkIHdpdGggdGhlIGRpc3RyaWJ1dGlvbi4KICMgICogTmVpdGhlciB0aGUgbmFtZSBvZiBOVklESUEgQ09SUE9SQVRJT04gbm9yIHRoZSBuYW1lcyBvZiBpdHMKICMgICAgY29udHJpYnV0b3JzIG1heSBiZSB1c2VkIHRvIGVuZG9yc2Ugb3IgcHJvbW90ZSBwcm9kdWN0cyBkZXJpdmVkCiAjICAgIGZyb20gdGhpcyBzb2Z0d2FyZSB3aXRob3V0IHNwZWNpZmljIHByaW9yIHdyaXR0ZW4gcGVybWlzc2lvbi4KICMKICMgVEhJUyBTT0ZUV0FSRSBJUyBQUk9WSURFRCBCWSBUSEUgQ09QWVJJR0hUIEhPTERFUlMgYGBBUyBJUycnIEFORCBBTlkKICMgRVhQUkVTUyBPUiBJTVBMSUVEIFdBUlJBTlRJRVMsIElOQ0xVRElORywgQlVUIE5PVCBMSU1JVEVEIFRPLCBUSEUKICMgSU1QTElFRCBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSBBTkQgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSCiAjIFBVUlBPU0UgQVJFIERJU0NMQUlNRUQuICBJTiBOTyBFVkVOVCBTSEFMTCBUSEUgQ09QWVJJR0hUIE9XTkVSIE9SCiAjIENPTlRSSUJVVE9SUyBCRSBMSUFCTEUgRk9SIEFOWSBESVJFQ1QsIElORElSRUNULCBJTkNJREVOVEFMLCBTUEVDSUFMLAogIyBFWEVNUExBUlksIE9SIENPTlNFUVVFTlRJQUwgREFNQUdFUyAoSU5DTFVESU5HLCBCVVQgTk9UIExJTUlURUQgVE8sCiAjIFBST0NVUkVNRU5UIE9GIFNVQlNUSVRVVEUgR09PRFMgT1IgU0VSVklDRVM7IExPU1MgT0YgVVNFLCBEQVRBLCBPUgogIyBQUk9GSVRTOyBPUiBCVVNJTkVTUyBJTlRFUlJVUFRJT04pIEhPV0VWRVIgQ0FVU0VEIEFORCBPTiBBTlkgVEhFT1JZCiAjIE9GIExJQUJJTElUWSwgV0hFVEhFUiBJTiBDT05UUkFDVCwgU1RSSUNUIExJQUJJTElUWSwgT1IgVE9SVAogIyAoSU5DTFVESU5HIE5FR0xJR0VOQ0UgT1IgT1RIRVJXSVNFKSBBUklTSU5HIElOIEFOWSBXQVkgT1VUIE9GIFRIRSBVU0UKICMgT0YgVEhJUyBTT0ZUV0FSRSwgRVZFTiBJRiBBRFZJU0VEIE9GIFRIRSBQT1NTSUJJTElUWSBPRiBTVUNIIERBTUFHRS4KICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqLwojaW5jbHVkZSA8c3RkbGliLmg+CiNpbmNsdWRlIDxhbGdvcml0aG0+CgojaW5jbHVkZSA8T3BlbkltYWdlSU8vaW1hZ2Vpby5oPgojaW5jbHVkZSA8T3BlbkltYWdlSU8vaW1hZ2VidWYuaD4KI2luY2x1ZGUgPE9wZW5JbWFnZUlPL2ltYWdlYnVmYWxnby5oPgoKI2luY2x1ZGUgPGJvb3N0L2ZpbGVzeXN0ZW0uaHBwPgpuYW1lc3BhY2UgZnMgPSBib29zdDo6ZmlsZXN5c3RlbTsKCiNpbmNsdWRlICJibG9zYy5oIgoKI2luY2x1ZGUgInN0ZGFmeC5oIgojaW5jbHVkZSAiQml0bWFwLmgiCiNpbmNsdWRlICJMVFhfQml0bWFwLmgiCiNpbmNsdWRlICJCaXRtYXBVdGlscy5oIgojaW5jbHVkZSAiTFRYX0JpdG1hcEFsZ28uaCIKI2luY2x1ZGUgIkxUWF9CaXRtYXBVdGlscy5oIgoKI2luY2x1ZGUgIkZhbGNvci9Db3JlL0FQSS9UZXh0dXJlLmgiCiNpbmNsdWRlICJGYWxjb3IvVXRpbHMvRGVidWcvZGVidWcuaCIKCiNpbmNsdWRlICJsYXZhX3V0aWxzX2xpYi9sb2dnaW5nLmgiCgoKbmFtZXNwYWNlIEZhbGNvciB7CgpuYW1lc3BhY2Ugb2lpbyA9IE9JSU87CgpzdGF0aWMgY29uc3Qgc2l6ZV90IGtMdHhIZWFkZXJPZmZzZXQgPSBzaXplb2YoTFRYX0hlYWRlcik7CgpzdGF0aWMgYm9vbCBpc1Bvd2VyT2ZUd28oaW50IHgpIHsKCXJldHVybiB4ID4gMCAmJiAhKHggJiAoeC0xKSk7Cn0KCnN0YXRpYyBzdHJ1Y3QgewoJYm9vbCBvcGVyYXRvcigpKHNpemVfdCBhLCBzaXplX3QgYikgY29uc3QgeyAgIAoJCXJldHVybiBhIDwgYjsKCX0gICAKfSBwYWdlU29ydDsKCkxUWF9IZWFkZXI6OlRvcExldmVsQ29tcHJlc3Npb24gTFRYX0JpdG1hcDo6Z2V0VExDRnJvbVN0cmluZyhjb25zdCBzdGQ6OnN0cmluZyYgbmFtZSkgewoJaWYobmFtZSA9PSAibHo0IikgcmV0dXJuIExUWF9IZWFkZXI6OlRvcExldmVsQ29tcHJlc3Npb246OkxaNDsKCWlmKG5hbWUgPT0gImx6NGhjIikgcmV0dXJuIExUWF9IZWFkZXI6OlRvcExldmVsQ29tcHJlc3Npb246OkxaNEhDOwoJaWYobmFtZSA9PSAic25hcHB5IikgcmV0dXJuIExUWF9IZWFkZXI6OlRvcExldmVsQ29tcHJlc3Npb246OlNOQVBQWTsKCWlmKG5hbWUgPT0gInpsaWIiKSByZXR1cm4gTFRYX0hlYWRlcjo6VG9wTGV2ZWxDb21wcmVzc2lvbjo6WkxJQjsKCWlmKG5hbWUgPT0gInpzdGQiKSByZXR1cm4gTFRYX0hlYWRlcjo6VG9wTGV2ZWxDb21wcmVzc2lvbjo6WlNURDsKCWlmKG5hbWUgPT0gImJsb3NjbHoiKSByZXR1cm4gTFRYX0hlYWRlcjo6VG9wTGV2ZWxDb21wcmVzc2lvbjo6QkxPU0NfTFo7CglyZXR1cm4gTFRYX0hlYWRlcjo6VG9wTGV2ZWxDb21wcmVzc2lvbjo6Tk9ORTsKfSAKCmNvbnN0IGNoYXIqIGdldEJsb3NjQ29tcHJlc3Npb25OYW1lKExUWF9IZWFkZXI6OlRvcExldmVsQ29tcHJlc3Npb24gdGxjKSB7Cglzd2l0Y2godGxjKSB7CgkJY2FzZSBMVFhfSGVhZGVyOjpUb3BMZXZlbENvbXByZXNzaW9uOjpCTE9TQ19MWjoKCQkJcmV0dXJuICJibG9zY2x6IjsKCQljYXNlIExUWF9IZWFkZXI6OlRvcExldmVsQ29tcHJlc3Npb246OkxaNDoKCQkJcmV0dXJuICJsejQiOwoJCWNhc2UgTFRYX0hlYWRlcjo6VG9wTGV2ZWxDb21wcmVzc2lvbjo6TFo0SEM6CgkJCXJldHVybiAibHo0aGMiOwoJCWNhc2UgTFRYX0hlYWRlcjo6VG9wTGV2ZWxDb21wcmVzc2lvbjo6U05BUFBZOgoJCQlyZXR1cm4gInNuYXBweSI7CgkJY2FzZSBMVFhfSGVhZGVyOjpUb3BMZXZlbENvbXByZXNzaW9uOjpaTElCOgoJCQlyZXR1cm4gInpsaWIiOwoJCWNhc2UgTFRYX0hlYWRlcjo6VG9wTGV2ZWxDb21wcmVzc2lvbjo6WlNURDoKCQkJcmV0dXJuICJ6c3RkIjsKCQlkZWZhdWx0OgoJCQlyZXR1cm4gIm5vbmUiOwoJfQp9IAoKc3RhdGljIGJvb2wgY2hlY2tNYWdpYyhjb25zdCB1bnNpZ25lZCBjaGFyKiBtYWdpYywgYm9vbCBzdHJpY3QpIHsKCWludCBtYXRjaCA9IDA7CgltYXRjaCArPSBtZW1jbXAoJmdMdHhGaWxlTWFnaWNbMF0sICZtYWdpY1swXSwgNCk7CgltYXRjaCArPSBtZW1jbXAoJmdMdHhGaWxlTWFnaWNbN10sICZtYWdpY1s3XSwgNSk7CglpZihtYXRjaCAhPSAwKSByZXR1cm4gZmFsc2U7CgoJaWYgKHN0cmljdCkgewoJCWlmKCBtYWdpY1s0XSAhPSA0OCArIHN0YXRpY19jYXN0PHVuc2lnbmVkIGNoYXI+KGtMdHhWZXJzaW9uTWFqb3IpKSB7CgkJCUxMT0dfRVJSIDw8ICJMVFggbWFqb3IgdmVyc2lvbiBtaXNtYXRjaC4iOwoJCQlyZXR1cm4gZmFsc2U7CgkJfQoJCWlmKCBtYWdpY1s1XSAhPSA0OCArIHN0YXRpY19jYXN0PHVuc2lnbmVkIGNoYXI+KGtMdHhWZXJzaW9uTWlub3IpKSB7CgkJCUxMT0dfRVJSIDw8ICJMVFggbWlub3IgdmVyc2lvbiBtaXNtYXRjaC4iOwoJCQlyZXR1cm4gZmFsc2U7CgkJfQoJCWlmKCBtYWdpY1s2XSAhPSA0OCArIHN0YXRpY19jYXN0PHVuc2lnbmVkIGNoYXI+KGtMdHhWZXJzaW9uQnVpbGQpKSB7CgkJCUxMT0dfRVJSIDw8ICJMVFggYnVpbGQgdmVyc2lvbiBtaXNtYXRjaC4iOwoJCQlyZXR1cm4gZmFsc2U7CgkJfQoJfQoKCWlmKAk0OCA8PSBtYWdpY1s0XSAmJiBtYWdpY1s0XSA8PSA1NyAmJiAKCQk0OCA8PSBtYWdpY1s1XSAmJiBtYWdpY1s1XSA8PSA1NyAmJiAKCQk0OCA8PSBtYWdpY1s2XSAmJiBtYWdpY1s2XSA8PSA1NyApIHJldHVybiB0cnVlOwoKCXJldHVybiBmYWxzZTsKfQoKc3RkOjpzdHJpbmcgTFRYX0hlYWRlcjo6dmVyc2lvblN0cmluZygpIGNvbnN0IHsKCXN0ZDo6b3N0cmluZ3N0cmVhbSBzdHJpbmdTdHJlYW07CiAgCXN0cmluZ1N0cmVhbSA8PCBtYWdpY1s0XSA8PCAiLiIgPDwgbWFnaWNbNV0gPDwgIi4iIDw8IG1hZ2ljWzZdOwogIAlyZXR1cm4gc3RyaW5nU3RyZWFtLnN0cigpOwp9Cgpib29sIExUWF9CaXRtYXA6OmNoZWNrRmlsZU1hZ2ljKGNvbnN0IGZzOjpwYXRoJiBwYXRoLCBib29sIHN0cmljdCkgewoJcmV0dXJuIGNoZWNrRmlsZU1hZ2ljKHBhdGguc3RyaW5nKCksIHN0cmljdCk7Cn0KCmJvb2wgTFRYX0JpdG1hcDo6Y2hlY2tGaWxlTWFnaWMoY29uc3Qgc3RkOjpzdHJpbmcmIGZpbGVuYW1lLCBib29sIHN0cmljdCkgewoJc3RkOjppZnN0cmVhbSBmaWxlKGZpbGVuYW1lLCBzdGQ6Omlvczo6aW4gfCBzdGQ6Omlvczo6YmluYXJ5KTsKCQoJdW5zaWduZWQgY2hhciBtYWdpY1sxMl07CglmaWxlLnJlYWQoKGNoYXIgKikmbWFnaWMsIDEyKTsKCWZpbGUuc2Vla2coMCwgZmlsZS5iZWcpOwoJaWYoIWZpbGUpIHsKCQlMTE9HX0VSUiA8PCAiRXJyb3IgcmVhZGluZyBMVFggaGVhZGVyIG1hZ2ljIGZyb20gZmlsZSAiIDw8IGZpbGVuYW1lOwoJCWZpbGUuY2xvc2UoKTsKCQlyZXR1cm4gZmFsc2U7Cgl9CgoJZmlsZS5jbG9zZSgpOwoJcmV0dXJuIGNoZWNrTWFnaWMobWFnaWMsIHN0cmljdCk7Cn0KCnN0YXRpYyB2b2lkIG1ha2VNYWdpYyh1bnNpZ25lZCBjaGFyICptYWdpYykgewoJc3RhdGljX2Fzc2VydCgoMCA8PSBrTHR4VmVyc2lvbk1ham9yKSAmJiAoa0x0eFZlcnNpb25NYWpvciA8PSA5KSk7CglzdGF0aWNfYXNzZXJ0KCgwIDw9IGtMdHhWZXJzaW9uTWlub3IpICYmIChrTHR4VmVyc2lvbk1pbm9yIDw9IDkpKTsKCXN0YXRpY19hc3NlcnQoKDAgPD0ga0x0eFZlcnNpb25CdWlsZCkgJiYgKGtMdHhWZXJzaW9uQnVpbGQgPD0gOSkpOwoKCW1lbWNweShtYWdpYywgZ0x0eEZpbGVNYWdpYywgMTIpOwoJbWFnaWNbNF0gPSA0OCArIHN0YXRpY19jYXN0PHVuc2lnbmVkIGNoYXI+KGtMdHhWZXJzaW9uTWFqb3IpOwoJbWFnaWNbNV0gPSA0OCArIHN0YXRpY19jYXN0PHVuc2lnbmVkIGNoYXI+KGtMdHhWZXJzaW9uTWlub3IpOwoJbWFnaWNbNl0gPSA0OCArIHN0YXRpY19jYXN0PHVuc2lnbmVkIGNoYXI+KGtMdHhWZXJzaW9uQnVpbGQpOwp9CgpzdGF0aWMgaW5saW5lIGludCBfcmVhZFVuY29tcHJlc3NlZFBhZ2VEYXRhKEZJTEUgKiBwRmlsZSwgc2l6ZV90IGRhdGFPZmZzZXQsIHNpemVfdCByZWFkRGF0YVNpemUsIHZvaWQgKnBEYXRhKSB7Cglmc2VlayhwRmlsZSwgZGF0YU9mZnNldCwgU0VFS19TRVQpOwoJcmV0dXJuIGZyZWFkKHBEYXRhLCAxLCByZWFkRGF0YVNpemUsIHBGaWxlKTsKfSAKCnN0YXRpYyBpbmxpbmUgaW50IF9yZWFkQ29tcHJlc3NlZFBhZ2VEYXRhKEZJTEUgKiBwRmlsZSwgc2l6ZV90IGRhdGFPZmZzZXQsIHNpemVfdCByZWFkRGF0YVNpemUsIHZvaWQgKnBEYXRhLCB1aW50OF90ICpwU2NyYXRjaEJ1ZmZlcikgewoJYXNzZXJ0KHBTY3JhdGNoQnVmZmVyKTsKCWZzZWVrKHBGaWxlLCBkYXRhT2Zmc2V0LCBTRUVLX1NFVCk7CglmcmVhZChwU2NyYXRjaEJ1ZmZlciwgMSwgcmVhZERhdGFTaXplLCBwRmlsZSk7CglyZXR1cm4gYmxvc2NfZGVjb21wcmVzc19jdHgocFNjcmF0Y2hCdWZmZXIsIHBEYXRhLCBrTHR4UGFnZVNpemUsIDEpOwp9CgpMVFhfQml0bWFwOjpTaGFyZWRDb25zdFB0ciBMVFhfQml0bWFwOjpjcmVhdGVGcm9tRmlsZShzdGQ6OnNoYXJlZF9wdHI8RGV2aWNlPiBwRGV2aWNlLCBjb25zdCBzdGQ6OnN0cmluZyYgZmlsZW5hbWUsIGJvb2wgaXNUb3BEb3duKSB7CglyZXR1cm4gY3JlYXRlRnJvbUZpbGUocERldmljZSwgZnM6OnBhdGgoZmlsZW5hbWUpLCBpc1RvcERvd24pOwp9CgpMVFhfQml0bWFwOjpTaGFyZWRDb25zdFB0ciBMVFhfQml0bWFwOjpjcmVhdGVGcm9tRmlsZShzdGQ6OnNoYXJlZF9wdHI8RGV2aWNlPiBwRGV2aWNlLCBjb25zdCBmczo6cGF0aCYgcGF0aCwgYm9vbCBpc1RvcERvd24pIHsKCWlmKCFjaGVja0ZpbGVNYWdpYyhwYXRoLCB0cnVlKSkgewoJCUxMT0dfRVJSIDw8ICJXcm9uZyBMVFggdGV4dHVyZSBmaWxlIG1hZ2ljISI7CgkJcmV0dXJuIG51bGxwdHI7Cgl9CgoJYXV0byBwTHR4Qml0bWFwID0gbmV3IExUWF9CaXRtYXAoKTsKCXBMdHhCaXRtYXAtPm1GaWxlUGF0aCA9IHBhdGg7CgkKCWF1dG8gcEZpbGUgPSBmb3BlbihwYXRoLnN0cmluZygpLmNfc3RyKCksICJyYiIpOwoJZnJlYWQoJnBMdHhCaXRtYXAtPm1IZWFkZXIsIHNpemVvZihMVFhfSGVhZGVyKSwgMSwgcEZpbGUgKTsKCglwTHR4Qml0bWFwLT5tVG9wTGV2ZWxDb21wcmVzc2lvbiA9IHBMdHhCaXRtYXAtPm1IZWFkZXIudG9wTGV2ZWxDb21wcmVzc2lvbjsKCglpZiggcEx0eEJpdG1hcC0+bVRvcExldmVsQ29tcHJlc3Npb24gIT0gTFRYX0hlYWRlcjo6VG9wTGV2ZWxDb21wcmVzc2lvbjo6Tk9ORSApIHsKCQlwTHR4Qml0bWFwLT5tQ29tcHJlc3NlZFBhZ2VEYXRhT2Zmc2V0LnJlc2l6ZShwTHR4Qml0bWFwLT5tSGVhZGVyLnBhZ2VzQ291bnQpOwoJCXBMdHhCaXRtYXAtPm1Db21wcmVzc2VkUGFnZURhdGFTaXplLnJlc2l6ZShwTHR4Qml0bWFwLT5tSGVhZGVyLnBhZ2VzQ291bnQpOwoKCQlmcmVhZChwTHR4Qml0bWFwLT5tQ29tcHJlc3NlZFBhZ2VEYXRhT2Zmc2V0LmRhdGEoKSwgc2l6ZW9mKHVpbnQzMl90KSwgcEx0eEJpdG1hcC0+bUhlYWRlci5wYWdlc0NvdW50LCBwRmlsZSApOwoJCWZyZWFkKHBMdHhCaXRtYXAtPm1Db21wcmVzc2VkUGFnZURhdGFTaXplLmRhdGEoKSwgc2l6ZW9mKHVpbnQxNl90KSwgcEx0eEJpdG1hcC0+bUhlYWRlci5wYWdlc0NvdW50LCBwRmlsZSApOwoJfQoKCWZzZWVrKHBGaWxlLCAwTCwgU0VFS19FTkQpOwoJc2l6ZV90IG1EYXRhU2l6ZSA9IGZ0ZWxsKHBGaWxlKSAtIHNpemVvZihMVFhfSGVhZGVyKTsKCWZjbG9zZShwRmlsZSk7CgoJcmV0dXJuIFNoYXJlZENvbnN0UHRyKHBMdHhCaXRtYXApOwp9CgpMVFhfQml0bWFwOjpMVFhfQml0bWFwKCkgewoKfQoKTFRYX0JpdG1hcDo6fkxUWF9CaXRtYXAoKSB7Cgp9CgpzdGF0aWMgUmVzb3VyY2VGb3JtYXQgZ2V0Rm9ybWF0T0lJTyh1bnNpZ25lZCBjaGFyIGJhc2VUeXBlLCBpbnQgbmNoYW5uZWxzKSB7Cgl1c2luZyBCQVNFVFlQRSA9IG9paW86OlR5cGVEZXNjOjpCQVNFVFlQRTsKCXN3aXRjaCAobmNoYW5uZWxzKSB7CgkJY2FzZSAxOgoJCQlzd2l0Y2ggKEJBU0VUWVBFKGJhc2VUeXBlKSkgewoJCQkJLy9jYXNlIEJBU0VUWVBFOjpVQ0hBUjoKCQkJCWNhc2UgQkFTRVRZUEU6OlVJTlQ4OgoJCQkJCXJldHVybiBSZXNvdXJjZUZvcm1hdDo6UjhVbm9ybTsKCQkJCWNhc2UgQkFTRVRZUEU6OklOVDg6CgkJCQkJcmV0dXJuIFJlc291cmNlRm9ybWF0OjpSOFNub3JtOwoJCQkJY2FzZSBCQVNFVFlQRTo6VUlOVDE2OgoJCQkJCXJldHVybiBSZXNvdXJjZUZvcm1hdDo6UjE2VW5vcm07CgkJCQljYXNlIEJBU0VUWVBFOjpJTlQxNjoKCQkJCQlyZXR1cm4gUmVzb3VyY2VGb3JtYXQ6OlIxNlNub3JtOwoJCQkJY2FzZSBCQVNFVFlQRTo6VUlOVDMyOgoJCQkJCXJldHVybiBSZXNvdXJjZUZvcm1hdDo6UjMyVWludDsKCQkJCWNhc2UgQkFTRVRZUEU6OklOVDMyOgoJCQkJCXJldHVybiBSZXNvdXJjZUZvcm1hdDo6UjMySW50OwoJCQkJY2FzZSBCQVNFVFlQRTo6SEFMRjoKCQkJCQlyZXR1cm4gUmVzb3VyY2VGb3JtYXQ6OlIxNkZsb2F0OwoJCQkJY2FzZSBCQVNFVFlQRTo6RkxPQVQ6CgkJCQkJcmV0dXJuIFJlc291cmNlRm9ybWF0OjpSMzJGbG9hdDsKCQkJCWRlZmF1bHQ6CgkJCQkJc2hvdWxkX25vdF9nZXRfaGVyZSgpOwoJCQkJCWJyZWFrOwoJCQl9CgkJCWJyZWFrOwoJCWNhc2UgMjoKCQkJc3dpdGNoIChCQVNFVFlQRShiYXNlVHlwZSkpIHsKCQkJCWNhc2UgQkFTRVRZUEU6OlVJTlQ4OgoJCQkJCXJldHVybiBSZXNvdXJjZUZvcm1hdDo6Ukc4VW5vcm07CgkJCQljYXNlIEJBU0VUWVBFOjpJTlQ4OgoJCQkJCXJldHVybiBSZXNvdXJjZUZvcm1hdDo6Ukc4U25vcm07CgkJCQljYXNlIEJBU0VUWVBFOjpVSU5UMTY6CgkJCQkJcmV0dXJuIFJlc291cmNlRm9ybWF0OjpSRzE2VWludDsKCQkJCWNhc2UgQkFTRVRZUEU6OklOVDE2OgoJCQkJCXJldHVybiBSZXNvdXJjZUZvcm1hdDo6UkcxNlNub3JtOwoJCQkJY2FzZSBCQVNFVFlQRTo6VUlOVDMyOgoJCQkJCXJldHVybiBSZXNvdXJjZUZvcm1hdDo6UkczMlVpbnQ7CgkJCQljYXNlIEJBU0VUWVBFOjpJTlQzMjoKCQkJCQlyZXR1cm4gUmVzb3VyY2VGb3JtYXQ6OlJHMzJJbnQ7CgkJCQljYXNlIEJBU0VUWVBFOjpIQUxGOgoJCQkJCXJldHVybiBSZXNvdXJjZUZvcm1hdDo6UkcxNkZsb2F0OwoJCQkJY2FzZSBCQVNFVFlQRTo6RkxPQVQ6CgkJCQkJcmV0dXJuIFJlc291cmNlRm9ybWF0OjpSRzMyRmxvYXQ7CgkJCQlkZWZhdWx0OgoJCQkJCXNob3VsZF9ub3RfZ2V0X2hlcmUoKTsKCQkJCQlicmVhazsKCQkJfQoJCQlicmVhazsKCQljYXNlIDM6CgkJCXN3aXRjaCAoQkFTRVRZUEUoYmFzZVR5cGUpKSB7CgkJCQljYXNlIEJBU0VUWVBFOjpVSU5UODoKCQkJCQlyZXR1cm4gUmVzb3VyY2VGb3JtYXQ6OlJHQjhVbm9ybTsKCQkJCWNhc2UgQkFTRVRZUEU6OklOVDg6CgkJCQkJcmV0dXJuIFJlc291cmNlRm9ybWF0OjpSR0I4U25vcm07CgkJCQljYXNlIEJBU0VUWVBFOjpVSU5UMTY6CgkJCQkJcmV0dXJuIFJlc291cmNlRm9ybWF0OjpSR0IxNlVub3JtOwoJCQkJY2FzZSBCQVNFVFlQRTo6SU5UMTY6CgkJCQkJcmV0dXJuIFJlc291cmNlRm9ybWF0OjpSR0IxNlNub3JtOwoJCQkJY2FzZSBCQVNFVFlQRTo6VUlOVDMyOgoJCQkJCXJldHVybiBSZXNvdXJjZUZvcm1hdDo6UkdCMzJVaW50OwoJCQkJY2FzZSBCQVNFVFlQRTo6SU5UMzI6CgkJCQkJcmV0dXJuIFJlc291cmNlRm9ybWF0OjpSR0IzMkludDsKCQkJCWNhc2UgQkFTRVRZUEU6OkhBTEY6CgkJCQkJcmV0dXJuIFJlc291cmNlRm9ybWF0OjpSR0IxNkZsb2F0OwoJCQkJY2FzZSBCQVNFVFlQRTo6RkxPQVQ6CgkJCQkJcmV0dXJuIFJlc291cmNlRm9ybWF0OjpSR0IzMkZsb2F0OwoJCQkJZGVmYXVsdDoKCQkJCQlzaG91bGRfbm90X2dldF9oZXJlKCk7CgkJCQkJYnJlYWs7CgkJCX0KCQkJYnJlYWs7CgoJCWNhc2UgNDoKCQkJc3dpdGNoIChCQVNFVFlQRShiYXNlVHlwZSkpIHsKCQkJCWNhc2UgQkFTRVRZUEU6OlVJTlQ4OgoJCQkJCXJldHVybiBSZXNvdXJjZUZvcm1hdDo6UkdCQThVbm9ybTsKCQkJCWNhc2UgQkFTRVRZUEU6OklOVDg6CgkJCQkJcmV0dXJuIFJlc291cmNlRm9ybWF0OjpSR0JBOFNub3JtOwoJCQkJY2FzZSBCQVNFVFlQRTo6VUlOVDE2OgoJCQkJCXJldHVybiBSZXNvdXJjZUZvcm1hdDo6UkdCQTE2VWludDsKCQkJCWNhc2UgQkFTRVRZUEU6OklOVDE2OgoJCQkJCXJldHVybiBSZXNvdXJjZUZvcm1hdDo6UkdCQTE2U25vcm07CgkJCQljYXNlIEJBU0VUWVBFOjpVSU5UMzI6CgkJCQkJcmV0dXJuIFJlc291cmNlRm9ybWF0OjpSR0JBMzJVaW50OwoJCQkJY2FzZSBCQVNFVFlQRTo6SU5UMzI6CgkJCQkJcmV0dXJuIFJlc291cmNlRm9ybWF0OjpSR0JBMzJJbnQ7CgkJCQljYXNlIEJBU0VUWVBFOjpIQUxGOgoJCQkJCXJldHVybiBSZXNvdXJjZUZvcm1hdDo6UkdCQTE2RmxvYXQ7CgkJCQljYXNlIEJBU0VUWVBFOjpGTE9BVDoKCQkJCQlyZXR1cm4gUmVzb3VyY2VGb3JtYXQ6OlJHQkEzMkZsb2F0OwoJCQkJZGVmYXVsdDoKCQkJCQlzaG91bGRfbm90X2dldF9oZXJlKCk7CgkJCQkJYnJlYWs7CgkJCX0KCQkJYnJlYWs7CgkJZGVmYXVsdDoKCQkJc2hvdWxkX25vdF9nZXRfaGVyZSgpOwoJCQlicmVhazsKCX0KCXJldHVybiBSZXNvdXJjZUZvcm1hdDo6UkdCQThVbm9ybTsKfQoKc3RhdGljIFJlc291cmNlRm9ybWF0IGdldERlc3RGb3JtYXQoY29uc3QgUmVzb3VyY2VGb3JtYXQgJmZvcm1hdCkgewoJc3dpdGNoIChmb3JtYXQpIHsKCQljYXNlIFJlc291cmNlRm9ybWF0OjpSR0I4VW5vcm06CgkJCXJldHVybiBSZXNvdXJjZUZvcm1hdDo6UkdCQThVbm9ybTsgIC8vIHRoaXMgc2hvdWxkIGZvcmNlIDI0Yml0IHRvIDMyYml0IGNvbnZlcnNpb24KCQljYXNlIFJlc291cmNlRm9ybWF0OjpSR0I4U25vcm06CgkJCXJldHVybiBSZXNvdXJjZUZvcm1hdDo6UkdCQThTbm9ybTsgIC8vIHRoaXMgc2hvdWxkIGZvcmNlIDI0Yml0IHRvIDMyYml0IGNvbnZlcnNpb24KCQljYXNlIFJlc291cmNlRm9ybWF0OjpSR0IxNlVpbnQ6CgkJCXJldHVybiBSZXNvdXJjZUZvcm1hdDo6UkdCQTE2VWludDsgIC8vIHRoaXMgc2hvdWxkIGZvcmNlIDQ4Yml0IHRvIDY0Yml0IGNvbnZlcnNpb24KCQljYXNlIFJlc291cmNlRm9ybWF0OjpSR0IxNkludDoKCQkJcmV0dXJuIFJlc291cmNlRm9ybWF0OjpSR0JBMTZJbnQ7ICAvLyB0aGlzIHNob3VsZCBmb3JjZSA0OGJpdCB0byA2NGJpdCBjb252ZXJzaW9uCgkJY2FzZSBSZXNvdXJjZUZvcm1hdDo6UkdCMzJVaW50OgoJCQlyZXR1cm4gUmVzb3VyY2VGb3JtYXQ6OlJHQkEzMlVpbnQ7ICAvLyB0aGlzIHNob3VsZCBmb3JjZSA5NmJpdCB0byAxMjhiaXQgY29udmVyc2lvbgoJCWNhc2UgUmVzb3VyY2VGb3JtYXQ6OlJHQjMySW50OgoJCQlyZXR1cm4gUmVzb3VyY2VGb3JtYXQ6OlJHQkEzMkludDsgIC8vIHRoaXMgc2hvdWxkIGZvcmNlIDk2Yml0IHRvIDEyOGJpdCBjb252ZXJzaW9uCgkJY2FzZSBSZXNvdXJjZUZvcm1hdDo6UkdCMTZVbm9ybToKCQkJcmV0dXJuIFJlc291cmNlRm9ybWF0OjpSR0JBMTZVbm9ybTsgLy8gdGhpcyBzaG91bGQgZm9yY2UgNDhiaXQgdG8gNjRiaXQgY29udmVyc2lvbgoJCWNhc2UgUmVzb3VyY2VGb3JtYXQ6OlJHQjE2U25vcm06CgkJCXJldHVybiBSZXNvdXJjZUZvcm1hdDo6UkdCQTE2U25vcm07IC8vIHRoaXMgc2hvdWxkIGZvcmNlIDQ4Yml0IHRvIDY0Yml0IGNvbnZlcnNpb24KCQljYXNlIFJlc291cmNlRm9ybWF0OjpSR0IxNkZsb2F0OgoJCQlyZXR1cm4gUmVzb3VyY2VGb3JtYXQ6OlJHQkExNkZsb2F0OyAvLyB0aGlzIHNob3VsZCBmb3JjZSA0OGJpdCB0byA2NGJpdCBmbG9hdCBjb252ZXJzaW9uCgkJY2FzZSBSZXNvdXJjZUZvcm1hdDo6UkdCMzJGbG9hdDoKCQkJcmV0dXJuIFJlc291cmNlRm9ybWF0OjpSR0JBMzJGbG9hdDsgLy8gdGhpcyBzaG91bGQgZm9yY2UgOTZiaXQgdG8gMTI4Yml0IGZsb2F0IGNvbnZlcnNpb24KCQlkZWZhdWx0OgoJCQlicmVhazsKCX0KCglyZXR1cm4gZm9ybWF0Owp9CgpzdGF0aWMgdWludDMgZ2V0UGFnZURpbXMoY29uc3QgUmVzb3VyY2VGb3JtYXQgJmZvcm1hdCkgewoJdWludDMyX3QgY2hhbm5lbENvdW50ID0gZ2V0Rm9ybWF0Q2hhbm5lbENvdW50KGZvcm1hdCk7Cgl1aW50MzJfdCB0b3RhbEJpdHMgPSAwdTsKCglmb3IodWludCBpID0gMDsgaSA8IGNoYW5uZWxDb3VudDsgaSsrKSB0b3RhbEJpdHMgKz0gZ2V0TnVtQ2hhbm5lbEJpdHMoZm9ybWF0LCBpKTsKCglzd2l0Y2godG90YWxCaXRzKSB7CgkJY2FzZSA4OgoJCQlyZXR1cm4gezI1NnUsIDI1NnUsIDF1fTsKCQljYXNlIDE2OgoJCQlyZXR1cm4gezI1NnUsIDEyOHUsIDF1fTsKCQljYXNlIDMyOgoJCQlyZXR1cm4gezEyOHUsIDEyOHUsIDF1fTsKCQljYXNlIDY0OgoJCQlyZXR1cm4gezEyOHUsIDY0dSwgMXV9OwoJCWNhc2UgMTI4OgoJCQlyZXR1cm4gezY0dSwgNjR1LCAxdX07CgkJZGVmYXVsdDoKCQkJc2hvdWxkX25vdF9nZXRfaGVyZSgpOwoJCQlicmVhazsKCX0gCgoJcmV0dXJuIHswdSwgMHUsIDB1fTsKfQoKc3RhdGljIExUWF9NaXBJbmZvIGNhbGNNaXBJbmZvKGNvbnN0IHVpbnQzJiBpbWdEaW1zLCBjb25zdCBSZXNvdXJjZUZvcm1hdCAmZm9ybWF0KSB7CglMVFhfTWlwSW5mbyBpbmZvOwoKCXVpbnQzMl90IGJ5dGVzUGVyUGl4ZWwgPSBnZXRGb3JtYXRCeXRlc1BlckJsb2NrKGZvcm1hdCk7CgoJaW5mby5taXBMZXZlbHNDb3VudCA9IFRleHR1cmU6OmdldE1heE1pcENvdW50KGltZ0RpbXMpOwoJaW5mby5taXBUYWlsU3RhcnQgPSBpbmZvLm1pcExldmVsc0NvdW50IC0gMTsgLy8gRGVmYXVsdCBpcyBsYXN0IG1pcCBsZXZlbAoJaW5mby5wYWdlRGltcyA9IGdldFBhZ2VEaW1zKGZvcm1hdCk7CglpbmZvLm1pcExldmVsc0RpbXMgPSBzdGQ6OnZlY3Rvcjx1aW50Mz4oaW5mby5taXBMZXZlbHNDb3VudCk7CgoJLy8gUHJlIGNhbGN1bGF0ZSBpbWFnZSBkaW1lbnNpb25zIGZvciBlYWNoIG1pcCBsZXZlbCAobWlwTGV2ZWxEaW1zKQoJZm9yKCB1aW50IG1pcExldmVsID0gMDsgbWlwTGV2ZWwgPCBpbmZvLm1pcExldmVsc0NvdW50OyBtaXBMZXZlbCsrKSB7CgkJaW5mby5taXBMZXZlbHNEaW1zW21pcExldmVsXS54ID0gc3RkOjptYXgodWludDMyX3QoaW1nRGltcy54IC8gcG93KDIsIG1pcExldmVsKSksIDF1KTsKCQlpbmZvLm1pcExldmVsc0RpbXNbbWlwTGV2ZWxdLnkgPSBzdGQ6Om1heCh1aW50MzJfdChpbWdEaW1zLnkgLyBwb3coMiwgbWlwTGV2ZWwpKSwgMXUpOwoJCWluZm8ubWlwTGV2ZWxzRGltc1ttaXBMZXZlbF0ueiA9IDF1Oy8vc3RkOjptYXgoaW1nRGltcy56IC8gcG93KDIsIG1pcExldmVsKSwgMSk7Cgl9CgoJLy8gRmluZCBtaXAgdGFpbCBzdGFydGluZyBtaXAgbGV2ZWwuIFRoaXMgYW5kIGFsbCBzbWFsbGVyIGxheWVycyAoaGlnaGVyIGluZGljZXMpIGNvbWJpbmVkIG1lbW9yeSBmb290cHJpbnQgc2hvdWxkIGJlIGVxdWFsIG9yIGxlc3MgdGhhbiBrTHR4UGFnZVNpemUgCgl1aW50OF90IG1pcFRhaWxTdGFydCA9IGluZm8ubWlwTGV2ZWxzQ291bnQgLSAxOwoJZm9yKCB1aW50OF90IGN1cnJlbnRNaXBMZXZlbCA9IDA7IGN1cnJlbnRNaXBMZXZlbCA8IGluZm8ubWlwTGV2ZWxzQ291bnQ7ICsrY3VycmVudE1pcExldmVsKSB7CgkJLy8gRmluZCBjdW11bGF0aXZlIG1pcCBsZXZlbHMgZm9vdHByaW50CgkJdWludDMyX3QgY3VycmVudE1lbUN1bXVsYXRpdmVGb290cHJpbnQgPSAwOwoJCWZvcih1aW50OF90IGkgPSBjdXJyZW50TWlwTGV2ZWw7IGkgPCBpbmZvLm1pcExldmVsc0NvdW50OyArK2kpIHsKCQkJYXV0byBjb25zdCYgbWlwRGltcyA9IGluZm8ubWlwTGV2ZWxzRGltc1tpXTsKCQkJY3VycmVudE1lbUN1bXVsYXRpdmVGb290cHJpbnQgKz0gbWlwRGltcy54ICogbWlwRGltcy55ICogYnl0ZXNQZXJQaXhlbDsKCQl9CgoJCWlmIChjdXJyZW50TWVtQ3VtdWxhdGl2ZUZvb3RwcmludCA8PSBrTHR4UGFnZVNpemUpIHsKCQkJLy8gTWlwIHRhaWwgc3RhcnQgbGV2ZWwgZm91bmQKCQkJaW5mby5taXBUYWlsU3RhcnQgPSBjdXJyZW50TWlwTGV2ZWw7CgkJCXJldHVybiBpbmZvOwoJCX0KCX0KCglyZXR1cm4gaW5mbzsKfQoKc3RhdGljIHZvaWQgZml4QmxhY2tBbHBoYShvaWlvOjpJbWFnZUJ1ZiYgYnVmZiwgb2lpbzo6Uk9JIHJvaSA9IHt9KSB7CiAgICByb2kuY2hlbmQgPSBzdGQ6Om1pbihyb2kuY2hlbmQsIGJ1ZmYubmNoYW5uZWxzKCkpOwogICAgaWYgKGJ1ZmYuc3BlYygpLmZvcm1hdCA9PSBvaWlvOjpUeXBlRGVzYzo6VUlOVDgpCiAgICAgICAgZm9yIChvaWlvOjpJbWFnZUJ1Zjo6SXRlcmF0b3I8dWludDhfdD4gaXQgKGJ1ZmYsIHJvaSk7ICAhIGl0LmRvbmUoKTsgICsraXQpIHsKICAgICAgICAJaWYgKCEgaXQuZXhpc3RzKCkpIGNvbnRpbnVlOwogICAgICAgIAlmb3IgKGludCBjID0gcm9pLmNoYmVnaW47ICBjIDwgcm9pLmNoZW5kOyAgKytjKSBpdFtjXSA9IDI1NTsKICAgIAl9CiAgICBlbHNlIGlmIChidWZmLnNwZWMoKS5mb3JtYXQgPT0gb2lpbzo6VHlwZURlc2M6OkZMT0FUIHx8IGJ1ZmYuc3BlYygpLmZvcm1hdCA9PSBvaWlvOjpUeXBlRGVzYzo6SEFMRil7CiAgICAJZm9yIChvaWlvOjpJbWFnZUJ1Zjo6SXRlcmF0b3I8ZmxvYXQ+IGl0IChidWZmLCByb2kpOyAgISBpdC5kb25lKCk7ICArK2l0KSB7CiAgICAgICAgCWlmICghIGl0LmV4aXN0cygpKSBjb250aW51ZTsKICAgICAgICAJZm9yIChpbnQgYyA9IHJvaS5jaGJlZ2luOyAgYyA8IHJvaS5jaGVuZDsgICsrYykgaXRbY10gPSAxLjBmOwogICAgCX0KICAgIH0KfQoKCmJvb2wgTFRYX0JpdG1hcDo6Y29udmVydFRvTHR4RmlsZShzdGQ6OnNoYXJlZF9wdHI8RGV2aWNlPiBwRGV2aWNlLCBjb25zdCBzdGQ6OnN0cmluZyYgc3JjRmlsZW5hbWUsIGNvbnN0IHN0ZDo6c3RyaW5nJiBkc3RGaWxlbmFtZSwgY29uc3QgVExDUGFybXMmIGNvbXBQYXJtcywgYm9vbCBpc1RvcERvd24pIHsKCW9paW86OkltYWdlU3BlYyBjb25maWc7CgoJY29uZmlnLmF0dHJpYnV0ZSgib2lpbzpVbmFzc29jaWF0ZWRBbHBoYSIsIDEpOwoJLy9jb25maWdbIm9paW86VW5hc3NvY2lhdGVkQWxwaGEiXSA9IDE7CgkKCWF1dG8gaW4gPSBvaWlvOjpJbWFnZUlucHV0OjpvcGVuKHNyY0ZpbGVuYW1lLCAmY29uZmlnKTsKCWlmICghaW4pIHsKCQlMTE9HX0VSUiA8PCAiRXJyb3IgcmVhZGluZyBpbWFnZSBmaWxlOiAiIDw8IHNyY0ZpbGVuYW1lOwoJCXJldHVybiBmYWxzZTsKCX0KCgljb25zdCBvaWlvOjpJbWFnZVNwZWMgJnNwZWMgPSBpbi0+c3BlYygpOwoKCUxMT0dfSU5GIDw8ICJDb252ZXJ0aW5nIHRleHR1cmUgXCIiIDw8IHNyY0ZpbGVuYW1lIDw8ICJcIiB0byBMVFggZm9ybWF0IHVzaW5nICIgPDwgdG9fc3RyaW5nKGdldFRMQ0Zyb21TdHJpbmcoY29tcFBhcm1zLmNvbXByZXNzb3JOYW1lKSkgPDwgIiBjb21wcmVzc29yLiI7CgoJTExPR19EQkcgPDwgIk9JSU8gY2hhbm5lbCBmb3JtYXRzIHNpemU6ICIgPDwgc3RkOjp0b19zdHJpbmcoc3BlYy5jaGFubmVsZm9ybWF0cy5zaXplKCkpOwoJTExPR19EQkcgPDwgIk9JSU8gaXMgc2lnbmVkOiAiIDw8IChzcGVjLmZvcm1hdC5pc19zaWduZWQoKSA/ICJZRVMiIDogIk5PIik7CglMTE9HX0RCRyA8PCAiT0lJTyBpcyBmbG9hdDogIiA8PCAoc3BlYy5mb3JtYXQuaXNfZmxvYXRpbmdfcG9pbnQoKSA/ICJZRVMiIDogIk5PIik7CglMTE9HX0RCRyA8PCAiT0lJTyBiYXNldHlwZTogIiA8PCBzdGQ6OnRvX3N0cmluZyhvaWlvOjpUeXBlRGVzYzo6QkFTRVRZUEUoc3BlYy5mb3JtYXQuYmFzZXR5cGUpKTsKCUxMT0dfREJHIDw8ICJPSUlPIGJ5dGVzIHBlciBwaXhlbDogIiA8PCBzdGQ6OnRvX3N0cmluZyhzcGVjLnBpeGVsX2J5dGVzKCkpOwoJTExPR19EQkcgPDwgIk9JSU8gbmNoYW5uZWxzOiAiIDw8IHN0ZDo6dG9fc3RyaW5nKHNwZWMubmNoYW5uZWxzKTsKCQoJYXV0byBzcmNGb3JtYXQgPSBnZXRGb3JtYXRPSUlPKHNwZWMuZm9ybWF0LmJhc2V0eXBlLCBzcGVjLm5jaGFubmVscyk7CglMTE9HX0RCRyA8PCAiU291cmNlIFJlc291cmNlRm9ybWF0IGZyb20gT0lJTzogIiA8PCB0b19zdHJpbmcoc3JjRm9ybWF0KTsKCWF1dG8gZHN0Rm9ybWF0ID0gZ2V0RGVzdEZvcm1hdChzcmNGb3JtYXQpOwoKCS8vIG9wZW4gbHR4IHRleHR1cmUgZmlsZQoJRklMRSAqcEZpbGUgPSBmb3Blbihkc3RGaWxlbmFtZS5jX3N0cigpLCAid2IiKTsKCWlmKCFwRmlsZSkgewoJCUxMT0dfRVJSIDw8ICJFcnJvciBvcGVuaW5nIGZpbGUgIiA8PCBkc3RGaWxlbmFtZSA8PCAiIGZvciB3cml0aW5nICEhISI7CgkJcmV0dXJuIGZhbHNlOwoJfQoKCW9paW86OkltYWdlQnVmIHNyY0J1ZmY7CgoJaWYoc3BlYy5uY2hhbm5lbHMgPT0gMyApIHsKCQkvLyBUaGlzIGlzIGFuIFJHQiBpbWFnZS4gQ29udmVydCBpdCB0byBSR0JBIGltYWdlIHdpdGggZnVsbC1vbiBhbHBoYSBjaGFubmVsIAoJCQoJCWludCBjaGFubmVsb3JkZXJbXSA9IHsgMCwgMSwgMiwgLTEgLyp1c2UgYSBmbG9hdCB2YWx1ZSovIH07CgkJZmxvYXQgY2hhbm5lbHZhbHVlc1tdID0geyAwIC8qaWdub3JlKi8sIDAgLyppZ25vcmUqLywgMCAvKmlnbm9yZSovLCAxLjAgfTsKCQlzdGQ6OnN0cmluZyBjaGFubmVsbmFtZXNbXSA9IHsgIiIsICIiLCAiIiwgIkEiIH07CgkJb2lpbzo6SW1hZ2VCdWYgdG1wQnVmZlJHQihzcmNGaWxlbmFtZSk7CgkJc3JjQnVmZiA9IG9paW86OkltYWdlQnVmQWxnbzo6Y2hhbm5lbHModG1wQnVmZlJHQiwgNCwgY2hhbm5lbG9yZGVyLCBjaGFubmVsdmFsdWVzLCBjaGFubmVsbmFtZXMpOwoJfSBlbHNlIHsKCQlzcmNCdWZmID0gb2lpbzo6SW1hZ2VCdWYoc3JjRmlsZW5hbWUpOwoKLyoKCQljb25zdCBpbnQgc3ViaW1hZ2UgPSAwOwoJCWNvbnN0IGludCBtaXBsZXZlbCA9IDA7CgkJb2lpbzo6SW1hZ2VDYWNoZSogaW1hZ2VjYWNoZSA9IG51bGxwdHI7CgkJb2lpbzo6SW1hZ2VTcGVjIGNvbmZpZzsKCQlvaWlvOjpGaWxlc3lzdGVtOjpJT1Byb3h5KiBpb3Byb3h5ID0gbnVsbHB0cjsKCgkJY29uZmlnWyJvaWlvOlVuYXNzb2NpYXRlZEFscGhhIl0gPSAxOwoJCWNvbmZpZy5hdHRyaWJ1dGUoIm9paW86VW5hc3NvY2lhdGVkQWxwaGEiLCAxKTsKCgkJc3JjQnVmZiA9IG9paW86OkltYWdlQnVmKHNyY0ZpbGVuYW1lLCBzdWJpbWFnZSwgbWlwbGV2ZWwsIGltYWdlY2FjaGUsICZjb25maWcsIGlvcHJveHkpOwoKCQlvaWlvOjpST0kgcm9pID0ge307CgkJaW50IG50aHJlYWRzID0gMDsKCQlzcmNCdWZmID0gb2lpbzo6SW1hZ2VCdWZBbGdvOjp1bnByZW11bHQob2lpbzo6SW1hZ2VCdWYoc3JjRmlsZW5hbWUpLCByb2ksIG50aHJlYWRzKTsKCgkJZml4QmxhY2tBbHBoYShzcmNCdWZmKTsKKi8KCX0KCgkvLyBUT0RPOiBtYWtlIGltYWdlIGFuYWx5c2lzIChwcmUgc2NhbGUgZG93biBzb3VyY2Ugd2l0aCBibHVycnkgZGF0YSkgYW5kIHJlZmxlY3QgdGhhdCBpbiBkc3REaW1zCgl1aW50MyBzcmNEaW1zID0ge3NwZWMud2lkdGgsIHNwZWMuaGVpZ2h0LCBzcGVjLmRlcHRofTsKCXVpbnQzIGRzdERpbXMgPSBzcmNEaW1zOwoKCS8vIGNhbGMgbWlwIHJlbGF0ZWQgaW5mbwoJYXV0byBtaXBJbmZvID0gY2FsY01pcEluZm8oZHN0RGltcywgZHN0Rm9ybWF0KTsKCUxMT0dfREJHIDw8ICJUZXh0dXJlICIgPDwgc3JjRmlsZW5hbWUgPDwgIiBtaXAgdGFpbCBzdGFydHMgYXQgbGV2ZWwgIiA8PCBzdGQ6OnRvX3N0cmluZyhtaXBJbmZvLm1pcFRhaWxTdGFydCk7CgoJLy8gbWFrZSBoZWFkZXIKCUxUWF9IZWFkZXIgaGVhZGVyOwoJbWFrZU1hZ2ljKCZoZWFkZXIubWFnaWNbMF0pOwoKCWhlYWRlci5zcmNMYXN0V3JpdGVUaW1lID0gZnM6Omxhc3Rfd3JpdGVfdGltZShzcmNGaWxlbmFtZSk7CgloZWFkZXIud2lkdGggPSBkc3REaW1zLng7CgloZWFkZXIuaGVpZ2h0ID0gZHN0RGltcy55OwoJaGVhZGVyLmRlcHRoID0gZHN0RGltcy56OwoJaGVhZGVyLnBhZ2VEaW1zID0ge21pcEluZm8ucGFnZURpbXMueCwgbWlwSW5mby5wYWdlRGltcy55LCBtaXBJbmZvLnBhZ2VEaW1zLnp9OwoJaGVhZGVyLnBhZ2VEYXRhU2l6ZSA9IGtMdHhQYWdlU2l6ZTsKCWhlYWRlci5wYWdlc0NvdW50ID0gMDsKCWhlYWRlci5hcnJheUxheWVyc0NvdW50ID0gMTsKCWhlYWRlci5taXBMZXZlbHNDb3VudCA9IG1pcEluZm8ubWlwTGV2ZWxzQ291bnQ7CgloZWFkZXIubWlwVGFpbFN0YXJ0ICAgPSBtaXBJbmZvLm1pcFRhaWxTdGFydDsKCWhlYWRlci5mb3JtYXQgPSBkc3RGb3JtYXQ7CgloZWFkZXIuZGF0YU9mZnNldCA9IHNpemVvZihMVFhfSGVhZGVyKTsKCglmb3IoIGF1dG8gY29uc3QmIG1pcFNpemU6IG1pcEluZm8ubWlwTGV2ZWxzRGltcykgewoJCXVpbnQzMl90IHBhZ2VzQ291bnRYID0gc3RkOjptYXgoKHVpbnQzMl90KXN0ZDo6Y2VpbCgoZmxvYXQpbWlwU2l6ZVswXSAvIChmbG9hdCltaXBJbmZvLnBhZ2VEaW1zLngpLCAxdSk7CgkJdWludDMyX3QgcGFnZXNDb3VudFkgPSBzdGQ6Om1heCgodWludDMyX3Qpc3RkOjpjZWlsKChmbG9hdCltaXBTaXplWzFdIC8gKGZsb2F0KW1pcEluZm8ucGFnZURpbXMueSksIDF1KTsKCQl1aW50MzJfdCBwYWdlc0NvdW50WiA9IHN0ZDo6bWF4KCh1aW50MzJfdClzdGQ6OmNlaWwoKGZsb2F0KW1pcFNpemVbMl0gLyAoZmxvYXQpbWlwSW5mby5wYWdlRGltcy56KSwgMXUpOwoKCQloZWFkZXIucGFnZXNDb3VudCArPSBwYWdlc0NvdW50WCAqIHBhZ2VzQ291bnRZICogcGFnZXNDb3VudFo7Cgl9CgoJTExPR19EQkcgPDwgIkxUWCBjYWxjIHBhZ2VzIGNvdW50IGlzOiAiIDw8IHN0ZDo6dG9fc3RyaW5nKGhlYWRlci5wYWdlc0NvdW50KTsKCgkvLyB0ZXN0CgloZWFkZXIudG9wTGV2ZWxDb21wcmVzc2lvbiA9IGdldFRMQ0Zyb21TdHJpbmcoY29tcFBhcm1zLmNvbXByZXNzb3JOYW1lKTsvL0JMT1NDX0xaOwoJaGVhZGVyLnRvcExldmVsQ29tcHJlc3Npb25MZXZlbCA9IGNvbXBQYXJtcy5jb21wcmVzc2lvbkxldmVsOwoKCWlmKCBoZWFkZXIudG9wTGV2ZWxDb21wcmVzc2lvbiAhPSBMVFhfSGVhZGVyOjpUb3BMZXZlbENvbXByZXNzaW9uOjpOT05FKSB7CgkJLy8gaWYgdG9wIGxldmVsIGNvbXByZXNzaW9uIHVzZWQsIGRhdGEgYmVnaW5zIGFmdGVyIHR3byBhZGRpdGlvbmFsIHRhYmxlcyAKCQloZWFkZXIuZGF0YU9mZnNldCArPSAoc2l6ZW9mKHVpbnQzMl90KSArIHNpemVvZih1aW50MTZfdCkpICogaGVhZGVyLnBhZ2VzQ291bnQ7IAoJfQoKCS8vIHdyaXRlIGhlYWRlcgoJaWYoZndyaXRlKCZoZWFkZXIsIHNpemVvZih1bnNpZ25lZCBjaGFyKSwgc2l6ZW9mKExUWF9IZWFkZXIpLCBwRmlsZSkgIT0gc2l6ZW9mKExUWF9IZWFkZXIpKSB7CgkJTExPR19FUlIgPDwgIkVycm9yIHdyaXRpbmcgaGVhZGVyIGZvciB0ZXh0dXJlICIgPDwgZHN0RmlsZW5hbWUgPDwgIiAhIjsKCQlyZXR1cm4gZmFsc2U7Cgl9CgoJLy8gaWYgc29tZSBjb21wcmVzc2lvbiBiZWluZyB1c2VkIHdlIGhhdmUgdG8gd3JpdGUgYWRkaXRpb25hbCB0YWJsZXMgYmVmb3JlIGFjdHVhbCBwYWdlcyBkYXRhIGJlZ2lucy4KCS8vIGZpcnN0IHRhYmxlIGlzIGluZGl2aWR1YWwgcGFnZSBvZmZzZXQgdmFsdWVzCgkvLyBzZWNvbmQgdGFibGUgaXMgaW5kaXZpZHVhbCBjb21wcmVzc2VkIHBhZ2Ugc2l6ZSB2YWx1ZXMKCglUTENJbmZvIGNvbXByZXNzaW9uSW5mbzsKCglzdGQ6OnZlY3Rvcjx1aW50MzJfdD4gcGFnZU9mZnNldHM7CglzdGQ6OnZlY3Rvcjx1aW50MTZfdD4gY29tcHJlc3NlZFBhZ2VTaXplczsKCglpZiggaGVhZGVyLnRvcExldmVsQ29tcHJlc3Npb24gIT0gTFRYX0hlYWRlcjo6VG9wTGV2ZWxDb21wcmVzc2lvbjo6Tk9ORSkgewoJCXBhZ2VPZmZzZXRzLnJlc2l6ZShoZWFkZXIucGFnZXNDb3VudCk7CgkJY29tcHJlc3NlZFBhZ2VTaXplcy5yZXNpemUoaGVhZGVyLnBhZ2VzQ291bnQpOwoKCQljb21wcmVzc2lvbkluZm8udG9wTGV2ZWxDb21wcmVzc2lvbiA9IGhlYWRlci50b3BMZXZlbENvbXByZXNzaW9uOwoJCWNvbXByZXNzaW9uSW5mby5jb21wcmVzc2lvbkxldmVsID0gaGVhZGVyLnRvcExldmVsQ29tcHJlc3Npb25MZXZlbDsKCQljb21wcmVzc2lvbkluZm8ucFBhZ2VPZmZzZXRzID0gcGFnZU9mZnNldHMuZGF0YSgpOwoJCWNvbXByZXNzaW9uSW5mby5wQ29tcHJlc3NlZFBhZ2VTaXplcyA9IGNvbXByZXNzZWRQYWdlU2l6ZXMuZGF0YSgpOwoKCQljb25zdCBjaGFyICpjb21wbmFtZSA9IGdldEJsb3NjQ29tcHJlc3Npb25OYW1lKGhlYWRlci50b3BMZXZlbENvbXByZXNzaW9uKTsKCQlpZihibG9zY19zZXRfY29tcHJlc3Nvcihjb21wbmFtZSkgPT0gLTEpIHsKCQkJTExPR19FUlIgPDwgIkVycm9yIHNldHRpbmcgQmxvc2MgY29tcHJlc3NvciB0eXBlIHRvICIgPDwgdG9fc3RyaW5nKGhlYWRlci50b3BMZXZlbENvbXByZXNzaW9uKTsKCQkJZmNsb3NlKHBGaWxlKTsKCQkJcmV0dXJuIGZhbHNlOwoJCX0KCgkJTExPR19EQkcgPDwgIkxUWCBUbGM6ICIgPDwgY29tcG5hbWUgPDwgIiBjbGV2ZWw6ICIgPDwgc3RkOjp0b19zdHJpbmcoY29tcHJlc3Npb25JbmZvLmNvbXByZXNzaW9uTGV2ZWwpOwoKCQkvLyB3cml0ZSBpbml0aWFsIHZhbHVlcy4gdGhlc2UgdmFsdXNlIGFyZSBnb2luZyB0byByZXdyaXRlbiBhZnRlciBhbGwgcGFnZXMgY29tcHJlc3NlZCBhbmQgd3JpdHRlbiB0byBkaXNrCgkJZndyaXRlKHBhZ2VPZmZzZXRzLmRhdGEoKSwgc2l6ZW9mKHVpbnQzMl90KSwgaGVhZGVyLnBhZ2VzQ291bnQsIHBGaWxlKTsKCQlmd3JpdGUoY29tcHJlc3NlZFBhZ2VTaXplcy5kYXRhKCksIHNpemVvZih1aW50MTZfdCksIGhlYWRlci5wYWdlc0NvdW50LCBwRmlsZSk7Cgl9CgoJTExPR19EQkcgPDwgIkxUWCBNaXAgcGFnZSBkaW1zICIgPDwgbWlwSW5mby5wYWdlRGltcy54IDw8ICIgIiA8PCAgbWlwSW5mby5wYWdlRGltcy55IDw8ICIgIiA8PCBtaXBJbmZvLnBhZ2VEaW1zLno7CgoJYm9vbCByZXN1bHQgPSBmYWxzZTsKCglpZiggMSA9PSAxKSB7CgkJaWYoIGlzUG93ZXJPZlR3byhzcmNEaW1zLngpICYmIGlzUG93ZXJPZlR3byhzcmNEaW1zLnkpICkgewoJCQlpZihsdHhDcHVHZW5lcmF0ZUFuZFdyaXRlTUlQVGlsZXNQT1QoaGVhZGVyLCBtaXBJbmZvLCBzcmNCdWZmLCBwRmlsZSwgY29tcHJlc3Npb25JbmZvKSkgewoJCQkJLy8gcmUtd3JpdGUgaGVhZGVyIGFzIGl0IG1pZ2h0IGdldCBtb2RpZmllZCAuLi4gCgkJCQkvLyBUT0RPOiBpbmNyZW1lbnQgcGFnZXNDb3VudCBPTkxZIHVwb24gc3VjY2Vzc2Z1bGwgZndyaXRlICEKCQkJCWZzZWVrKHBGaWxlLCAwLCBTRUVLX1NFVCk7CgkJCQlmd3JpdGUoJmhlYWRlciwgc2l6ZW9mKHVpbnQ4X3QpLCBzaXplb2YoTFRYX0hlYWRlciksIHBGaWxlKTsKCQkJCXJlc3VsdCA9IHRydWU7CgkJCX0KCQl9IGVsc2UgewoJCQlpZihsdHhDcHVHZW5lcmF0ZUFuZFdyaXRlTUlQVGlsZXNIUVNsb3coaGVhZGVyLCBtaXBJbmZvLCBzcmNCdWZmLCBwRmlsZSwgY29tcHJlc3Npb25JbmZvKSkgewoJCQkJLy8gcmUtd3JpdGUgaGVhZGVyIGFzIGl0IG1pZ2h0IGdldCBtb2RpZmllZCAuLi4gCgkJCQkvLyBUT0RPOiBpbmNyZW1lbnQgcGFnZXNDb3VudCBPTkxZIHVwb24gc3VjY2Vzc2Z1bGwgZndyaXRlICEKCQkJCWZzZWVrKHBGaWxlLCAwLCBTRUVLX1NFVCk7CgkJCQlmd3JpdGUoJmhlYWRlciwgc2l6ZW9mKHVpbnQ4X3QpLCBzaXplb2YoTFRYX0hlYWRlciksIHBGaWxlKTsKCQkJCXJlc3VsdCA9IHRydWU7CgkJCX0KCQl9Cgl9IGVsc2UgewoJCS8vIGRlYnVnIHRpbGVzIHRleHR1cmUKCQlpZihsdHhDcHVHZW5lcmF0ZURlYnVnTUlQVGlsZXMoaGVhZGVyLCBtaXBJbmZvLCBzcmNCdWZmLCBwRmlsZSwgY29tcHJlc3Npb25JbmZvKSkgewoJCQlmc2VlayhwRmlsZSwgMCwgU0VFS19TRVQpOwoJCQlmd3JpdGUoJmhlYWRlciwgc2l6ZW9mKHVpbnQ4X3QpLCBzaXplb2YoTFRYX0hlYWRlciksIHBGaWxlKTsKCQkJcmVzdWx0ID0gdHJ1ZTsKCQl9Cgl9CgoJaWYoIGhlYWRlci50b3BMZXZlbENvbXByZXNzaW9uICE9IExUWF9IZWFkZXI6OlRvcExldmVsQ29tcHJlc3Npb246Ok5PTkUpIHsKCQkvLyB3cml0ZSB1cGRhdGVkIGNvbXByZXNzZWQgYmxvY2tzIHRhYmxlIGJhbGVzdWVzLiB0aGVzZSB2YWx1c2UgYXJlIGdvaW5nIHRvIGJlIHJld3JpdGVuIGFmdGVyIGFsbCBwYWdlcyBjb21wcmVzc2VkIGFuZCB3cml0dGVuIHRvIGRpc2sKCQlmc2VlayhwRmlsZSwga0x0eEhlYWRlck9mZnNldCwgU0VFS19TRVQpOwoJCWZ3cml0ZShwYWdlT2Zmc2V0cy5kYXRhKCksIHNpemVvZih1aW50MzJfdCksIGhlYWRlci5wYWdlc0NvdW50LCBwRmlsZSk7CgkJZndyaXRlKGNvbXByZXNzZWRQYWdlU2l6ZXMuZGF0YSgpLCBzaXplb2YodWludDE2X3QpLCBoZWFkZXIucGFnZXNDb3VudCwgcEZpbGUpOwoJfQoJCglMTE9HX0RCRyA8PCAiTFRYIHBvc3Qgd3JpdGUgcGFnZXMgY291bnQgaXM6ICIgPDwgc3RkOjp0b19zdHJpbmcoaGVhZGVyLnBhZ2VzQ291bnQpOwoKCWZjbG9zZShwRmlsZSk7CglyZXR1cm4gcmVzdWx0Owp9Cgpib29sIExUWF9CaXRtYXA6OnJlYWRQYWdlRGF0YShzaXplX3QgcGFnZU51bSwgdm9pZCAqcERhdGEpIGNvbnN0IHsKCWJvb2wgcmVzdWx0ID0gZmFsc2U7CglhdXRvIHBGaWxlID0gZm9wZW4obUZpbGVQYXRoLnN0cmluZygpLmNfc3RyKCksICJyYiIpOwoJc3RkOjphcnJheTx1aW50OF90LCBrTHR4UGFnZVNpemU+IHNjcmF0Y2hCdWZmZXI7CglyZXN1bHQgPSByZWFkUGFnZURhdGEocGFnZU51bSwgcERhdGEsIHBGaWxlLCBzY3JhdGNoQnVmZmVyLmRhdGEoKSk7CglmY2xvc2UocEZpbGUpOwoJcmV0dXJuIHJlc3VsdDsKfQoKLy8gVGhpcyB2ZXJzaW9uIHVzZXMgcHJldmlvdXNseSBvcGVuZWQgZmlsZS4gT24gbGFyZ2Ugc2NlbmVzIHRoaXMgc2F2ZXMgdXMgYXBwcm94LiA1MCUgb2YgdGV4dHVyZSBwYWdlcyBkYXRhIGxvYWRpbmcgdGltZQpib29sIExUWF9CaXRtYXA6OnJlYWRQYWdlRGF0YShzaXplX3QgcGFnZU51bSwgdm9pZCAqcERhdGEsIEZJTEUgKnBGaWxlLCB1aW50OF90ICpwU2NyYXRjaEJ1ZmZlcikgY29uc3QgewoJYXNzZXJ0KHBGaWxlKTsKCWFzc2VydChwRGF0YSk7CgoJaWYgKHBhZ2VOdW0gPj0gbUhlYWRlci5wYWdlc0NvdW50ICkgewoJCUxMT0dfRVJSIDw8ICJMVFhfQml0bWFwOjpyZWFkUGFnZURhdGEgcGFnZSAiIDw8IHN0ZDo6dG9fc3RyaW5nKHBhZ2VOdW0pIDw8ICIgZXhjZWVkcyBwYWdlcyBjb3VudCAiIDw8IHN0ZDo6dG9fc3RyaW5nKG1IZWFkZXIucGFnZXNDb3VudCkgPDwgIiAhISEiOwoJCXJldHVybiBmYWxzZTsKCX0KCglpZiAobVRvcExldmVsQ29tcHJlc3Npb24gPT0gTFRYX0hlYWRlcjo6VG9wTGV2ZWxDb21wcmVzc2lvbjo6Tk9ORSkgewoJCS8vIHJlYWQgdW5jb21wcmVzc2VkIHBhZ2UgZGF0YQoJCXNpemVfdCBwYWdlX2RhdGFfb2Zmc2V0ID0gbUhlYWRlci5kYXRhT2Zmc2V0ICsgcGFnZU51bSAqIG1IZWFkZXIucGFnZURhdGFTaXplOwoJCWlmKF9yZWFkVW5jb21wcmVzc2VkUGFnZURhdGEocEZpbGUsIHBhZ2VfZGF0YV9vZmZzZXQsIGtMdHhQYWdlU2l6ZSwgcERhdGEpICE9IGtMdHhQYWdlU2l6ZSkgewoJCQlMTE9HX0VSUiA8PCAiRXJyb3IgcmVhZGluZyB0ZXh0dXJlIHBhZ2UgIiA8PCBzdGQ6OnRvX3N0cmluZyhwYWdlTnVtKSA8PCAiIGRhdGEhIjsKCQkJcmV0dXJuIGZhbHNlOwoJCX0KCX0gZWxzZSB7CgkJLy8gcmVhZCBjb21wcmVzc2VkIHBhZ2UgZGF0YQoJCXNpemVfdCBwYWdlX2RhdGFfb2Zmc2V0ID0gbUhlYWRlci5kYXRhT2Zmc2V0ICsgbUNvbXByZXNzZWRQYWdlRGF0YU9mZnNldFtwYWdlTnVtXTsKCQljb25zdCBpbnQgbmJ5dGVzID0gX3JlYWRDb21wcmVzc2VkUGFnZURhdGEocEZpbGUsIHBhZ2VfZGF0YV9vZmZzZXQsIG1Db21wcmVzc2VkUGFnZURhdGFTaXplW3BhZ2VOdW1dLCBwRGF0YSwgcFNjcmF0Y2hCdWZmZXIpOwoJCWlmKG5ieXRlcyA8IDApIHsKCQkJTExPR19FUlIgPDwgIkVycm9yIGRlY29tcHJlc3NpbmcgcGFnZSAiIDw8IHN0ZDo6dG9fc3RyaW5nKHBhZ2VOdW0pIDw8ICIhIjsKCQkJcmV0dXJuIGZhbHNlOwoJCX0gZWxzZSBpZiggbmJ5dGVzID4ga0x0eFBhZ2VTaXplKSB7CgkJCUxMT0dfRVJSIDw8ICJFcnJvciBkZWNvbXByZXNzaW5nIHBhZ2UgIiA8PCBzdGQ6OnRvX3N0cmluZyhwYWdlTnVtKSA8PCAiISAiIDw8IHN0ZDo6dG9fc3RyaW5nKG5ieXRlcykgPDwgIiBieXRlcyBkZWNvbXByZXNzZWQgISEhIjsKCQkJcmV0dXJuIGZhbHNlOwoJCX0gZWxzZSBpZiAobmJ5dGVzID09IDApIHsKCQkJTExPR19FUlIgPDwgIkVycm9yIHJlYWRpbmcgdGV4dHVyZSBwYWdlICIgPDwgc3RkOjp0b19zdHJpbmcocGFnZU51bSkgPDwgIiBkYXRhISBTb3VyY2UgYnVmZmVyIGlzIGVtcHR5ISI7CgkJCXJldHVybiBmYWxzZTsKCQl9CgkJTExPR19UUkMgPDwgIkNvbXByZXNzZWQgcGFnZSAocmVhZCkgIiA8PCBzdGQ6OnRvX3N0cmluZyhwYWdlTnVtKSA8PCAiIHNpemUgaXMgIiA8PCBzdGQ6OnRvX3N0cmluZyhtQ29tcHJlc3NlZFBhZ2VEYXRhU2l6ZVtwYWdlTnVtXSkgCgkJCQkgPDwgIiBvZmZzZXQgIiA8PHN0ZDo6dG9fc3RyaW5nKHBhZ2VfZGF0YV9vZmZzZXQpIDw8ICIgZGVjb21wIHNpemU6ICIgPDwgc3RkOjp0b19zdHJpbmcobmJ5dGVzKTsKCX0KCXJldHVybiB0cnVlOwp9Cgp2b2lkIExUWF9CaXRtYXA6OnJlYWRUYWlsRGF0YShzdGQ6OnZlY3Rvcjx1aW50OF90PiYgZGF0YSkgY29uc3QgewoJYXV0byBwRmlsZSA9IGZvcGVuKG1GaWxlUGF0aC5zdHJpbmcoKS5jX3N0cigpLCAicmIiKTsKCXN0ZDo6YXJyYXk8dWludDhfdCwga0x0eFBhZ2VTaXplPiBzY3JhdGNoQnVmZmVyOwoJcmVhZFRhaWxEYXRhKHBGaWxlLCBkYXRhLCBzY3JhdGNoQnVmZmVyLmRhdGEoKSk7CglmY2xvc2UocEZpbGUpOwp9Cgp2b2lkIExUWF9CaXRtYXA6OnJlYWRUYWlsRGF0YShGSUxFICpwRmlsZSwgc3RkOjp2ZWN0b3I8dWludDhfdD4mIGRhdGEsIHVpbnQ4X3QgKnBTY3JhdGNoQnVmZmVyKSBjb25zdCB7CglpZihtSGVhZGVyLm1pcFRhaWxTdGFydCA+PSAxNikgewoJCUxMT0dfRVJSIDw8ICJNaXAgdGFpbCBzdGFydCBpcyAiIDw8IG1IZWFkZXIubWlwVGFpbFN0YXJ0IDw8ICIgZm9yIExUWCBiaXRtYXAgIiA8PCBtRmlsZVBhdGguc3RyaW5nKCk7IAoJCXJldHVybjsKCX0KCglzdGQ6OmFycmF5PHVpbnQ4X3QsIGtMdHhQYWdlU2l6ZT4gcGFnZURhdGFCdWZmZXI7IAoKCWlmKGlzX3NldChtSGVhZGVyLmZsYWdzLCBMVFhfSGVhZGVyOjpGbGFnczo6T05FX1BBR0VfTUlQX1RBSUwpKSB7CgkJLy8gQWxsIHRhaWwgZGF0YSBzdG9yZWQgaW4gb25lIHBhZ2UKCQlMTE9HX1RSQyA8PCAiUmVhZGluZyB0YWlsIGRhdGEgZm9yIExUWF9CaXRtYXAgIiA8PCBtRmlsZVBhdGguc3RyaW5nKCk7CgkJCgkJaWYoZGF0YS5zaXplKCkgPCBrTHR4UGFnZVNpemUpZGF0YS5yZXNpemUoa0x0eFBhZ2VTaXplKTsKCQlpbnQgbmJ5dGVzID0gMDsKCQlpZihtVG9wTGV2ZWxDb21wcmVzc2lvbiA9PSBMVFhfSGVhZGVyOjpUb3BMZXZlbENvbXByZXNzaW9uOjpOT05FKSB7CgkJCW5ieXRlcyA9IF9yZWFkVW5jb21wcmVzc2VkUGFnZURhdGEocEZpbGUsIG1IZWFkZXIuZGF0YU9mZnNldCArIG1IZWFkZXIudGFpbERhdGFPZmZzZXQsIGtMdHhQYWdlU2l6ZSwgZGF0YS5kYXRhKCkpOwoJCX0gZWxzZSB7CgkJCW5ieXRlcyA9IF9yZWFkQ29tcHJlc3NlZFBhZ2VEYXRhKHBGaWxlLCBtSGVhZGVyLmRhdGFPZmZzZXQgKyBtSGVhZGVyLnRhaWxEYXRhT2Zmc2V0LCBtSGVhZGVyLnRhaWxEYXRhU2l6ZSwgZGF0YS5kYXRhKCksIHBTY3JhdGNoQnVmZmVyKTsKCQl9CgoJCWlmKCBuYnl0ZXMgIT0ga0x0eFBhZ2VTaXplKSB7CgkJCUxMT0dfRVJSIDw8ICJFcnJvciBkZWNvbXByZXNzaW5nIHRhaWwgZGF0YSAhIjsKCQkJZGF0YS5jbGVhcigpOwoJCX0KCX0gZWxzZSB7CgkJZGF0YS5jbGVhcigpOwoJCWRhdGEucmVzZXJ2ZShrTHR4UGFnZVNpemUpOwoJCS8vIFRhaWwgZGF0YSBzdG9yZXMgYXMgb25lIG1pcCBsZXZlbCBwZXIgcGFnZQoJCXVpbnQzMl90IHRhaWxTdGFydFBhZ2VOdW0gPSBtSGVhZGVyLm1pcEJhc2VzW21IZWFkZXIubWlwVGFpbFN0YXJ0XTsKCQlMTE9HX1RSQyA8PCAiUmVhZGluZyB0YWlsIGRhdGEgZm9yICIgPDwgbUZpbGVQYXRoLnN0cmluZygpIDw8ICIgc3RhcnRpbmcgZnJvbSBwYWdlICIgPDwgdGFpbFN0YXJ0UGFnZU51bSA8PCAiIHRvdGFsIHBhZ2VzIGNvdW50IGlzICIgPDwgIG1IZWFkZXIucGFnZXNDb3VudDsKCQlmb3IodWludDMyX3QgcGFnZU51bSA9IHRhaWxTdGFydFBhZ2VOdW07IHBhZ2VOdW0gPCBtSGVhZGVyLnBhZ2VzQ291bnQ7ICsrcGFnZU51bSkgewoJCQlpZighcmVhZFBhZ2VEYXRhKHBhZ2VOdW0sIHBhZ2VEYXRhQnVmZmVyLmRhdGEoKSwgcEZpbGUsIHBTY3JhdGNoQnVmZmVyKSkgewoJCQkJTExPR19FUlIgPDwgIkVycm9yIHJlYWRpbmcgdGFpbCBkYXRhIHBhZ2UgIiA8PCBzdGQ6OnRvX3N0cmluZyhwYWdlTnVtKSA8PCAiIGZvciB0ZXh0dXJlICIgPDwgbUZpbGVQYXRoLnN0cmluZygpOwoJCQkJcmV0dXJuOwoJCQl9CgkJfQoJCWRhdGEuaW5zZXJ0KGRhdGEuZW5kKCksIHBhZ2VEYXRhQnVmZmVyLmJlZ2luKCksIHBhZ2VEYXRhQnVmZmVyLmVuZCgpKTsKCX0KfQoKY29uc3Qgc3RkOjpzdHJpbmcgdG9fc3RyaW5nKExUWF9IZWFkZXI6OlRvcExldmVsQ29tcHJlc3Npb24gdHlwZSkgewoJI2RlZmluZSB0eXBlXzJfc3RyaW5nKGEpIGNhc2UgTFRYX0hlYWRlcjo6VG9wTGV2ZWxDb21wcmVzc2lvbjo6YTogcmV0dXJuICNhOwoJc3dpdGNoICh0eXBlKSB7CgkJCXR5cGVfMl9zdHJpbmcoTk9ORSk7CgkJCXR5cGVfMl9zdHJpbmcoQkxPU0NfTFopOwoJCQl0eXBlXzJfc3RyaW5nKExaNCk7CgkJCXR5cGVfMl9zdHJpbmcoTFo0SEMpOwoJCQl0eXBlXzJfc3RyaW5nKFNOQVBQWSk7CgkJCXR5cGVfMl9zdHJpbmcoWkxJQik7CgkJCXR5cGVfMl9zdHJpbmcoWlNURCk7CgkJZGVmYXVsdDoKCQkJc2hvdWxkX25vdF9nZXRfaGVyZSgpOwoJCQlyZXR1cm4gIiI7Cgl9CiN1bmRlZiB0eXBlXzJfc3RyaW5nCn0KCn0gIC8vIG5hbWVzcGFjZSBGYWxjb3IKAAAAAAAAAAB0MgAAAAAAAAAAAAAAAAAAAAAAAHQyAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAC/SQAAAAAAAL9JAAAAAAAAAAAAAAAA8L8"
				]
			]
		},
		{
			"file": "src/gfx_lib/vulkan/vk-device-queue.h",
			"settings":
			{
				"buffer_size": 3098,
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					1,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAAaDAAALy8gdmstZGV2aWNlLXF1ZXVlLmgKI3ByYWdtYSBvbmNlCgojaW5jbHVkZSAidmstYXBpLmgiCiNpbmNsdWRlICJ2ay1kZXNjcmlwdG9yLWFsbG9jYXRvci5oIgoKbmFtZXNwYWNlIGdmeCB7CgpzdHJ1Y3QgVnVsa2FuRGV2aWNlUXVldWUKewogICAgZW51bQogICAgewogICAgICAgIGtNYXhDb21tYW5kQnVmZmVycyA9IDgsCiAgICB9OwoKICAgIGVudW0gY2xhc3MgRXZlbnRUeXBlCiAgICB7CiAgICAgICAgQmVnaW5GcmFtZSwKICAgICAgICBFbmRGcmFtZSwKICAgICAgICBDb3VudE9mLAogICAgfTsKCiAgICAgICAgLy8vIEluaXRpYWxpemUgLSBtdXN0IGJlIGNhbGxlZCBiZWZvcmUgYW55dGhpbmcgZWxzZSBjYW4gYmUgZG9uZQogICAgU2xhbmdSZXN1bHQgaW5pdChjb25zdCBWdWxrYW5BcGkmIGFwaSwgVmtRdWV1ZSBxdWV1ZSwgaW50IHF1ZXVlSW5kZXgpOwoKICAgICAgICAvLy8gRmx1c2hlcyB0aGUgY3VycmVudCBjb21tYW5kIGxpc3QsIGFuZCBzdGVwcyB0byBuZXh0IChpbnRlcm5hbGx5IHRoaXMgaXMgZXF1aXZhbGVudCB0byBhIHN0ZXBBIGZvbGxvd2VkIGJ5IHN0ZXBCKQogICAgdm9pZCBmbHVzaCgpOwogICAgICAgIC8vLyBQZXJmb3JtcyBhIGZ1bGwgZmx1c2gsIGFuZCB0aGVuIHdhaXRzIGZvciBpZGxlLgogICAgdm9pZCBmbHVzaEFuZFdhaXQoKTsKCiAgICAgICAgLy8vIEJsb2NrcyB1bnRpbCBhbGwgd29yayBzdWJtaXR0ZWQgdG8gR1BVIGhhcyBjb21wbGV0ZWQKICAgIHZvaWQgd2FpdEZvcklkbGUoKSB7IG1fYXBpLT52a1F1ZXVlV2FpdElkbGUobV9xdWV1ZSk7IH0KCiAgICAgICAgLy8vIEdldCB0aGUgZ3JhcGhpY3MgcXVldWUgaW5kZXggKGFzIHNldCBvbiBpbml0KQogICAgaW50IGdldFF1ZXVlSW5kZXgoKSBjb25zdCB7IHJldHVybiBtX3F1ZXVlSW5kZXg7IH0KCiAgICAgICAgLy8vIE1ha2UgdGhlIHNwZWNpZmllZCBldmVudCAnY3VycmVudCcgLSBtZWFuaW5nIGl0J3Mgc2VtYXBob3JlIG11c3QgYmUgd2FpdGVkIG9uCiAgICBWa1NlbWFwaG9yZSBtYWtlQ3VycmVudChFdmVudFR5cGUgZXZlbnRUeXBlKTsKICAgIFZrU2VtYXBob3JlIGdldFNlbWFwaG9yZShFdmVudFR5cGUgZXZlbnRUeXBlKTsKICAgICAgICAvLy8gTWFrZXMgdGhlIGV2ZW50IG5vIGxvbmdlciByZXF1aXJlZCB0byBiZSB3YWl0ZWQgb24KICAgIHZvaWQgbWFrZUNvbXBsZXRlZChFdmVudFR5cGUgZXZlbnRUeXBlKTsKICAgICAgICAvLy8gUmV0dXJucyB0cnVlIGlmIHRoZSBldmVudCBpcyBhbHJlYWR5IGN1cnJlbnQKICAgIFNMQU5HX0ZPUkNFX0lOTElORSBib29sIGlzQ3VycmVudChFdmVudFR5cGUgZXZlbnRUeXBlKSBjb25zdCB7IHJldHVybiBtX2N1cnJlbnRTZW1hcGhvcmVzW2ludChldmVudFR5cGUpXSAhPSBWS19OVUxMX0hBTkRMRTsgfQoKICAgICAgICAvLy8gR2V0IHRoZSBjb21tYW5kIGJ1ZmZlcgogICAgVmtDb21tYW5kQnVmZmVyIGdldENvbW1hbmRCdWZmZXIoKSBjb25zdCB7IHJldHVybiBtX2NvbW1hbmRCdWZmZXI7IH0KCiAgICAgICAgLy8vIEdldCB0aGUgcXVldWUKICAgIFZrUXVldWUgZ2V0UXVldWUoKSBjb25zdCB7IHJldHVybiBtX3F1ZXVlOyB9CgogICAgVmtDb21tYW5kUG9vbCBnZXRDb21tbmFkUG9vbCgpIGNvbnN0IHsgcmV0dXJuIG1fY29tbWFuZFBvb2w7IH0KCiAgICAgICAgLy8vIEdldCB0aGUgQVBJCiAgICBjb25zdCBWdWxrYW5BcGkqIGdldEFwaSgpIGNvbnN0IHsgcmV0dXJuIG1fYXBpOyB9CgogICAgICAgIC8vLyBGbHVzaGVzIHRoZSBjdXJyZW50IGNvbW1hbmQgbGlzdAogICAgdm9pZCBmbHVzaFN0ZXBBKCk7CiAgICAgICAgLy8vIFN0ZXBzIHRvIG5leHQgY29tbWFuZCBidWZmZXIgYW5kIG9wZW5zLiBNYXkgYmxvY2sgaWYgY29tbWFuZCBidWZmZXIgaXMgc3RpbGwgaW4gdXNlCiAgICB2b2lkIGZsdXNoU3RlcEIoKTsKCiAgICAgICAgLy8vIERlc3Ryb3kgdGhlIGRldmljZSBxdWV1ZQogICAgdm9pZCBkZXN0cm95KCk7CgogICAgICAgIC8vLyBUcnVlIGlmIHRoZSBxdWV1ZSBhcHBlYXJzIHRvIGJlIHZhbGlkIGFuZCBoYXMgYmVlbiBpbml0aWFsaXplZAogICAgYm9vbCBpc1ZhbGlkKCkgY29uc3QgeyByZXR1cm4gbV9hcGkgIT0gbnVsbHB0cjsgfQoKICAgICAgICAvLy8gRHRvcgogICAgflZ1bGthbkRldmljZVF1ZXVlKCk7CgogICAgcHJvdGVjdGVkOgoKICAgIHN0cnVjdCBGZW5jZQogICAgewogICAgICAgIFZrRmVuY2UgZmVuY2U7CiAgICAgICAgYm9vbCBhY3RpdmU7CiAgICAgICAgdWludDY0X3QgdmFsdWU7CiAgICB9OwoKICAgIHZvaWQgX3VwZGF0ZUZlbmNlQXRJbmRleChpbnQgZmVuY2VJbmRleCwgYm9vbCBibG9ja2luZyk7CgogICAgVmtRdWV1ZSBtX3F1ZXVlID0gVktfTlVMTF9IQU5ETEU7CgogICAgaW50IG1fbnVtQ29tbWFuZEJ1ZmZlcnMgPSAwOwogICAgaW50IG1fY29tbWFuZEJ1ZmZlckluZGV4ID0gMDsKICAgIC8vIFRoZXJlIGFyZSB0aGUgc2FtZSBhbW91bnQgb2YgY29tbWFuZCBidWZmZXJzIGFzIGZlbmNlcwogICAgVmtDb21tYW5kUG9vbCBtX2NvbW1hbmRQb29sc1trTWF4Q29tbWFuZEJ1ZmZlcnNdID0ge1ZLX05VTExfSEFORExFfTsKICAgIFZrQ29tbWFuZEJ1ZmZlciBtX2NvbW1hbmRCdWZmZXJzW2tNYXhDb21tYW5kQnVmZmVyc10gPSB7IFZLX05VTExfSEFORExFIH07CgogICAgRmVuY2UgbV9mZW5jZXNba01heENvbW1hbmRCdWZmZXJzXSA9IHsge1ZLX05VTExfSEFORExFLCAwLCAwdX0gfTsKCiAgICBWa0NvbW1hbmRCdWZmZXIgbV9jb21tYW5kQnVmZmVyID0gVktfTlVMTF9IQU5ETEU7CiAgICBWa0NvbW1hbmRQb29sIG1fY29tbWFuZFBvb2wgPSBWS19OVUxMX0hBTkRMRTsKICAgIFZrU2VtYXBob3JlIG1fc2VtYXBob3Jlc1tpbnQoRXZlbnRUeXBlOjpDb3VudE9mKV07CiAgICBWa1NlbWFwaG9yZSBtX2N1cnJlbnRTZW1hcGhvcmVzW2ludChFdmVudFR5cGU6OkNvdW50T2YpXTsKCiAgICB1aW50NjRfdCBtX2xhc3RGZW5jZUNvbXBsZXRlZCA9IDE7CiAgICB1aW50NjRfdCBtX25leHRGZW5jZVZhbHVlID0gMjsKCiAgICBpbnQgbV9xdWV1ZUluZGV4ID0gMDsKCiAgICBjb25zdCBWdWxrYW5BcGkqIG1fYXBpID0gbnVsbHB0cjsKfTsKCn0gLy8gcmVuZGVyZXJfdGVzdAoAAAAAAAAAABoMAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAAwYAAAAAAAADBgAAAAAAAAAAAAAAAPC/"
				]
			]
		},
		{
			"file": "src/gfx_lib/vulkan/vk-device-queue.cpp",
			"settings":
			{
				"buffer_size": 6019,
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					1,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAACDFwAALy8gdmstZGV2aWNlLXF1ZXVlLmNwcAojaW5jbHVkZSAidmstZGV2aWNlLXF1ZXVlLmgiCgojaW5jbHVkZSA8c3RkbGliLmg+CiNpbmNsdWRlIDxzdGRpby5oPgojaW5jbHVkZSA8YXNzZXJ0Lmg+CgpuYW1lc3BhY2UgZ2Z4IHsKdXNpbmcgbmFtZXNwYWNlIFNsYW5nOwoKVnVsa2FuRGV2aWNlUXVldWU6On5WdWxrYW5EZXZpY2VRdWV1ZSgpCnsKICAgIGRlc3Ryb3koKTsKfQoKdm9pZCBWdWxrYW5EZXZpY2VRdWV1ZTo6ZGVzdHJveSgpCnsKICAgIGlmIChtX2FwaSkKICAgIHsKICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IGludChFdmVudFR5cGU6OkNvdW50T2YpOyArK2kpCiAgICAgICAgewogICAgICAgICAgICBtX2FwaS0+dmtEZXN0cm95U2VtYXBob3JlKG1fYXBpLT5tX2RldmljZSwgbV9zZW1hcGhvcmVzW2ldLCBudWxscHRyKTsKICAgICAgICB9CgogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgbV9udW1Db21tYW5kQnVmZmVyczsgaSsrKQogICAgICAgIHsKICAgICAgICAgICAgbV9hcGktPnZrRnJlZUNvbW1hbmRCdWZmZXJzKG1fYXBpLT5tX2RldmljZSwgbV9jb21tYW5kUG9vbHNbaV0sIDEsICZtX2NvbW1hbmRCdWZmZXJzW2ldKTsKICAgICAgICAgICAgbV9hcGktPnZrRGVzdHJveUZlbmNlKG1fYXBpLT5tX2RldmljZSwgbV9mZW5jZXNbaV0uZmVuY2UsIG51bGxwdHIpOwogICAgICAgICAgICBtX2FwaS0+dmtEZXN0cm95Q29tbWFuZFBvb2wobV9hcGktPm1fZGV2aWNlLCBtX2NvbW1hbmRQb29sc1tpXSwgbnVsbHB0cik7CiAgICAgICAgfQogICAgICAgIG1fYXBpID0gbnVsbHB0cjsKICAgIH0KfQoKU2xhbmdSZXN1bHQgVnVsa2FuRGV2aWNlUXVldWU6OmluaXQoY29uc3QgVnVsa2FuQXBpJiBhcGksIFZrUXVldWUgcXVldWUsIGludCBxdWV1ZUluZGV4KQp7CiAgICBhc3NlcnQobV9hcGkgPT0gbnVsbHB0cik7CiAgICAKICAgIGZvciAoaW50IGkgPSAwOyBpIDwgaW50KEV2ZW50VHlwZTo6Q291bnRPZik7ICsraSkKICAgIHsKICAgICAgICBtX3NlbWFwaG9yZXNbaV0gPSBWS19OVUxMX0hBTkRMRTsKICAgICAgICBtX2N1cnJlbnRTZW1hcGhvcmVzW2ldID0gVktfTlVMTF9IQU5ETEU7CiAgICB9CgogICAgbV9udW1Db21tYW5kQnVmZmVycyA9IGtNYXhDb21tYW5kQnVmZmVyczsKICAgIG1fcXVldWVJbmRleCA9IHF1ZXVlSW5kZXg7CgogICAgbV9xdWV1ZSA9IHF1ZXVlOwoKICAgIGZvciAoaW50IGkgPSAwOyBpIDwgbV9udW1Db21tYW5kQnVmZmVyczsgaSsrKQogICAgewogICAgICAgIFZrQ29tbWFuZFBvb2xDcmVhdGVJbmZvIHBvb2xDcmVhdGVJbmZvID0ge307CiAgICAgICAgcG9vbENyZWF0ZUluZm8uc1R5cGUgPSBWS19TVFJVQ1RVUkVfVFlQRV9DT01NQU5EX1BPT0xfQ1JFQVRFX0lORk87CiAgICAgICAgcG9vbENyZWF0ZUluZm8uZmxhZ3MgPSBWS19DT01NQU5EX1BPT0xfQ1JFQVRFX1JFU0VUX0NPTU1BTkRfQlVGRkVSX0JJVDsKCiAgICAgICAgcG9vbENyZWF0ZUluZm8ucXVldWVGYW1pbHlJbmRleCA9IHF1ZXVlSW5kZXg7CgogICAgICAgIGFwaS52a0NyZWF0ZUNvbW1hbmRQb29sKGFwaS5tX2RldmljZSwgJnBvb2xDcmVhdGVJbmZvLCBudWxscHRyLCAmbV9jb21tYW5kUG9vbHNbaV0pOwoKICAgICAgICBWa0NvbW1hbmRCdWZmZXJBbGxvY2F0ZUluZm8gY29tbWFuZEluZm8gPSB7fTsKICAgICAgICBjb21tYW5kSW5mby5zVHlwZSA9IFZLX1NUUlVDVFVSRV9UWVBFX0NPTU1BTkRfQlVGRkVSX0FMTE9DQVRFX0lORk87CiAgICAgICAgY29tbWFuZEluZm8uY29tbWFuZFBvb2wgPSBtX2NvbW1hbmRQb29sc1tpXTsKICAgICAgICBjb21tYW5kSW5mby5sZXZlbCA9IFZLX0NPTU1BTkRfQlVGRkVSX0xFVkVMX1BSSU1BUlk7CiAgICAgICAgY29tbWFuZEluZm8uY29tbWFuZEJ1ZmZlckNvdW50ID0gMTsKCiAgICAgICAgVmtGZW5jZUNyZWF0ZUluZm8gZmVuY2VDcmVhdGVJbmZvID0ge307CiAgICAgICAgZmVuY2VDcmVhdGVJbmZvLnNUeXBlID0gVktfU1RSVUNUVVJFX1RZUEVfRkVOQ0VfQ1JFQVRFX0lORk87CiAgICAgICAgZmVuY2VDcmVhdGVJbmZvLmZsYWdzID0gMDsgLy8gVktfRkVOQ0VfQ1JFQVRFX1NJR05BTEVEX0JJVDsKICAgICAgICBGZW5jZSYgZmVuY2UgPSBtX2ZlbmNlc1tpXTsKCiAgICAgICAgYXBpLnZrQWxsb2NhdGVDb21tYW5kQnVmZmVycyhhcGkubV9kZXZpY2UsICZjb21tYW5kSW5mbywgJm1fY29tbWFuZEJ1ZmZlcnNbaV0pOwoKICAgICAgICBhcGkudmtDcmVhdGVGZW5jZShhcGkubV9kZXZpY2UsICZmZW5jZUNyZWF0ZUluZm8sIG51bGxwdHIsICZmZW5jZS5mZW5jZSk7CiAgICAgICAgZmVuY2UuYWN0aXZlID0gZmFsc2U7CiAgICAgICAgZmVuY2UudmFsdWUgPSAwOwogICAgfQoKICAgIFZrU2VtYXBob3JlQ3JlYXRlSW5mbyBzZW1hcGhvcmVDcmVhdGVJbmZvID0ge307CiAgICBzZW1hcGhvcmVDcmVhdGVJbmZvLnNUeXBlID0gVktfU1RSVUNUVVJFX1RZUEVfU0VNQVBIT1JFX0NSRUFURV9JTkZPOwoKICAgIGZvciAoaW50IGkgPSAwOyBpIDwgaW50KEV2ZW50VHlwZTo6Q291bnRPZik7ICsraSkKICAgIHsKICAgICAgICBhcGkudmtDcmVhdGVTZW1hcGhvcmUoYXBpLm1fZGV2aWNlLCAmc2VtYXBob3JlQ3JlYXRlSW5mbywgbnVsbHB0ciwgJm1fc2VtYXBob3Jlc1tpXSk7CiAgICB9CgogICAgLy8gU2V0IHRoZSBhcGkgLSBhbHNvIG1hcmtzIHRoYXQgdGhlIHF1ZXVlIGFwcGVhcnMgdG8gYmUgdmFsaWQKICAgIG1fYXBpID0gJmFwaTsKCiAgICAvLyBTZWNvbmQgc3RlcCBvZiBmbHVzaCB0byBwcmltZSBjb21tYW5kIGJ1ZmZlcgogICAgZmx1c2hTdGVwQigpOwoKICAgIHJldHVybiBTTEFOR19PSzsKfQoKdm9pZCBWdWxrYW5EZXZpY2VRdWV1ZTo6Zmx1c2hTdGVwQSgpCnsKICAgIG1fYXBpLT52a0VuZENvbW1hbmRCdWZmZXIobV9jb21tYW5kQnVmZmVyKTsKCiAgICBWa1BpcGVsaW5lU3RhZ2VGbGFncyBzdGFnZUZsYWdzID0gVktfUElQRUxJTkVfU1RBR0VfQk9UVE9NX09GX1BJUEVfQklUOwoKICAgIFZrU3VibWl0SW5mbyBzdWJtaXRJbmZvID0ge307CiAgICBzdWJtaXRJbmZvLnNUeXBlID0gVktfU1RSVUNUVVJFX1RZUEVfU1VCTUlUX0lORk87CgogICAgLy8gV2FpdCBzZW1hcGhvcmVzCiAgICBpZiAoaXNDdXJyZW50KEV2ZW50VHlwZTo6QmVnaW5GcmFtZSkpCiAgICB7CiAgICAgICAgc3VibWl0SW5mby53YWl0U2VtYXBob3JlQ291bnQgPSAxOwogICAgICAgIHN1Ym1pdEluZm8ucFdhaXRTZW1hcGhvcmVzID0gJm1fY3VycmVudFNlbWFwaG9yZXNbaW50KEV2ZW50VHlwZTo6QmVnaW5GcmFtZSldOwogICAgfQoKICAgIHN1Ym1pdEluZm8ucFdhaXREc3RTdGFnZU1hc2sgPSAmc3RhZ2VGbGFnczsKICAgIHN1Ym1pdEluZm8uY29tbWFuZEJ1ZmZlckNvdW50ID0gMTsKICAgIHN1Ym1pdEluZm8ucENvbW1hbmRCdWZmZXJzID0gJm1fY29tbWFuZEJ1ZmZlcjsKCiAgICAvLyBTaWduYWwgc2VtYXBob3JlcwogICAgaWYgKGlzQ3VycmVudChFdmVudFR5cGU6OkVuZEZyYW1lKSkKICAgIHsKICAgICAgICBzdWJtaXRJbmZvLnNpZ25hbFNlbWFwaG9yZUNvdW50ID0gMTsKICAgICAgICBzdWJtaXRJbmZvLnBTaWduYWxTZW1hcGhvcmVzID0gJm1fY3VycmVudFNlbWFwaG9yZXNbaW50KEV2ZW50VHlwZTo6RW5kRnJhbWUpXTsKICAgIH0KCiAgICBGZW5jZSYgZmVuY2UgPSBtX2ZlbmNlc1ttX2NvbW1hbmRCdWZmZXJJbmRleF07CgogICAgbV9hcGktPnZrUXVldWVTdWJtaXQobV9xdWV1ZSwgMSwgJnN1Ym1pdEluZm8sIGZlbmNlLmZlbmNlKTsKCiAgICAvLyBtYXJrIHNpZ25hbGVkIGZlbmNlIHZhbHVlCiAgICBmZW5jZS52YWx1ZSA9IG1fbmV4dEZlbmNlVmFsdWU7CiAgICBmZW5jZS5hY3RpdmUgPSB0cnVlOwoKICAgIC8vIGluY3JlbWVudCBmZW5jZSB2YWx1ZQogICAgbV9uZXh0RmVuY2VWYWx1ZSsrOwoKICAgIC8vIE5vIGxvbmdlciB3YWl0aW5nIG9uIHRoaXMgc2VtYXBob3JlCiAgICBtYWtlQ29tcGxldGVkKEV2ZW50VHlwZTo6QmVnaW5GcmFtZSk7CiAgICBtYWtlQ29tcGxldGVkKEV2ZW50VHlwZTo6RW5kRnJhbWUpOwp9Cgp2b2lkIFZ1bGthbkRldmljZVF1ZXVlOjpfdXBkYXRlRmVuY2VBdEluZGV4KCBpbnQgZmVuY2VJbmRleCwgYm9vbCBibG9ja2luZykKewogICAgRmVuY2UmIGZlbmNlID0gbV9mZW5jZXNbZmVuY2VJbmRleF07CgogICAgaWYgKGZlbmNlLmFjdGl2ZSkKICAgIHsKICAgICAgICB1aW50NjRfdCB0aW1lb3V0ID0gYmxvY2tpbmcgPyB+dWludDY0X3QoMCkgOiAwOwoKICAgICAgICBpZiAoVktfU1VDQ0VTUyA9PSBtX2FwaS0+dmtXYWl0Rm9yRmVuY2VzKG1fYXBpLT5tX2RldmljZSwgMSwgJmZlbmNlLmZlbmNlLCBWS19UUlVFLCB0aW1lb3V0KSkKICAgICAgICB7CiAgICAgICAgICAgIG1fYXBpLT52a1Jlc2V0RmVuY2VzKG1fYXBpLT5tX2RldmljZSwgMSwgJmZlbmNlLmZlbmNlKTsKCiAgICAgICAgICAgIGZlbmNlLmFjdGl2ZSA9IGZhbHNlOwoKICAgICAgICAgICAgaWYgKGZlbmNlLnZhbHVlID4gbV9sYXN0RmVuY2VDb21wbGV0ZWQpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIG1fbGFzdEZlbmNlQ29tcGxldGVkID0gZmVuY2UudmFsdWU7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9Cn0KCnZvaWQgVnVsa2FuRGV2aWNlUXVldWU6OmZsdXNoU3RlcEIoKQp7CiAgICBtX2NvbW1hbmRCdWZmZXJJbmRleCA9IChtX2NvbW1hbmRCdWZmZXJJbmRleCArIDEpICUgbV9udW1Db21tYW5kQnVmZmVyczsKICAgIG1fY29tbWFuZEJ1ZmZlciA9IG1fY29tbWFuZEJ1ZmZlcnNbbV9jb21tYW5kQnVmZmVySW5kZXhdOwogICAgbV9jb21tYW5kUG9vbCA9IG1fY29tbWFuZFBvb2xzW21fY29tbWFuZEJ1ZmZlckluZGV4XTsKCiAgICAvLyBub24tYmxvY2tpbmcgdXBkYXRlIG9mIGZlbmNlIHZhbHVlcwogICAgZm9yIChpbnQgaSA9IDA7IGkgPCBtX251bUNvbW1hbmRCdWZmZXJzOyArK2kpCiAgICB7CiAgICAgICAgX3VwZGF0ZUZlbmNlQXRJbmRleChpLCBmYWxzZSk7CiAgICB9CgogICAgLy8gYmxvY2tpbmcgdXBkYXRlIG9mIGZlbmNlIHZhbHVlcwogICAgX3VwZGF0ZUZlbmNlQXRJbmRleChtX2NvbW1hbmRCdWZmZXJJbmRleCwgdHJ1ZSk7CgogICAgbV9hcGktPnZrUmVzZXRDb21tYW5kUG9vbChtX2FwaS0+bV9kZXZpY2UsIG1fY29tbWFuZFBvb2wsIDApOwoKICAgIFZrQ29tbWFuZEJ1ZmZlckJlZ2luSW5mbyBiZWdpbkluZm8gPSB7fTsKICAgIGJlZ2luSW5mby5zVHlwZSA9IFZLX1NUUlVDVFVSRV9UWVBFX0NPTU1BTkRfQlVGRkVSX0JFR0lOX0lORk87CiAgICBiZWdpbkluZm8uZmxhZ3MgPSBWS19DT01NQU5EX0JVRkZFUl9VU0FHRV9PTkVfVElNRV9TVUJNSVRfQklUOwoKICAgIG1fYXBpLT52a0JlZ2luQ29tbWFuZEJ1ZmZlcihtX2NvbW1hbmRCdWZmZXIsICZiZWdpbkluZm8pOwp9Cgp2b2lkIFZ1bGthbkRldmljZVF1ZXVlOjpmbHVzaCgpCnsKICAgIGZsdXNoU3RlcEEoKTsKICAgIGZsdXNoU3RlcEIoKTsKfQoKdm9pZCBWdWxrYW5EZXZpY2VRdWV1ZTo6Zmx1c2hBbmRXYWl0KCkKewogICAgZmx1c2goKTsKICAgIHdhaXRGb3JJZGxlKCk7Cn0KClZrU2VtYXBob3JlIFZ1bGthbkRldmljZVF1ZXVlOjpnZXRTZW1hcGhvcmUoRXZlbnRUeXBlIGV2ZW50VHlwZSkKewogICAgcmV0dXJuIG1fc2VtYXBob3Jlc1tpbnQoZXZlbnRUeXBlKV07Cn0KClZrU2VtYXBob3JlIFZ1bGthbkRldmljZVF1ZXVlOjptYWtlQ3VycmVudChFdmVudFR5cGUgZXZlbnRUeXBlKQp7CiAgICBhc3NlcnQoIWlzQ3VycmVudChldmVudFR5cGUpKTsKICAgIFZrU2VtYXBob3JlIHNlbWFwaG9yZSA9IG1fc2VtYXBob3Jlc1tpbnQoZXZlbnRUeXBlKV07CiAgICBtX2N1cnJlbnRTZW1hcGhvcmVzW2ludChldmVudFR5cGUpXSA9IHNlbWFwaG9yZTsKICAgIHJldHVybiBzZW1hcGhvcmU7Cn0KCnZvaWQgVnVsa2FuRGV2aWNlUXVldWU6Om1ha2VDb21wbGV0ZWQoRXZlbnRUeXBlIGV2ZW50VHlwZSkKewogICAgbV9jdXJyZW50U2VtYXBob3Jlc1tpbnQoZXZlbnRUeXBlKV0gPSBWS19OVUxMX0hBTkRMRTsKfQoKfSAvLyByZW5kZXJlcl90ZXN0CgAAAAAAAAAAgxcAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAZhUAAAAAAABmFQAAAAAAAAAAAAAAAPC/"
				]
			]
		}
	],
	"build_system": "",
	"build_system_choices":
	[
	],
	"build_varint": "",
	"command_palette":
	{
		"height": 0.0,
		"last_filter": "",
		"selected_items":
		[
			[
				"Package Control: ",
				"Package Control: List Packages"
			]
		],
		"width": 0.0
	},
	"console":
	{
		"height": 320.0,
		"history":
		[
			"cd /home/max/dev"
		]
	},
	"distraction_free":
	{
		"menu_visible": true,
		"show_minimap": false,
		"show_open_files": false,
		"show_tabs": false,
		"side_bar_visible": false,
		"status_bar_visible": false
	},
	"expanded_folders":
	[
		"/mnt/misc_hdd/dev/Lava"
	],
	"file_history":
	[
		"/mnt/misc_hdd/dev/Lava/src/gfx_lib/vulkan/vk-device.cpp",
		"/mnt/misc_hdd/dev/Lava/src/Falcor/Experimental/Scene/Materials/TexLODTypes.cpp",
		"/mnt/misc_hdd/dev/Lava/src/Falcor/Scene/Material/ShadingUtils.slang",
		"/mnt/misc_hdd/dev/Lava/src/Falcor/Experimental/Scene/Materials/StandardMaterialInstance.slang",
		"/mnt/misc_hdd/dev/Lava/src/Falcor/Experimental/Scene/Materials/StandardMaterial.slang",
		"/mnt/misc_hdd/dev/Lava/src/Falcor/Experimental/Scene/Materials/BxDF.slang",
		"/mnt/misc_hdd/dev/Lava/src/Falcor/Experimental/Scene/Materials/IBSDF.slang",
		"/mnt/misc_hdd/dev/Lava/src/Falcor/Rendering/RTXDI/RTXDIApplicationBridge.slangh",
		"/mnt/misc_hdd/dev/Lava/src/RenderPasses/AmbientOcclusionPass/AmbientOcclusionPass.raytrace.cs.slang",
		"/mnt/misc_hdd/dev/Lava/src/RenderPasses/DeferredLightingCachedPass/DeferredLightingCachedPass.direct.cs.slang",
		"/mnt/misc_hdd/dev/Lava/src/RenderPasses/DeferredLightingCachedPass/DeferredLightingCachedPass.indirect.cs.slang",
		"/mnt/misc_hdd/dev/Lava/src/RenderPasses/DeferredLightingPass/DeferredLightingPass.cached.cs.slang",
		"/mnt/misc_hdd/dev/Lava/src/Falcor/Scene/Material/StandardMaterial.cpp",
		"/mnt/misc_hdd/dev/Lava/src/houdini/otls/lava/Driver_1lava/DialogScript",
		"/mnt/misc_hdd/dev/Lava/src/RenderPasses/GBuffer/VBuffer/VBufferRT.slang",
		"/mnt/misc_hdd/dev/Lava/slang.sublime-syntax",
		"/mnt/misc_hdd/dev/Lava/src/RenderPasses/GBuffer/VBuffer/VBufferSW.builder.cs.slang",
		"/mnt/misc_hdd/dev/Lava/src/RenderPasses/GBuffer/VBuffer/VBufferSW.rasterizer.cs.slang",
		"/mnt/misc_hdd/dev/Lava/src/RenderPasses/GBuffer/VBuffer/VBufferSW.rasterizer.cs.slang.old2",
		"/mnt/misc_hdd/dev/Lava/src/RenderPasses/GBuffer/VBuffer/VBufferSW.rasterizer.cs.slang.old",
		"/mnt/misc_hdd/dev/Lava/src/RenderPasses/GBuffer/VBuffer/VBufferSW.Meshlet.slangh",
		"/mnt/misc_hdd/dev/Lava/src/RenderPasses/GBuffer/VBuffer/VBufferSW.slang",
		"/mnt/misc_hdd/dev/Lava/src/RenderPasses/DebugShadingPass/DebugShadingPass.cpp",
		"/mnt/misc_hdd/dev/Lava/src/RenderPasses/DebugShadingPass/DebugShadingPass.h",
		"/mnt/misc_hdd/dev/Lava/src/gfx_lib/slang-gfx.h",
		"/mnt/misc_hdd/dev/Lava/src/Falcor/Core/API/GFX/GFXComputeContext.cpp",
		"/mnt/misc_hdd/dev/Lava/src/RenderPasses/GBuffer/VBuffer/VBufferSW.cpp",
		"/mnt/misc_hdd/dev/Lava/src/Falcor/Scene/SceneDefines.slangh",
		"/mnt/misc_hdd/dev/Lava/src/RenderPasses/GBuffer/VBuffer/VBufferSW.h",
		"/mnt/misc_hdd/dev/Lava/src/Falcor/Scene/Material/MaterialSystem.slang",
		"/mnt/misc_hdd/dev/Lava/src/gfx_lib/vulkan/vk-command-encoder.cpp",
		"/mnt/misc_hdd/dev/Lava/src/Falcor/Core/API/GFX/GFXCopyContext.cpp",
		"/mnt/misc_hdd/dev/Lava/src/Falcor/Utils/Image/TextureManager.cpp",
		"/mnt/misc_hdd/dev/Lava/src/Falcor/Scene/Material/TextureHandle.slang",
		"/mnt/misc_hdd/dev/Lava/src/Falcor/Utils/Image/TextureManager.h",
		"/mnt/misc_hdd/dev/Lava/src/RenderPasses/DebugShadingPass/DebugShadingPass.cs.slang",
		"/mnt/misc_hdd/dev/Lava/src/RenderPasses/DeferredLightingPass/DeferredLightingPass.cs.slang.old",
		"/mnt/misc_hdd/dev/Lava/src/RenderPasses/DeferredLightingPass/DeferredLightingPass.nocache.cs.slang",
		"/mnt/misc_hdd/dev/Lava/src/RenderPasses/EdgeDetectPass/EdgeDetect.cs.slang",
		"/mnt/misc_hdd/dev/Lava/src/RenderPasses/EdgeDetectPass/EdgeDetect.lowpass.cs.slang",
		"/mnt/misc_hdd/dev/Lava/src/RenderPasses/ForwardLightingPass/ForwardLightingPass.3d.slang",
		"/mnt/misc_hdd/dev/Lava/src/RenderPasses/GBuffer/GBuffer/GBufferRT.slang",
		"/mnt/misc_hdd/dev/Lava/src/Falcor/Experimental/Scene/Materials/BSDFIntegrator.cpp",
		"/mnt/misc_hdd/dev/Lava/src/Falcor/Experimental/Scene/Materials/LayeredBSDF.slang",
		"/mnt/misc_hdd/dev/Lava/src/Falcor/Scene/Material/BasicMaterial.h",
		"/mnt/misc_hdd/dev/Lava/src/Falcor/Scene/Material/MaterialTypeRegistry.cpp",
		"/mnt/misc_hdd/dev/Lava/src/Falcor/Scene/Material/MaterialTypes.slang",
		"/mnt/misc_hdd/dev/Lava/src/Falcor/Scene/Material/MaterialTypeRegistry.h",
		"/mnt/misc_hdd/dev/Lava/src/Falcor/Experimental/Scene/Materials/NDF.slang",
		"/mnt/misc_hdd/dev/Lava/src/Falcor/Experimental/Scene/Materials/BSDFs/BeerBTDF.slang",
		"/mnt/misc_hdd/dev/Lava/src/Falcor/Experimental/Scene/Materials/BSDFs/DielectricPlateBSDF.slang",
		"/mnt/misc_hdd/dev/Lava/src/Falcor/Experimental/Scene/Materials/BSDFs/DiffuseSpecularBRDF.slang",
		"/mnt/misc_hdd/dev/Lava/src/Falcor/Experimental/Scene/Materials/BSDFs/DisneyDiffuseBRDF.slang",
		"/mnt/misc_hdd/dev/Lava/src/Falcor/Experimental/Scene/Materials/BSDFs/FrostbiteDiffuseBRDF.slang",
		"/mnt/misc_hdd/dev/Lava/src/Falcor/Experimental/Scene/Materials/ClothBRDF.slang",
		"/mnt/misc_hdd/dev/Lava/src/Falcor/Experimental/Scene/Materials/HairMaterial.slang",
		"/mnt/misc_hdd/dev/Lava/src/Falcor/Experimental/Scene/Materials/BSDFs/StandardBSDF.slang",
		"/mnt/misc_hdd/dev/Lava/src/Falcor/Experimental/Scene/Materials/BSDFs/SpecularMicrofacet.slang",
		"/mnt/misc_hdd/dev/Lava/src/Falcor/Experimental/Scene/Materials/BSDFs/SimpleBTDF.slang",
		"/mnt/misc_hdd/dev/Lava/src/Falcor/Scene/Material/BasicMaterial.cpp",
		"/mnt/misc_hdd/dev/Lava/src/Falcor/Scene/RaytracingInline.slang",
		"/mnt/misc_hdd/dev/Lava/src/houdini/soho/python/LSDlava.py",
		"/mnt/misc_hdd/dev/Lava/third_party/external/slang/src/Slang/tests/slang-extension/atomic-min-max-u64-byte-address-buffer.slang",
		"/mnt/misc_hdd/dev/Lava/third_party/external/slang/src/Slang/source/slang/hlsl.meta.slang",
		"/mnt/misc_hdd/dev/Lava/third_party/external/slang/src/Slang/tests/bugs/vk-image-atomics.slang",
		"/mnt/misc_hdd/dev/Lava/src/Falcor/Scene/HitInfo.cpp",
		"/mnt/misc_hdd/dev/Lava/src/RenderPasses/AccumulatePass/Accumulate.SeparableFilter.cs.slang",
		"/mnt/misc_hdd/dev/Lava/third_party/mikktspace/mikktspace.h",
		"/mnt/misc_hdd/dev/Lava/third_party/mikktspace/mikktspace.c",
		"/mnt/misc_hdd/dev/Lava/src/Falcor/Scene/Material/TextureSampler.slang",
		"/mnt/misc_hdd/dev/Lava/third_party/external/slang/src/Slang/tests/compute/byte-address-buffer.slang",
		"/mnt/misc_hdd/dev/Lava/third_party/external/slang/src/Slang/tests/pipeline/ray-tracing/ray-query-subroutine.slang",
		"/mnt/misc_hdd/dev/Lava/src/RenderPasses/RTXDIPass/FinalShading.cs.slang",
		"/mnt/misc_hdd/dev/Lava/src/Falcor/Scene/Material/TextureUtils.slang",
		"/mnt/misc_hdd/dev/Lava/third_party/external/slang/src/Slang/docs/stdlib-doc.md",
		"/mnt/misc_hdd/dev/Lava/src/Falcor/Experimental/Scene/Materials/LobeType.slang",
		"/mnt/misc_hdd/dev/Lava/src/Falcor/Experimental/Scene/Materials/TexLODTypes.slang",
		"/mnt/misc_hdd/dev/Lava/third_party/external/slang/src/Slang/external/glslang/SPIRV/SpvBuilder.cpp",
		"/mnt/misc_hdd/dev/Lava/third_party/external/slang/src/Slang/external/glslang/SPIRV/GlslangToSpv.cpp",
		"/mnt/misc_hdd/dev/Lava/third_party/external/slang/src/Slang/external/glext.h",
		"/mnt/misc_hdd/dev/Lava/third_party/external/slang/src/Slang/external/glslang/glslang/MachineIndependent/intermOut.cpp",
		"/mnt/misc_hdd/dev/Lava/third_party/external/slang/src/Slang/external/glslang/Test/spv.1.4.sparseTexture.frag",
		"/mnt/misc_hdd/dev/Lava/third_party/external/slang/src/Slang/tests/compute/dynamic-dispatch-16.slang",
		"/mnt/misc_hdd/dev/Lava/third_party/external/slang/src/Slang/external/glslang/glslang/MachineIndependent/Initialize.cpp",
		"/mnt/misc_hdd/dev/Lava/third_party/external/slang/src/Slang/tests/hlsl-intrinsic/texture/gather-texture2darray.slang",
		"/mnt/misc_hdd/dev/Lava/third_party/external/slang/src/Slang/tests/hlsl-intrinsic/texture/gather-texture2darray.slang.hlsl",
		"/mnt/misc_hdd/dev/Lava/src/Falcor/Scene/SDFs/SparseBrickSet/SDFSBS.slang",
		"/mnt/misc_hdd/dev/Lava/src/Falcor/Experimental/Scene/Materials/IMaterial.slang",
		"/mnt/misc_hdd/dev/Lava/src/RenderPasses/PathTracer/StaticParams.slang",
		"/mnt/misc_hdd/dev/Lava/src/RenderPasses/DeferredLightingPass/DeferredLightingPass.cs.slang",
		"/mnt/misc_hdd/dev/Lava/src/RenderPasses/PathTracer/ResolvePass.cs.slang",
		"/mnt/misc_hdd/dev/Lava/src/RenderPasses/PathTracer/GeneratePaths.cs.slang",
		"/mnt/misc_hdd/dev/Lava/src/RenderPasses/PathTracer/LoadShadingData.slang",
		"/mnt/misc_hdd/dev/Lava/src/RenderPasses/PathTracer/NRDHelpers.slang",
		"/mnt/misc_hdd/dev/Lava/src/RenderPasses/PathTracer/PathState.slang",
		"/mnt/misc_hdd/dev/Lava/src/RenderPasses/PathTracer/GuideData.slang",
		"/mnt/misc_hdd/dev/Lava/src/Falcor/Scene/Material/MaterialSystem.cpp",
		"/mnt/misc_hdd/dev/Lava/src/Falcor/Scene/Material/MaterialSystem.h",
		"/mnt/misc_hdd/dev/Lava/src/RenderPasses/PathTracer/PathTracer.cpp",
		"/mnt/misc_hdd/dev/Lava/src/RenderPasses/PathTracer/PathTracerNRD.slang",
		"/mnt/misc_hdd/dev/Lava/src/RenderPasses/PathTracer/PathTracer.slang",
		"/mnt/misc_hdd/dev/Lava/src/Falcor/RenderPasses/Shared/Denoising/NRDHelpers.slang",
		"/mnt/misc_hdd/dev/Lava/src/Falcor/Experimental/Scene/Materials/Microfacet.slang",
		"/mnt/misc_hdd/dev/Lava/src/Falcor/Scene/Material/MaterialFactory.slang",
		"/mnt/misc_hdd/dev/Lava/src/Falcor/Experimental/Scene/Materials/TexLODHelpers.slang",
		"/mnt/misc_hdd/dev/Lava/src/Falcor/Experimental/Scene/Materials/ClothMaterial.slang",
		"/mnt/misc_hdd/dev/Lava/src/Falcor/Experimental/Scene/Materials/ClothMaterialInstance.slang",
		"/mnt/misc_hdd/dev/Lava/src/Falcor/Experimental/Scene/Materials/HairChiang16.slang",
		"/mnt/misc_hdd/dev/Lava/src/Falcor/Experimental/Scene/Materials/HairMaterialInstance.slang",
		"/mnt/misc_hdd/dev/Lava/src/Falcor/Experimental/Scene/Materials/IMaterialInstance.slang",
		"/mnt/misc_hdd/dev/Lava/third_party/mikktspace/README.md",
		"/mnt/misc_hdd/dev/Lava/src/RenderPasses/DeferredLightingPass/DeferredLightingPass.cs.slang.old3",
		"/mnt/misc_hdd/dev/Lava/src/RenderPasses/DeferredLightingPass/DeferredLightingPass.cs.slang.old2",
		"/mnt/misc_hdd/dev/Lava/src/Falcor/Experimental/Scene/Materials/BSDFs/SheenBSDF.slang",
		"/mnt/misc_hdd/dev/Lava/src/Falcor/Experimental/Scene/Materials/BSDFs/OrenNayarBRDF.slang",
		"/mnt/misc_hdd/dev/Lava/src/Falcor/Experimental/Scene/Materials/BSDFs/LambertDiffuseBTDF.slang",
		"/mnt/misc_hdd/dev/Lava/src/Falcor/Experimental/Scene/Materials/BSDFs/LambertDiffuseBRDF.slang",
		"/mnt/misc_hdd/dev/Lava/third_party/CMakeLists.txt",
		"/mnt/misc_hdd/dev/Lava/src/Falcor/Utils/Image/LTX_Bitmap.cpp",
		"/mnt/misc_hdd/dev/Lava/third_party/external/openimageio/src/OpenImageIO/src/cmake/compiler.cmake",
		"/mnt/misc_hdd/dev/Lava/src/Falcor/Scene/MaterialX/MxSocket.cpp",
		"/mnt/misc_hdd/dev/Lava/src/Falcor/Core/Framework.h",
		"/mnt/misc_hdd/dev/Lava/src/Falcor/Utils/Algorithm/BitonicSort.cs.slang",
		"/mnt/misc_hdd/dev/Lava/src/Falcor/Utils/Algorithm/BitonicSort.cpp",
		"/mnt/misc_hdd/dev/Lava/src/Falcor/Core/API/GFX/GFXDevice.cpp",
		"/mnt/misc_hdd/dev/Lava/src/Falcor/Core/API/Buffer.h",
		"/mnt/misc_hdd/dev/Lava/src/lava_lib/scene_builder.cpp",
		"/mnt/misc_hdd/dev/Lava/src/lava_lib/reader_bgeo/bgeo/Primitive.h"
	],
	"find":
	{
		"height": 27.0
	},
	"find_in_files":
	{
		"height": 125.0,
		"where_history":
		[
			"/mnt/misc_hdd/dev/Lava/third_party/external/openimageio/src/OpenImageIO,<project filters>",
			"/mnt/misc_hdd/dev/Lava/third_party/external/openimageio,<project filters>",
			"/mnt/misc_hdd/dev/Lava/third_party/external/openimageio/src,<project filters>",
			"/mnt/misc_hdd/dev/Lava/third_party/external/openimageio,<project filters>",
			"/mnt/misc_hdd/dev/Lava/third_party/external/openimageio/src/OpenImageIO,<project filters>",
			"/mnt/misc_hdd/dev/Lava/cmake,<project filters>"
		]
	},
	"find_state":
	{
		"case_sensitive": true,
		"find_history":
		[
			"dds.imageio",
			"USE_DDS",
			"squish",
			"OpenCV",
			"OpenCV_LIBS",
			"OpenCV_INCLUDE_DIR",
			"USE_OPENCV"
		],
		"highlight": true,
		"in_selection": false,
		"preserve_case": false,
		"regex": false,
		"replace_history":
		[
		],
		"reverse": false,
		"scrollbar_highlights": true,
		"show_context": true,
		"use_buffer2": true,
		"use_gitignore": true,
		"whole_word": false,
		"wrap": true
	},
	"groups":
	[
		{
			"sheets":
			[
				{
					"buffer": 0,
					"file": "src/Falcor/Utils/Image/TextureManager.cpp",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 34240,
						"regions":
						{
						},
						"selection":
						[
							[
								23346,
								23346
							]
						],
						"settings":
						{
							"syntax": "Packages/C++/C++.sublime-syntax",
							"tab_size": 2,
							"translate_tabs_to_spaces": false
						},
						"translation.x": 0.0,
						"translation.y": 10237.0,
						"zoom_level": 1.0
					},
					"stack_index": 18,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 1,
					"file": "src/Falcor/Utils/Image/TextureManager.h",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 12764,
						"regions":
						{
						},
						"selection":
						[
							[
								5442,
								5442
							]
						],
						"settings":
						{
							"syntax": "Packages/C++/C++.sublime-syntax",
							"tab_size": 2,
							"translate_tabs_to_spaces": false
						},
						"translation.x": 0.0,
						"translation.y": 2039.0,
						"zoom_level": 1.0
					},
					"stack_index": 19,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 2,
					"file": "src/Falcor/Scene/Material/MaterialTextureLoader.cpp",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 3574,
						"regions":
						{
						},
						"selection":
						[
							[
								2442,
								2442
							]
						],
						"settings":
						{
							"syntax": "Packages/C++/C++.sublime-syntax",
							"tab_size": 4,
							"translate_tabs_to_spaces": false
						},
						"translation.x": 0.0,
						"translation.y": 643.0,
						"zoom_level": 1.0
					},
					"stack_index": 13,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 3,
					"file": "src/Falcor/Scene/Material/Material.cpp",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 21711,
						"regions":
						{
						},
						"selection":
						[
							[
								7326,
								7326
							]
						],
						"settings":
						{
							"syntax": "Packages/C++/C++.sublime-syntax",
							"tab_size": 4,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 2677.0,
						"zoom_level": 1.0
					},
					"stack_index": 17,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 4,
					"file": "src/Falcor/Scene/Material/MaterialTextureLoader.h",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 3259,
						"regions":
						{
						},
						"selection":
						[
							[
								2696,
								2696
							]
						],
						"settings":
						{
							"syntax": "Packages/C++/C++.sublime-syntax",
							"tab_size": 4,
							"translate_tabs_to_spaces": false
						},
						"translation.x": 0.0,
						"translation.y": 540.0,
						"zoom_level": 1.0
					},
					"stack_index": 14,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 5,
					"file": "src/Falcor/Scene/SceneBuilder.cpp",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 31975,
						"regions":
						{
						},
						"selection":
						[
							[
								31975,
								31975
							]
						],
						"settings":
						{
							"syntax": "Packages/C++/C++.sublime-syntax",
							"tab_size": 4,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 13447.0,
						"zoom_level": 1.0
					},
					"stack_index": 16,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 6,
					"file": "src/Falcor/Scene/SceneBuilder.h",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 14672,
						"regions":
						{
						},
						"selection":
						[
							[
								14672,
								14672
							]
						],
						"settings":
						{
							"syntax": "Packages/C++/C++.sublime-syntax",
							"tab_size": 4,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 6103.0,
						"zoom_level": 1.0
					},
					"stack_index": 15,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 7,
					"file": "src/lava_lib/reader_lsd/session.cpp",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 19743,
						"regions":
						{
						},
						"selection":
						[
							[
								19743,
								19743
							]
						],
						"settings":
						{
							"syntax": "Packages/C++/C++.sublime-syntax",
							"tab_size": 4,
							"translate_tabs_to_spaces": false
						},
						"translation.x": 0.0,
						"translation.y": 10585.0,
						"zoom_level": 1.0
					},
					"stack_index": 10,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 8,
					"file": "src/lava_lib/reader_lsd/visitor.cpp",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 7415,
						"regions":
						{
						},
						"selection":
						[
							[
								3178,
								3178
							]
						],
						"settings":
						{
							"syntax": "Packages/C++/C++.sublime-syntax",
							"tab_size": 4,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 1620.0,
						"zoom_level": 1.0
					},
					"stack_index": 8,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 9,
					"file": "third_party/freeimage_install_files.cmake",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 606,
						"regions":
						{
						},
						"selection":
						[
							[
								370,
								370
							]
						],
						"settings":
						{
							"syntax": "Packages/Text/Plain text.tmLanguage",
							"tab_size": 4,
							"translate_tabs_to_spaces": false
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 7,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 10,
					"file": "src/Falcor/Core/Platform/OS.cpp",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 10466,
						"regions":
						{
						},
						"selection":
						[
							[
								2385,
								2385
							]
						],
						"settings":
						{
							"syntax": "Packages/C++/C++.sublime-syntax",
							"tab_size": 4,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 955.0,
						"zoom_level": 1.0
					},
					"stack_index": 6,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 11,
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 42080,
						"regions":
						{
							"match":
							{
								"flags": 112,
								"regions": "CgEAADYBAAAAAAAASAEAAAAAAAAAAAAAAADwv+oBAAAAAAAA/AEAAAAAAAAAAAAAAADwvwsCAAAAAAAAHQIAAAAAAAAAAAAAAADwvywCAAAAAAAAPgIAAAAAAAAAAAAAAADwv3MCAAAAAAAAhQIAAAAAAAAAAAAAAADwv4kCAAAAAAAAmwIAAAAAAAAAAAAAAADwv9gCAAAAAAAA6gIAAAAAAAAAAAAAAADwvyMEAAAAAAAANQQAAAAAAAAAAAAAAADwv74EAAAAAAAA0AQAAAAAAAAAAAAAAADwvzUFAAAAAAAARwUAAAAAAAAAAAAAAADwv7QGAAAAAAAAvwYAAAAAAAAAAAAAAADwv8IGAAAAAAAAzQYAAAAAAAAAAAAAAADwv5gHAAAAAAAAowcAAAAAAAAAAAAAAADwv3cIAAAAAAAAgggAAAAAAAAAAAAAAADwv8kIAAAAAAAA1AgAAAAAAAAAAAAAAADwvzcKAAAAAAAAPQoAAAAAAAAAAAAAAADwv70LAAAAAAAAwwsAAAAAAAAAAAAAAADwv+sLAAAAAAAA8QsAAAAAAAAAAAAAAADwvywMAAAAAAAAMgwAAAAAAAAAAAAAAADwv8QMAAAAAAAAygwAAAAAAAAAAAAAAADwvwYOAAAAAAAADA4AAAAAAAAAAAAAAADwvzEPAAAAAAAANw8AAAAAAAAAAAAAAADwv4gPAAAAAAAAjg8AAAAAAAAAAAAAAADwv1URAAAAAAAAWxEAAAAAAAAAAAAAAADwv9wSAAAAAAAA4hIAAAAAAAAAAAAAAADwv3QUAAAAAAAAehQAAAAAAAAAAAAAAADwvzcVAAAAAAAAPRUAAAAAAAAAAAAAAADwv1AVAAAAAAAAVhUAAAAAAAAAAAAAAADwv4YVAAAAAAAAjBUAAAAAAAAAAAAAAADwv6wVAAAAAAAAshUAAAAAAAAAAAAAAADwv70VAAAAAAAAwxUAAAAAAAAAAAAAAADwv/MVAAAAAAAA+RUAAAAAAAAAAAAAAADwvyEWAAAAAAAAJxYAAAAAAAAAAAAAAADwvzIWAAAAAAAAOBYAAAAAAAAAAAAAAADwv2QWAAAAAAAAahYAAAAAAAAAAAAAAADwv6IWAAAAAAAAqBYAAAAAAAAAAAAAAADwvw8XAAAAAAAAFRcAAAAAAAAAAAAAAADwv8MXAAAAAAAAyRcAAAAAAAAAAAAAAADwv+QXAAAAAAAA6hcAAAAAAAAAAAAAAADwvwUYAAAAAAAACxgAAAAAAAAAAAAAAADwv0wYAAAAAAAAUhgAAAAAAAAAAAAAAADwv2IYAAAAAAAAaBgAAAAAAAAAAAAAAADwv7EYAAAAAAAAtxgAAAAAAAAAAAAAAADwv+cZAAAAAAAA7RkAAAAAAAAAAAAAAADwv1waAAAAAAAAYhoAAAAAAAAAAAAAAADwvwYbAAAAAAAADBsAAAAAAAAAAAAAAADwv4wbAAAAAAAAkhsAAAAAAAAAAAAAAADwvxAcAAAAAAAAFhwAAAAAAAAAAAAAAADwv/ccAAAAAAAA/RwAAAAAAAAAAAAAAADwvwUdAAAAAAAACx0AAAAAAAAAAAAAAADwv7EdAAAAAAAAtx0AAAAAAAAAAAAAAADwv90dAAAAAAAA4x0AAAAAAAAAAAAAAADwv+kdAAAAAAAA7x0AAAAAAAAAAAAAAADwv/wdAAAAAAAAAh4AAAAAAAAAAAAAAADwvzAeAAAAAAAANh4AAAAAAAAAAAAAAADwv3IeAAAAAAAAeB4AAAAAAAAAAAAAAADwv4QeAAAAAAAAih4AAAAAAAAAAAAAAADwv6keAAAAAAAArx4AAAAAAAAAAAAAAADwv7weAAAAAAAAwh4AAAAAAAAAAAAAAADwv/seAAAAAAAAAR8AAAAAAAAAAAAAAADwvw4fAAAAAAAAFB8AAAAAAAAAAAAAAADwv2EgAAAAAAAAZyAAAAAAAAAAAAAAAADwv5EgAAAAAAAAlyAAAAAAAAAAAAAAAADwv7ohAAAAAAAAwCEAAAAAAAAAAAAAAADwv+ohAAAAAAAA8CEAAAAAAAAAAAAAAADwv+oiAAAAAAAA8CIAAAAAAAAAAAAAAADwv0MkAAAAAAAASSQAAAAAAAAAAAAAAADwvy4lAAAAAAAANCUAAAAAAAAAAAAAAADwv5MlAAAAAAAAmSUAAAAAAAAAAAAAAADwv90mAAAAAAAA4yYAAAAAAAAAAAAAAADwv+0nAAAAAAAA8ycAAAAAAAAAAAAAAADwvx8oAAAAAAAAJSgAAAAAAAAAAAAAAADwvzgoAAAAAAAAPigAAAAAAAAAAAAAAADwv3YoAAAAAAAAfCgAAAAAAAAAAAAAAADwv5woAAAAAAAAoigAAAAAAAAAAAAAAADwv3opAAAAAAAAgCkAAAAAAAAAAAAAAADwvxAqAAAAAAAAFioAAAAAAAAAAAAAAADwvycqAAAAAAAALSoAAAAAAAAAAAAAAADwvz0qAAAAAAAAQyoAAAAAAAAAAAAAAADwv1cqAAAAAAAAXSoAAAAAAAAAAAAAAADwv9srAAAAAAAA4SsAAAAAAAAAAAAAAADwv24sAAAAAAAAdCwAAAAAAAAAAAAAAADwv/MsAAAAAAAA+SwAAAAAAAAAAAAAAADwvwgtAAAAAAAADi0AAAAAAAAAAAAAAADwvx4tAAAAAAAAJC0AAAAAAAAAAAAAAADwvzotAAAAAAAAQC0AAAAAAAAAAAAAAADwv9YtAAAAAAAA3C0AAAAAAAAAAAAAAADwvwMuAAAAAAAACS4AAAAAAAAAAAAAAADwv2svAAAAAAAAcS8AAAAAAAAAAAAAAADwv+swAAAAAAAA8TAAAAAAAAAAAAAAAADwv0oxAAAAAAAAUDEAAAAAAAAAAAAAAADwv9EyAAAAAAAA1zIAAAAAAAAAAAAAAADwv1IzAAAAAAAAWDMAAAAAAAAAAAAAAADwv98zAAAAAAAA5TMAAAAAAAAAAAAAAADwv3w0AAAAAAAAgjQAAAAAAAAAAAAAAADwv6k0AAAAAAAArzQAAAAAAAAAAAAAAADwvzg1AAAAAAAAPjUAAAAAAAAAAAAAAADwv5I2AAAAAAAAmDYAAAAAAAAAAAAAAADwv4s3AAAAAAAAkTcAAAAAAAAAAAAAAADwvxI4AAAAAAAAGDgAAAAAAAAAAAAAAADwv3E4AAAAAAAAdzgAAAAAAAAAAAAAAADwvzM5AAAAAAAAOTkAAAAAAAAAAAAAAADwv5I5AAAAAAAAmDkAAAAAAAAAAAAAAADwvyw7AAAAAAAAMjsAAAAAAAAAAAAAAADwvxA8AAAAAAAAFjwAAAAAAAAAAAAAAADwv0U9AAAAAAAASz0AAAAAAAAAAAAAAADwv9Y+AAAAAAAA3D4AAAAAAAAAAAAAAADwvwQ/AAAAAAAACj8AAAAAAAAAAAAAAADwvxpAAAAAAAAAIEAAAAAAAAAAAAAAAADwv4dAAAAAAAAAjUAAAAAAAAAAAAAAAADwvw9BAAAAAAAAFUEAAAAAAAAAAAAAAADwv0hCAAAAAAAATkIAAAAAAAAAAAAAAADwv4ZCAAAAAAAAjEIAAAAAAAAAAAAAAADwv1FDAAAAAAAAV0MAAAAAAAAAAAAAAADwvwxEAAAAAAAAEkQAAAAAAAAAAAAAAADwv+5EAAAAAAAA9EQAAAAAAAAAAAAAAADwv5ZFAAAAAAAAnEUAAAAAAAAAAAAAAADwvzNGAAAAAAAAOUYAAAAAAAAAAAAAAADwv+1GAAAAAAAA80YAAAAAAAAAAAAAAADwv4lHAAAAAAAAj0cAAAAAAAAAAAAAAADwvyZIAAAAAAAALEgAAAAAAAAAAAAAAADwv89IAAAAAAAA1UgAAAAAAAAAAAAAAADwv+xIAAAAAAAA8kgAAAAAAAAAAAAAAADwv1ZJAAAAAAAAXEkAAAAAAAAAAAAAAADwv+xJAAAAAAAA8kkAAAAAAAAAAAAAAADwv1dKAAAAAAAAXUoAAAAAAAAAAAAAAADwv1xLAAAAAAAAYksAAAAAAAAAAAAAAADwvy1MAAAAAAAAM0wAAAAAAAAAAAAAAADwv8BMAAAAAAAAxkwAAAAAAAAAAAAAAADwv3NNAAAAAAAAeU0AAAAAAAAAAAAAAADwv21OAAAAAAAAc04AAAAAAAAAAAAAAADwv7dOAAAAAAAAvU4AAAAAAAAAAAAAAADwv8lPAAAAAAAAz08AAAAAAAAAAAAAAADwvzRQAAAAAAAAOlAAAAAAAAAAAAAAAADwv+VRAAAAAAAA61EAAAAAAAAAAAAAAADwv0tTAAAAAAAAUVMAAAAAAAAAAAAAAADwv0dUAAAAAAAATVQAAAAAAAAAAAAAAADwv75VAAAAAAAAxFUAAAAAAAAAAAAAAADwv91WAAAAAAAA41YAAAAAAAAAAAAAAADwvxlYAAAAAAAAH1gAAAAAAAAAAAAAAADwv69ZAAAAAAAAtVkAAAAAAAAAAAAAAADwv+9aAAAAAAAA9VoAAAAAAAAAAAAAAADwv9hcAAAAAAAA3lwAAAAAAAAAAAAAAADwv3heAAAAAAAAfl4AAAAAAAAAAAAAAADwv9NfAAAAAAAA2V8AAAAAAAAAAAAAAADwvzFgAAAAAAAAN2AAAAAAAAAAAAAAAADwv6RgAAAAAAAAqmAAAAAAAAAAAAAAAADwv09hAAAAAAAAVWEAAAAAAAAAAAAAAADwv8NhAAAAAAAAyWEAAAAAAAAAAAAAAADwv1NiAAAAAAAAWWIAAAAAAAAAAAAAAADwv3ZiAAAAAAAAfGIAAAAAAAAAAAAAAADwv71iAAAAAAAAw2IAAAAAAAAAAAAAAADwvyBjAAAAAAAAJmMAAAAAAAAAAAAAAADwv1ljAAAAAAAAX2MAAAAAAAAAAAAAAADwv9VjAAAAAAAA22MAAAAAAAAAAAAAAADwv4VkAAAAAAAAi2QAAAAAAAAAAAAAAADwv8xkAAAAAAAA0mQAAAAAAAAAAAAAAADwv3ZlAAAAAAAAfGUAAAAAAAAAAAAAAADwv75lAAAAAAAAxGUAAAAAAAAAAAAAAADwvyxmAAAAAAAAMmYAAAAAAAAAAAAAAADwv9ZmAAAAAAAA3GYAAAAAAAAAAAAAAADwv+FmAAAAAAAA52YAAAAAAAAAAAAAAADwvwdnAAAAAAAADWcAAAAAAAAAAAAAAADwvxJnAAAAAAAAGGcAAAAAAAAAAAAAAADwv1NnAAAAAAAAWWcAAAAAAAAAAAAAAADwv15nAAAAAAAAZGcAAAAAAAAAAAAAAADwv+hnAAAAAAAA7mcAAAAAAAAAAAAAAADwv/NnAAAAAAAA+WcAAAAAAAAAAAAAAADwvyBpAAAAAAAAJmkAAAAAAAAAAAAAAADwv0dpAAAAAAAATWkAAAAAAAAAAAAAAADwv7lpAAAAAAAAv2kAAAAAAAAAAAAAAADwv8RpAAAAAAAAymkAAAAAAAAAAAAAAADwvxRqAAAAAAAAGmoAAAAAAAAAAAAAAADwv2tqAAAAAAAAcWoAAAAAAAAAAAAAAADwv3xqAAAAAAAAgmoAAAAAAAAAAAAAAADwv6pqAAAAAAAAsGoAAAAAAAAAAAAAAADwv8FqAAAAAAAAx2oAAAAAAAAAAAAAAADwv9ZqAAAAAAAA3GoAAAAAAAAAAAAAAADwvwNrAAAAAAAACWsAAAAAAAAAAAAAAADwvxRrAAAAAAAAGmsAAAAAAAAAAAAAAADwvyhrAAAAAAAALmsAAAAAAAAAAAAAAADwv1trAAAAAAAAYWsAAAAAAAAAAAAAAADwv2JrAAAAAAAAaGsAAAAAAAAAAAAAAADwv6ZrAAAAAAAArGsAAAAAAAAAAAAAAADwv2NsAAAAAAAAaWwAAAAAAAAAAAAAAADwvxltAAAAAAAAH20AAAAAAAAAAAAAAADwv1NuAAAAAAAAWW4AAAAAAAAAAAAAAADwv2dvAAAAAAAAbW8AAAAAAAAAAAAAAADwv7tvAAAAAAAAwW8AAAAAAAAAAAAAAADwv81wAAAAAAAA03AAAAAAAAAAAAAAAADwv9VxAAAAAAAA23EAAAAAAAAAAAAAAADwvyVyAAAAAAAAK3IAAAAAAAAAAAAAAADwv/ZyAAAAAAAA/HIAAAAAAAAAAAAAAADwv6NzAAAAAAAAqXMAAAAAAAAAAAAAAADwv1B0AAAAAAAAVnQAAAAAAAAAAAAAAADwv7l0AAAAAAAAv3QAAAAAAAAAAAAAAADwv910AAAAAAAA43QAAAAAAAAAAAAAAADwv7p1AAAAAAAAwHUAAAAAAAAAAAAAAADwv+d2AAAAAAAA7XYAAAAAAAAAAAAAAADwv1h3AAAAAAAAXncAAAAAAAAAAAAAAADwvwd4AAAAAAAADXgAAAAAAAAAAAAAAADwvyp4AAAAAAAAMHgAAAAAAAAAAAAAAADwv+d4AAAAAAAA7XgAAAAAAAAAAAAAAADwvyV6AAAAAAAAK3oAAAAAAAAAAAAAAADwv6F6AAAAAAAAp3oAAAAAAAAAAAAAAADwv1B7AAAAAAAAVnsAAAAAAAAAAAAAAADwv2h7AAAAAAAAbnsAAAAAAAAAAAAAAADwv4t7AAAAAAAAkXsAAAAAAAAAAAAAAADwv098AAAAAAAAVXwAAAAAAAAAAAAAAADwv+J8AAAAAAAA6HwAAAAAAAAAAAAAAADwv5t9AAAAAAAAoX0AAAAAAAAAAAAAAADwvw9+AAAAAAAAFX4AAAAAAAAAAAAAAADwv3l+AAAAAAAAf34AAAAAAAAAAAAAAADwv1x/AAAAAAAAYn8AAAAAAAAAAAAAAADwv81/AAAAAAAA038AAAAAAAAAAAAAAADwv4iAAAAAAAAAjoAAAAAAAAAAAAAAAADwv8WAAAAAAAAAy4AAAAAAAAAAAAAAAADwv6WBAAAAAAAAq4EAAAAAAAAAAAAAAADwv4WCAAAAAAAAi4IAAAAAAAAAAAAAAADwvweDAAAAAAAADYMAAAAAAAAAAAAAAADwv76DAAAAAAAAxIMAAAAAAAAAAAAAAADwvxWEAAAAAAAAG4QAAAAAAAAAAAAAAADwv2yEAAAAAAAAcoQAAAAAAAAAAAAAAADwv0qFAAAAAAAAUIUAAAAAAAAAAAAAAADwv8uFAAAAAAAA0YUAAAAAAAAAAAAAAADwv4KGAAAAAAAAiIYAAAAAAAAAAAAAAADwv7+GAAAAAAAAxYYAAAAAAAAAAAAAAADwvzKHAAAAAAAAOIcAAAAAAAAAAAAAAADwvxyIAAAAAAAAIogAAAAAAAAAAAAAAADwv8KIAAAAAAAAyIgAAAAAAAAAAAAAAADwv8WJAAAAAAAAy4kAAAAAAAAAAAAAAADwv2OKAAAAAAAAaYoAAAAAAAAAAAAAAADwvw+LAAAAAAAAFYsAAAAAAAAAAAAAAADwv5WLAAAAAAAAm4sAAAAAAAAAAAAAAADwv2mMAAAAAAAAb4wAAAAAAAAAAAAAAADwv/iMAAAAAAAA/owAAAAAAAAAAAAAAADwv62NAAAAAAAAs40AAAAAAAAAAAAAAADwvwiOAAAAAAAADo4AAAAAAAAAAAAAAADwv1WOAAAAAAAAW44AAAAAAAAAAAAAAADwvxaPAAAAAAAAHI8AAAAAAAAAAAAAAADwv1uQAAAAAAAAYZAAAAAAAAAAAAAAAADwv5iQAAAAAAAAnpAAAAAAAAAAAAAAAADwv1KRAAAAAAAAWJEAAAAAAAAAAAAAAADwv7qRAAAAAAAAwJEAAAAAAAAAAAAAAADwv72SAAAAAAAAw5IAAAAAAAAAAAAAAADwvyWTAAAAAAAAK5MAAAAAAAAAAAAAAADwv/OTAAAAAAAA+ZMAAAAAAAAAAAAAAADwv2+UAAAAAAAAdZQAAAAAAAAAAAAAAADwv1OVAAAAAAAAWZUAAAAAAAAAAAAAAADwv6uVAAAAAAAAsZUAAAAAAAAAAAAAAADwv26WAAAAAAAAdJYAAAAAAAAAAAAAAADwv6+WAAAAAAAAtZYAAAAAAAAAAAAAAADwvwaXAAAAAAAADJcAAAAAAAAAAAAAAADwvySYAAAAAAAAKpgAAAAAAAAAAAAAAADwv6mYAAAAAAAAr5gAAAAAAAAAAAAAAADwvw+ZAAAAAAAAFZkAAAAAAAAAAAAAAADwv7eZAAAAAAAAvZkAAAAAAAAAAAAAAADwv/WZAAAAAAAA+5kAAAAAAAAAAAAAAADwv/qaAAAAAAAAAJsAAAAAAAAAAAAAAADwv8GbAAAAAAAAx5sAAAAAAAAAAAAAAADwv0ucAAAAAAAAUZwAAAAAAAAAAAAAAADwvxudAAAAAAAAIZ0AAAAAAAAAAAAAAADwvyOeAAAAAAAAKZ4AAAAAAAAAAAAAAADwv2+fAAAAAAAAdZ8AAAAAAAAAAAAAAADwv2ShAAAAAAAAaqEAAAAAAAAAAAAAAADwv7ijAAAAAAAAw6MAAAAAAAAAAAAAAADwvw",
								"scope": ""
							}
						},
						"selection":
						[
							[
								41920,
								41920
							]
						],
						"settings":
						{
							"detect_indentation": false,
							"line_numbers": false,
							"output_tag": 7,
							"result_base_dir": "",
							"result_file_regex": "^([^ \t].*):$",
							"result_line_regex": "^ +([0-9]+):",
							"scroll_past_end": true,
							"syntax": "Packages/Default/Find Results.hidden-tmLanguage"
						},
						"translation.x": 0.0,
						"translation.y": 18954.0,
						"zoom_level": 1.0
					},
					"stack_index": 5,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 12,
					"file": "third_party/external/openimageio/src/OpenImageIO/src/cmake/compiler.cmake",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 25040,
						"regions":
						{
						},
						"selection":
						[
							[
								19134,
								19134
							]
						],
						"settings":
						{
							"reload_file_on_change": false,
							"syntax": "Packages/Text/Plain text.tmLanguage",
							"tab_size": 4,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 4,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 13,
					"file": "third_party/external/openimageio/src/OpenImageIO/src/cmake/modules/FindLibsquish.cmake",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 1635,
						"regions":
						{
						},
						"selection":
						[
							[
								174,
								112
							]
						],
						"settings":
						{
							"syntax": "Packages/Text/Plain text.tmLanguage",
							"tab_size": 4,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 3,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 14,
					"file": "third_party/CMakeLists.txt",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 2513,
						"regions":
						{
						},
						"selection":
						[
							[
								2513,
								2513
							]
						],
						"settings":
						{
							"syntax": "Packages/Text/Plain text.tmLanguage",
							"tab_size": 2,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 1495.0,
						"zoom_level": 1.0
					},
					"stack_index": 2,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 15,
					"file": "src/Falcor/CMakeLists.txt",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 6070,
						"regions":
						{
						},
						"selection":
						[
							[
								1672,
								1678
							]
						],
						"settings":
						{
							"syntax": "Packages/Text/Plain text.tmLanguage",
							"tab_size": 4,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 486.0,
						"zoom_level": 1.0
					},
					"stack_index": 1,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 16,
					"file": "CMakeLists.txt",
					"selected": true,
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 14857,
						"regions":
						{
						},
						"selection":
						[
							[
								578,
								578
							]
						],
						"settings":
						{
							"syntax": "Packages/Text/Plain text.tmLanguage",
							"tab_size": 2,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 0,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 17,
					"file": "src/lava_lib/reader_lsd/reader_lsd.cpp",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 3564,
						"regions":
						{
						},
						"selection":
						[
							[
								2492,
								2492
							]
						],
						"settings":
						{
							"syntax": "Packages/C++/C++.sublime-syntax",
							"tab_size": 4,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 1512.0,
						"zoom_level": 1.0
					},
					"stack_index": 12,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 18,
					"file": "src/lava_lib/reader_lsd/visitor.h",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 4307,
						"regions":
						{
						},
						"selection":
						[
							[
								1997,
								1997
							]
						],
						"settings":
						{
							"syntax": "Packages/C++/C++.sublime-syntax",
							"tab_size": 3,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 457.0,
						"zoom_level": 1.0
					},
					"stack_index": 9,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 19,
					"file": "src/lava_lib/reader_lsd/session.h",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 2657,
						"regions":
						{
						},
						"selection":
						[
							[
								2657,
								2657
							]
						],
						"settings":
						{
							"syntax": "Packages/C++/C++.sublime-syntax",
							"tab_size": 3,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 1264.0,
						"zoom_level": 1.0
					},
					"stack_index": 11,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 20,
					"file": "src/Falcor/Core/API/GFX/GFXTexture.cpp",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 7847,
						"regions":
						{
						},
						"selection":
						[
							[
								7782,
								7793
							]
						],
						"settings":
						{
							"syntax": "Packages/C++/C++.sublime-syntax",
							"tab_size": 4,
							"translate_tabs_to_spaces": false
						},
						"translation.x": 0.0,
						"translation.y": 3252.0,
						"zoom_level": 1.0
					},
					"stack_index": 23,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 21,
					"file": "src/Falcor/Core/API/GFX/GFXDevice.cpp",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 20734,
						"regions":
						{
						},
						"selection":
						[
							[
								8752,
								8752
							]
						],
						"settings":
						{
							"syntax": "Packages/C++/C++.sublime-syntax",
							"tab_size": 2,
							"translate_tabs_to_spaces": false
						},
						"translation.x": 0.0,
						"translation.y": 3198.0,
						"zoom_level": 1.0
					},
					"stack_index": 22,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 22,
					"file": "src/RenderPasses/DeferredLightingPass/DeferredLightingPass.cs.slang",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 25072,
						"regions":
						{
						},
						"selection":
						[
							[
								20418,
								20418
							]
						],
						"settings":
						{
							"syntax": "Packages/Text/Plain text.tmLanguage",
							"tab_size": 4,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 9092.0,
						"zoom_level": 1.0
					},
					"stack_index": 21,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 23,
					"file": "src/Falcor/Utils/Image/LTX_Bitmap.cpp",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 12916,
						"regions":
						{
						},
						"selection":
						[
							[
								12916,
								12916
							]
						],
						"settings":
						{
							"syntax": "Packages/C++/C++.sublime-syntax",
							"tab_size": 4,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 6553.0,
						"zoom_level": 1.0
					},
					"stack_index": 20,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 24,
					"file": "src/gfx_lib/vulkan/vk-device-queue.h",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 3098,
						"regions":
						{
						},
						"selection":
						[
							[
								1539,
								1539
							]
						],
						"settings":
						{
							"syntax": "Packages/C++/C++.sublime-syntax",
							"tab_size": 4,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 238.0,
						"zoom_level": 1.0
					},
					"stack_index": 24,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 25,
					"file": "src/gfx_lib/vulkan/vk-device-queue.cpp",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 6019,
						"regions":
						{
						},
						"selection":
						[
							[
								5478,
								5478
							]
						],
						"settings":
						{
							"syntax": "Packages/C++/C++.sublime-syntax",
							"tab_size": 4,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 2884.0,
						"zoom_level": 1.0
					},
					"stack_index": 25,
					"stack_multiselect": false,
					"type": "text"
				}
			]
		}
	],
	"incremental_find":
	{
		"height": 27.0
	},
	"input":
	{
		"height": 43.0
	},
	"layout":
	{
		"cells":
		[
			[
				0,
				0,
				1,
				1
			]
		],
		"cols":
		[
			0.0,
			1.0
		],
		"rows":
		[
			0.0,
			1.0
		]
	},
	"menu_visible": true,
	"output.SublimeLinter":
	{
		"height": 0.0
	},
	"output.find_results":
	{
		"height": 33.0
	},
	"pinned_build_system": "Packages/Makefile/Make.sublime-build",
	"project": "falcor.sublime-project",
	"replace":
	{
		"height": 50.0
	},
	"save_all_on_build": true,
	"select_file":
	{
		"height": 0.0,
		"last_filter": "",
		"selected_items":
		[
			[
				"",
				"src/lava_lib/reader_lsd/grammar_lsd.h"
			]
		],
		"width": 0.0
	},
	"select_project":
	{
		"height": 0.0,
		"last_filter": "",
		"selected_items":
		[
		],
		"width": 0.0
	},
	"select_symbol":
	{
		"height": 0.0,
		"last_filter": "",
		"selected_items":
		[
		],
		"width": 0.0
	},
	"selected_group": 0,
	"settings":
	{
	},
	"show_minimap": true,
	"show_open_files": false,
	"show_tabs": true,
	"side_bar_visible": true,
	"side_bar_width": 322.0,
	"status_bar_visible": true,
	"template_settings":
	{
	}
}
